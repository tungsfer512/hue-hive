{"version":3,"file":"hue-a2399487-bundle-a2a4f8506cb55bb7.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtJA;AACA;AACA;AACA;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACneA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACjiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC7sBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACrdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC/QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACxkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC3TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AChbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./desktop/core/src/desktop/js/jquery/jquery.common.js","webpack:///./desktop/core/src/desktop/js/jquery/jquery.migration.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.datatables.sorting.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.delayedinput.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.filechooser.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.hdfs.autocomplete.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.hiveautocomplete.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.horizontalscrollbar.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.huedatatable.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.rowselector.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.scrollleft.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.scrollup.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.selectize.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.selector.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.tableextender.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.tableextender2.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.tablescroller.js","webpack:///./desktop/core/src/desktop/js/jquery/plugins/jquery.titleupdater.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ace/aceAnchoredRange.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ace/aceGutterHandler.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ace/aceLocationHandler.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ace/ko.aceEditor.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ace/ko.aceResizer.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/bindingUtils.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/chartUtils.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.barChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.leafletMapChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.lineChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.partitionChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.pieChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.scatterChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/ko.timelineChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/mapchart/datamap.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/charts/mapchart/ko.mapChart.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.appAwareTemplateContextMenu.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.assistFileDraggable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.assistFileDroppable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.assistVerticalResizer.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.attachViewModelToElementData.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.augmentHtml.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.autocomplete.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.autogrowInput.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.blurHide.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.bytesize.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.chosen.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.clearable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.clickForAceFocus.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.clickToCopy.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.clipboard.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.codemirror.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.contextMenu.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.contextSubMenu.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.datalist.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.dateRangePicker.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.datepicker.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.dblClick.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.delayedOverflow.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.dockable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.documentChooser.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.documentContextPopover.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.draggableText.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.dropdown.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.dropzone.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.duration.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.ellipsis.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.fadeVisible.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.fetchMore.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.fileChooser.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.foreachVisible.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.fresherEditor.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hdfsAutocomplete.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hdfsTree.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.highlight.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hiveChooser.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.html.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueCheckAll.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueCheckbox.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueChecked.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueLink.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueSpinner.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.hueach.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.impalaDagre.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.jHueRowSelector.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.logResizer.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.logScroller.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.medium.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.moment.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.momentFromNow.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.multiCheck.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.multiCheckForeachVisible.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.multiClick.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.multiLineEllipsis.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.numberFormat.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.numericTextInput.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.onClickOutside.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.oneClickSelect.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.parseArguments.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.publish.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.reactWrapper.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.readOnlyAce.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.resizable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.select2.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.simplesize.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.slideVisible.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.slider.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.solrChooser.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.spinEdit.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.splitDraggable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.splitFlexDraggable.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.sqlContextPopover.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.stickVertical.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.storageContextPopover.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.stretchDown.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.tagEditor.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.tagsNotAllowed.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.templateContextMenu.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.templatePopover.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.textSqueezer.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.toggle.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.toggleOverflow.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.tooltip.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.truncatedText.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.typeahead.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.verticalSlide.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.visibleOnHover.js","webpack:///./desktop/core/src/desktop/js/ko/bindings/ko.vue.js"],"sourcesContent":["// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport \"./jquery.migration\";\nimport 'jquery-contextmenu'; // TODO: Remove, it's only used for \"old\" query builder\nimport 'jquery.cookie';\nimport 'jquery-form';\nimport \"./plugins/jquery.selectize\";\nimport 'selectize-plugin-clear';\nimport 'jquery-ui/ui/widgets/autocomplete';\nimport 'jquery-ui/ui/widgets/mouse';\nimport 'jquery-ui/ui/widgets/draggable';\nimport 'jquery-ui/ui/widgets/droppable';\nimport 'jquery-ui/ui/widgets/resizable';\nimport 'jquery-ui/ui/widgets/sortable';\nimport \"../ext/jquery.chosen.1.0.0.min\";\nimport \"../ext/jquery.dataTables.1.8.2.min\";\nimport \"../ext/jquery.select2.3.5.1.min\";\nimport \"./plugins/jquery.datatables.sorting\";\nimport \"./plugins/jquery.delayedinput\";\nimport \"./plugins/jquery.filechooser\";\nimport \"./plugins/jquery.hdfs.autocomplete\";\nimport \"./plugins/jquery.hiveautocomplete\";\nimport \"./plugins/jquery.horizontalscrollbar\";\nimport \"./plugins/jquery.huedatatable\";\nimport \"./plugins/jquery.rowselector\";\nimport \"./plugins/jquery.scrollleft\";\nimport \"./plugins/jquery.scrollup\";\nimport \"./plugins/jquery.selector\";\nimport \"./plugins/jquery.tableextender\";\nimport \"./plugins/jquery.tableextender2\";\nimport \"./plugins/jquery.tablescroller\";\nimport \"./plugins/jquery.titleupdater\";\nwindow.$ = $;\nwindow.jQuery = $;\nexport default $;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/*\n * Repo for missing jQuery 2 functions, this ease the transition without updating every other plugin in Hue\n *\n */\n\nimport jQuery from 'jquery';\njQuery.uaMatch = function (ua) {\n  ua = ua.toLowerCase();\n  var match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n  return {\n    browser: match[1] || '',\n    version: match[2] || '0'\n  };\n};\n\n// Don't clobber any existing jQuery.browser in case it's different\nif (!jQuery.browser) {\n  var matched = jQuery.uaMatch(navigator.userAgent);\n  var browser = {};\n  if (matched.browser) {\n    browser[matched.browser] = true;\n    browser.version = matched.version;\n  }\n\n  // Chrome is Webkit, but Webkit is also Safari.\n  if (browser.chrome) {\n    browser.webkit = true;\n  } else if (browser.webkit) {\n    browser.safari = true;\n  }\n  jQuery.browser = browser;\n}\n\n// Since jQuery.clean is used internally on older versions, we only shim if it's missing\nif (!jQuery.clean) {\n  var rscriptType = /\\/(java|ecma)script/i;\n  jQuery.clean = function (elems, context, fragment, scripts) {\n    // Set context per 1.8 logic\n    context = context || document;\n    context = !context.nodeType && context[0] || context;\n    context = context.ownerDocument || context;\n    var i, elem, handleScript, jsTags;\n    var ret = [];\n    jQuery.merge(ret, jQuery.buildFragment(elems, context).childNodes);\n\n    // Complex logic lifted directly from jQuery 1.8\n    if (fragment) {\n      // Special handling of each script element\n      handleScript = function handleScript(elem) {\n        // Check if we consider it executable\n        if (!elem.type || rscriptType.test(elem.type)) {\n          // Detach the script and store it in the scripts array (if provided) or the fragment\n          // Return truthy to indicate that it has been handled\n          return scripts ? scripts.push(elem.parentNode ? elem.parentNode.removeChild(elem) : elem) : fragment.appendChild(elem);\n        }\n      };\n      for (i = 0; (elem = ret[i]) != null; i++) {\n        // Check if we're done after handling an executable script\n        if (!(jQuery.nodeName(elem, 'script') && handleScript(elem))) {\n          // Append to fragment and handle embedded scripts\n          fragment.appendChild(elem);\n          if (typeof elem.getElementsByTagName !== 'undefined') {\n            // handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration\n            jsTags = jQuery.grep(jQuery.merge([], elem.getElementsByTagName('script')), handleScript);\n\n            // Splice the scripts into ret after their former ancestor and advance our index beyond them\n            ret.splice.apply(ret, [i + 1, 0].concat(jsTags));\n            i += jsTags.length;\n          }\n        }\n      }\n    }\n    return ret;\n  };\n}\nvar oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\njQuery.fn.andSelf = function () {\n  return oldSelf.apply(this, arguments);\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n$.fn.dataTableExt.afnSortData['dom-sort-value'] = function (oSettings, iColumn) {\n  var aData = [];\n  oSettings.oApi._fnGetTrNodes(oSettings).forEach(function (nRow) {\n    var oElem = $('td:eq(' + iColumn + ')', nRow);\n    var _val = oElem.text();\n    if (typeof oElem.attr('data-sort-value') == 'undefined') {\n      if (typeof oElem.find('span').attr('data-sort-value') != 'undefined') {\n        _val = parseInt(oElem.find('span').attr('data-sort-value'));\n      }\n    } else {\n      _val = parseInt(oElem.attr('data-sort-value'));\n    }\n    aData.push(_val);\n  });\n  return aData;\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n\n/*\n * jHue Delayed Input plugin\n * use it with\n * $(\"#element\").jHueDelayedInput( __FUNCTION_YOU_WANT_TO_CALL__, __TIMEOUT_IN_MS__ [optional])\n */\n\nvar pluginName = 'jHueDelayedInput',\n  defaults = {\n    fn: null,\n    timeout: 300,\n    skipOnEnterAndKeys: false\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.init = function () {\n  var _this = this;\n  var _timeout = -1;\n  if (_this.options.fn != null) {\n    $(_this.element).on('keyup', function (e) {\n      if (!(_this.options.skipOnEnterAndKeys && [13, 37, 38, 39, 40].indexOf(e.keyCode) > -1)) {\n        window.clearTimeout(_timeout);\n        _timeout = window.setTimeout(_this.options.fn, _this.options.timeout);\n      }\n    });\n  }\n};\n$.fn[pluginName] = function (fn, timeout, skipOnEnterAndKeys) {\n  var _options = {\n    fn: fn,\n    timeout: timeout,\n    skipOnEnterAndKeys: typeof skipOnEnterAndKeys !== 'undefined' && skipOnEnterAndKeys\n  };\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, _options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(_options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport qq from \"../../ext/fileuploader.custom\";\nimport { GLOBAL_ERROR_TOPIC, GLOBAL_INFO_TOPIC } from 'reactComponents/AlertComponent/events';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport { hueLocalStorage } from 'utils/storageUtils';\n\n/*\n * jHue fileChooser plugin\n */\n\nvar pluginName = 'jHueFileChooser';\nvar defaults = {\n  initialPath: '',\n  forceRefresh: false,\n  errorRedirectPath: '',\n  createFolder: true,\n  uploadFile: true,\n  selectFolder: false,\n  suppressErrors: false,\n  displayOnlyFolders: false,\n  showExtraHome: false,\n  extraHomeProperties: {},\n  filterExtensions: '',\n  labels: {\n    BACK: 'Back',\n    SELECT_FOLDER: 'Select this folder',\n    CREATE_FOLDER: 'Create folder',\n    FOLDER_NAME: 'Folder name',\n    CANCEL: 'Cancel',\n    FILE_NOT_FOUND: 'The file has not been found',\n    UPLOAD_FILE: 'Upload a file',\n    FAILED: 'Failed',\n    HOME: 'Home'\n  },\n  filesystems: ['hdfs'],\n  filesysteminfo: {\n    '': {\n      scheme: '',\n      root: '/',\n      home: '/?default_to_home',\n      icon: {\n        brand: 'fa-files-o',\n        home: 'fa-home'\n      },\n      label: {\n        home: 'home',\n        name: 'HDFS'\n      }\n    },\n    hdfs: {\n      scheme: '',\n      root: '/',\n      home: '/?default_to_home',\n      icon: {\n        brand: 'fa-files-o',\n        home: 'fa-home'\n      },\n      label: {\n        home: 'home',\n        name: 'HDFS'\n      }\n    },\n    s3a: {\n      scheme: 's3a',\n      root: 's3a://',\n      home: '/?default_s3_home',\n      icon: {\n        brand: 'fa-cubes',\n        home: 'fa-cubes'\n      },\n      label: {\n        home: '',\n        name: 'S3'\n      }\n    },\n    gs: {\n      scheme: 'gs',\n      root: 'gs://',\n      home: '/?default_gs_home',\n      icon: {\n        svg: {\n          brand: '#hi-gs',\n          home: '#hi-gs'\n        },\n        brand: 'fa-windows',\n        home: 'fa-windows'\n      },\n      label: {\n        home: '',\n        name: 'GS'\n      }\n    },\n    adl: {\n      scheme: 'adl',\n      root: 'adl:/',\n      home: 'adl:/',\n      icon: {\n        svg: {\n          brand: '#hi-adls',\n          home: '#hi-adls'\n        },\n        brand: 'fa-windows',\n        home: 'fa-windows'\n      },\n      label: {\n        home: '',\n        name: 'ADLS'\n      }\n    },\n    abfs: {\n      scheme: 'abfs',\n      root: 'abfs://',\n      home: '/?default_abfs_home',\n      icon: {\n        svg: {\n          brand: '#hi-adls',\n          home: '#hi-adls'\n        },\n        brand: 'fa-windows',\n        home: 'fa-windows'\n      },\n      label: {\n        home: '',\n        name: 'ABFS'\n      }\n    },\n    ofs: {\n      scheme: 'ofs',\n      root: 'ofs://',\n      home: '/?default_ofs_home',\n      icon: {\n        svg: {\n          brand: '#hi-ofs',\n          home: '#hi-ofs'\n        },\n        brand: 'fa-windows',\n        home: 'fa-windows'\n      },\n      label: {\n        home: '',\n        name: 'OFS'\n      }\n    }\n  },\n  fsSelected: 'hdfs',\n  user: '',\n  onNavigate: function onNavigate() {},\n  onFileChoose: function onFileChoose() {},\n  onFolderChoose: function onFolderChoose() {},\n  onFolderChange: function onFolderChange() {},\n  onError: function onError() {}\n};\nvar STORAGE_PREFIX = 'hueFileBrowserLastPathForUser_';\nvar DEFAULT_I18n = {\n  BACK: I18n('Back'),\n  SELECT_FOLDER: I18n('Select this folder'),\n  CREATE_FOLDER: I18n('Create folder'),\n  FOLDER_NAME: I18n('Folder name'),\n  CANCEL: I18n('Cancel'),\n  FILE_NOT_FOUND: I18n('The file has not been found'),\n  UPLOAD_FILE: I18n('Upload a file'),\n  FAILED: I18n('Failed')\n};\nfunction Plugin(element, options) {\n  this.element = element;\n  $(element).data('jHueFileChooser', this);\n  this.options = $.extend({}, defaults, {\n    user: window.LOGGED_USERNAME\n  }, options);\n  this.options.labels = $.extend({}, defaults.labels, DEFAULT_I18n, options ? options.labels : {});\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.previousPath = '';\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  var self = this;\n  self.options = $.extend({}, defaults, {\n    user: window.LOGGED_USERNAME\n  }, options);\n  self.options.labels = $.extend({}, defaults.labels, DEFAULT_I18n, options ? options.labels : {});\n  var targetPath = $.trim(self.previousPath) ? $.trim(self.previousPath) : $.trim(self.options.initialPath);\n  var scheme = targetPath && targetPath.substring(0, targetPath.indexOf(':'));\n  if (scheme && scheme.length) {\n    self.options.fsSelected = scheme;\n  }\n  $(self.element).find('.filechooser-services li').removeClass('active');\n  $(self.element).find('.filechooser-services li[data-fs=\"' + self.options.fsSelected + '\"]').addClass('active');\n  if (self.options.forceRefresh) {\n    if (targetPath != '') {\n      self.navigateTo(targetPath);\n    } else if (hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected) != null) {\n      self.navigateTo(hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected));\n    } else {\n      self.navigateTo('/?default_to_home');\n    }\n  } else if (targetPath != '') {\n    self.navigateTo(targetPath);\n  } else if (hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected) != null) {\n    self.navigateTo(hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected));\n  }\n};\nfunction getScheme(path) {\n  var index = path.indexOf('://');\n  return index >= 0 ? path.substring(0, index) : 'hdfs';\n}\nfunction getFs(scheme) {\n  if (scheme === 'adl') {\n    return 'adls';\n  } else if (scheme === 's3a') {\n    return 's3';\n  } else if (!scheme || scheme === 'hdfs') {\n    return 'hdfs';\n  } else {\n    return scheme;\n  }\n}\nPlugin.prototype.setFileSystems = function (filesystems) {\n  var self = this;\n  var filters, filesystemsFiltered;\n  self.options.filesystems = [];\n  Object.keys(filesystems).forEach(function (k) {\n    if (filesystems[k]) {\n      self.options.filesystems.push(k);\n    }\n  });\n  self.options.filesystems.sort();\n  if (self.options.filesystemsFilter) {\n    filters = self.options.filesystemsFilter.reduce(function (filters, fs) {\n      filters[fs] = true;\n      return filters;\n    }, {});\n    filesystemsFiltered = self.options.filesystems.filter(function (fs) {\n      return filters[fs];\n    });\n  } else {\n    filesystemsFiltered = self.options.filesystems;\n  }\n  $(self.element).data('fs', filesystemsFiltered);\n  if (filesystemsFiltered.length > 1) {\n    var $ul = $('<ul>').addClass('nav nav-list').css('border', 'none');\n    filesystemsFiltered.forEach(function (fs) {\n      var filesysteminfo = self.options.filesysteminfo;\n      var $li = $('<li>').attr('data-fs', fs).addClass(self.options.fsSelected === fs ? 'active' : '').html('<a class=\"pointer\" style=\"padding-left: 6px\">' + (filesysteminfo[fs] ? filesysteminfo[fs].label.name : fs.toUpperCase()) + '</a>');\n      $li.on('click', function () {\n        $(this).siblings().removeClass('active');\n        $(this).addClass('active');\n        self.options.fsSelected = fs;\n        var storedPath = hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected);\n        if (storedPath !== null) {\n          if (filesysteminfo[fs] && storedPath.toLowerCase().indexOf(fs) === -1) {\n            self.navigateTo(filesysteminfo[fs].home);\n          } else {\n            self.navigateTo(storedPath);\n          }\n        } else {\n          self.navigateTo(filesysteminfo[fs] ? filesysteminfo[fs].home : '/?default_to_home');\n        }\n      });\n      $li.appendTo($ul);\n    });\n    $(self.element).find('.filechooser-services').empty().width(80);\n    $(self.element).find('.filechooser-tree').width(480).css('paddingLeft', '6px').css('borderLeft', '1px solid #EEE').css('marginLeft', '80px').css('min-height', '330px');\n    $ul.appendTo($(self.element).find('.filechooser-services'));\n  }\n};\n\n//TODO: refactor this method to template\nPlugin.prototype.navigateTo = function (path) {\n  var _parent = this;\n  $(_parent.element).find('.filechooser-tree').html('<i style=\"font-size: 24px; color: #DDD\" class=\"fa fa-spinner fa-spin\"></i>');\n\n  // The default paths '/?default_to_home', '/?default_s3_home' etc already contains a query string\n  // so we append pageSizeParam as an additional param, not a new query string.\n  var isDefaultRedirectFlag = /^\\/\\?default_.*_(home|trash)$/.test(path);\n  var pageSizeParam = 'pagesize=1000';\n  var encodedPath = encodeURIComponent(path);\n  var pathAndQuery = isDefaultRedirectFlag ? path + '&' + pageSizeParam : encodedPath + '?' + pageSizeParam;\n  $.getJSON('/filebrowser/view=' + pathAndQuery, function (data) {\n    $(_parent.element).find('.filechooser-tree').empty();\n    path = data.current_dir_path || path; // use real path.\n    var _flist = $('<ul>').addClass('unstyled').css({\n      height: '260px',\n      'overflow-y': 'auto'\n    });\n    var $homeBreadcrumb = $('<ul>').addClass('hue-breadcrumbs').css({\n      padding: '0',\n      marginLeft: '0',\n      \"float\": 'left',\n      'white-space': 'nowrap'\n    });\n    var _home = $('<li>').css({\n      'padding-top': '6px'\n    });\n    //var filesysteminfo = self.options.filesysteminfo;\n    var fs = _parent.options.filesysteminfo[_parent.options.fsSelected || 'hdfs'];\n    var el = fs.icon.svg ? '<svg class=\"hi\"><use href=\"' + fs.icon.svg.home + '\"></use></svg>' : '<i class=\"fa ' + fs.icon.home + '\"></i> ' + fs.label.home;\n    var _homelink = $('<a>').addClass('nounderline').html(el).css('cursor', 'pointer').click(function () {\n      _parent.navigateTo(fs.home);\n    });\n    _homelink.appendTo(_home);\n    _home.appendTo($homeBreadcrumb);\n    $('<span>').addClass('divider').css('margin-right', '20px').appendTo(_home);\n    if (data.error || data.title != null && data.title == 'Error') {\n      $homeBreadcrumb.appendTo($(_parent.element).find('.filechooser-tree'));\n      $(\"<div class='clearfix'>\").appendTo($(_parent.element).find('.filechooser-tree'));\n      var _errorMsg = $('<div>').addClass('alert').addClass('alert-error').text(data.message ? data.message : data.error);\n      _errorMsg.appendTo($(_parent.element).find('.filechooser-tree'));\n      //TODO: allow user to user breadcrums when there is an error\n      var _previousLink = $('<a>').addClass('btn').text(_parent.options.labels.BACK).click(function () {\n        function getParentPath(path) {\n          if (!path) {\n            return path;\n          }\n          var indexFirst = path.indexOf('/');\n          var indexLast = path.lastIndexOf('/');\n          if (indexLast - indexFirst > 1 && indexLast == path.length - 1) {\n            indexLast = path.substring(0, path.length - 1).lastIndexOf('/');\n          }\n          return indexLast - indexFirst > 1 && indexLast > 0 ? path.substring(0, indexLast + 1) : path;\n        }\n        var next = path !== _parent.previousPath && getScheme(path) === getScheme(_parent.previousPath) ? _parent.previousPath || '/' : getParentPath(path) || '/';\n        _parent.options.onFolderChange(next);\n        _parent.navigateTo(next);\n      });\n      _previousLink.appendTo($(_parent.element).find('.filechooser-tree'));\n    } else {\n      if (data.type === 'file') {\n        _parent.navigateTo(data.view.dirname);\n        return;\n      }\n      hueLocalStorage(STORAGE_PREFIX + _parent.options.user + _parent.options.fsSelected, path);\n      _parent.previousPath = path;\n      _parent.options.onNavigate(_parent.previousPath);\n      var $search = $('<div>').html('<i class=\"fa fa-refresh inactive-action pointer\" style=\"position: absolute; top: 8px; margin-left: -18px\"></i> <i class=\"fa fa-search inactive-action pointer\" style=\"position: absolute; top: 8px\"></i><input type=\"text\" class=\"small-search\" style=\"display: none; width: 0; padding: 2px; padding-left: 20px\">').css({\n        position: 'absolute',\n        right: '10px',\n        'background-color': '#FFF'\n      });\n      var slideOutInput = function slideOutInput() {\n        $search.find('input').animate({\n          width: '0'\n        }, 100, function () {\n          $search.find('input').hide();\n          $search.find('.fa-refresh').show();\n        });\n      };\n      var $searchInput = $search.find('input');\n      var tog = function tog(v) {\n        return v ? 'addClass' : 'removeClass';\n      };\n      $searchInput.addClass('clearable');\n      $searchInput.on('input', function () {\n        $searchInput[tog(this.value)]('x');\n      }).on('mousemove', function (e) {\n        $searchInput[tog(this.offsetWidth - 18 < e.clientX - this.getBoundingClientRect().left)]('onX');\n      }).on('click', function (e) {\n        if (this.offsetWidth - 18 < e.clientX - this.getBoundingClientRect().left) {\n          $searchInput.removeClass('x onX').val('');\n        }\n      });\n      $searchInput.on('blur', function (e) {\n        if ($searchInput.val() === '') {\n          slideOutInput();\n        }\n      });\n      $search.find('.fa-search').on('click', function () {\n        window.hueAnalytics.log('filechooser', 'show-search-btn-click');\n        if ($searchInput.is(':visible')) {\n          slideOutInput();\n        } else {\n          $search.find('.fa-refresh').hide();\n          $searchInput.show().animate({\n            width: '100px'\n          }, 100, function () {\n            $searchInput.focus();\n          });\n        }\n      });\n      $search.find('.fa-refresh').on('click', function () {\n        _parent.navigateTo(path);\n        window.hueAnalytics.log('filechooser', 'refresh-btn-click');\n      });\n      $search.appendTo($(_parent.element).find('.filechooser-tree'));\n      var $scrollingBreadcrumbs = $('<ul>').addClass('hue-breadcrumbs editable-breadcrumbs').css({\n        padding: '5px 4px',\n        border: '1px solid #CCC',\n        'border-radius': '3px',\n        marginLeft: '10px',\n        marginBottom: '0',\n        \"float\": 'left',\n        width: '300px',\n        'overflow-x': 'scroll',\n        'overflow-y': 'hidden',\n        'white-space': 'nowrap'\n      });\n      if (ko && ko.bindingHandlers.delayedOverflow) {\n        ko.bindingHandlers.delayedOverflow.init($scrollingBreadcrumbs[0]);\n      }\n      if (_parent.options.showExtraHome) {\n        var _extraHome = $('<li>');\n        var _extraHomelink = $('<a>').addClass('nounderline').html('<i class=\"fa ' + _parent.options.extraHomeProperties.icon + '\"></i> ' + _parent.options.extraHomeProperties.label).css('cursor', 'pointer').click(function () {\n          _parent.navigateTo(_parent.options.extraHomeProperties.path);\n        });\n        _extraHomelink.appendTo(_extraHome);\n        $('<span>').addClass('divider').css('margin-right', '20px').appendTo(_extraHome);\n        _extraHome.appendTo($scrollingBreadcrumbs);\n      }\n      var $hdfsAutocomplete = $('<input type=\"text\">').addClass('editable-breadcrumb-input').val(path).hide();\n      $scrollingBreadcrumbs.click(function (e) {\n        if ($(e.target).is('ul') || $(e.target).hasClass('spacer')) {\n          $(this).hide();\n          $hdfsAutocomplete.show().focus();\n          window.hueAnalytics.log('filechooser', 'show-edit-breadcrumbs-path');\n        }\n      });\n      var $editBreadcrumbs = $('<li>').css('marginRight', '2px');\n      var $crumbLink = $('<span>').addClass('spacer');\n      $crumbLink.html('&nbsp;').appendTo($editBreadcrumbs);\n      $editBreadcrumbs.appendTo($scrollingBreadcrumbs);\n      if (typeof data.breadcrumbs != 'undefined' && data.breadcrumbs != null) {\n        var _bLength = data.breadcrumbs.length;\n        $(data.breadcrumbs).each(function (cnt, crumb) {\n          var _crumb = $('<li>');\n          var _crumbLink = $('<a>');\n          var _crumbLabel = crumb.label != null && crumb.label != '' ? crumb.label : '/';\n          _crumbLink.attr('href', 'javascript:void(0)').text(_crumbLabel).appendTo(_crumb);\n          if (cnt < _bLength - 1) {\n            if (cnt > 0) {\n              $('<span>').addClass('divider').text('/').appendTo(_crumb);\n            } else {\n              $('<span>').html('&nbsp;').appendTo(_crumb);\n            }\n          }\n          _crumb.click(function () {\n            var _url = crumb.url != null && crumb.url != '' ? crumb.url : '/';\n            _parent.options.onFolderChange(_url);\n            _parent.navigateTo(_url);\n            window.hueAnalytics.log('filechooser', 'breadcrumb-navigation-click');\n          });\n          _crumb.appendTo($scrollingBreadcrumbs);\n        });\n      }\n      $homeBreadcrumb.appendTo($(_parent.element).find('.filechooser-tree'));\n      $scrollingBreadcrumbs.appendTo($(_parent.element).find('.filechooser-tree'));\n      $hdfsAutocomplete.appendTo($(_parent.element).find('.filechooser-tree'));\n      $hdfsAutocomplete.jHueHdfsAutocomplete({\n        home: '/user/' + _parent.options.user + '/',\n        skipEnter: true,\n        skipKeydownEvents: true,\n        onEnter: function onEnter(el) {\n          var _url = el.val();\n          _parent.options.onFolderChange(_url);\n          _parent.navigateTo(_url);\n          $('#jHueHdfsAutocomplete').hide();\n          window.hueAnalytics.log('filechooser', 'confirm-edit-breadcrumbs-path');\n        },\n        onBlur: function onBlur() {\n          $hdfsAutocomplete.hide();\n          $scrollingBreadcrumbs.show();\n        },\n        smartTooltip: _parent.options.labels.SMART_TOOLTIP\n      });\n      $('<div>').addClass('clearfix').appendTo($(_parent.element).find('.filechooser-tree'));\n      var resizeBreadcrumbs = window.setInterval(function () {\n        if ($homeBreadcrumb.is(':visible') && $homeBreadcrumb.width() > 0) {\n          window.clearInterval(resizeBreadcrumbs);\n          $scrollingBreadcrumbs.width($(_parent.element).find('.filechooser-tree').width() - $homeBreadcrumb.width() - 65);\n        }\n      }, 100);\n      if (data.s3_listing_not_allowed) {\n        $(\"<div class='clearfix'>\").appendTo($(_parent.element).find('.filechooser-tree'));\n        var _errorMsg2 = $('<div>').addClass('alert').addClass('alert-warn').text(data.s3_listing_not_allowed);\n        _errorMsg2.appendTo($(_parent.element).find('.filechooser-tree'));\n        $scrollingBreadcrumbs.hide();\n        $hdfsAutocomplete.show();\n        $hdfsAutocomplete.focus();\n      }\n      $(data.files).each(function (cnt, file) {\n        var _addFile = file.name !== '.';\n        if (_parent.options.filterExtensions != '' && file.type == 'file') {\n          var _allowedExtensions = _parent.options.filterExtensions.split(',');\n          var _fileExtension = file.name.split('.').pop().toLowerCase();\n          _addFile = _allowedExtensions.indexOf(_fileExtension) > -1;\n        }\n        if (_addFile) {\n          var _f = $('<li>');\n          var _flink = $('<a>');\n          if (file.type == 'dir') {\n            _flink.attr('href', 'javascript:void(0)');\n            if (file.path.toLowerCase().indexOf('s3a://') == 0 && (file.path.substr(6).indexOf('/') > -1 || file.path.substr(6) == '')) {\n              _flink.text(' ' + (cnt > 0 ? file.name : '..'));\n            } else {\n              _flink.text(' ' + (file.name != '' ? file.name : '..'));\n            }\n            if (_flink.text() !== ' ..') {\n              _f.addClass('file-list-item');\n            }\n            _flink.appendTo(_f);\n            if (file.path.toLowerCase().indexOf('s3a://') == 0 && file.path.substr(5).indexOf('/') == -1) {\n              $(\"<i class='fa fa-cloud'></i>\").prependTo(_flink);\n            } else {\n              $(\"<i class='fa fa-folder'></i>\").prependTo(_flink);\n            }\n            _flink.click(function () {\n              _parent.options.onFolderChange(file.path);\n              _parent.navigateTo(file.path);\n            });\n          }\n          if (file.type == 'file' && !_parent.options.displayOnlyFolders) {\n            _f.addClass('file-list-item');\n            _flink.attr('href', 'javascript:void(0)').text(' ' + (file.name != '' ? file.name : '..')).appendTo(_f);\n            $(\"<i class='fa fa-file-o'></i>\").prependTo(_flink);\n            _flink.click(function () {\n              _parent.options.onFileChoose(file.path);\n            });\n          }\n          _f.appendTo(_flist);\n        }\n      });\n      _flist.appendTo($(_parent.element).find('.filechooser-tree'));\n      $searchInput.jHueDelayedInput(function () {\n        var filter = $searchInput.val().toLowerCase();\n        var results = 0;\n        $(_parent.element).find('.filechooser-tree .no-results').hide();\n        $(_parent.element).find('.filechooser-tree .file-list-item').each(function () {\n          if ($(this).text().toLowerCase().indexOf(filter) > -1) {\n            $(this).show();\n            results++;\n          } else {\n            $(this).hide();\n          }\n        });\n        if (results == 0) {\n          $(_parent.element).find('.filechooser-tree .no-results').show();\n        }\n      }, 300);\n      var _actions = $('<div>').addClass('jHueFilechooserActions');\n      var _showActions = false;\n      var _uploadFileBtn;\n      var _createFolderBtn;\n      var _selectFolderBtn;\n      if (_parent.options.uploadFile) {\n        _uploadFileBtn = $('<div>').attr('id', 'file-uploader').addClass('fileChooserActionUploader');\n        _uploadFileBtn.appendTo(_actions);\n        _showActions = true;\n        initUploader(path, _parent, _uploadFileBtn, _parent.options.labels);\n      }\n      if (_parent.options.selectFolder) {\n        _selectFolderBtn = $('<a>').addClass('btn').text(_parent.options.labels.SELECT_FOLDER);\n        if (_parent.options.uploadFile) {\n          _selectFolderBtn.css('margin-top', '10px');\n        }\n        _selectFolderBtn.appendTo(_actions);\n        _showActions = true;\n        _selectFolderBtn.click(function () {\n          _parent.options.onFolderChoose(path);\n        });\n      }\n      $('<span> </span>').appendTo(_actions);\n      if (_parent.options.createFolder) {\n        _createFolderBtn = $('<a>').addClass('btn').text(_parent.options.labels.CREATE_FOLDER);\n        if (_parent.options.uploadFile) {\n          _createFolderBtn.css('margin-top', '10px');\n        }\n        _createFolderBtn.appendTo(_actions);\n        _showActions = true;\n        var _createFolderDetails = $('<form>').css({\n          'margin-top': '10px',\n          position: 'fixed'\n        }).addClass('form-inline');\n        _createFolderDetails.hide();\n        var _folderName = $('<input>').attr('type', 'text').attr('placeholder', _parent.options.labels.FOLDER_NAME).appendTo(_createFolderDetails);\n        $('<span> </span>').appendTo(_createFolderDetails);\n        var _folderBtn = $('<input>').attr('type', 'button').attr('value', _parent.options.labels.CREATE_FOLDER).addClass('btn primary').appendTo(_createFolderDetails);\n        $('<span> </span>').appendTo(_createFolderDetails);\n        var _folderCancel = $('<input>').attr('type', 'button').attr('value', _parent.options.labels.CANCEL).addClass('btn').appendTo(_createFolderDetails);\n        _folderCancel.click(function () {\n          if (_uploadFileBtn) {\n            _uploadFileBtn.removeClass('disabled');\n            window.hueAnalytics.log('filechooser', 'create-folder-cancel-btn-click');\n          }\n          _createFolderBtn.removeClass('disabled');\n          _createFolderDetails.slideUp();\n        });\n        _folderBtn.click(function () {\n          if (_folderName.val().length > 0) {\n            window.hueAnalytics.log('filechooser', 'create-folder-btn-2-click');\n            $.ajax({\n              type: 'POST',\n              url: '/filebrowser/mkdir',\n              data: {\n                name: _folderName.val(),\n                path: path\n              },\n              success: function success(xhr, status) {\n                if (status == 'success') {\n                  _parent.navigateTo(path);\n                  if (_uploadFileBtn) {\n                    _uploadFileBtn.removeClass('disabled');\n                  }\n                  _createFolderBtn.removeClass('disabled');\n                  _createFolderDetails.slideUp();\n                }\n              },\n              error: function error(xhr) {\n                huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n                  message: xhr.responseText\n                });\n              }\n            });\n          }\n        });\n        _createFolderDetails.appendTo(_actions);\n        _createFolderBtn.click(function () {\n          if (_uploadFileBtn) {\n            window.hueAnalytics.log('filechooser', 'create-folder-btn-1-click');\n            _uploadFileBtn.addClass('disabled');\n          }\n          _createFolderBtn.addClass('disabled');\n          _createFolderDetails.slideDown();\n        });\n      }\n      if (_showActions) {\n        _actions.appendTo($(_parent.element).find('.filechooser-tree'));\n      }\n      window.setTimeout(function () {\n        $(_parent.element).parent().scrollTop(0);\n        $scrollingBreadcrumbs.animate({\n          scrollLeft: $scrollingBreadcrumbs.width()\n        });\n      }, 0);\n    }\n  }).fail(function (e) {\n    if (!_parent.options.suppressErrors) {\n      huePubSub.publish(GLOBAL_INFO_TOPIC, {\n        message: _parent.options.labels.FILE_NOT_FOUND\n      });\n      _parent.options.onError();\n    }\n    if (e.status === 404 || e.status === 500) {\n      var fs = _parent.options.filesysteminfo[_parent.options.fsSelected || 'hdfs'];\n      _parent.navigateTo(_parent.options.errorRedirectPath !== '' ? _parent.options.errorRedirectPath : fs.home);\n    } else {\n      console.error(e);\n      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n        message: e.statusText\n      });\n    }\n  });\n};\nvar num_of_pending_uploads = 0;\nfunction initUploader(path, _parent, el, labels) {\n  new qq.FileUploader({\n    element: el[0],\n    action: '/filebrowser/upload/file',\n    params: {\n      dest: path,\n      fileFieldLabel: 'hdfs_file'\n    },\n    onComplete: function onComplete(id, fileName, responseJSON) {\n      num_of_pending_uploads--;\n      if (responseJSON.status == -1) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: responseJSON.data\n        });\n      } else if (!num_of_pending_uploads) {\n        _parent.navigateTo(path);\n        huePubSub.publish('assist.' + getFs(getScheme(path)) + '.refresh');\n      }\n    },\n    onSubmit: function onSubmit(id, fileName) {\n      num_of_pending_uploads++;\n      window.hueAnalytics.log('filechooser', 'uploading-file');\n    },\n    template: '<div class=\"qq-uploader\">' + '<div class=\"qq-upload-drop-area\"><span></span></div>' + '<div class=\"qq-upload-button\">' + labels.UPLOAD_FILE + '</div><br>' + '<ul class=\"qq-upload-list\"></ul>' + '</div>',\n    fileTemplate: '<li>' + '<span class=\"qq-upload-file\"></span>' + '<span class=\"qq-upload-spinner\"></span>' + '<span class=\"qq-upload-size\"></span>' + '<a class=\"qq-upload-cancel\" href=\"#\">' + labels.CANCEL + '</a>' + '<span class=\"qq-upload-failed-text\">' + labels.FAILED + '</span>' + '</li>',\n    debug: false\n  });\n}\nPlugin.prototype.init = function () {\n  var self = this;\n  $(self.element).empty().html('<div class=\"filechooser-container\" style=\"position: relative\"><div class=\"filechooser-services\" style=\"position: absolute\"></div><div class=\"filechooser-tree\" style=\"width: 560px\"></div></div>');\n  $.post('/filebrowser/api/get_filesystems', function (data) {\n    var initialHome = '/';\n    if (self.options.initialPath == '') {\n      if (Object.keys(data.filesystems).length > 1 && Object.keys(data.filesystems).indexOf('hdfs') != -1) {\n        initialHome = '/?default_to_home';\n        self.options.fsSelected = 'hdfs';\n      } else {\n        var _scheme = Object.keys(data.filesystems)[0];\n        initialHome = defaults.filesysteminfo[_scheme]['home'];\n        self.options.fsSelected = _scheme;\n      }\n    }\n    var initialPath = $.trim(self.options.initialPath);\n    var scheme = initialPath && initialPath.substring(0, initialPath.indexOf(':'));\n    if (data && data.status === 0) {\n      if (scheme && scheme.length && data.filesystems[scheme]) {\n        self.options.fsSelected = scheme;\n      }\n      self.setFileSystems(data.filesystems);\n    }\n    if (initialPath != '') {\n      self.navigateTo(self.options.initialPath);\n    } else if (window.USER_HOME_DIR != '/') {\n      self.navigateTo(window.USER_HOME_DIR);\n    } else if (hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected) != null) {\n      self.navigateTo(hueLocalStorage(STORAGE_PREFIX + self.options.user + self.options.fsSelected));\n    } else {\n      self.navigateTo(initialHome);\n    }\n  });\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport escapeOutput from 'utils/html/escapeOutput';\nimport { hueLocalStorage } from 'utils/storageUtils';\n\n/*\n * jHue HDFS autocomplete plugin\n * augment a textbox into an HDFS autocomplete\n */\n\nvar pluginName = 'jHueHdfsAutocomplete',\n  defaults = {\n    home: '/',\n    onEnter: function onEnter() {},\n    onBlur: function onBlur() {},\n    onPathChange: function onPathChange() {},\n    smartTooltip: '',\n    smartTooltipThreshold: 10,\n    // needs 10 up/down or click actions and no tab to activate the smart tooltip\n    showOnFocus: false,\n    skipKeydownEvents: false,\n    skipEnter: false,\n    skipScrollEvent: false,\n    zIndex: 33000,\n    root: '/',\n    isS3: false\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.init();\n}\nPlugin.prototype.init = function () {\n  var _this = this;\n  var _el = $(_this.element);\n  _el.addClass('jHueAutocompleteElement');\n  _el.attr('autocomplete', 'off'); // prevents default browser behavior\n\n  // creates autocomplete popover\n  if ($('#jHueHdfsAutocomplete').length == 0) {\n    $('<div>').attr('id', 'jHueHdfsAutocomplete').addClass('jHueAutocomplete popover').attr('style', 'position:absolute;display:none;max-width:1000px;z-index:' + _this.options.zIndex).html('<div class=\"arrow\"></div><div class=\"popover-inner\"><h3 class=\"popover-title\"></h3><div class=\"popover-content\"><p><ul class=\"unstyled\"></ul></p></div></div>').appendTo($('body'));\n  }\n  function setHueBreadcrumbCaretAtEnd(element) {\n    var elemLength = element.value.length;\n    if (document.selection) {\n      element.focus();\n      var _oSel = document.selection.createRange();\n      _oSel.moveStart('character', -elemLength);\n      _oSel.moveStart('character', elemLength);\n      _oSel.moveEnd('character', 0);\n      _oSel.select();\n    } else if (element.selectionStart || element.selectionStart == '0') {\n      element.selectionStart = elemLength;\n      element.selectionEnd = elemLength;\n      element.focus();\n    }\n  }\n  _el.focus(function () {\n    $(document.body).on('contextmenu', function (e) {\n      e.preventDefault(); // prevents native menu on FF for Mac from being shown\n    });\n    setHueBreadcrumbCaretAtEnd(_this.element);\n  });\n  _el.keydown(function (e) {\n    if (e.keyCode == 9) {\n      e.preventDefault();\n      showHdfsAutocomplete(function () {\n        var path = _el.val();\n        if (path.indexOf('/') > -1) {\n          path = path.substr(path.lastIndexOf('/') + 1);\n        }\n        guessHdfsPath(path);\n      });\n    }\n  });\n  function smartTooltipMaker() {\n    if (_this.options.smartTooltip !== '' && hueLocalStorage('jHueHdfsAutocompleteTooltip') != -1) {\n      var cnt = 0;\n      if (hueLocalStorage('jHueHdfsAutocompleteTooltip') != null) {\n        cnt = hueLocalStorage('jHueHdfsAutocompleteTooltip') + 1;\n      }\n      hueLocalStorage('jHueHdfsAutocompleteTooltip', cnt);\n      if (cnt >= _this.options.smartTooltipThreshold) {\n        _el.tooltip({\n          animation: true,\n          title: _this.options.smartTooltip,\n          trigger: 'manual',\n          placement: 'top'\n        }).tooltip('show');\n        window.setTimeout(function () {\n          _el.tooltip('hide');\n        }, 10000);\n        hueLocalStorage('jHueHdfsAutocompleteTooltip', -1);\n      }\n    }\n  }\n  if (!_this.options.skipScrollEvent) {\n    $(window).on('scroll', function () {\n      $('#jHueHdfsAutocomplete').css('top', _el.offset().top + _el.outerHeight() - 1).css('left', _el.offset().left).width(_el.outerWidth() - 4);\n    });\n  }\n  _el.on('keydown', function (e) {\n    if (!_this.options.skipKeydownEvents && e.keyCode == 191) {\n      e.preventDefault();\n    }\n    if (e.keyCode == 32 && e.ctrlKey) {\n      e.preventDefault();\n    }\n    if (_this.options.skipEnter && e.keyCode === 13) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n  });\n  var _hdfsAutocompleteSelectedIndex = -1;\n  var _filterTimeout = -1;\n  _el.keyup(function (e) {\n    window.clearTimeout(_filterTimeout);\n    if ($.inArray(e.keyCode, [38, 40, 13, 32, 191]) == -1) {\n      _hdfsAutocompleteSelectedIndex = -1;\n      _filterTimeout = window.setTimeout(function () {\n        var path = _el.val();\n        if (path.indexOf('/') > -1) {\n          path = path.substr(path.lastIndexOf('/') + 1);\n        }\n        $('#jHueHdfsAutocomplete ul li').show();\n        $('#jHueHdfsAutocomplete ul li').each(function () {\n          if ($(this).text().trim().indexOf(path) != 0) {\n            $(this).hide();\n          }\n        });\n      }, 500);\n    }\n    if (e.keyCode == 38) {\n      if (_hdfsAutocompleteSelectedIndex <= 0) {\n        _hdfsAutocompleteSelectedIndex = $('#jHueHdfsAutocomplete ul li:visible').length - 1;\n      } else {\n        _hdfsAutocompleteSelectedIndex--;\n      }\n    }\n    if (e.keyCode == 40) {\n      if (_hdfsAutocompleteSelectedIndex == $('#jHueHdfsAutocomplete ul li:visible').length - 1) {\n        _hdfsAutocompleteSelectedIndex = 0;\n      } else {\n        _hdfsAutocompleteSelectedIndex++;\n      }\n    }\n    if (e.keyCode == 38 || e.keyCode == 40) {\n      smartTooltipMaker();\n      $('#jHueHdfsAutocomplete ul li').removeClass('active');\n      $('#jHueHdfsAutocomplete ul li:visible').eq(_hdfsAutocompleteSelectedIndex).addClass('active');\n      $('#jHueHdfsAutocomplete .popover-content').scrollTop($('#jHueHdfsAutocomplete ul li:visible').eq(_hdfsAutocompleteSelectedIndex).prevAll().length * $('#jHueHdfsAutocomplete ul li:visible').eq(_hdfsAutocompleteSelectedIndex).outerHeight());\n    }\n    if (e.keyCode == 32 && e.ctrlKey || e.keyCode == 191) {\n      smartTooltipMaker();\n      showHdfsAutocomplete();\n    }\n    if (e.keyCode == 13) {\n      if (_hdfsAutocompleteSelectedIndex > -1) {\n        $('#jHueHdfsAutocomplete ul li:visible').eq(_hdfsAutocompleteSelectedIndex).click();\n      } else {\n        _this.options.onEnter($(this));\n      }\n      $('#jHueHdfsAutocomplete').hide();\n      _hdfsAutocompleteSelectedIndex = -1;\n    }\n  });\n  if (_this.options.showOnFocus) {\n    _el.on('focus', function () {\n      showHdfsAutocomplete();\n    });\n  }\n  var _pauseBlur = false;\n  _el.blur(function () {\n    if (!_pauseBlur) {\n      $(document.body).off('contextmenu');\n      $('#jHueHdfsAutocomplete').hide();\n      _this.options.onBlur();\n    }\n  });\n  var BASE_PATH = '/filebrowser/view=';\n  var _currentFiles = [];\n  function showHdfsAutocomplete(callback) {\n    var base = '';\n    var path = _el.val();\n    var hasScheme = path.indexOf(':/') >= 0;\n    var isRelative = !hasScheme && path.charAt(0) !== '/';\n    if (isRelative && _this.options.root) {\n      base += _this.options.root;\n    }\n    var autocompleteUrl = BASE_PATH + base + path;\n    $.getJSON(autocompleteUrl + '?pagesize=1000&format=json', function (data) {\n      _currentFiles = [];\n      if (data.error == null) {\n        $(data.files).each(function (cnt, item) {\n          if (item.name != '.') {\n            var ico = 'fa-file-o';\n            if (item.type == 'dir') {\n              ico = 'fa-folder';\n            }\n            _currentFiles.push('<li class=\"hdfsAutocompleteItem\" data-value=\"' + escapeOutput(item.name) + '\"><i class=\"fa ' + ico + '\"></i> ' + escapeOutput(item.name) + '</li>');\n          }\n        });\n        window.setTimeout(function () {\n          $('#jHueHdfsAutocomplete').css('top', _el.offset().top + _el.outerHeight() - 1).css('left', _el.offset().left).width(_el.outerWidth() - 4);\n          $('#jHueHdfsAutocomplete').find('ul').empty().html(_currentFiles.join(''));\n          $('#jHueHdfsAutocomplete').find('li').on('click', function (e) {\n            smartTooltipMaker();\n            e.preventDefault();\n            var item = $(this).text().trim();\n            if (item == '..') {\n              // one folder up\n              path = path.substring(0, path.lastIndexOf('/'));\n            } else {\n              path = path + (path.charAt(path.length - 1) == '/' ? '' : '/') + item;\n            }\n            _el.val(base + path);\n            if ($(this).html().indexOf('folder') > -1) {\n              _el.val(_el.val() + '/');\n              _this.options.onPathChange(_el.val());\n              showHdfsAutocomplete();\n            } else {\n              _this.options.onEnter(_el);\n            }\n          });\n          $('#jHueHdfsAutocomplete').show();\n          setHueBreadcrumbCaretAtEnd(_this.element);\n          if ('undefined' != typeof callback) {\n            callback();\n          }\n        }, 100); // timeout for IE8\n      }\n    });\n  }\n  $(document).on('mouseenter', '.hdfsAutocompleteItem', function () {\n    _pauseBlur = true;\n  });\n  $(document).on('mouseout', '.hdfsAutocompleteItem', function () {\n    _pauseBlur = false;\n  });\n  function guessHdfsPath(lastChars) {\n    var possibleMatches = [];\n    for (var i = 0; i < _currentFiles.length; i++) {\n      if (($(_currentFiles[i]).text().trim().indexOf(lastChars) == 0 || lastChars == '') && $(_currentFiles[i]).text().trim() != '..') {\n        possibleMatches.push(_currentFiles[i]);\n      }\n    }\n    if (possibleMatches.length == 1) {\n      _el.val(_el.val() + $(possibleMatches[0]).text().trim().substr(lastChars.length));\n      if ($(possibleMatches[0]).html().indexOf('folder') > -1) {\n        _el.val(_el.val() + '/');\n        showHdfsAutocomplete();\n      }\n    } else if (possibleMatches.length > 1) {\n      // finds the longest common prefix\n      var possibleMatchesPlain = [];\n      for (var z = 0; z < possibleMatches.length; z++) {\n        possibleMatchesPlain.push($(possibleMatches[z]).text().trim());\n      }\n      var arr = possibleMatchesPlain.slice(0).sort();\n      var word1 = arr[0];\n      var word2 = arr[arr.length - 1];\n      var j = 0;\n      while (word1.charAt(j) == word2.charAt(j)) {\n        ++j;\n      }\n      var match = word1.substring(0, j);\n      _el.val(_el.val() + match.substr(lastChars.length));\n    }\n  }\n};\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};\n$[pluginName] = function (options) {\n  if (typeof console != 'undefined') {\n    console.warn('$(elem).jHueHdfsAutocomplete() is a preferred call method.');\n  }\n  $(options.element).jHueHdfsAutocomplete(options);\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport { getNamespaces } from 'catalog/contextCatalog';\nimport dataCatalog from 'catalog/dataCatalog';\nimport { hueLocalStorage } from 'utils/storageUtils';\n\n/*\n * jHue generic autocomplete plugin\n * augment a textbox into an generic hive/solr autocomplete\n */\n\nvar pluginName = 'jHueGenericAutocomplete',\n  defaults = {\n    serverType: 'HIVE',\n    home: '/',\n    skipColumns: false,\n    skipTables: false,\n    onEnter: function onEnter() {},\n    onBlur: function onBlur() {},\n    onPathChange: function onPathChange() {},\n    pathChangeLevel: '',\n    smartTooltip: '',\n    smartTooltipThreshold: 10,\n    // needs 10 up/down or click actions and no tab to activate the smart tooltip\n    showOnFocus: false,\n    startingPath: '',\n    rewriteVal: false,\n    searchEverywhere: false,\n    apiHelperUser: '',\n    apiHelperType: '',\n    mainScrollable: $(window)\n  };\nfunction Plugin(element, options) {\n  var self = this;\n  self.element = element;\n  self.options = $.extend({}, defaults, options);\n  self._defaults = defaults;\n  self._name = pluginName;\n  self.namespaceDeferred = $.Deferred();\n  self.computeDeferred = $.Deferred();\n  if (self.options.namespace) {\n    self.namespaceDeferred.resolve(self.options.namespace);\n  } else {\n    getNamespaces({\n      connector: {\n        id: options.apiHelperType\n      }\n    }).then(function (context) {\n      if (context.namespaces && context.namespaces.length) {\n        self.namespaceDeferred.resolve(context.namespaces[0]);\n      } else {\n        self.namespaceDeferred.reject();\n      }\n    })[\"catch\"]();\n  }\n  self.namespaceDeferred.done(function (namespace) {\n    if (!self.options.compute || !namespace.computes.some(function (compute) {\n      if (compute.id === self.options.compute.id) {\n        self.computeDeferred.resolve(compute);\n        return true;\n      }\n    })) {\n      self.computeDeferred.resolve(namespace.computes[0]);\n    }\n  });\n  this.init();\n}\nPlugin.prototype.init = function () {\n  var self = this;\n  var $el = $(self.element);\n\n  // creates autocomplete popover\n  if ($('#jHueGenericAutocomplete').length === 0) {\n    $('<div>').attr('id', 'jHueGenericAutocomplete').addClass('jHueAutocomplete popover').attr('style', 'position:absolute;display:none;max-width:1000px;z-index:33000').html('<div class=\"arrow\"></div><div class=\"popover-inner\"><h3 class=\"popover-title\"></h3><div class=\"popover-content\"><ul class=\"unstyled\"></ul></div></div>').appendTo('body');\n  }\n  $el.wrap('<div class=\"inline\">');\n  $el.parent().append('<i class=\"fa fa-spinner fa-spin muted\" style=\"margin-top: 8px; margin-left: -24px; margin-right: 11px; display:none\"></i>');\n  function setHueBreadcrumbCaretAtEnd(element) {\n    var elemLength = element.value.length;\n    if (document.selection) {\n      element.focus();\n      var _oSel = document.selection.createRange();\n      _oSel.moveStart('character', -elemLength);\n      _oSel.moveStart('character', elemLength);\n      _oSel.moveEnd('character', 0);\n      _oSel.select();\n    } else if (element.selectionStart || element.selectionStart === '0') {\n      element.selectionStart = elemLength;\n      element.selectionEnd = elemLength;\n      element.focus();\n    }\n  }\n  $el.focus(function () {\n    $(document.body).on('contextmenu', function (e) {\n      e.preventDefault(); // prevents native menu on FF for Mac from being shown\n    });\n    setHueBreadcrumbCaretAtEnd(self.element);\n    _pauseBlur = false;\n  });\n  $el.keydown(function (e) {\n    if (e.keyCode === 9) {\n      e.preventDefault();\n      showAutocomplete(function () {\n        var path = $el.val();\n        if (path.indexOf('.') > -1) {\n          path = path.substr(path.lastIndexOf('.') + 1);\n        }\n        guessHivePath(path);\n      });\n    }\n  });\n  function smartTooltipMaker() {\n    if (self.options.smartTooltip !== '' && hueLocalStorage('jHueGenericAutocompleteTooltip') !== -1) {\n      var cnt = 0;\n      if (hueLocalStorage('jHueGenericAutocompleteTooltip')) {\n        cnt = hueLocalStorage('jHueGenericAutocompleteTooltip') + 1;\n      }\n      hueLocalStorage('jHueGenericAutocompleteTooltip', cnt);\n      if (cnt >= self.options.smartTooltipThreshold) {\n        $el.tooltip({\n          animation: true,\n          title: self.options.smartTooltip,\n          trigger: 'manual',\n          placement: 'top'\n        }).tooltip('show');\n        window.setTimeout(function () {\n          $el.tooltip('hide');\n        }, 10000);\n        hueLocalStorage('jHueGenericAutocompleteTooltip', -1);\n      }\n    }\n  }\n  self.options.mainScrollable.on('scroll', function () {\n    $('#jHueGenericAutocomplete').css('top', $el.offset().top + $el.outerHeight() - 1).css('left', $el.offset().left).width($el.outerWidth() - 4);\n  });\n  var validateTimeout = -1;\n  var onPathChange = function onPathChange(path) {\n    window.clearTimeout(validateTimeout);\n    self.options.onPathChange(path);\n  };\n  var validateAndSet = function validateAndSet() {\n    var path = $el.val().split('.');\n    if (path.length > 1) {\n      window.clearTimeout(validateTimeout);\n      validateTimeout = window.setTimeout(function () {\n        $.when(self.namespaceDeferred, self.computeDeferred).done(function (namespace, compute) {\n          var target = path.pop();\n          // TODO: Use connectors in hiveautocomplete\n          dataCatalog.getChildren({\n            connector: {\n              id: self.options.apiHelperType\n            },\n            namespace: namespace,\n            compute: compute,\n            path: path\n          }).then(function (childEntries) {\n            if (childEntries.some(function (childEntry) {\n              return childEntry.name === target;\n            })) {\n              onPathChange($el.val());\n            }\n          })[\"catch\"](function () {});\n        });\n      }, 500);\n    }\n  };\n  var _hiveAutocompleteSelectedIndex = -1;\n  var _filterTimeout = -1;\n  $el.keyup(function (e) {\n    window.clearTimeout(_filterTimeout);\n    validateAndSet();\n    if ($.inArray(e.keyCode, [17, 38, 40, 13, 32, 191]) === -1) {\n      _hiveAutocompleteSelectedIndex = -1;\n      _filterTimeout = window.setTimeout(function () {\n        var path = $el.val();\n        if (path.indexOf('.') > -1) {\n          path = path.substr(path.lastIndexOf('.') + 1);\n        }\n        var $jHueGenericAutocomplete = $('#jHueGenericAutocomplete');\n        $jHueGenericAutocomplete.show();\n        var $jHueGenericAutocompleteLi = $('#jHueGenericAutocomplete ul li');\n        $jHueGenericAutocompleteLi.show();\n        if (path !== '') {\n          $jHueGenericAutocompleteLi.each(function () {\n            if (self.options.searchEverywhere) {\n              if ($(this).text().trim().toLowerCase().indexOf(path.toLowerCase()) === -1) {\n                $(this).hide();\n              }\n            } else if ($(this).text().trim().indexOf(path) !== 0) {\n              $(this).hide();\n            }\n          });\n          if ($('#jHueGenericAutocomplete ul li:visible').length === 0) {\n            $jHueGenericAutocomplete.hide();\n          }\n        }\n      }, 500);\n    }\n    var $jHueGenericAutocompleteLiVisible = $('#jHueGenericAutocomplete ul li:visible');\n    if (e.keyCode === 38) {\n      if (_hiveAutocompleteSelectedIndex <= 0) {\n        _hiveAutocompleteSelectedIndex = $jHueGenericAutocompleteLiVisible.length - 1;\n      } else {\n        _hiveAutocompleteSelectedIndex--;\n      }\n    }\n    if (e.keyCode === 40) {\n      if (_hiveAutocompleteSelectedIndex === $jHueGenericAutocompleteLiVisible.length - 1) {\n        _hiveAutocompleteSelectedIndex = 0;\n      } else {\n        _hiveAutocompleteSelectedIndex++;\n      }\n    }\n    if (e.keyCode === 38 || e.keyCode === 40) {\n      smartTooltipMaker();\n      $('#jHueGenericAutocomplete ul li').removeClass('active');\n      $jHueGenericAutocompleteLiVisible.eq(_hiveAutocompleteSelectedIndex).addClass('active');\n      $('#jHueGenericAutocomplete .popover-content').scrollTop($jHueGenericAutocompleteLiVisible.eq(_hiveAutocompleteSelectedIndex).prevAll().length * $jHueGenericAutocompleteLiVisible.eq(_hiveAutocompleteSelectedIndex).outerHeight());\n    }\n    if (e.keyCode === 32 && e.ctrlKey || e.keyCode === 191) {\n      smartTooltipMaker();\n      showAutocomplete();\n    }\n    if (e.keyCode === 13) {\n      _pauseBlur = true;\n      if (_hiveAutocompleteSelectedIndex > -1) {\n        $jHueGenericAutocompleteLiVisible.eq(_hiveAutocompleteSelectedIndex).click();\n      } else {\n        self.options.onEnter($(this));\n      }\n      $('#jHueGenericAutocomplete').hide();\n      _hiveAutocompleteSelectedIndex = -1;\n    }\n  });\n  if (self.options.showOnFocus) {\n    $el.on('focus', function () {\n      showAutocomplete();\n    });\n  }\n  var _pauseBlur = false;\n  $el.blur(function () {\n    if (!_pauseBlur) {\n      $(document.body).off('contextmenu');\n      $('#jHueGenericAutocomplete').hide();\n      self.options.onBlur();\n    }\n  });\n  var BASE_PATH = '/beeswax/api/autocomplete/';\n  if (self.options.serverType === 'IMPALA') {\n    BASE_PATH = '/impala/api/autocomplete/';\n  }\n  if (self.options.serverType === 'SOLR') {\n    BASE_PATH = '/indexer/api/autocomplete/';\n  }\n  var _currentFiles = [];\n  self.getDatabases = function (callback) {\n    var self = this;\n    $.when(self.namespaceDeferred, self.computeDeferred).done(function (namespace, compute) {\n      dataCatalog.getChildren({\n        connector: {\n          id: self.options.apiHelperType\n        },\n        // TODO: Use connectors in hiveautocomplete\n        namespace: namespace,\n        compute: compute,\n        path: []\n      }).then(function (dbEntries) {\n        callback($.map(dbEntries, function (entry) {\n          return entry.name;\n        }));\n      })[\"catch\"](function () {});\n    });\n  };\n  self.getTables = function (database, callback) {\n    var self = this;\n    $.when(self.namespaceDeferred, self.computeDeferred).done(function (namespace, compute) {\n      dataCatalog.getEntry({\n        namespace: namespace,\n        compute: compute,\n        connector: {\n          id: self.options.apiHelperType\n        },\n        path: [database]\n      }).then(function (entry) {\n        entry.getSourceMeta().then(callback);\n      });\n    });\n  };\n  self.getColumns = function (database, table, callback) {\n    var self = this;\n    $.when(self.namespaceDeferred, self.computeDeferred).done(function (namespace, compute) {\n      dataCatalog.getEntry({\n        namespace: namespace,\n        compute: compute,\n        connector: {\n          id: self.options.apiHelperType\n        },\n        path: [database, table]\n      }).then(function (entry) {\n        entry.getSourceMeta().then(callback);\n      });\n    });\n  };\n  function autocompleteLogic(autocompleteUrl, data) {\n    if (!data.error) {\n      _currentFiles = [];\n      var _ico = '';\n      var _iterable = [];\n      var _isSkipColumns = false;\n      var _isSkipTables = false;\n      if (self.options.serverType === 'SOLR') {\n        _iterable = data.collections;\n        _ico = 'fa-search';\n      } else if (data.databases) {\n        // it's a db\n        _iterable = data.databases;\n        _ico = 'fa-database';\n      } else if (data.tables_meta) {\n        // it's a table\n        if (!self.options.skipTables) {\n          _iterable = $.map(data.tables_meta, function (tablesMeta) {\n            return tablesMeta.name;\n          });\n          _ico = 'fa-table';\n        } else {\n          _isSkipTables = true;\n        }\n      } else if (!self.options.skipColumns) {\n        _iterable = data.columns;\n        _ico = 'fa-columns';\n      } else {\n        _isSkipColumns = true;\n      }\n      var firstSolrCollection = false;\n      var firstSolrConfig = false;\n      if (!_isSkipColumns && !_isSkipTables) {\n        $(_iterable).each(function (cnt, item) {\n          if (self.options.serverType === 'SOLR') {\n            if (item.isCollection && !firstSolrCollection) {\n              _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"collections.*\" title=\"collections.*\"><i class=\"fa fa-search-plus\"></i> collections.*</li>');\n              _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"admin.collections\" title=\"admin.collections\"><i class=\"fa fa-database\"></i> admin.collections</li>');\n              _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"admin.cores\" title=\"admin.collections\"><i class=\"fa fa-database\"></i> admin.cores</li>');\n              firstSolrCollection = true;\n            }\n            if (item.isConfig) {\n              _ico = 'fa-cog';\n              if (!firstSolrConfig) {\n                _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"configs.*\" title=\"configs.*\"><i class=\"fa fa-cogs\"></i> configs.*</li>');\n                firstSolrConfig = true;\n              }\n            }\n            _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"' + item.name + '\" title=\"' + item.name + '\"><i class=\"fa ' + _ico + '\"></i> ' + item.name + '</li>');\n          } else {\n            _currentFiles.push('<li class=\"hiveAutocompleteItem\" data-value=\"' + item + '\" title=\"' + item + '\"><i class=\"fa ' + _ico + '\"></i> ' + item + '</li>');\n          }\n        });\n        var $jHueGenericAutocomplete = $('#jHueGenericAutocomplete');\n        $jHueGenericAutocomplete.css('top', $el.offset().top + $el.outerHeight() - 1).css('left', $el.offset().left).width($el.outerWidth() - 4);\n        $jHueGenericAutocomplete.find('ul').empty().html(_currentFiles.join(''));\n        $jHueGenericAutocomplete.find('li').on('click', function (e) {\n          smartTooltipMaker();\n          e.preventDefault();\n          var item = $(this).text().trim();\n          if ($(this).html().indexOf('search') > -1 || $(this).html().indexOf('cog') > -1 || $(this).html().indexOf('database') > -1) {\n            if ($(this).html().indexOf('search') > -1 && $(this).html().indexOf('search-plus') === -1) {\n              $el.val('collections.' + item);\n            } else if ($(this).html().indexOf('cog') > -1 && $(this).html().indexOf('cogs') === -1) {\n              $el.val('configs.' + item);\n            } else {\n              $el.val(item);\n            }\n            if (self.options.pathChangeLevel === '' || self.options.pathChangeLevel === 'database') {\n              onPathChange($el.val());\n            }\n            $('#jHueGenericAutocomplete').hide();\n            _hiveAutocompleteSelectedIndex = -1;\n            self.options.onEnter($el);\n          }\n          if ($(this).html().indexOf('database') > -1) {\n            if (self.options.skipTables) {\n              $el.val(item);\n              $('#jHueGenericAutocomplete').hide();\n            } else {\n              $el.val(item + '.');\n            }\n            if (self.options.pathChangeLevel === '' || self.options.pathChangeLevel === 'database') {\n              onPathChange($el.val());\n            }\n            if (!self.options.skipTables) {\n              showAutocomplete();\n            }\n          }\n          if ($(this).html().indexOf('table') > -1) {\n            if ($el.val().indexOf('.') > -1) {\n              if ($el.val().match(/\\./gi).length === 1) {\n                $el.val($el.val().substring(0, $el.val().lastIndexOf('.') + 1) + item);\n              } else {\n                $el.val($el.val().substring(0, $el.val().indexOf('.') + 1) + item);\n              }\n            } else if (self.options.rewriteVal) {\n              $el.val(item);\n            } else {\n              $el.val($el.val() + item);\n            }\n            if (!self.options.skipColumns) {\n              $el.val($el.val() + '.');\n            }\n            if (self.options.pathChangeLevel === '' || self.options.pathChangeLevel === 'table') {\n              onPathChange($el.val());\n            }\n            if (!self.options.skipColumns) {\n              showAutocomplete();\n            } else {\n              self.options.onEnter($el);\n              $('#jHueGenericAutocomplete').hide();\n              _hiveAutocompleteSelectedIndex = -1;\n            }\n          }\n          if ($(this).html().indexOf('columns') > -1) {\n            if ($el.val().match(/\\./gi).length > 1) {\n              $el.val($el.val().substring(0, $el.val().lastIndexOf('.') + 1) + item);\n            } else {\n              $el.val($el.val() + '.' + item);\n            }\n            $('#jHueGenericAutocomplete').hide();\n            _hiveAutocompleteSelectedIndex = -1;\n            self.options.onEnter($el);\n          }\n        });\n        $jHueGenericAutocomplete.show();\n        window.setTimeout(function () {\n          setHueBreadcrumbCaretAtEnd(self.element);\n        }, 100);\n      }\n    }\n    $el.parent().find('.fa-spinner').hide();\n  }\n  function showAutocomplete() {\n    $el.parent().find('.fa-spinner').show();\n    var path = $el.val();\n    if (self.options.startingPath !== '') {\n      path = self.options.startingPath + path;\n    }\n    var autocompleteUrl = BASE_PATH;\n    if (path !== '' && path.indexOf('.') === -1) {\n      path = '';\n    }\n    if (path !== '' && path.lastIndexOf('.') !== path.length - 1) {\n      path = path.substring(0, (self.options.startingPath + $el.val()).lastIndexOf('.'));\n    }\n    if (self.options.serverType !== 'SOLR') {\n      autocompleteUrl += path.replace(/\\./g, '/');\n    }\n    if (self.options.serverType !== 'SOLR' && self.options.apiHelperUser !== '') {\n      var suffix = autocompleteUrl.substr(BASE_PATH.length);\n      if (suffix === '') {\n        self.getDatabases(function (data) {\n          autocompleteLogic(autocompleteUrl, {\n            databases: data\n          });\n        });\n      } else {\n        var details = suffix.split('/');\n        if (details.length > 1 && details[1] !== '') {\n          self.getColumns(details[0], details[1], function (data) {\n            var columns = [];\n            if (data.cols || data.extended_columns) {\n              columns = $.map(data.cols ? data.cols : data.extended_columns, function (item) {\n                return item.name;\n              });\n            } else if (data.columns) {\n              columns = data.columns;\n            }\n            autocompleteLogic(autocompleteUrl, {\n              columns: columns\n            });\n          });\n        } else {\n          self.getTables(details[0], function (data) {\n            autocompleteLogic(autocompleteUrl, data);\n          });\n        }\n      }\n    } else {\n      $.getJSON(autocompleteUrl, function (data) {\n        autocompleteLogic(autocompleteUrl, data);\n      });\n    }\n  }\n  $(document).on('mouseenter', '.hiveAutocompleteItem', function () {\n    _pauseBlur = true;\n  });\n  $(document).on('mouseout', '.hiveAutocompleteItem', function () {\n    _pauseBlur = false;\n  });\n  function guessHivePath(lastChars) {\n    var possibleMatches = [];\n    for (var i = 0; i < _currentFiles.length; i++) {\n      if (($(_currentFiles[i]).text().trim().indexOf(lastChars) === 0 || lastChars === '') && $(_currentFiles[i]).text().trim() !== '..') {\n        possibleMatches.push(_currentFiles[i]);\n      }\n    }\n    if (possibleMatches.length === 1) {\n      $el.val($el.val() + $(possibleMatches[0]).text().trim().substr(lastChars.length));\n      if ($(possibleMatches[0]).html().indexOf('folder') > -1) {\n        $el.val($el.val() + '/');\n        showAutocomplete();\n      }\n    } else if (possibleMatches.length > 1) {\n      // finds the longest common prefix\n      var possibleMatchesPlain = [];\n      for (var z = 0; z < possibleMatches.length; z++) {\n        possibleMatchesPlain.push($(possibleMatches[z]).text().trim());\n      }\n      var arr = possibleMatchesPlain.slice(0).sort();\n      var word1 = arr[0];\n      var word2 = arr[arr.length - 1];\n      var j = 0;\n      while (word1.charAt(j) === word2.charAt(j)) {\n        ++j;\n      }\n      var match = word1.substring(0, j);\n      $el.val($el.val() + match.substr(lastChars.length));\n    }\n  }\n};\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};\n$[pluginName] = function (options) {\n  if (typeof console !== 'undefined') {\n    console.warn('$(elem).jHueGenericAutocomplete() is a preferred call method.');\n  }\n  $(options.element).jHueGenericAutocomplete(options);\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n\n/*\n * jHue horizontal scrollbar for dataTables_wrapper\n *\n */\n\nvar pluginName = 'jHueHorizontalScrollbar',\n  defaults = {};\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.init();\n}\nfunction initWhenReady(el) {\n  var $wrapper = $(el).parents('.dataTables_wrapper');\n  if (!$wrapper.length) {\n    return;\n  }\n  var colWidth = $(el).find('thead tr th').outerWidth();\n  var wrapperWidth = $wrapper.width();\n  var wrapperScrollWidth = $wrapper[0].scrollWidth;\n  if ($wrapper.find('.hue-scrollbar-x-rail').length === 0 && wrapperWidth < wrapperScrollWidth) {\n    $('.hue-scrollbar-x-rail').remove();\n    var $scrollbarRail = $('<div>');\n    var $scrollbar = $('<div>').addClass('hue-scrollbar-x');\n    $scrollbar.width(Math.max(20, wrapperWidth * (wrapperWidth / wrapperScrollWidth)));\n    $scrollbar.appendTo($scrollbarRail);\n    try {\n      $scrollbar.draggable('destroy');\n    } catch (e) {}\n    var throttleScrollTimeout = -1;\n    var scrollbarWidth = 0;\n    var railWidth = 0;\n    $scrollbar.draggable({\n      axis: 'x',\n      containment: 'parent',\n      start: function start() {\n        $wrapper = $(el).parents('.dataTables_wrapper');\n        wrapperScrollWidth = $wrapper[0].scrollWidth;\n        wrapperWidth = $wrapper.width();\n        scrollbarWidth = $(this).outerWidth();\n        railWidth = $scrollbarRail.innerWidth();\n        $scrollbarRail.css('opacity', '1');\n      },\n      drag: function drag(e, ui) {\n        $wrapper.scrollLeft((wrapperScrollWidth - wrapperWidth) * (ui.position.left / (railWidth - scrollbarWidth)));\n        window.clearTimeout(throttleScrollTimeout);\n        throttleScrollTimeout = window.setTimeout(function () {\n          $wrapper.trigger('scroll');\n        }, 50);\n      },\n      stop: function stop() {\n        $scrollbarRail.css('opacity', '');\n      }\n    });\n    $wrapper.bind('mousewheel', function (e) {\n      var _deltaX = e.deltaX * e.deltaFactor,\n        _deltaY = e.deltaY;\n      if (Math.abs(_deltaX) >= Math.abs(_deltaY)) {\n        var self = this;\n        self.scrollLeft += _deltaX;\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        if (self.scrollLeft > 0) {\n          $scrollbar.css('left', ($scrollbarRail[0].getBoundingClientRect().width - $scrollbar[0].getBoundingClientRect().width) * (self.scrollLeft / (self.scrollWidth - self.getBoundingClientRect().width)) + 'px');\n          window.clearTimeout(throttleScrollTimeout);\n          throttleScrollTimeout = window.setTimeout(function () {\n            $wrapper.trigger('scroll');\n          }, 50);\n        }\n      }\n    });\n    $scrollbarRail.addClass('hue-scrollbar-x-rail').appendTo($wrapper);\n    $scrollbarRail.width(wrapperWidth - colWidth);\n    $scrollbarRail.css('marginLeft', colWidth + 'px');\n    if ($scrollbarRail.position().top > $(window).height() - 10) {\n      $scrollbarRail.css('bottom', '0');\n    }\n    $wrapper.bind('scroll_update', function () {\n      $scrollbar.css('left', ($scrollbarRail.width() - $scrollbar.width()) * ($wrapper.scrollLeft() / (wrapperScrollWidth - wrapperWidth)) + 'px');\n    });\n  } else {\n    if (wrapperWidth === wrapperScrollWidth) {\n      $('.hue-scrollbar-x-rail').hide();\n    } else {\n      $('.hue-scrollbar-x-rail').show();\n    }\n    $wrapper.find('.hue-scrollbar-x-rail').width(wrapperWidth - colWidth);\n    var scrollbar = $wrapper.find('.hue-scrollbar-x');\n    scrollbar.width(Math.max(20, wrapperWidth * (wrapperWidth / wrapperScrollWidth)));\n    var scrollbarRail = $wrapper.find('.hue-scrollbar-x-rail');\n    scrollbarRail.width(wrapperWidth - colWidth);\n    scrollbarRail.css('marginLeft', colWidth + 'px');\n    scrollbar.css('left', (scrollbarRail.width() - scrollbar.width()) * ($wrapper.scrollLeft() / (wrapperScrollWidth - wrapperWidth)) + 'px');\n  }\n}\nPlugin.prototype.init = function () {\n  var el = this.element;\n  var checkWidth = function checkWidth() {\n    if ($(el).parents('.dataTables_wrapper').width() > 0) {\n      initWhenReady(el);\n    } else {\n      window.setTimeout(checkWidth, 100);\n    }\n  };\n  checkWidth();\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport deXSS from 'utils/html/deXSS';\nimport huePubSub from 'utils/huePubSub';\n\n/*\n * Extension to datatable to programmatically switch off datatable in case of huge tables\n *\n */\n\n$.fn.hueDataTable = function (oInit) {\n  var _this = this;\n  var self = this;\n  self.$table = null;\n  self.fnSetColumnVis = function (index, visible) {\n    var aoColumns = self.$table.data('aoColumns');\n    var change = aoColumns[index].bVisible !== visible;\n    aoColumns[index].bVisible = visible;\n    if (!change) {\n      return;\n    }\n    if (!visible) {\n      self.$table.find('tr').find('td:eq(' + index + '),th:eq(' + index + ')').hide();\n    } else {\n      self.$table.find('tr').find('td:eq(' + index + '),th:eq(' + index + ')').show();\n    }\n    if (self.$table.data('plugin_jHueTableExtender')) {\n      self.$table.data('plugin_jHueTableExtender').drawLockedRows(true);\n    } else if (self.$table.data('plugin_jHueTableExtender2')) {\n      self.$table.data('plugin_jHueTableExtender2').redraw();\n    }\n  };\n  self.fnToggleAllCols = function (visible) {\n    var aoColumns = self.$table.data('aoColumns');\n    aoColumns.forEach(function (col, idx) {\n      if (idx > 0) {\n        col.bVisible = visible;\n      }\n    });\n    if (!visible) {\n      self.$table.find('th, td').hide();\n      self.$table.find('tr').find('td:eq(0),th:eq(0)').show();\n    } else {\n      self.$table.find('th, td').show();\n    }\n    if (self.$table.data('plugin_jHueTableExtender')) {\n      self.$table.data('plugin_jHueTableExtender').drawLockedRows(true);\n    } else if (self.$table.data('plugin_jHueTableExtender2')) {\n      self.$table.data('plugin_jHueTableExtender2').redraw();\n    }\n  };\n  self.fnSortColumn = function (obj, way) {\n    var data = self.$table.data('data');\n    var idx = obj.originalIndex;\n    if (way === 0) {\n      idx = 0;\n    }\n    var sortType = 'alpha';\n    if (obj.cssClass) {\n      if (obj.cssClass === 'sort-numeric') {\n        sortType = 'numeric';\n      }\n      if (obj.cssClass === 'sort-date') {\n        sortType = 'date';\n      }\n    }\n    if (way === -1 || way === 0) {\n      data.sort(function (a, b) {\n        if (sortType === 'date') {\n          if (a[idx] === 'NULL') {\n            return -1;\n          }\n          if (b[idx] === 'NULL') {\n            return 1;\n          }\n          if (moment(a[idx].replace(/\\&nbsp;/, ' ')).valueOf() > moment(b[idx].replace(/\\&nbsp;/, ' ')).valueOf()) {\n            return 1;\n          }\n          if (moment(a[idx].replace(/\\&nbsp;/, ' ')).valueOf() < moment(b[idx].replace(/\\&nbsp;/, ' ')).valueOf()) {\n            return -1;\n          }\n          return 0;\n        } else if (sortType === 'numeric') {\n          if (a[idx] === 'NULL') {\n            return -1;\n          }\n          if (b[idx] === 'NULL') {\n            return 1;\n          }\n          if (a[idx] * 1 > b[idx] * 1) {\n            return 1;\n          }\n          if (a[idx] * 1 < b[idx] * 1) {\n            return -1;\n          }\n          return 0;\n        } else {\n          if (a[idx] > b[idx]) {\n            return 1;\n          }\n          if (a[idx] < b[idx]) {\n            return -1;\n          }\n          return 0;\n        }\n      });\n    } else {\n      data.sort(function (a, b) {\n        if (sortType === 'date') {\n          if (a[idx] === 'NULL') {\n            return 1;\n          }\n          if (b[idx] === 'NULL') {\n            return -1;\n          }\n          if (moment(a[idx].replace(/\\&nbsp;/, ' ')).valueOf() > moment(b[idx].replace(/\\&nbsp;/, ' ')).valueOf()) {\n            return -1;\n          }\n          if (moment(a[idx].replace(/\\&nbsp;/, ' ')).valueOf() < moment(b[idx].replace(/\\&nbsp;/, ' ')).valueOf()) {\n            return 1;\n          }\n          return 0;\n        } else if (sortType === 'numeric') {\n          if (a[idx] === 'NULL') {\n            return 1;\n          }\n          if (b[idx] === 'NULL') {\n            return -1;\n          }\n          if (a[idx] * 1 > b[idx] * 1) {\n            return -1;\n          }\n          if (a[idx] * 1 < b[idx] * 1) {\n            return 1;\n          }\n          return 0;\n        } else {\n          if (a[idx] > b[idx]) {\n            return -1;\n          }\n          if (a[idx] < b[idx]) {\n            return 1;\n          }\n          return 0;\n        }\n      });\n    }\n    self.fnDraw(true);\n  };\n  self.fnShowSearch = function () {\n    if ($('.hue-datatable-search').length == 0) {\n      var search = $('<div>').css({\n        position: 'fixed',\n        bottom: '20px',\n        opacity: 0.85\n      }).addClass('hueAnchor hue-datatable-search').appendTo('body');\n      search.html('<input type=\"text\"> <i class=\"fa fa-chevron-up pointer muted\"></i> <i class=\"fa fa-chevron-down pointer muted\"></i> &nbsp; <span></span> &nbsp; <i class=\"fa fa-times pointer inactive-action\"></i>');\n      search.find('.fa-times').on('click', function () {\n        search.hide();\n        var $t = self.$table;\n        if ($t.data('scrollToRow') != null) {\n          $t.data('scrollToCol', null);\n          $t.data('scrollToRow', null);\n          $t.find('.columnSelected').removeClass('columnSelected');\n        }\n      });\n      search.find('.fa-chevron-down').on('click', function () {\n        if (!self.isScrolling) {\n          self.fnScrollToNextResult();\n        }\n      });\n      search.find('.fa-chevron-up').on('click', function () {\n        if (!self.isScrolling) {\n          self.fnScrollToPreviousResult();\n        }\n      });\n      search.find('input').jHueDelayedInput(function () {\n        self.fnSearch(search.find('input').val());\n      }, 600, true);\n      search.find('input').keydown(function (e) {\n        if ([13, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {\n          e.preventDefault();\n          e.stopPropagation();\n          e.stopImmediatePropagation();\n          if ([13, 39, 40].indexOf(e.keyCode) > -1) {\n            search.find('.fa-chevron-down').trigger('click');\n          } else {\n            search.find('.fa-chevron-up').trigger('click');\n          }\n        }\n      });\n      search.find('input').focus();\n      huePubSub.subscribe('hue.datatable.search.hide', function () {\n        $('.hue-datatable-search').hide();\n      });\n    } else {\n      $('.hue-datatable-search').show();\n      $('.hue-datatable-search').find('input').focus();\n    }\n    var right = -30;\n    var adjustRight = $(window).width() - ($('.page-content').width() + $('.page-content').offset().left);\n    if (adjustRight > 0) {\n      right = adjustRight;\n    }\n    $('.hueAnchorScroller:visible').each(function () {\n      var visibleRight = $(this).css('right').replace(/px/gi, '') * 1;\n      if (!isNaN(visibleRight) && visibleRight > right) {\n        right = visibleRight;\n      }\n    });\n    $('.hue-datatable-search').css('right', right + 50 + 'px');\n  };\n  self.fnSearch = function (what, avoidScroll) {\n    var $t = self.$table;\n    if ($t) {\n      if (typeof avoidScroll === 'undefined' || !avoidScroll) {\n        $t.find('.columnSelected').removeClass('columnSelected');\n        $t.data('scrollToCol', null);\n        $t.data('scrollToRow', null);\n      }\n      if (what !== '') {\n        $('.hue-datatable-search').find('span').text('');\n        $('.hue-datatable-search').find('.fa-chevron-down').addClass('muted').removeClass('inactive-action');\n        $('.hue-datatable-search').find('.fa-chevron-up').addClass('muted').removeClass('inactive-action');\n        var coords = [];\n        $t.data('searchCoords', []);\n        $t.data('searchCoordHighlighted', 0);\n        var data = self.$table.data('data');\n        data.forEach(function (row, rowIdx) {\n          row.forEach(function (fld, fldIdx) {\n            if ((fld + '').replace(/\\&nbsp;/, ' ').toLowerCase().indexOf(what.toLowerCase()) > -1) {\n              coords.push({\n                row: rowIdx,\n                col: fldIdx\n              });\n            }\n          });\n        });\n        $t.data('searchCoords', coords);\n        if (coords.length > 0) {\n          if ($('.hue-datatable-search').find('input').val() !== '') {\n            $('.hue-datatable-search').find('.fa-chevron-down').removeClass('muted').addClass('inactive-action');\n            $('.hue-datatable-search').find('.fa-chevron-up').removeClass('muted').addClass('inactive-action');\n          }\n          if (typeof avoidScroll === 'undefined' || !avoidScroll) {\n            self.fnScrollTo(coords[0].row, coords[0].col);\n          } else {\n            $('.hue-datatable-search').find('span').text($t.data('searchCoordHighlighted') + 1 + ' ' + $t.data('oInit')['i18n'].OF + ' ' + $t.data('searchCoords').length);\n          }\n        } else {\n          $('.hue-datatable-search').find('span').text($t.data('oInit')['i18n'].NO_RESULTS);\n        }\n      }\n    }\n  };\n  self.fnScrollToPreviousResult = function () {\n    var $t = self.$table;\n    if ($t && $t.data('searchCoords') && $t.data('searchCoords').length > 0) {\n      var high = $t.data('searchCoordHighlighted');\n      high = high == 0 ? $t.data('searchCoords').length - 1 : high - 1;\n      $t.data('searchCoordHighlighted', high);\n      self.fnScrollTo($t.data('searchCoords')[high].row, $t.data('searchCoords')[high].col);\n    }\n  };\n  self.fnScrollToNextResult = function () {\n    var $t = self.$table;\n    if ($t && $t.data('searchCoords') && $t.data('searchCoords').length > 0) {\n      var high = $t.data('searchCoordHighlighted');\n      high = high == $t.data('searchCoords').length - 1 ? 0 : high + 1;\n      $t.data('searchCoordHighlighted', high);\n      self.fnScrollTo($t.data('searchCoords')[high].row, $t.data('searchCoords')[high].col);\n    }\n  };\n  self.isScrolling = false;\n  self.fnScrollTo = function (row, col) {\n    var $t = self.$table;\n    if ($t) {\n      self.isScrolling = true;\n      $('.hue-datatable-search').find('span').text($t.data('searchCoordHighlighted') + 1 + ' ' + $t.data('oInit')['i18n'].OF + ' ' + $t.data('searchCoords').length);\n      var colSel = $t.find('tr th:nth-child(' + (col + 1) + ')');\n      $t.parent().animate({\n        scrollLeft: colSel.position().left + $t.parent().scrollLeft() - $t.parent().offset().left - 30\n      }, 300, function () {\n        self.isScrolling = false;\n      });\n      $t.parents($t.data('oInit')['scrollable']).animate({\n        scrollTop: $t.find('tbody tr').find('td:eq(0)').filter(function () {\n          return $(this).text() - 1 == row;\n        }).position().top + 73\n      }, 100, function () {\n        $t.data('scrollToCol', col);\n        $t.data('scrollToRow', row);\n        $t.data('scrollAnimate', true);\n        $t.parent().trigger('scroll');\n      });\n    }\n  };\n  self.isDrawing = false;\n  this.lowerCaseFilter = '';\n  self.fnDraw = function (force) {\n    var aoColumns = self.$table.data('aoColumns');\n    if (!self.isDrawing && aoColumns) {\n      var $t = self.$table;\n      if ($t) {\n        self.isDrawing = true;\n        var data = self.$table.data('data');\n        var appendable = $t.children('tbody').length > 0 ? $t.children('tbody') : $t;\n        var startCol = -1;\n        var endCol = -1;\n        $t.find('thead>tr th').each(function (i) {\n          if ($(this).position().left > 0 && startCol == -1) {\n            startCol = i;\n          }\n          if ($(this).position().left + $t.position().left < $t.parent().width() + $t.parent().position().left) {\n            endCol = i;\n          }\n        });\n        startCol = Math.max(1, startCol - 1);\n        endCol = Math.min(aoColumns.length, endCol + 3); // avoid loading just after the col\n        // for tables under the 30 columns, display them all at once\n        if (aoColumns.length <= 30) {\n          endCol = aoColumns.length;\n        }\n        var rowHeight = 32;\n        var invisibleOffset = $t.data('oInit')['forceInvisible'] ? $t.data('oInit')['forceInvisible'] : aoColumns.length < 100 ? 10 : 1;\n        var scrollable = $t.parents($t.data('oInit')['scrollable']);\n        var visibleRows = Math.ceil((scrollable.height() - Math.max($t.offset().top, 0)) / rowHeight);\n        if ($t.data('oInit')['contained']) {\n          visibleRows = Math.ceil(scrollable.height() / rowHeight);\n        }\n        visibleRows += invisibleOffset;\n        visibleRows = Math.max(visibleRows, 11);\n        var startRow = $t.offset().top - 73 < 0 ? Math.max(Math.floor(Math.abs($t.offset().top - 73) / rowHeight) - invisibleOffset, 0) : 0;\n        if ($t.data('oInit')['contained']) {\n          startRow = Math.max(0, Math.floor(Math.abs($t.position().top) / rowHeight) - invisibleOffset);\n        }\n        var endRow = startRow + visibleRows + invisibleOffset;\n        if (endRow != $t.data('endRow') || endRow == $t.data('endRow') && endCol > $t.data('endCol') || force) {\n          $t.data('endCol', endCol);\n          $t.data('endRow', endRow);\n          if ($t.data('fnDraws') === 0) {\n            var html = '';\n            for (var i = 0; i < data.length; i++) {\n              html += '<tr class=\"ht-visible-row ht-visible-row-' + i + '\"><td>' + deXSS(data[i][0]) + '</td><td colspan=\"' + (aoColumns.length - 1) + '\" class=\"stripe\"></td></tr>';\n            }\n            appendable.html(html);\n            if ($t.data('plugin_jHueTableExtender')) {\n              $t.data('plugin_jHueTableExtender').drawFirstColumn();\n            }\n            if ($t.data('plugin_jHueTableExtender2')) {\n              $t.data('plugin_jHueTableExtender2').drawFirstColumn(true);\n            }\n          } else if (force) {\n            var _html = '';\n            for (var _i = $t.find('.ht-visible-row').length; _i < data.length; _i++) {\n              _html += '<tr class=\"ht-visible-row ht-visible-row-' + _i + '\"><td>' + deXSS(data[_i][0]) + '</td><td colspan=\"' + (aoColumns.length - 1) + '\" class=\"stripe\"></td></tr>';\n            }\n            appendable.html(appendable.html() + _html);\n          }\n          for (var _i2 = 0; _i2 < data.length; _i2++) {\n            var _html2 = '';\n            if (_i2 >= startRow && _i2 <= endRow) {\n              var row = data[_i2];\n              if (row) {\n                for (var j = 0; j < endCol; j++) {\n                  _html2 += '<td ' + (!aoColumns[j].bVisible ? 'style=\"display: none\"' : '') + '>' + deXSS(row[j]) + '</td>';\n                }\n                if (endCol < aoColumns.length) {\n                  _html2 += '<td colspan=\"' + (aoColumns.length - endCol) + '\" class=\"stripe\"></td>';\n                }\n              }\n            } else {\n              _html2 = '<td>' + deXSS(data[_i2][0]) + '</td><td colspan=\"' + (aoColumns.length - 1) + '\" class=\"stripe\"></td>';\n            }\n            appendable.children().eq(_i2).html(_html2);\n          }\n          if (force) {\n            if ($t.data('plugin_jHueTableExtender')) {\n              $t.data('plugin_jHueTableExtender').drawFirstColumn();\n            }\n            if ($t.data('plugin_jHueTableExtender2')) {\n              $t.data('plugin_jHueTableExtender2').drawFirstColumn(true);\n            }\n          }\n        }\n        if ($t.data('scrollToCol')) {\n          $t.find('.columnSelected').removeClass('columnSelected');\n          var colSel = $t.find('tr th:nth-child(' + ($t.data('scrollToCol') + 1) + ')');\n          if ($t.find('tr td:nth-child(' + ($t.data('scrollToCol') + 1) + ')').length > 0) {\n            colSel = $t.find('tr td:nth-child(' + ($t.data('scrollToCol') + 1) + ')');\n          }\n          if ($t.data('scrollAnimate')) {\n            if ($t.data('scrollAnimateDirect')) {\n              $t.parent().scrollLeft(colSel.position().left + $t.parent().scrollLeft() - ($t.data('scrollInPopover') ? 0 : $t.parent().offset().left) - 30);\n              $t.parent().trigger('scroll');\n            } else {\n              $t.parent().animate({\n                scrollLeft: colSel.position().left + $t.parent().scrollLeft() - ($t.data('scrollInPopover') ? 0 : $t.parent().offset().left) - 30\n              }, 300, function () {\n                $t.parent().trigger('scroll');\n              });\n            }\n            if ($t.data('scrollLastColPosLeft') == null || $t.data('scrollLastColPosLeft') != colSel.position().left) {\n              $t.data('scrollLastColPosLeft', colSel.position().left);\n              $t.data('scrollLastParentLeft', $t.parent().scrollLeft());\n            } else {\n              $t.data('scrollAnimate', null);\n              $t.data('scrollAnimateDirect', null);\n              $t.data('scrollLastColPosLeft', null);\n              $t.data('scrollLastParentLeft', null);\n            }\n          }\n          if ($t.data('scrollToRow') == null) {\n            colSel.addClass('columnSelected');\n          } else {\n            $t.find('tr:nth-child(' + ($t.data('scrollToRow') + 1) + ') td:nth-child(' + ($t.data('scrollToCol') + 1) + ')').addClass('columnSelected');\n          }\n          if ($t.data('plugin_jHueTableExtender')) {\n            $t.data('plugin_jHueTableExtender').drawHeader(typeof force === 'undefined');\n            $t.data('plugin_jHueTableExtender').drawLockedRows();\n          }\n          if ($t.data('plugin_jHueTableExtender2')) {\n            $t.data('plugin_jHueTableExtender2').drawLockedRows();\n          }\n        }\n        $t.data('fnDraws', $t.data('fnDraws') + 1);\n        if ($t.data('oInit')['fnDrawCallback']) {\n          $t.data('oInit')['fnDrawCallback']();\n        }\n        $t.trigger('headerpadding');\n        self.isDrawing = false;\n      }\n    }\n  };\n  var applyFilter = function applyFilter() {\n    var data = _this.$table.data('originalData');\n    if (!_this.lowerCaseFilter || !data.length) {\n      _this.$table.data('data', data);\n    } else {\n      _this.$table.data('data', data.filter(function (row) {\n        return row.some(function (col, idx) {\n          return idx > 0 && ('' + col).toLowerCase().indexOf(_this.lowerCaseFilter) !== -1;\n        });\n      }));\n    }\n  };\n  this.setFilter = function (filter) {\n    _this.lowerCaseFilter = filter.toLowerCase();\n    if (_this.$table.children('tbody').length > 0) {\n      _this.$table.children('tbody').empty();\n    }\n    applyFilter();\n    _this.fnDraw(true);\n  };\n  self.fnAddData = function (mData, bRedraw, streaming, streamRecordLimit) {\n    var $t = self.$table;\n    if ($t) {\n      var aoColumns = $t.data('aoColumns') || [];\n      var newData = streaming ? mData.reverse().concat($t.data('originalData')) : $t.data('originalData').concat(mData);\n      if (streaming && streamRecordLimit) {\n        newData.splice(streamRecordLimit);\n      }\n      $t.data('originalData', newData);\n      applyFilter();\n      if (mData.length === 0) {\n        return;\n      }\n      if (aoColumns.length === 0) {\n        mData[0].forEach(function () {\n          aoColumns.push({\n            bVisible: true\n          });\n        });\n      }\n      self.fnDraw(true);\n      if ($('.hue-datatable-search').is(':visible')) {\n        self.fnSearch($('.hue-datatable-search').find('input').val(), true);\n      }\n    }\n  };\n  self.fnSettings = function () {\n    var aoColumns = self.$table.data('aoColumns');\n    return {\n      aoColumns: aoColumns\n    };\n  };\n  self.fnClearTable = function (bRedraw) {\n    var $t = self.$table;\n    if ($t) {\n      if ($t.children('tbody').length > 0) {\n        $t.children('tbody').empty();\n      } else {\n        $t.children('tr').remove();\n      }\n      $t.data('data', []);\n      $t.data('originalData', []);\n      $t.data('aoRows', []);\n      $t.data('aoColumns', []);\n      $t.data('fnDraws', 0);\n    }\n  };\n  self.fnDestroy = function () {\n    self.fnClearTable();\n    self.$table.unwrap();\n    self.$table.data('isScrollAttached', null);\n    self.$table.removeClass('table-huedatatable');\n    if (self.$table.data('oInit')) {\n      self.$table.parents(self.$table.data('oInit')['scrollable']).off('scroll', self.$table.parents(self.$table.data('oInit')['scrollable']).data('scrollFnDt'));\n    }\n  };\n  return self.each(function () {\n    self.$table = $(this);\n    var parent = self.$table.parent();\n    if (parent.hasClass('dataTables_wrapper')) {\n      return;\n    }\n    $('.hue-datatable-search').remove();\n    self.$table.data('data', []);\n    self.$table.data('originalData', []);\n    self.$table.data('aoRows', []);\n    self.$table.data('aoColumns', []);\n    self.$table.data('fnDraws', 0);\n    self.$table.wrap('<div class=\"dataTables_wrapper\"></div>');\n    self.$table.unbind('sort');\n    self.$table.bind('sort', function (e, obj) {\n      self.$table.find('thead tr th:not(:eq(' + obj.originalIndex + '))').removeClass('sorting_desc').removeClass('sorting_asc');\n      self.$table.data('scrollAnimate', true);\n      self.$table.data('scrollAnimateDirect', true);\n      var $cell = self.$table.find('thead tr th:eq(' + obj.originalIndex + ')');\n      if ($cell.hasClass('sorting_desc')) {\n        $cell.removeClass('sorting_desc');\n        self.fnSortColumn(obj, 0);\n      } else if ($cell.hasClass('sorting_asc')) {\n        $cell.removeClass('sorting_asc').addClass('sorting_desc');\n        self.fnSortColumn(obj, 1);\n      } else {\n        $cell.addClass('sorting_asc');\n        self.fnSortColumn(obj, -1);\n      }\n      if (self.$table.data('plugin_jHueTableExtender2')) {\n        self.$table.data('plugin_jHueTableExtender2').drawHeader();\n        self.$table.data('plugin_jHueTableExtender2').drawLockedRows();\n      }\n    });\n    if (typeof oInit !== 'undefined') {\n      self.$table.data('oInit', oInit);\n      var drawTimeout = -1;\n      if (self.$table.data('oInit')['scrollable'] && !self.$table.data('isScrollAttached')) {\n        self.$table.data('isScrollAttached', true);\n        var scrollFn = function scrollFn() {\n          window.clearTimeout(drawTimeout);\n          drawTimeout = window.setTimeout(self.fnDraw, Math.max(100, Math.min(self.$table.data('aoColumns') ? self.$table.data('aoColumns').length : 500, 500)));\n        };\n        window.setTimeout(function () {\n          self.$table.parents(oInit['scrollable']).data('scrollFnDt', scrollFn);\n          self.$table.parents(oInit['scrollable']).on('scroll', scrollFn);\n        }, 1000);\n      }\n    }\n    self.$table.addClass('table-huedatatable');\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport huePubSub from 'utils/huePubSub';\n\n/*\n * jHue row selector plugin\n *\n */\n\nvar pluginName = 'jHueRowSelector',\n  defaults = {};\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.init = function () {\n  var _this = this;\n  $(_this.element).closest('tr').click(function (e) {\n    if ($(e.target).data('row-selector-exclude') || $(e.target).closest('td').hasClass('row-selector-exclude')) {\n      return;\n    }\n    if (!$(e.target).is('a')) {\n      var href = $.trim($(_this.element).attr('href'));\n      if (href != '' && href != '#' && href.indexOf('void(0)') == -1) {\n        huePubSub.publish('open.link', $(_this.element).attr('href'));\n      } else {\n        $(_this.element).click();\n      }\n    }\n  }).css('cursor', 'pointer');\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport huePubSub from 'utils/huePubSub';\n\n/*\n * jHue scroll to left plugin\n * Can be used globally with\n *   $.jHueScrollLeft()\n * or with a target for the scroll left\n *   $(element).jHueScrollLeft()\n *\n *   options:\n *    - threshold: (default 100) value in pixels, scroll amount before the link appears\n */\n\nvar pluginName = 'jHueScrollLeft',\n  defaults = {\n    threshold: 100 // it displays it after 100 px of scroll\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  if ($(element).attr('jHueLeftScrollified') !== 'true') {\n    this.setupScrollLeft();\n  }\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.setupScrollLeft = function () {\n  var _this = this;\n  var link = null,\n    isActive = true;\n  if ($('#jHueScrollLeftAnchor').length > 0) {\n    // just one scroll up per page\n    link = $('#jHueScrollLeftAnchor');\n    $(document).off('click', '#jHueScrollLeftAnchor');\n  } else {\n    link = $('<a></a>').attr('id', 'jHueScrollLeftAnchor').addClass('hueAnchor hueAnchorScroller').attr('href', 'javascript:void(0)').html(\"<i class='fa fa-fw fa-chevron-left'></i>\").appendTo('body');\n  }\n  $(_this.element).attr('jHueLeftScrollified', 'true');\n  if ($(_this.element).is('body')) {\n    setScrollBehavior($(window), $('body, html'));\n  } else {\n    setScrollBehavior($(_this.element), $(_this.element));\n  }\n  function positionOtherAnchors() {\n    var upPosition = $('#jHueScrollUpAnchor').css('right').replace(/px/gi, '') * 1;\n    var right = upPosition - 30;\n    if ($('#jHueScrollUpAnchor').is(':visible')) {\n      right = upPosition;\n    }\n    if ($('#jHueScrollLeftAnchor').is(':visible')) {\n      $('#jHueScrollLeftAnchor').css('right', right + 50 + 'px');\n      right += 50;\n    }\n    $('.hue-datatable-search').css('right', right + 50 + 'px');\n  }\n  function setScrollBehavior(scrolled, scrollable) {\n    scrolled.scroll(function () {\n      if (scrolled.scrollLeft() > _this.options.threshold) {\n        if (link.is(':hidden')) {\n          positionOtherAnchors();\n          if (isActive) {\n            link.fadeIn(200, positionOtherAnchors);\n          }\n        }\n        if ($(_this.element).data('lastScrollLeft') == null || $(_this.element).data('lastScrollLeft') < scrolled.scrollLeft()) {\n          $('#jHueScrollLeftAnchor').data('caller', scrollable);\n        }\n        $(_this.element).data('lastScrollLeft', scrolled.scrollTop());\n      } else {\n        checkForAllScrolls();\n      }\n    });\n  }\n  function checkForAllScrolls() {\n    var _allOk = true;\n    $(document).find(\"[jHueLeftScrollified='true']\").each(function (cnt, item) {\n      if ($(item).is('body')) {\n        if ($(window).scrollLeft() > _this.options.threshold) {\n          _allOk = false;\n          $('#jHueScrollLeftAnchor').data('caller', $('body, html'));\n        }\n      } else if ($(item).scrollLeft() > _this.options.threshold) {\n        _allOk = false;\n        $('#jHueScrollLeftAnchor').data('caller', $(item));\n      }\n    });\n    if (_allOk) {\n      if (isActive) {\n        link.fadeOut(200, positionOtherAnchors);\n      }\n      $('#jHueScrollLeftAnchor').data('caller', null);\n    }\n  }\n  $(document).on('click', '#jHueScrollLeftAnchor', function (event) {\n    if ($('#jHueScrollLeftAnchor').data('caller') != null) {\n      $('#jHueScrollLeftAnchor').data('caller').animate({\n        scrollLeft: 0\n      }, 300, function () {\n        $(document).find(\"[jHueLeftScrollified='true']\").trigger('scroll_update');\n        if ($(document).find(\"[jHueLeftScrollified='true']\").not($('#jHueScrollLeftAnchor').data('caller')).is('body') && $(window).scrollLeft() > _this.options.threshold) {\n          $('#jHueScrollLeftAnchor').data('caller', $('body, html'));\n        } else {\n          checkForAllScrolls();\n        }\n      });\n    }\n    return false;\n  });\n  huePubSub.subscribe('hue.scrollleft.show', function () {\n    isActive = true;\n  });\n  huePubSub.subscribe('hue.scrollleft.hide', function () {\n    isActive = false;\n    if (link.is(':visible')) {\n      link.hide();\n    }\n  });\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n  });\n};\n$[pluginName] = function (options) {\n  new Plugin($('body'), options);\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport huePubSub from 'utils/huePubSub';\n\n/*\n * jHue scroll to top plugin\n * Can be used globally with\n *   $.jHueScrollUp()\n * or with a target for the scroll up\n *   $(element).jHueScrollUp()\n *\n *   options:\n *    - threshold: (default 100) value in pixels, scroll amount before the link appears\n */\n\nvar pluginName = 'jHueScrollUp',\n  defaults = {\n    threshold: 100,\n    // it displays it after 100 px of scroll\n    scrollLeft: false\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  if ($(element).attr('jHueScrollified') !== 'true') {\n    this.setupScrollUp();\n  }\n  if (this.options.scrollLeft) {\n    $(element).jHueScrollLeft(this.options.threshold);\n  }\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.setupScrollUp = function () {\n  var _this = this;\n  var link = null;\n  if ($('#jHueScrollUpAnchor').length > 0) {\n    // just one scroll up per page\n    link = $('#jHueScrollUpAnchor');\n    $(document).off('click', '#jHueScrollUpAnchor');\n  } else {\n    link = $('<a></a>').attr('id', 'jHueScrollUpAnchor').addClass('hueAnchor hueAnchorScroller').attr('href', 'javascript:void(0)').html(\"<i class='fa fa-fw fa-chevron-up'></i>\").appendTo('body');\n  }\n  $(_this.element).attr('jHueScrollified', 'true');\n  if ($(_this.element).is('body')) {\n    setScrollBehavior($(window), $('body, html'));\n  } else {\n    setScrollBehavior($(_this.element), $(_this.element));\n  }\n  function positionOtherAnchors() {\n    var upPosition = $('#jHueScrollUpAnchor').css('right').replace(/px/gi, '') * 1;\n    var right = upPosition - 30;\n    if ($('#jHueScrollUpAnchor').is(':visible')) {\n      right = upPosition;\n    }\n    if ($('#jHueScrollLeftAnchor').is(':visible')) {\n      $('#jHueScrollLeftAnchor').css('right', right + 50 + 'px');\n      right += 50;\n    }\n    $('.hue-datatable-search').css('right', right + 50 + 'px');\n  }\n  huePubSub.subscribe('reposition.scroll.anchor.up', function () {\n    $('#jHueScrollUpAnchor').css('right', '20px');\n    if (!$(_this.element).is('body') && $(_this.element).is(':visible')) {\n      var adjustRight = $(window).width() - ($(_this.element).width() + $(_this.element).offset().left);\n      if (adjustRight > 0) {\n        $('#jHueScrollUpAnchor').css('right', adjustRight + 'px');\n      }\n    }\n    positionOtherAnchors();\n  });\n  function setScrollBehavior(scrolled, scrollable) {\n    scrolled.scroll(function () {\n      if (scrolled.scrollTop() > _this.options.threshold) {\n        if (link.is(':hidden')) {\n          huePubSub.publish('reposition.scroll.anchor.up');\n          link.fadeIn(200, function () {\n            huePubSub.publish('reposition.scroll.anchor.up');\n          });\n        }\n        if ($(_this.element).data('lastScrollTop') == null || $(_this.element).data('lastScrollTop') < scrolled.scrollTop()) {\n          $('#jHueScrollUpAnchor').data('caller', scrollable);\n        }\n        $(_this.element).data('lastScrollTop', scrolled.scrollTop());\n      } else {\n        checkForAllScrolls();\n      }\n    });\n    window.setTimeout(function () {\n      huePubSub.publish('reposition.scroll.anchor.up');\n    }, 0);\n  }\n  function checkForAllScrolls() {\n    var _allOk = true;\n    $(document).find(\"[jHueScrollified='true']\").each(function (cnt, item) {\n      if ($(item).is('body')) {\n        if ($(window).scrollTop() > _this.options.threshold) {\n          _allOk = false;\n          $('#jHueScrollUpAnchor').data('caller', $('body, html'));\n        }\n      } else if ($(item).scrollTop() > _this.options.threshold) {\n        _allOk = false;\n        $('#jHueScrollUpAnchor').data('caller', $(item));\n      }\n    });\n    if (_allOk) {\n      link.fadeOut(200, positionOtherAnchors);\n      $('#jHueScrollUpAnchor').data('caller', null);\n    }\n  }\n  $(document).on('click', '#jHueScrollUpAnchor', function (event) {\n    if ($('#jHueScrollUpAnchor').data('caller') != null) {\n      $('#jHueScrollUpAnchor').data('caller').animate({\n        scrollTop: 0\n      }, 300, function () {\n        if ($(document).find(\"[jHueScrollified='true']\").not($('#jHueScrollUpAnchor').data('caller')).is('body') && $(window).scrollTop() > _this.options.threshold) {\n          $('#jHueScrollUpAnchor').data('caller', $('body, html'));\n        } else {\n          checkForAllScrolls();\n        }\n      });\n    }\n    return false;\n  });\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n  });\n};\n$[pluginName] = function (options) {\n  new Plugin($('body'), options);\n};","/*! selectize clear button plugin by Alexey Petushkov | https://github.com/mentatxx/selectize-plugin-clear | Apache License (v2) */\n\nimport Selectize from '@selectize/selectize';\nwindow.Selectize = Selectize;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n\n/*\n * jHue selector plugin\n * it tranforms a select multiple into a searchable/selectable alphabetical list\n */\n\nvar pluginName = 'jHueSelector',\n  defaults = {\n    selectAllLabel: 'Select all',\n    showSelectAll: true,\n    searchPlaceholder: 'Search',\n    noChoicesFound: 'No choices found for this element',\n    width: 300,\n    height: 200,\n    onChange: function onChange() {}\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.init = function () {\n  var _this = this;\n  var addressBook = [];\n  var selectorContainer = $('<div>');\n  if (this.options.width != 300) {\n    selectorContainer.width(this.options.width);\n  }\n  $(_this.element).hide();\n  $(_this.element).find('option').each(function (cnt, opt) {\n    var initial = $(opt).text().substr(0, 1).toLowerCase();\n    if (addressBook[initial] == null) {\n      addressBook[initial] = [];\n    }\n    addressBook[initial].push($(opt));\n  });\n  var sortedKeys = [];\n  for (var key in addressBook) {\n    if (addressBook.hasOwnProperty(key)) {\n      sortedKeys.push(key);\n    }\n  }\n  sortedKeys.sort();\n  if (sortedKeys.length == 0) {\n    $(_this.element).after($('<div>').addClass('alert').css('margin-top', '-2px').css('float', 'left').html(this.options.noChoicesFound));\n  } else {\n    selectorContainer.addClass('jHueSelector');\n    var body = $('<div>').addClass('jHueSelectorBody');\n    body.appendTo(selectorContainer);\n    var _loop = function _loop() {\n      var key = sortedKeys[i];\n      var ul = $('<ul>');\n      var dividerLi = $('<li>').addClass('selectorDivider');\n      dividerLi.html('<strong>' + key.toUpperCase() + '</strong>');\n      dividerLi.appendTo(ul);\n      $.each(addressBook[key], function (cnt, opt) {\n        var li = $('<li>');\n        var lbl = $('<label>').text(opt.text());\n        var chk = $('<input>').attr('type', 'checkbox').addClass('selector').change(function () {\n          if ($(this).is(':checked')) {\n            $(this).data('opt').attr('selected', 'selected');\n          } else {\n            $(this).data('opt').removeAttr('selected');\n          }\n          _this.options.onChange();\n        }).data('opt', opt).prependTo(lbl);\n        if (opt.is(':selected')) {\n          chk.attr('checked', 'checked');\n        }\n        lbl.appendTo(li);\n        li.appendTo(ul);\n      });\n      ul.appendTo(body);\n    };\n    for (var i = 0; i < sortedKeys.length; i++) {\n      _loop();\n    }\n    var header = $('<div>').addClass('jHueSelectorHeader');\n    header.prependTo(selectorContainer);\n    var selectAll = $('<label>').html('&nbsp;');\n    if (this.options.showSelectAll) {\n      selectAll.text(this.options.selectAllLabel);\n      $('<input>').attr('type', 'checkbox').change(function () {\n        var isChecked = $(this).is(':checked');\n        selectorContainer.find('input.selector:visible').each(function () {\n          if (isChecked) {\n            $(this).prop('checked', true);\n            $(this).data('opt').attr('selected', 'selected');\n          } else {\n            $(this).prop('checked', false);\n            $(this).data('opt').removeAttr('selected');\n          }\n        });\n        if (searchBox.val() != '') {\n          $(this).prop('checked', false);\n        }\n        _this.options.onChange();\n      }).prependTo(selectAll);\n    }\n    selectAll.appendTo(header);\n    var searchBox = $('<input>').attr('type', 'text').attr('placeholder', this.options.searchPlaceholder).keyup(function () {\n      body.find('ul').attr('show', true).show();\n      var q = $.trim($(this).val());\n      if (q != '') {\n        body.find('li.selectorDivider').hide();\n        body.find('label').each(function () {\n          if ($(this).text().toLowerCase().indexOf(q.toLowerCase()) > -1) {\n            $(this).parent().show();\n          } else {\n            $(this).parent().hide();\n          }\n        });\n        body.find('ul').attr('show', false);\n        body.find('ul > *:visible').parent().attr('show', true).find('li.selectorDivider').show();\n      } else {\n        body.find('li.selectorDivider').show();\n        body.find('label').parent().show();\n      }\n      body.find('ul[show=false]').hide();\n      body.find('ul[show=true]').show();\n    });\n    if (this.options.width != 300) {\n      searchBox.css('margin-left', this.options.width - 120 + 'px');\n    }\n    searchBox.prependTo(header);\n    body.height(this.options.height - header.outerHeight());\n    $(_this.element).after(selectorContainer);\n  }\n};\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\n\n/*\n * jHue table extender plugin\n *\n */\n\nvar pluginName = 'jHueTableExtender',\n  defaults = {\n    fixedHeader: false,\n    fixedFirstColumn: false,\n    fixedFirstColumnTopMargin: 0,\n    headerSorting: true,\n    lockSelectedRow: false,\n    firstColumnTooltip: false,\n    classToRemove: 'resultTable',\n    hintElement: null,\n    includeNavigator: true,\n    mainScrollable: window,\n    stickToTopPosition: -1,\n    app: null,\n    labels: {\n      GO_TO_COLUMN: 'Go to column:',\n      PLACEHOLDER: 'column name...',\n      LOCK: 'Click to lock row',\n      UNLOCK: 'Click to unlock row'\n    }\n  };\nfunction Plugin(element, options) {\n  this.element = element;\n  this.setOptions(options);\n  this._name = pluginName;\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n  this.options.labels = $.extend({}, defaults.labels, {\n    GO_TO_COLUMN: I18n('Go to column:'),\n    PLACEHOLDER: I18n('column name...'),\n    LOCK: I18n('Lock this row'),\n    UNLOCK: I18n('Unlock this row'),\n    ROW_DETAILS: I18n('Show row details')\n  }, options ? options.labels : {});\n  this._defaults = defaults;\n  if (this.options.fixedHeader) {\n    drawHeader(this);\n  }\n  if (this.options.fixedFirstColumn) {\n    drawFirstColumn(this);\n  }\n};\nPlugin.prototype.resetSource = function () {\n  var _this = this;\n  if (_this.options.includeNavigator) {\n    var source = [];\n    $(this.element).find('th').each(function () {\n      source.push($(this).text());\n    });\n    $('#jHueTableExtenderNavigator').find('input').data('typeahead').source = source;\n  }\n};\nPlugin.prototype.drawHeader = function (skipCreation) {\n  drawHeader(this, skipCreation);\n};\nPlugin.prototype.drawFirstColumn = function () {\n  drawFirstColumn(this);\n};\nPlugin.prototype.drawLockedRows = function (force) {\n  var _this = this;\n  var $pluginElement = $(_this.element);\n  if ($pluginElement.data('lockedRows')) {\n    var locks = $pluginElement.data('lockedRows');\n    Object.keys(locks).forEach(function (idx) {\n      drawLockedRow(_this, idx.substr(1), force);\n    });\n  }\n};\nPlugin.prototype.init = function () {\n  $.expr[':'].econtains = function (obj, index, meta, stack) {\n    return (obj.textContent || obj.innerText || $(obj).text() || '').toLowerCase() == meta[3].toLowerCase();\n  };\n  var _this = this;\n  if (_this.options.includeNavigator) {\n    var jHueTableExtenderNavigator = $('<div>').attr('id', 'jHueTableExtenderNavigator');\n    $('<a>').attr('href', '#').addClass('pull-right').html('&times;').click(function (e) {\n      e.preventDefault();\n      $(this).parent().hide();\n    }).appendTo(jHueTableExtenderNavigator);\n    $('<label>').html(_this.options.labels.GO_TO_COLUMN + ' <input type=\"text\" placeholder=\"' + _this.options.labels.PLACEHOLDER + '\" />').appendTo(jHueTableExtenderNavigator);\n    jHueTableExtenderNavigator.appendTo('body');\n    $(_this.element).find('tbody').click(function (event) {\n      if ($.trim(getSelection()) == '') {\n        window.setTimeout(function () {\n          $('.rowSelected').removeClass('rowSelected');\n          $('.columnSelected').removeClass('columnSelected');\n          $('.cellSelected').removeClass('cellSelected');\n          $(event.target.parentNode).addClass('rowSelected');\n          $(event.target.parentNode).find('td').addClass('rowSelected');\n          jHueTableExtenderNavigator.css('left', (event.pageX + jHueTableExtenderNavigator.width() > $(window).width() - 10 ? event.pageX - jHueTableExtenderNavigator.width() - 10 : event.pageX) + 'px').css('top', event.pageY + 10 + 'px').show();\n          jHueTableExtenderNavigator.find('input').focus();\n        }, 100);\n      }\n    });\n    var source = [];\n    $(_this.element).find('th').each(function () {\n      source.push($(this).text());\n    });\n    jHueTableExtenderNavigator.find('input').typeahead({\n      source: source,\n      updater: function updater(item) {\n        jHueTableExtenderNavigator.hide();\n        $(_this.element).find('tr td:nth-child(' + ($(_this.element).find('th:econtains(' + item + ')').index() + 1) + ')').addClass('columnSelected');\n        if (_this.options.firstColumnTooltip) {\n          $(_this.element).find('tr td:nth-child(' + ($(_this.element).find('th:econtains(' + item + ')').index() + 1) + ')').each(function () {\n            $(this).attr('rel', 'tooltip').attr('title', '#' + $(this).parent().find('td:first-child').text()).tooltip({\n              placement: 'left'\n            });\n          });\n        }\n        $(_this.element).parent().animate({\n          scrollLeft: $(_this.element).find('th:econtains(' + item + ')').position().left + $(_this.element).parent().scrollLeft() - $(_this.element).parent().offset().left - 30\n        }, 300);\n        $(_this.element).find('tr.rowSelected td:nth-child(' + ($(_this.element).find('th:econtains(' + item + ')').index() + 1) + ')').addClass('cellSelected');\n      }\n    });\n    $(_this.element).parent().bind('mouseleave', function () {\n      jHueTableExtenderNavigator.hide();\n    });\n    jHueTableExtenderNavigator.bind('mouseenter', function (e) {\n      jHueTableExtenderNavigator.show();\n    });\n  }\n  if (_this.options.hintElement != null) {\n    var showAlertTimeout = -1;\n    $(_this.element).find('tbody').mousemove(function () {\n      window.clearTimeout(showAlertTimeout);\n      if ($(_this.options.hintElement).data('show') == null || $(_this.options.hintElement).data('show')) {\n        showAlertTimeout = window.setTimeout(function () {\n          $(_this.options.hintElement).fadeIn();\n        }, 1300);\n      }\n    });\n    $(_this.options.hintElement).find('.close').click(function () {\n      $(_this.options.hintElement).data('show', false);\n    });\n  }\n  if (_this.options.fixedHeader) {\n    drawHeader(_this);\n  }\n  if (_this.options.fixedFirstColumn) {\n    drawFirstColumn(_this);\n  }\n  $(document).on('click dblclick', '.dataTables_wrapper > table tbody tr', function () {\n    $('.dataTables_wrapper > .jHueTableExtenderClonedContainerColumn table tbody tr.selected').removeClass('selected');\n    if ($(this).hasClass('selected')) {\n      $(this).removeClass('selected');\n    } else {\n      $('.dataTables_wrapper > table tbody tr.selected').removeClass('selected');\n      $(this).addClass('selected');\n      $('.dataTables_wrapper > .jHueTableExtenderClonedContainerColumn table tbody tr:eq(' + $(this).index() + ')').addClass('selected');\n    }\n  });\n  $(document).on('dblclick', '.dataTables_wrapper > table tbody tr', function () {\n    if (huePubSub) {\n      huePubSub.publish('table.row.show.details', {\n        idx: $(this).index(),\n        table: $(this).parents('table')\n      });\n    }\n  });\n};\nfunction drawLockedRow(plugin, rowNo, force) {\n  var $pluginElement = $(plugin.element);\n  var lockedRows = $pluginElement.data('lockedRows') || {};\n  var $header = $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainer');\n  var $headerCounter = $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainerCell');\n  $header.addClass('locked');\n  $headerCounter.addClass('locked');\n  function unlock($el) {\n    $header.find('tr td:first-child').filter(function () {\n      return $(this).text() === rowNo + '';\n    }).closest('tr').remove();\n    delete lockedRows['r' + $el.text()];\n    $el.parent().remove();\n    if ($header.find('tbody tr').length == 0) {\n      $header.removeClass('locked');\n      $headerCounter.removeClass('locked');\n    }\n  }\n  if (Object.keys(lockedRows).indexOf('r' + rowNo) === -1 || force) {\n    if (force) {\n      unlock(lockedRows['r' + rowNo].cell.find('td'));\n    }\n    var $clone = $('<tr>');\n    var tHtml = '';\n    var aoColumns = $pluginElement.data('aoColumns');\n    $pluginElement.data('data')[rowNo - 1].forEach(function (col, idx) {\n      tHtml += '<td ' + (aoColumns && !aoColumns[idx].bVisible ? 'style=\"display: none\"' : '') + '>' + col + '</td>';\n    });\n    $clone.html(tHtml);\n    $clone.addClass('locked');\n    $clone.appendTo($header.find('tbody'));\n    $pluginElement.data('lockedRows', lockedRows);\n    var $newTr = $('<tr>');\n    $newTr.addClass('locked').html('<td class=\"pointer unlockable\" title=\"' + plugin.options.labels.UNLOCK + '\"><i class=\"fa fa-unlock muted\"></i>' + rowNo + '</td>').appendTo($headerCounter.find('tbody'));\n    $newTr.find('td').on('click', function () {\n      unlock($(this));\n    });\n    lockedRows['r' + rowNo] = {\n      row: $clone,\n      cell: $newTr\n    };\n  } else {\n    lockedRows['r' + rowNo].row.appendTo($header.find('tbody'));\n    lockedRows['r' + rowNo].cell.appendTo($headerCounter.find('tbody'));\n    lockedRows['r' + rowNo].cell.find('td').on('click', function () {\n      unlock($(this));\n    });\n  }\n}\nfunction drawFirstColumn(plugin) {\n  var $pluginElement = $(plugin.element);\n  if (!$pluginElement.attr('id') && plugin.options.parentId) {\n    $pluginElement.attr('id', 'eT' + plugin.options.parentId);\n  }\n  var mainScrollable = plugin.options.mainScrollable;\n  var originalTh = $(plugin.element).find('thead>tr th:eq(0)');\n  var topPosition;\n  if (plugin.options.clonedContainerPosition == 'absolute') {\n    topPosition = $pluginElement.parent().position().top - $(mainScrollable).scrollTop();\n  } else {\n    topPosition = $pluginElement.parent().offset().top - $(mainScrollable).scrollTop();\n  }\n  $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainerCell').remove();\n  var clonedCell = $('<table>').attr('class', $(plugin.element).attr('class'));\n  clonedCell.removeClass(plugin.options.classToRemove);\n  clonedCell.css('margin-bottom', '0').css('table-layout', 'fixed');\n  var clonedCellTHead = $('<thead>');\n  clonedCellTHead.appendTo(clonedCell);\n  var clonedCellTH = originalTh.clone();\n  clonedCellTH.appendTo(clonedCellTHead);\n  clonedCellTH.width(originalTh.width()).css({\n    'background-color': '#FFFFFF',\n    'border-color': 'transparent'\n  });\n  clonedCellTH.click(function () {\n    originalTh.click();\n  });\n  $('<tbody>').appendTo(clonedCell);\n  var clonedCellContainer = $('<div>').css('background-color', '#FFFFFF').width(originalTh.outerWidth());\n  clonedCell.appendTo(clonedCellContainer);\n  var clonedCellVisibleContainer = $('<div>').attr('id', $(plugin.element).attr('id') + 'jHueTableExtenderClonedContainerCell').addClass('jHueTableExtenderClonedContainerCell').width(originalTh.outerWidth()).css('overflow', 'hidden').css('top', topPosition + 'px');\n  clonedCellVisibleContainer.css('position', plugin.options.clonedContainerPosition || 'fixed');\n  clonedCellContainer.appendTo(clonedCellVisibleContainer);\n  $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainerColumn').remove();\n  var clonedTable = $('<table>').attr('class', $(plugin.element).attr('class')).html('<thead></thead><tbody></tbody>');\n  clonedTable.removeClass(plugin.options.classToRemove);\n  clonedTable.css('margin-bottom', '0').css('table-layout', 'fixed');\n  $(plugin.element).find('thead>tr th:eq(0)').clone().appendTo(clonedTable.find('thead'));\n  var clonedTBody = clonedTable.find('tbody');\n  var clones = $(plugin.element).find('tbody>tr td:nth-child(1)').clone();\n  var h = '';\n  clones.each(function () {\n    h += '<tr><td>' + $(this).html() + '</td></tr>';\n  });\n  clonedTBody.html(h);\n  if (plugin.options.lockSelectedRow) {\n    clonedTBody.find('td').each(function () {\n      var cell = $(this);\n      cell.attr('title', plugin.options.labels.LOCK).addClass('lockable pointer').on('click', function () {\n        drawLockedRow(plugin, $(this).text() * 1);\n      });\n      $('<i>').addClass('fa fa-lock muted').prependTo(cell);\n    });\n  }\n  clonedTable.find('thead>tr th:eq(0)').width(originalTh.width()).css('background-color', '#FFFFFF');\n  var clonedTableContainer = $('<div>').css('background-color', '#FFFFFF').width(originalTh.outerWidth()).height($pluginElement.parent().get(0).scrollHeight);\n  clonedTable.appendTo(clonedTableContainer);\n  var clonedTableVisibleContainer = $('<div>').attr('id', $pluginElement.attr('id') + 'jHueTableExtenderClonedContainerColumn').addClass('jHueTableExtenderClonedContainerColumn').width(originalTh.outerWidth()).height($pluginElement.parent().height()).css('overflow', 'hidden').css('top', topPosition + 'px');\n  clonedTableVisibleContainer.css('position', plugin.options.clonedContainerPosition || 'fixed');\n  clonedTableContainer.appendTo(clonedTableVisibleContainer);\n  clonedTableVisibleContainer.appendTo($pluginElement.parent());\n  clonedCellVisibleContainer.appendTo($pluginElement.parent());\n  window.clearInterval($pluginElement.data('firstcol_interval'));\n  var firstColInt = window.setInterval(function () {\n    if ($pluginElement.parent().height() != $pluginElement.parent().data('h')) {\n      clonedTableContainer.height($pluginElement.parent().get(0).scrollHeight);\n      clonedTableVisibleContainer.height($pluginElement.parent().height());\n      $pluginElement.parent().data('h', clonedTableVisibleContainer.height());\n    }\n  }, 250, plugin.options.app);\n  $pluginElement.data('firstcol_interval', firstColInt);\n  $pluginElement.parent().resize(function () {\n    clonedTableContainer.height($pluginElement.parent().get(0).scrollHeight);\n    clonedTableVisibleContainer.height($pluginElement.parent().height());\n  });\n  $pluginElement.parent().scroll(function () {\n    clonedTableContainer.css('marginTop', -$pluginElement.parent().scrollTop() + plugin.options.fixedFirstColumnTopMargin + 'px');\n  });\n  clonedTableContainer.css('marginTop', -$pluginElement.parent().scrollTop() + plugin.options.fixedFirstColumnTopMargin + 'px');\n  function positionClones() {\n    var pos = plugin.options.stickToTopPosition;\n    if (typeof pos === 'function') {\n      pos = pos();\n    }\n    if (pos > -1) {\n      if ($pluginElement.offset().top < pos) {\n        clonedCellVisibleContainer.css('top', pos + 'px');\n      } else {\n        clonedCellVisibleContainer.css('top', $pluginElement.offset().top + 'px');\n      }\n      clonedTableVisibleContainer.css('top', $pluginElement.offset().top + 'px');\n    } else if (plugin.options.clonedContainerPosition == 'absolute') {\n      clonedTableVisibleContainer.css('top', $pluginElement.parent().position().top + 'px');\n      clonedCellVisibleContainer.css('top', $pluginElement.parent().position().top + 'px');\n    } else {\n      clonedTableVisibleContainer.css('top', $pluginElement.parent().offset().top + 'px');\n      clonedCellVisibleContainer.css('top', $pluginElement.parent().offset().top + 'px');\n    }\n  }\n  positionClones();\n  $(mainScrollable).on('scroll', positionClones);\n}\nfunction drawHeader(plugin, skipCreation) {\n  var $pluginElement = $(plugin.element);\n  if (!$pluginElement.attr('id') && plugin.options.parentId) {\n    $pluginElement.attr('id', 'eT' + plugin.options.parentId);\n  }\n  if (typeof skipCreation === 'undefined') {\n    var mainScrollable = plugin.options.mainScrollable;\n    $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainer').remove();\n    var clonedTable = $('<table>').attr('class', $(plugin.element).attr('class'));\n    clonedTable.removeClass(plugin.options.classToRemove);\n    clonedTable.css('margin-bottom', '0').css('table-layout', 'fixed');\n    var clonedTableTHead = $('<thead>');\n    clonedTableTHead.appendTo(clonedTable);\n    var clonedTableTR = $pluginElement.find('thead>tr').clone();\n    clonedTableTR.appendTo(clonedTableTHead);\n    $('<tbody>').appendTo(clonedTable);\n    clonedTable.find('thead>tr th').wrapInner('<span></span>');\n    $pluginElement.find('thead>tr th').each(function (i) {\n      var originalTh = $(this);\n      originalTh.removeAttr('data-bind');\n      clonedTable.find('thead>tr th:eq(' + i + ')').width(originalTh.width()).css('background-color', '#FFFFFF').click(function () {\n        originalTh.click();\n        if (plugin.options.headerSorting) {\n          clonedTable.find('thead>tr th').attr('class', 'sorting');\n        }\n        $(this).attr('class', originalTh.attr('class'));\n      });\n    });\n    var clonedTableContainer = $('<div>').width($pluginElement.outerWidth());\n    clonedTable.appendTo(clonedTableContainer);\n    var topPosition;\n    if (plugin.options.clonedContainerPosition == 'absolute') {\n      topPosition = $pluginElement.parent().position().top - $(mainScrollable).scrollTop();\n    } else {\n      topPosition = $pluginElement.parent().offset().top - $(mainScrollable).scrollTop();\n    }\n    var clonedTableVisibleContainer = $('<div>').attr('id', $pluginElement.attr('id') + 'jHueTableExtenderClonedContainer').addClass('jHueTableExtenderClonedContainer').width($pluginElement.parent().width()).css('overflow-x', 'hidden').css('top', topPosition + 'px');\n    clonedTableVisibleContainer.css('position', plugin.options.clonedContainerPosition || 'fixed');\n    clonedTableContainer.appendTo(clonedTableVisibleContainer);\n    clonedTableVisibleContainer.prependTo($pluginElement.parent());\n    var throttledHeaderPadding = function throttledHeaderPadding() {\n      var firstCellWidth = clonedTable.find('thead>tr th:eq(0)').outerWidth();\n      clonedTable.find('thead>tr th').each(function () {\n        var leftPosition = $(this).position().left - firstCellWidth;\n        if (leftPosition + $(this).outerWidth() > 0 && leftPosition < 0) {\n          if ($(this).find('span').width() + -leftPosition < $(this).outerWidth() - 20) {\n            // 20 is the sorting css width\n            $(this).find('span').css('paddingLeft', -leftPosition);\n          }\n        } else {\n          $(this).find('span').css('paddingLeft', 0);\n        }\n      });\n    };\n    var scrollTimeout = -1;\n    $pluginElement.parent().scroll(function () {\n      var scrollLeft = $(this).scrollLeft();\n      clonedTableVisibleContainer.scrollLeft(scrollLeft);\n      window.clearTimeout(scrollTimeout);\n      scrollTimeout = window.setTimeout(throttledHeaderPadding, 200);\n    });\n    $pluginElement.bind('headerpadding', function () {\n      scrollTimeout = window.setTimeout(throttledHeaderPadding, 200);\n    });\n    clonedTableVisibleContainer.scrollLeft($pluginElement.parent().scrollLeft());\n    $pluginElement.parent().data('w', clonedTableVisibleContainer.width());\n    window.clearInterval($pluginElement.data('header_interval'));\n    var headerInt = window.setInterval(function () {\n      if ($pluginElement.parent().width() != $pluginElement.parent().data('w')) {\n        clonedTableVisibleContainer.width($pluginElement.parent().width());\n        $pluginElement.parent().data('w', clonedTableVisibleContainer.width());\n        $pluginElement.find('thead>tr th').each(function (i) {\n          clonedTable.find('thead>tr th:eq(' + i + ')').width($(this).width()).css('background-color', '#FFFFFF');\n        });\n      }\n    }, 250, plugin.options.app);\n    $pluginElement.data('header_interval', headerInt);\n    $pluginElement.parent().resize(function () {\n      clonedTableVisibleContainer.width($(this).width());\n    });\n    var positionClones = function positionClones() {\n      var pos = plugin.options.stickToTopPosition;\n      if (typeof pos === 'function') {\n        pos = pos();\n      }\n      if (pos > -1) {\n        if ($pluginElement.offset().top < pos) {\n          clonedTableVisibleContainer.css('top', pos + 'px');\n        } else {\n          clonedTableVisibleContainer.css('top', $pluginElement.offset().top + 'px');\n        }\n      } else if (plugin.options.clonedContainerPosition == 'absolute') {\n        clonedTableVisibleContainer.css('top', $pluginElement.parent().position().top + 'px');\n      } else {\n        clonedTableVisibleContainer.css('top', $pluginElement.parent().offset().top + 'px');\n      }\n    };\n    positionClones();\n    $(mainScrollable).on('scroll', positionClones);\n  } else {\n    $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainer').children('div').width($pluginElement.outerWidth());\n    $pluginElement.find('thead>tr th').each(function (i) {\n      var originalTh = $(this);\n      $('#' + $pluginElement.attr('id') + 'jHueTableExtenderClonedContainer').find('thead>tr th:eq(' + i + ')').width(originalTh.width()).attr('class', originalTh.attr('class'));\n    });\n  }\n}\nfunction getSelection() {\n  var t = '';\n  if (window.getSelection) {\n    t = window.getSelection();\n  } else if (document.getSelection) {\n    t = document.getSelection();\n  } else if (document.selection) {\n    t = document.selection.createRange().text;\n  }\n  return t.toString();\n}\n$.fn[pluginName] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + pluginName)) {\n      $.data(this, 'plugin_' + pluginName, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + pluginName).resetSource();\n      $.data(this, 'plugin_' + pluginName).setOptions(options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport deXSS from 'utils/html/deXSS';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nvar PLUGIN_NAME = 'jHueTableExtender2';\nvar DEFAULT_OPTIONS = {\n  fixedHeader: true,\n  fixedFirstColumn: true,\n  fixedFirstColumnTopMargin: 0,\n  headerSorting: true,\n  lockSelectedRow: true,\n  firstColumnTooltip: false,\n  classToRemove: 'resultTable',\n  hintElement: null,\n  mainScrollable: window,\n  app: null,\n  stickToTopPosition: -1,\n  labels: {\n    GO_TO_COLUMN: 'Go to column:',\n    PLACEHOLDER: 'column name...',\n    LOCK: 'Lock row',\n    UNLOCK: 'Unlock row',\n    ROW_DETAILS: 'Show row details'\n  }\n};\nfunction Plugin(element, options) {\n  var self = this;\n  self.disposeFunctions = [];\n  self.lockedRows = {};\n  self.setOptions(options); // Sets self.options\n\n  self.$element = $(element);\n  self.$parent = self.$element.parent();\n  self.$mainScrollable = $(self.options.mainScrollable);\n  self.lastHeaderWidth = 0;\n  self.drawHeader(); // Sets self.headerRowContainer, self.thMapping\n  self.drawFirstColumn(); // Sets self.firstColumnInner, self.firstColumnTopCell and self.firstColumn\n  self.drawLockedRows();\n  var manyColumns = self.thMapping.length > 20;\n  var sortAdjustment = self.options.noSort ? 10 : 20; // 20 is the sorting css width\n\n  var firstCellWidth, leftPosition, th, thi, leftPadding;\n  var throttledHeaderPadding = function throttledHeaderPadding() {\n    firstCellWidth = self.options.fixedFirstColumn ? self.firstColumnTopCell.outerWidth() : 0;\n    for (thi = 0; thi < self.thMapping.length; thi++) {\n      th = self.thMapping[thi];\n      if (!th.original.is(':visible')) {\n        continue;\n      }\n      leftPosition = th.clone.position().left - firstCellWidth;\n      if (leftPosition + th.clone.outerWidth() > 0 && leftPosition < 0) {\n        if (th.cloneSpan.width() - leftPosition < th.clone.outerWidth() - sortAdjustment) {\n          leftPadding = -leftPosition;\n        } else {\n          leftPadding = th.clone.outerWidth() - sortAdjustment - th.cloneSpan.width();\n        }\n        th.cloneSpan.css('paddingLeft', leftPadding);\n      } else {\n        th.cloneSpan.css('paddingLeft', 0);\n      }\n    }\n  };\n  var scrollTimeout = -1;\n  var headerScroll = function headerScroll() {\n    self.headerRowContainer.scrollLeft(self.$parent.scrollLeft());\n    if (manyColumns) {\n      window.clearTimeout(scrollTimeout);\n      scrollTimeout = window.setTimeout(throttledHeaderPadding, 200);\n    } else {\n      throttledHeaderPadding();\n    }\n  };\n  self.$parent.on('scroll', headerScroll);\n  self.disposeFunctions.push(function () {\n    self.$parent.off('scroll', headerScroll);\n  });\n  self.$element.bind('headerpadding', function () {\n    window.clearTimeout(scrollTimeout);\n    scrollTimeout = window.setTimeout(throttledHeaderPadding, 200);\n  });\n  self.disposeFunctions.push(function () {\n    self.$element.unbind('headerpadding');\n  });\n  var redrawSubscription = huePubSub.subscribe('table.extender.redraw', function (parentId) {\n    if (parentId === self.options.parentId) {\n      self.redraw();\n    }\n  });\n  self.disposeFunctions.push(function () {\n    redrawSubscription.remove();\n  });\n  var hideSubscription = huePubSub.subscribe('table.extender.hide', function (parentId) {\n    if (parentId == self.options.parentId) {\n      self.headerRowContainer.hide();\n      self.firstColumnInner.hide();\n      self.firstColumnTopCell.hide();\n      self.firstColumn.hide();\n    }\n  });\n  self.disposeFunctions.push(function () {\n    hideSubscription.remove();\n  });\n  var adjustSizes = function adjustSizes() {\n    if (self.lastHeaderWidth !== self.$parent.width()) {\n      self.lastHeaderWidth = self.$parent.width();\n      self.headerRowContainer.width(self.lastHeaderWidth);\n    }\n    for (thi = 0; thi < self.thMapping.length; thi++) {\n      th = self.thMapping[thi];\n      if (!th.original.is(':visible')) {\n        continue;\n      }\n      if (th.clone.lastWidth !== th.original.width()) {\n        th.clone.lastWidth = th.original.width();\n        th.clone.width(th.clone.lastWidth);\n      }\n    }\n    if (self.headerRowContainer.scrollLeft() !== self.$parent.scrollLeft()) {\n      self.headerRowContainer.scrollLeft(self.$parent.scrollLeft());\n      throttledHeaderPadding();\n    }\n  };\n  adjustSizes();\n  var sizeInterval = window.setInterval(adjustSizes, 300, self.options.app);\n  self.disposeFunctions.push(function () {\n    window.clearInterval(sizeInterval);\n  });\n  var clickHandler = function clickHandler() {\n    if ($(this).hasClass('selected')) {\n      self.$parent.find('.selected').removeClass('selected');\n    } else {\n      self.$parent.find('.selected').removeClass('selected');\n      $(this).addClass('selected');\n      self.$parent.find('.fixed-first-column table tbody tr:eq(' + $(this).index() + ')').addClass('selected');\n    }\n  };\n  var overHandler = function overHandler() {\n    self.$parent.find('.fixed-first-column table tbody tr:eq(' + $(this).index() + ') td').addClass('fixed-first-col-hover');\n  };\n  var outHandler = function outHandler() {\n    self.$parent.find('.fixed-first-column table tbody tr td').removeClass('fixed-first-col-hover');\n  };\n  self.$parent.children('table').on('click dblclick', 'tbody tr', clickHandler);\n  self.$parent.children('table').on('mouseover', 'tbody tr', overHandler);\n  self.$parent.children('table').on('mouseout', 'tbody tr', outHandler);\n  self.disposeFunctions.push(function () {\n    self.$parent.children('table').off('click dblclick', 'tbody tr', clickHandler);\n    self.$parent.children('table').on('mouseover', 'tbody tr', overHandler);\n    self.$parent.children('table').on('mouseout', 'tbody tr', outHandler);\n  });\n  if (!self.options.disableTopPosition) {\n    self.repositionHeader();\n    var scrollFunction = self.repositionHeader.bind(self);\n    self.$mainScrollable.on('scroll', scrollFunction);\n    self.disposeFunctions.push(function () {\n      self.$mainScrollable.off('scroll', scrollFunction);\n    });\n  }\n}\nPlugin.prototype.redraw = function () {\n  var self = this;\n  self.drawHeader();\n  self.drawFirstColumn();\n  self.drawLockedRows(true);\n  self.repositionHeader();\n  window.setTimeout(function () {\n    self.headerRowContainer.scrollLeft(self.$parent.scrollLeft());\n    self.$element.trigger('headerpadding');\n  }, 300);\n};\nPlugin.prototype.destroy = function () {\n  var self = this;\n  self.disposeFunctions.forEach(function (disposeFunction) {\n    disposeFunction();\n  });\n  if (self.headerRowContainer) {\n    self.headerRowContainer.remove();\n  }\n  if (self.firstColumnInner) {\n    self.firstColumnInner.remove();\n  }\n  if (self.firstColumnTopCell) {\n    self.firstColumnTopCell.remove();\n  }\n  if (self.firstColumn) {\n    self.firstColumn.remove();\n  }\n  self.$element.data('plugin_' + PLUGIN_NAME, null);\n};\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, DEFAULT_OPTIONS, options);\n  this.options.labels = $.extend({}, DEFAULT_OPTIONS.labels, {\n    GO_TO_COLUMN: I18n('Go to column:'),\n    PLACEHOLDER: I18n('column name...'),\n    LOCK: I18n('Lock this row'),\n    UNLOCK: I18n('Unlock this row'),\n    ROW_DETAILS: I18n('Show row details')\n  }, options ? options.labels : {});\n};\nPlugin.prototype.repositionHeader = function () {\n  var self = this;\n  if (self.options.disableTopPosition) {\n    return;\n  }\n  var pos = self.options.stickToTopPosition;\n  var topPos = 0;\n  var firstColTopPos = 0;\n  if (typeof pos === 'function') {\n    pos = pos();\n  }\n  var isFixed = false;\n  if (pos > -1) {\n    if (self.$element.offset().top < pos) {\n      topPos = pos;\n      isFixed = true;\n    } else {\n      topPos = self.$element.offset().top;\n      isFixed = false;\n    }\n    firstColTopPos = self.$element.offset().top;\n  } else if (self.options.clonedContainerPosition == 'absolute') {\n    topPos = self.$parent.position().top;\n    firstColTopPos = topPos;\n  } else {\n    topPos = self.$parent.offset().top;\n    firstColTopPos = topPos;\n  }\n  if (pos > -1) {\n    var fixCSS = {\n      top: '',\n      left: self.$parent.position().left + 'px',\n      position: 'absolute'\n    };\n    self.firstColumn.css(fixCSS);\n    if (isFixed) {\n      fixCSS = {\n        top: topPos + 'px',\n        left: '',\n        position: 'fixed'\n      };\n    }\n    self.firstColumnTopCell.css(fixCSS);\n    self.headerRowContainer.css(fixCSS);\n  } else {\n    self.firstColumn.scrollTop(self.$mainScrollable.scrollTop());\n    self.firstColumn.css('top', firstColTopPos + 'px');\n    self.headerRowContainer.css('top', topPos + 'px');\n    self.firstColumnTopCell.css('top', topPos + 'px');\n  }\n};\nPlugin.prototype.drawHeader = function () {\n  var self = this;\n  if (!self.$element.attr('id') && self.options.parentId) {\n    self.$element.attr('id', 'eT' + self.options.parentId);\n  }\n  $('#' + self.$element.attr('id') + 'jHueTableExtenderClonedContainer').remove();\n  var clonedTable = $('<table>').attr('class', self.$element.attr('class'));\n  clonedTable.removeClass(self.options.classToRemove);\n  clonedTable.css('margin-bottom', '0').css('table-layout', 'fixed');\n  var clonedTableTHead = $('<thead>');\n  clonedTableTHead.appendTo(clonedTable);\n  var clonedTableTR = self.$element.find('thead>tr').clone();\n  clonedTableTR.appendTo(clonedTableTHead);\n  $('<tbody>').appendTo(clonedTable);\n  var clonedThs = clonedTable.find('thead>tr th');\n  clonedThs.wrapInner('<span></span>');\n  if (typeof self.$element.data('updateThWidthsInterval') !== 'undefined') {\n    window.clearInterval(self.$element.data('updateThWidthsInterval'));\n  }\n  self.thMapping = [];\n  var totalThWidth = 0;\n  self.$element.find('thead>tr th').each(function (i) {\n    var originalTh = $(this);\n    originalTh.removeAttr('data-bind');\n    var clonedTh = $(clonedThs[i]).css('background-color', '#FFFFFF');\n    clonedTh.click(function () {\n      originalTh.click();\n      if (self.options.headerSorting) {\n        clonedThs.attr('class', 'sorting');\n      }\n      $(this).attr('class', originalTh.attr('class'));\n    });\n    clonedTh.width(originalTh.width());\n    totalThWidth += originalTh.width();\n    self.thMapping.push({\n      original: originalTh,\n      clone: clonedTh,\n      cloneSpan: clonedTh.children().first()\n    });\n  });\n  var headerRowDiv = $('<div>');\n  clonedTable.appendTo(headerRowDiv);\n  var topPosition;\n  if (self.options.clonedContainerPosition === 'absolute') {\n    topPosition = self.$parent.position().top - self.$mainScrollable.scrollTop();\n  } else {\n    topPosition = self.$parent.offset().top - self.$mainScrollable.scrollTop();\n  }\n  var headerRowContainer = $('<div>').attr('id', self.$element.attr('id') + 'jHueTableExtenderClonedContainer').addClass('fixed-header-row').width(totalThWidth).css('overflow-x', 'hidden');\n  if (!self.options.disableTopPosition) {\n    headerRowContainer.css('top', topPosition + 'px');\n  }\n  headerRowContainer.css('position', self.options.clonedContainerPosition || 'fixed');\n  self.lastHeaderWidth = self.$parent.width();\n  headerRowContainer.width(self.lastHeaderWidth);\n  headerRowDiv.appendTo(headerRowContainer);\n  headerRowContainer.prependTo(self.$parent);\n  headerRowContainer.scrollLeft(self.$parent.scrollLeft());\n  self.headerRowContainer = headerRowContainer;\n  self.$mainScrollable.trigger('scroll');\n};\nPlugin.prototype.drawFirstColumn = function (repositionHeader) {\n  var self = this;\n  if (!self.options.fixedFirstColumn) {\n    self.firstColumnInner = $();\n    self.firstColumnTopCell = $();\n    self.firstColumn = $();\n    return;\n  }\n  if (!self.$element.attr('id') && self.options.parentId) {\n    self.$element.attr('id', 'eT' + self.options.parentId);\n  }\n  var originalTh = self.$element.find('thead>tr th:eq(0)');\n  var topPosition;\n  if (self.options.clonedContainerPosition === 'absolute') {\n    topPosition = self.$parent.position().top - self.$mainScrollable.scrollTop();\n  } else {\n    topPosition = self.$parent.offset().top - self.$mainScrollable.scrollTop();\n  }\n  $('#' + self.$element.attr('id') + 'jHueTableExtenderClonedContainerCell').remove();\n  var clonedCell = $('<table>').attr('class', self.$element.attr('class'));\n  clonedCell.removeClass(self.options.classToRemove);\n  clonedCell.css('margin-bottom', '0').css('table-layout', 'fixed');\n  var clonedCellTHead = $('<thead><tr></tr></thead>');\n  clonedCellTHead.appendTo(clonedCell);\n  var clonedCellTH = originalTh.clone();\n  clonedCellTH.appendTo(clonedCellTHead.find('tr'));\n  clonedCellTH.width(originalTh.width()).css({\n    'background-color': '#FFFFFF',\n    'border-color': 'transparent'\n  });\n  clonedCellTH.click(function () {\n    originalTh.click();\n  });\n  $('<tbody>').appendTo(clonedCell);\n  var clonedCellContainer = $('<div>').css('background-color', '#FFFFFF').width(originalTh.outerWidth());\n  clonedCell.appendTo(clonedCellContainer);\n  var firstColumnTopCell = $('<div>').attr('id', self.$element.attr('id') + 'jHueTableExtenderClonedContainerCell').addClass('fixed-first-cell').width(originalTh.outerWidth()).css('overflow', 'hidden').css('top', topPosition + 'px');\n  firstColumnTopCell.css('position', self.options.clonedContainerPosition || 'fixed');\n  clonedCellContainer.appendTo(firstColumnTopCell);\n  $('#' + self.$element.attr('id') + 'jHueTableExtenderClonedContainerColumn').remove();\n  var clonedTable = $('<table>').attr('class', self.$element.attr('class')).html('<thead><tr></tr></thead><tbody></tbody>');\n  clonedTable.removeClass(self.options.classToRemove);\n  clonedTable.css('margin-bottom', '0').css('table-layout', 'fixed');\n  self.$element.find('thead>tr th:eq(0)').clone().appendTo(clonedTable.find('thead tr'));\n  var clonedTBody = clonedTable.find('tbody');\n  var clones = self.$element.find('tbody>tr td:nth-child(1)').clone();\n  var h = '';\n  var foundEmptyTh = false;\n  clones.each(function () {\n    if ($(this).html() === '') {\n      foundEmptyTh = true;\n    }\n    h += '<tr><td>' + $(this).html() + '</td></tr>';\n  });\n  if (foundEmptyTh) {\n    // In IE it's sometimes empty so we'll redraw in a bit\n    window.setTimeout(self.drawFirstColumn.bind(self), 200);\n    self.firstColumnInner = $();\n    self.firstColumnTopCell = $();\n    self.firstColumn = $();\n    return;\n  }\n  clonedTBody.html(h);\n  if (self.options.lockSelectedRow) {\n    clonedTBody.find('td').each(function (idx) {\n      var cell = $(this);\n      cell.addClass('lockable');\n      $('<i>').addClass('fa fa-lock pointer muted').prependTo(cell).on('click', function () {\n        self.drawLockedRow($(this).parent().text() * 1);\n      }).attr('title', self.options.labels.LOCK);\n      $('<i>').addClass('fa fa-expand pointer muted').prependTo(cell).on('click', function () {\n        huePubSub.publish('table.row.show.details', {\n          idx: idx,\n          table: self.$element\n        });\n      }).attr('title', self.options.labels.ROW_DETAILS);\n    });\n  }\n  clonedTable.find('thead>tr th:eq(0)').width(originalTh.width()).css('background-color', '#FFFFFF');\n  var firstColumnInner = $('<div>').css('background-color', '#FFFFFF').width(originalTh.outerWidth()).height(self.$parent.get(0).scrollHeight);\n  clonedTable.appendTo(firstColumnInner);\n  var firstColumn = $('<div>').attr('id', self.$element.attr('id') + 'jHueTableExtenderClonedContainerColumn').addClass('fixed-first-column').width(originalTh.outerWidth()).height(self.$parent.height()).css('overflow', 'hidden').css('top', topPosition + 'px');\n  firstColumn.css('position', self.options.clonedContainerPosition || 'fixed');\n  firstColumnInner.appendTo(firstColumn);\n  firstColumn.insertAfter(self.$element.prev());\n  firstColumnTopCell.insertAfter(firstColumn);\n  self.firstColumnInner = firstColumnInner;\n  self.firstColumnTopCell = firstColumnTopCell;\n  self.firstColumn = firstColumn;\n  if (repositionHeader) {\n    self.repositionHeader();\n  }\n};\nPlugin.prototype.drawLockedRows = function (force) {\n  var self = this;\n  if (Object.keys(self.lockedRows).length === 0) {\n    self.headerRowContainer.find('tbody').empty();\n    self.headerRowContainer.removeClass('locked');\n    self.firstColumnTopCell.removeClass('locked');\n  } else {\n    self.headerRowContainer.addClass('locked');\n    self.firstColumnTopCell.addClass('locked');\n    Object.keys(self.lockedRows).forEach(function (idx) {\n      self.drawLockedRow(idx.substr(1), force);\n    });\n  }\n};\nPlugin.prototype.drawLockedRow = function (rowNo, force) {\n  var self = this;\n  function unlock($el) {\n    self.headerRowContainer.find('tr td:first-child').filter(function () {\n      return $(this).text() === rowNo + '';\n    }).closest('tr').remove();\n    delete self.lockedRows['r' + $el.text()];\n    $el.parent().remove();\n    if (self.headerRowContainer.find('tbody tr').length == 0) {\n      self.headerRowContainer.removeClass('locked');\n      self.firstColumnTopCell.removeClass('locked');\n    }\n  }\n  if (Object.keys(self.lockedRows).indexOf('r' + rowNo) === -1 || force) {\n    if (force) {\n      unlock(self.lockedRows['r' + rowNo].cell.find('td'));\n    }\n    var $clone = $('<tr>').addClass('locked');\n    var tHtml = '';\n    var aoColumns = self.$element.data('aoColumns');\n    self.$element.data('data')[rowNo - 1].forEach(function (col, idx) {\n      tHtml += '<td ' + (aoColumns && !aoColumns[idx].bVisible ? 'style=\"display: none\"' : '') + '>' + deXSS(col) + '</td>';\n    });\n    $clone.html(tHtml);\n    $clone.appendTo(self.headerRowContainer.find('tbody'));\n    var $newTr = $('<tr>');\n    $newTr.addClass('locked').html('<td class=\"pointer unlockable\" title=\"' + self.options.labels.UNLOCK + '\"><i class=\"fa fa-unlock muted\"></i>' + rowNo + '</td>').appendTo(self.firstColumnTopCell.find('tbody'));\n    $newTr.find('td').on('click', function () {\n      unlock($(this));\n    });\n    self.lockedRows['r' + rowNo] = {\n      row: $clone,\n      cell: $newTr\n    };\n  } else {\n    self.lockedRows['r' + rowNo].row.appendTo(self.headerRowContainer.find('tbody'));\n    self.lockedRows['r' + rowNo].cell.appendTo(self.firstColumnTopCell.find('tbody'));\n    self.lockedRows['r' + rowNo].cell.find('td').on('click', function () {\n      unlock($(this));\n    });\n  }\n};\n$.fn[PLUGIN_NAME] = function (options) {\n  return this.each(function () {\n    if ($.data(this, 'plugin_' + PLUGIN_NAME)) {\n      $.data(this, 'plugin_' + PLUGIN_NAME).destroy();\n    }\n    $.data(this, 'plugin_' + PLUGIN_NAME, new Plugin(this, options));\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n\n/*\n * jHue table scroller plugin\n *\n * Three data attributes can be set on the table to modify the default behavior of the plugin:\n * - data-tablescroller-min-height=\"N\" where N is a value in pixels: specifies a minimum height for the scrolling table,\n *      overriding the default 500px set by the plugin\n * - data-tablescroller-min-height-disable=\"true\": disable enforcing a minimum height for the table\n * - data-tablescroller-disable=\"true\": disable the plugin for the specific table\n * - data-tablescroller-enforce-height=\"true\": displays the table at its maximum height accordingly to the page\n */\n\nvar PLUGIN_NAME = 'jHueTableScroller',\n  defaults = {\n    minHeight: 300,\n    maxHeight: -1,\n    heightAfterCorrection: 40\n  };\nfunction Plugin(element, options) {\n  this.disposeFunctions = [];\n  this.element = element;\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = PLUGIN_NAME;\n  this.init();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n  resizeScrollingTable(this);\n};\nPlugin.prototype.init = function () {\n  var _this = this;\n  $(_this.element).data('original-height', $(_this.element).height());\n  var disableScrollingTable = $(_this.element).find('table').eq(0).data('tablescroller-disable');\n  if (disableScrollingTable == null || disableScrollingTable !== true) {\n    resizeScrollingTable(_this);\n    var resizeTimeout = -1;\n    var onResize = function onResize() {\n      window.clearTimeout(resizeTimeout);\n      resizeTimeout = window.setTimeout(function () {\n        resizeScrollingTable(_this);\n      }, 400);\n    };\n    $(window).on('resize', onResize);\n    this.disposeFunctions.push(function () {\n      window.clearTimeout(resizeTimeout);\n      $(window).off('resize', onResize);\n    });\n  }\n};\nPlugin.prototype.destroy = function () {\n  var $element = $(this.element);\n  this.disposeFunctions.forEach(function (disposeFunction) {\n    disposeFunction();\n  });\n  $element.data('plugin_' + PLUGIN_NAME, null);\n};\nfunction resizeScrollingTable(_this) {\n  var el = _this.element;\n  $(el).css('overflow-y', '').css('height', '');\n  $(el).css('overflow-x', 'auto');\n  var heightAfter = _this.options.heightAfterCorrection;\n  $(el).nextAll(':visible').each(function () {\n    heightAfter += $(this).outerHeight(true);\n  });\n  var heightCondition = $(el).height() > $(window).height() - $(el).offset().top - heightAfter;\n  var enforceHeight = $(_this.element).find('table').eq(0).data('tablescroller-enforce-height');\n  if (enforceHeight !== undefined && enforceHeight == true) {\n    heightCondition = true;\n  }\n  var fixedHeight = $(_this.element).find('table').eq(0).data('tablescroller-fixed-height') || _this.options.maxHeight;\n  if (heightCondition) {\n    var specificMinHeight = $(el).find('table').eq(0).data('tablescroller-min-height');\n    var minHeightVal = _this.options.minHeight;\n    if (!isNaN(parseFloat(specificMinHeight)) && isFinite(specificMinHeight)) {\n      minHeightVal = parseFloat(specificMinHeight);\n    }\n    var disableMinHeight = $(_this.element).find('table').eq(0).data('tablescroller-min-height-disable');\n    if (disableMinHeight != null && disableMinHeight == true) {\n      if (heightCondition) {\n        $(el).css('overflow-y', 'auto').height(fixedHeight > -1 ? fixedHeight : $(window).height() - $(el).offset().top - heightAfter);\n      }\n    } else if ($(window).height() - $(el).offset().top - heightAfter > minHeightVal) {\n      $(el).css('overflow-y', 'auto').height(fixedHeight > -1 ? fixedHeight : $(window).height() - $(el).offset().top - heightAfter);\n    } else {\n      if ($(el).data('original-height') > minHeightVal) {\n        $(el).css('overflow-y', 'auto').height(minHeightVal);\n      }\n      if (fixedHeight > -1) {\n        $(el).css('overflow-y', 'auto').css('maxHeight', fixedHeight);\n      }\n    }\n  } else if (fixedHeight > -1) {\n    $(el).css('overflow-y', 'auto').css('maxHeight', fixedHeight);\n  }\n}\n$.fn[PLUGIN_NAME] = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_' + PLUGIN_NAME)) {\n      $.data(this, 'plugin_' + PLUGIN_NAME, new Plugin(this, options));\n    } else {\n      $.data(this, 'plugin_' + PLUGIN_NAME).setOptions(options);\n    }\n  });\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\n\n/*\n * jHue title updater plugin\n *\n */\n\nvar pluginName = 'jHueTitleUpdater',\n  defaults = {\n    message: '',\n    reset: false\n  };\nfunction Plugin(options) {\n  this.options = $.extend({}, defaults, options);\n  this._defaults = defaults;\n  this._name = pluginName;\n  this.updateStatusBar();\n}\nPlugin.prototype.setOptions = function (options) {\n  this.options = $.extend({}, defaults, options);\n};\nPlugin.prototype.updateStatusBar = function () {\n  var _this = this;\n  if (_this.options.reset && $(document).data('jHueTitleUpdaterOriginal') != null) {\n    document.title = $(document).data('jHueTitleUpdaterOriginal');\n    $(document).data('jHueTitleUpdaterOriginal', null);\n  } else if (_this.options.message != '') {\n    if ($(document).data('jHueTitleUpdaterOriginal') == null) {\n      $(document).data('jHueTitleUpdaterOriginal', document.title);\n    }\n    document.title = _this.options.message + ' - ' + $(document).data('jHueTitleUpdaterOriginal');\n  }\n};\n$[pluginName] = function () {};\n$[pluginName].reset = function () {\n  new Plugin({\n    reset: true\n  });\n};\n$[pluginName].set = function (message) {\n  new Plugin({\n    message: message\n  });\n};","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// TODO: depends on Ace\n\nvar clearGutterCss = function clearGutterCss(cssClass, session, startRow, endRow) {\n  for (var row = startRow; row <= endRow; row++) {\n    session.removeGutterDecoration(row, cssClass);\n  }\n};\nvar setGutterCss = function setGutterCss(cssClass, session, startRow, endRow) {\n  for (var row = startRow; row <= endRow; row++) {\n    session.addGutterDecoration(row, cssClass);\n  }\n};\nvar AceAnchoredRange = /*#__PURE__*/function () {\n  function AceAnchoredRange(editor) {\n    _classCallCheck(this, AceAnchoredRange);\n    this.editor = editor;\n    var doc = this.editor.getSession().doc;\n    this.startAnchor = doc.createAnchor(0, 0);\n    this.endAnchor = doc.createAnchor(0, 0);\n    this.changed = false;\n    this.markerCssClasses = {};\n    this.gutterCssClasses = {};\n    this.refreshThrottle = -1;\n    this.attachChangeHandler();\n  }\n  return _createClass(AceAnchoredRange, [{\n    key: \"attachChangeHandler\",\n    value: function attachChangeHandler() {\n      var _this = this;\n      var throttledRefresh = function throttledRefresh() {\n        window.clearTimeout(_this.refreshThrottle);\n        _this.refreshThrottle = window.setTimeout(_this.refresh.bind(_this), 10);\n      };\n      this.startAnchor.on('change', throttledRefresh);\n      this.endAnchor.on('change', throttledRefresh);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var _this2 = this;\n      var session = this.editor.getSession();\n      var newStart = this.startAnchor.getPosition();\n      var newEnd = this.endAnchor.getPosition();\n      Object.keys(this.gutterCssClasses).forEach(function (cssClass) {\n        var rowSpan = _this2.gutterCssClasses[cssClass];\n        clearGutterCss(cssClass, session, rowSpan.start, rowSpan.end);\n        rowSpan.start = newStart.row;\n        rowSpan.end = newEnd.row;\n        setGutterCss(cssClass, session, rowSpan.start, rowSpan.end);\n      });\n    }\n  }, {\n    key: \"move\",\n    value: function move(parseLocation, leadingEmptyLineCount) {\n      var lastRow = parseLocation.last_line - 1;\n      var firstRow = Math.min(lastRow, parseLocation.first_line - 1 + (leadingEmptyLineCount || 0));\n      var firstCol = leadingEmptyLineCount ? 0 : parseLocation.first_column;\n      this.startAnchor.setPosition(firstRow, firstCol);\n      this.endAnchor.setPosition(lastRow, parseLocation.last_column);\n    }\n  }, {\n    key: \"addGutterCss\",\n    value: function addGutterCss(cssClass) {\n      var session = this.editor.getSession();\n      var startRow = this.startAnchor.getPosition().row;\n      var endRow = this.endAnchor.getPosition().row;\n      this.gutterCssClasses[cssClass] = {\n        start: startRow,\n        end: endRow\n      };\n      setGutterCss(cssClass, session, startRow, endRow);\n    }\n  }, {\n    key: \"addMarkerCss\",\n    value: function addMarkerCss(cssClass) {\n      if (!this.markerCssClasses[cssClass]) {\n        var AceRange = ace.require('ace/range').Range;\n        var range = new AceRange(0, 0, 0, 0);\n        range.start = this.startAnchor;\n        range.end = this.endAnchor;\n        this.markerCssClasses[cssClass] = this.editor.getSession().addMarker(range, cssClass);\n      }\n    }\n  }, {\n    key: \"removeMarkerCss\",\n    value: function removeMarkerCss(cssClass) {\n      if (this.markerCssClasses[cssClass]) {\n        this.editor.getSession().removeMarker(this.markerCssClasses[cssClass]);\n        delete this.markerCssClasses[cssClass];\n      }\n    }\n  }, {\n    key: \"removeGutterCss\",\n    value: function removeGutterCss(cssClass) {\n      if (this.gutterCssClasses[cssClass]) {\n        var session = this.editor.getSession();\n        var rowSpan = this.gutterCssClasses[cssClass];\n        delete this.gutterCssClasses[cssClass];\n        clearGutterCss(cssClass, session, rowSpan.start, rowSpan.end);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      window.clearTimeout(this.refreshThrottle);\n      this.startAnchor.detach();\n      this.endAnchor.detach();\n      Object.keys(this.gutterCssClasses).forEach(this.removeGutterCss.bind(this));\n      Object.keys(this.markerCssClasses).forEach(this.removeMarkerCss.bind(this));\n    }\n  }]);\n}();\nexport { AceAnchoredRange as default };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport huePubSub from 'utils/huePubSub';\nimport { ACTIVE_STATEMENT_CHANGED_EVENT } from \"./aceLocationHandler\";\nimport AceAnchoredRange from \"./aceAnchoredRange\";\nimport { EXECUTABLE_UPDATED_TOPIC } from \"../../../apps/editor/execution/events\";\n\n// TODO: depends on Ace\n\nvar LINE_BREAK_REGEX = /(\\r\\n)|(\\n)|(\\r)/g;\nvar LEADING_WHITE_SPACE_REGEX = /^\\s+/;\nvar ACTIVE_CSS = 'ace-active-gutter-decoration';\nvar COMPLETED_CSS = 'ace-completed-gutter-decoration';\nvar EXECUTING_CSS = 'ace-executing-gutter-decoration';\nvar FAILED_CSS = 'ace-failed-gutter-decoration';\nvar FAILED_MARKER_CSS = 'ace-failed-marker';\nvar getLeadingEmptyLineCount = function getLeadingEmptyLineCount(parsedStatement) {\n  var leadingEmptyLineCount = 0;\n  var leadingWhiteSpace = parsedStatement.statement.match(LEADING_WHITE_SPACE_REGEX);\n  if (leadingWhiteSpace) {\n    var lineBreakMatch = leadingWhiteSpace[0].match(LINE_BREAK_REGEX);\n    if (lineBreakMatch) {\n      leadingEmptyLineCount = lineBreakMatch.length;\n    }\n  }\n  return leadingEmptyLineCount;\n};\nvar AceGutterHandler = /*#__PURE__*/function () {\n  function AceGutterHandler(options) {\n    var _this = this;\n    _classCallCheck(this, AceGutterHandler);\n    this.editor = options.editor;\n    this.editorId = options.editorId;\n    this.executor = options.executor;\n    this.disposals = [];\n    var activeStatementAnchor = new AceAnchoredRange(this.editor);\n    activeStatementAnchor.addGutterCss(ACTIVE_CSS);\n    var changedSubscription = huePubSub.subscribe(ACTIVE_STATEMENT_CHANGED_EVENT, function (statementDetails) {\n      if (statementDetails.id !== _this.editorId || !statementDetails.activeStatement) {\n        return;\n      }\n      var leadingEmptyLineCount = getLeadingEmptyLineCount(statementDetails.activeStatement);\n      activeStatementAnchor.move(statementDetails.activeStatement.location, leadingEmptyLineCount);\n    });\n    this.disposals.push(function () {\n      changedSubscription.remove();\n      activeStatementAnchor.dispose();\n    });\n    if (this.executor) {\n      var executableSub = huePubSub.subscribe(EXECUTABLE_UPDATED_TOPIC, function (executable) {\n        if (executable.executor === _this.executor) {\n          if (executable.lost) {\n            if (executable.observerState.aceAnchor) {\n              executable.observerState.aceAnchor.dispose();\n              delete executable.observerState.aceAnchor;\n            }\n            return;\n          }\n          var statement = executable.parsedStatement;\n          if (!executable.observerState.aceAnchor) {\n            executable.observerState.aceAnchor = new AceAnchoredRange(_this.editor);\n          }\n          var leadingEmptyLineCount = getLeadingEmptyLineCount(statement);\n          executable.observerState.aceAnchor.move(statement.location, leadingEmptyLineCount);\n          var anchoredRange = executable.observerState.aceAnchor;\n          anchoredRange.removeGutterCss(COMPLETED_CSS);\n          anchoredRange.removeGutterCss(EXECUTING_CSS);\n          anchoredRange.removeGutterCss(FAILED_CSS);\n          anchoredRange.removeMarkerCss(FAILED_MARKER_CSS);\n          if (executable.isRunning()) {\n            anchoredRange.addGutterCss(EXECUTING_CSS);\n          } else if (executable.isSuccess()) {\n            anchoredRange.addGutterCss(COMPLETED_CSS);\n          } else if (executable.isFailed()) {\n            anchoredRange.addMarkerCss(FAILED_MARKER_CSS);\n            anchoredRange.addGutterCss(FAILED_CSS);\n          }\n        }\n      });\n      this.disposals.push(function () {\n        executableSub.remove();\n      });\n    }\n  }\n  return _createClass(AceGutterHandler, [{\n    key: \"dispose\",\n    value: function dispose() {\n      while (this.disposals.length) {\n        this.disposals.pop()();\n      }\n    }\n  }]);\n}();\nexport { AceGutterHandler as default };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport ace from 'ext/aceHelper';\nimport { DIALECT } from \"../../../apps/editor/snippet\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport AssistStorageEntry from \"../../components/assist/assistStorageEntry\";\nimport { getStatementsParser } from 'parse/utils';\nimport sqlUtils from 'sql/sqlUtils';\nimport { POST_FROM_LOCATION_WORKER_EVENT, POST_FROM_SYNTAX_WORKER_EVENT, POST_TO_LOCATION_WORKER_EVENT, POST_TO_SYNTAX_WORKER_EVENT } from 'sql/workers/events';\nimport stringDistance from \"../../../sql/stringDistance\";\nimport hueDebug from 'utils/hueDebug';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage } from 'utils/storageUtils';\n\n// TODO: depends on Ace, sqlStatementsParser\n\nexport var REFRESH_STATEMENT_LOCATIONS_EVENT = 'editor.refresh.statement.locations';\nexport var ACTIVE_STATEMENT_CHANGED_EVENT = 'editor.active.statement.changed';\nexport var CURSOR_POSITION_CHANGED_EVENT = 'editor.cursor.position.changed';\nvar STATEMENT_COUNT_AROUND_ACTIVE = 10;\nvar VERIFY_LIMIT = 50;\nvar VERIFY_DELAY = 50;\nvar AceLocationHandler = /*#__PURE__*/function () {\n  function AceLocationHandler(options) {\n    _classCallCheck(this, AceLocationHandler);\n    var self = this;\n    self.editor = options.editor;\n    self.editorId = options.editorId;\n    self.snippet = options.snippet;\n    self.executor = options.executor;\n    self.expandStar = options.i18n && options.i18n.expandStar || 'Right-click to expand with columns';\n    self.contextTooltip = options.i18n && options.i18n.contextTooltip || 'Right-click for details';\n    self.sqlSyntaxWorkerSub = null;\n    self.disposeFunctions = [];\n    self.databaseIndex = {};\n    self.attachStatementLocator();\n    self.attachSqlWorker();\n    self.attachMouseListeners();\n    self.dialect = function () {\n      return self.snippet.type();\n    };\n    self.verifyThrottle = -1;\n    var updateDatabaseIndex = function updateDatabaseIndex(databaseList) {\n      self.databaseIndex = {};\n      databaseList.forEach(function (database) {\n        self.databaseIndex[database.toLowerCase()] = true;\n      });\n    };\n    var databaseSub = self.snippet.availableDatabases.subscribe(updateDatabaseIndex);\n    self.disposeFunctions.push(function () {\n      databaseSub.dispose();\n    });\n    updateDatabaseIndex(self.snippet.availableDatabases());\n  }\n  return _createClass(AceLocationHandler, [{\n    key: \"attachMouseListeners\",\n    value: function attachMouseListeners() {\n      var self = this;\n      var Tooltip = ace.require('ace/tooltip').Tooltip;\n      var AceRange = ace.require('ace/range').Range;\n      var contextTooltip = new Tooltip(self.editor.container);\n      var tooltipTimeout = -1;\n      var disableTooltip = false;\n      var lastHoveredToken = null;\n      var activeMarkers = [];\n      var keepLastMarker = false;\n      var hideContextTooltip = function hideContextTooltip() {\n        clearTimeout(tooltipTimeout);\n        contextTooltip.hide();\n      };\n      var clearActiveMarkers = function clearActiveMarkers() {\n        hideContextTooltip();\n        while (activeMarkers.length > keepLastMarker ? 1 : 0) {\n          self.editor.session.removeMarker(activeMarkers.shift());\n        }\n      };\n      var markLocation = function markLocation(parseLocation) {\n        var range;\n        if (parseLocation.type === 'function') {\n          // Todo: Figure out why functions need an extra char at the end\n          range = new AceRange(parseLocation.location.first_line - 1, parseLocation.location.first_column - 1, parseLocation.location.last_line - 1, parseLocation.location.last_column);\n        } else {\n          range = new AceRange(parseLocation.location.first_line - 1, parseLocation.location.first_column - 1, parseLocation.location.last_line - 1, parseLocation.location.last_column - 1);\n        }\n        activeMarkers.push(self.editor.session.addMarker(range, 'hue-ace-location'));\n        return range;\n      };\n      var popoverShownSub = huePubSub.subscribe('context.popover.shown', function () {\n        hideContextTooltip();\n        keepLastMarker = true;\n        disableTooltip = true;\n      });\n      self.disposeFunctions.push(function () {\n        popoverShownSub.remove();\n      });\n      var popoverHiddenSub = huePubSub.subscribe('context.popover.hidden', function () {\n        disableTooltip = false;\n        clearActiveMarkers();\n        keepLastMarker = false;\n      });\n      self.disposeFunctions.push(function () {\n        popoverHiddenSub.remove();\n      });\n      var mousemoveListener = self.editor.on('mousemove', function (e) {\n        clearTimeout(tooltipTimeout);\n        var selectionRange = self.editor.selection.getRange();\n        if (selectionRange.isEmpty()) {\n          var pointerPosition = self.editor.renderer.screenToTextCoordinates(e.clientX + 5, e.clientY);\n          var endTestPosition = self.editor.renderer.screenToTextCoordinates(e.clientX + 15, e.clientY);\n          if (endTestPosition.column !== pointerPosition.column) {\n            var token = self.editor.session.getTokenAt(pointerPosition.row, pointerPosition.column);\n            if (token !== null && !token.notFound && token.parseLocation && !disableTooltip && token.parseLocation.type !== 'alias') {\n              tooltipTimeout = window.setTimeout(function () {\n                if (token.parseLocation) {\n                  var endCoordinates = self.editor.renderer.textToScreenCoordinates(pointerPosition.row, token.start);\n                  var tooltipText = token.parseLocation.type === 'asterisk' ? self.expandStar : self.contextTooltip;\n                  var colType;\n                  if (token.parseLocation.type === 'column') {\n                    var tableChain = token.parseLocation.identifierChain.concat();\n                    var lastIdentifier = tableChain.pop();\n                    if (tableChain.length > 0 && lastIdentifier && lastIdentifier.name) {\n                      var colName = lastIdentifier.name.toLowerCase();\n                      // Note, as cachedOnly is set to true it will call the successCallback right away (or not at all)\n                      dataCatalog.getEntry({\n                        namespace: self.snippet.namespace(),\n                        compute: self.snippet.compute(),\n                        connector: self.snippet.connector(),\n                        temporaryOnly: self.snippet.autocompleteSettings.temporaryOnly,\n                        path: $.map(tableChain, function (identifier) {\n                          return identifier.name;\n                        })\n                      }).then(function (entry) {\n                        entry.getSourceMeta({\n                          cachedOnly: true,\n                          silenceErrors: true\n                        }).then(function (sourceMeta) {\n                          if (sourceMeta && sourceMeta.extended_columns) {\n                            sourceMeta.extended_columns.every(function (col) {\n                              if (col.name.toLowerCase() === colName) {\n                                colType = col.type.match(/^[^<]*/g)[0];\n                                return false;\n                              }\n                              return true;\n                            });\n                          }\n                        })[\"catch\"](function () {\n                          // Ignore\n                        });\n                      })[\"catch\"](function (err) {\n                        // Ignore\n                      });\n                    }\n                  }\n                  if (token.parseLocation.identifierChain) {\n                    var sqlIdentifier = $.map(token.parseLocation.identifierChain, function (identifier) {\n                      return identifier.name;\n                    }).join('.');\n                    if (colType) {\n                      sqlIdentifier += ' (' + colType + ')';\n                    }\n                    tooltipText = sqlIdentifier + ' - ' + tooltipText;\n                  } else if (token.parseLocation[\"function\"]) {\n                    tooltipText = token.parseLocation[\"function\"] + ' - ' + tooltipText;\n                  }\n                  contextTooltip.show(tooltipText, endCoordinates.pageX, endCoordinates.pageY + self.editor.renderer.lineHeight + 3);\n                }\n              }, 500);\n            } else if (token !== null && token.notFound) {\n              tooltipTimeout = window.setTimeout(function () {\n                // TODO: i18n\n                if (token.notFound && token.syntaxError) {\n                  var tooltipText;\n                  if (token.syntaxError.expected.length > 0) {\n                    tooltipText = I18n('Did you mean') + ' \"' + token.syntaxError.expected[0].text + '\"?';\n                  } else {\n                    tooltipText = I18n('Could not find') + ' \"' + (token.qualifiedIdentifier || token.value) + '\"';\n                  }\n                  var endCoordinates = self.editor.renderer.textToScreenCoordinates(pointerPosition.row, token.start);\n                  contextTooltip.show(tooltipText, endCoordinates.pageX, endCoordinates.pageY + self.editor.renderer.lineHeight + 3);\n                }\n              }, 500);\n            } else if (token !== null && token.syntaxError) {\n              tooltipTimeout = window.setTimeout(function () {\n                if (token.syntaxError) {\n                  var tooltipText;\n                  if (token.syntaxError.expected.length > 0) {\n                    tooltipText = I18n('Did you mean') + ' \"' + token.syntaxError.expected[0].text + '\"?';\n                  } else if (token.syntaxError.expectedStatementEnd) {\n                    tooltipText = I18n('Expected end of statement');\n                  }\n                  if (tooltipText) {\n                    var endCoordinates = self.editor.renderer.textToScreenCoordinates(pointerPosition.row, token.start);\n                    contextTooltip.show(tooltipText, endCoordinates.pageX, endCoordinates.pageY + self.editor.renderer.lineHeight + 3);\n                  }\n                }\n              }, 500);\n            } else {\n              hideContextTooltip();\n            }\n            if (lastHoveredToken !== token) {\n              clearActiveMarkers();\n              if (token !== null && !token.notFound && token.parseLocation && ['alias', 'whereClause', 'limitClause', 'selectList'].indexOf(token.parseLocation.type) === -1) {\n                markLocation(token.parseLocation);\n              }\n              lastHoveredToken = token;\n            }\n          } else {\n            clearActiveMarkers();\n            lastHoveredToken = null;\n          }\n        }\n      });\n      self.disposeFunctions.push(function () {\n        self.editor.off('mousemove', mousemoveListener);\n      });\n      var inputListener = self.editor.on('input', function () {\n        clearActiveMarkers();\n        lastHoveredToken = null;\n      });\n      self.disposeFunctions.push(function () {\n        self.editor.off('input', inputListener);\n      });\n      var mouseoutListener = function mouseoutListener() {\n        clearActiveMarkers();\n        clearTimeout(tooltipTimeout);\n        contextTooltip.hide();\n        lastHoveredToken = null;\n      };\n      self.editor.container.addEventListener('mouseout', mouseoutListener);\n      self.disposeFunctions.push(function () {\n        self.editor.container.removeEventListener('mouseout', mouseoutListener);\n      });\n      var onContextMenu = function onContextMenu(e) {\n        var selectionRange = self.editor.selection.getRange();\n        huePubSub.publish('context.popover.hide');\n        huePubSub.publish('sql.syntax.dropdown.hide');\n        if (selectionRange.isEmpty()) {\n          var pointerPosition = self.editor.renderer.screenToTextCoordinates(e.clientX + 5, e.clientY);\n          var token = self.editor.session.getTokenAt(pointerPosition.row, pointerPosition.column);\n          if (token && (token.parseLocation && ['alias', 'whereClause', 'limitClause', 'selectList'].indexOf(token.parseLocation.type) === -1 || token.syntaxError)) {\n            var range = token.parseLocation ? markLocation(token.parseLocation) : new AceRange(token.syntaxError.loc.first_line - 1, token.syntaxError.loc.first_column, token.syntaxError.loc.last_line - 1, token.syntaxError.loc.first_column + token.syntaxError.text.length);\n            var startCoordinates = self.editor.renderer.textToScreenCoordinates(range.start.row, range.start.column);\n            var endCoordinates = self.editor.renderer.textToScreenCoordinates(range.end.row, range.end.column);\n            var source = {\n              // TODO: add element likely in the event\n              left: startCoordinates.pageX - 3,\n              top: startCoordinates.pageY,\n              right: endCoordinates.pageX - 3,\n              bottom: endCoordinates.pageY + self.editor.renderer.lineHeight\n            };\n            if (token.parseLocation && token.parseLocation.identifierChain && !token.notFound) {\n              token.parseLocation.resolveCatalogEntry({\n                temporaryOnly: self.snippet.autocompleteSettings.temporaryOnly\n              }).then(function (entry) {\n                huePubSub.publish('context.popover.show', {\n                  data: {\n                    type: 'catalogEntry',\n                    catalogEntry: entry\n                  },\n                  pinEnabled: true,\n                  connector: self.snippet.connector(),\n                  source: source\n                });\n              })[\"catch\"](function () {\n                token.notFound = true;\n              });\n            } else if (token.parseLocation && !token.notFound) {\n              // Asterisk, function etc.\n              if (token.parseLocation.type === 'file') {\n                AssistStorageEntry.getEntry(token.parseLocation.path).then(function (entry) {\n                  entry.open(true);\n                  huePubSub.publish('context.popover.show', {\n                    data: {\n                      type: 'storageEntry',\n                      storageEntry: entry,\n                      editorLocation: token.parseLocation.location\n                    },\n                    connector: self.snippet.connector(),\n                    pinEnabled: true,\n                    source: source\n                  });\n                });\n              } else {\n                huePubSub.publish('context.popover.show', {\n                  data: token.parseLocation,\n                  connector: self.snippet.connector(),\n                  sourceType: self.dialect(),\n                  namespace: self.snippet.namespace(),\n                  compute: self.snippet.compute(),\n                  defaultDatabase: self.snippet.database(),\n                  pinEnabled: true,\n                  source: source\n                });\n              }\n            } else if (token.syntaxError) {\n              huePubSub.publish('sql.syntax.dropdown.show', {\n                editorId: self.snippet.id(),\n                data: token.syntaxError,\n                editor: self.editor,\n                range: range,\n                sourceType: self.dialect(),\n                defaultDatabase: self.snippet.database(),\n                source: source\n              });\n            }\n            e.preventDefault();\n            return false;\n          }\n        }\n      };\n      var contextmenuListener = self.editor.container.addEventListener('contextmenu', onContextMenu);\n      self.disposeFunctions.push(function () {\n        self.editor.container.removeEventListener('contextmenu', contextmenuListener);\n      });\n    }\n  }, {\n    key: \"attachStatementLocator\",\n    value: function attachStatementLocator() {\n      var self = this;\n      var lastKnownStatements = [];\n      var activeStatement;\n      var isPointInside = function isPointInside(parseLocation, editorPosition) {\n        var row = editorPosition.row + 1; // ace positioning has 0 based rows while the parser has 1\n        var column = editorPosition.column;\n        return parseLocation.first_line < row && row < parseLocation.last_line || parseLocation.first_line === row && row === parseLocation.last_line && parseLocation.first_column <= column && column < parseLocation.last_column || parseLocation.first_line === row && row < parseLocation.last_line && column >= parseLocation.first_column || parseLocation.first_line < row && row === parseLocation.last_line && column < parseLocation.last_column;\n      };\n      var getFirstPosition = function getFirstPosition(editorPositionOne, editorPositionTwo) {\n        if (editorPositionOne.row === editorPositionTwo.row) {\n          return editorPositionOne.column <= editorPositionTwo.column ? editorPositionOne : editorPositionTwo;\n        }\n        return editorPositionOne.row < editorPositionTwo.row ? editorPositionOne : editorPositionTwo;\n      };\n      var equalPositions = function equalPositions(editorPositionOne, editorPositionTwo) {\n        return editorPositionOne.row === editorPositionTwo.row && editorPositionOne.column === editorPositionTwo.column;\n      };\n      var lastExecutingStatement = null;\n      var updateActiveStatement = function updateActiveStatement(cursorChange) {\n        if (!self.snippet.isSqlDialect()) {\n          return;\n        }\n        var selectionRange = self.editor.getSelectionRange();\n        var cursorLocation = selectionRange.start;\n        if (!equalPositions(selectionRange.start, selectionRange.end)) {\n          if (!cursorChange && self.snippet.result && self.snippet.result.statement_range()) {\n            var executingStatement = self.snippet.result.statement_range();\n            // Row and col are 0 for both start and end on execute, so if the selection hasn't changed we'll use last known executed statement\n            if (executingStatement.start.row === 0 && executingStatement.start.column === 0 && executingStatement.end.row === 0 && executingStatement.end.column === 0 && lastExecutingStatement) {\n              executingStatement = lastExecutingStatement;\n            }\n            if (executingStatement.start.row === 0) {\n              cursorLocation.column += executingStatement.start.column;\n            } else if (executingStatement.start.row !== 0 || executingStatement.start.column !== 0) {\n              cursorLocation.row += executingStatement.start.row;\n              cursorLocation.column = executingStatement.start.column;\n            }\n            lastExecutingStatement = executingStatement;\n          } else {\n            lastExecutingStatement = null;\n          }\n        }\n        if (cursorChange && activeStatement) {\n          // Don't update when cursor stays in the same statement\n          if (isPointInside(activeStatement.location, cursorLocation)) {\n            return;\n          }\n        }\n        var selectedStatements = [];\n        var precedingStatements = [];\n        var followingStatements = [];\n        activeStatement = null;\n        var firstSelectionPoint = getFirstPosition(selectionRange.start, selectionRange.end);\n        var lastSelectionPoint = selectionRange.start === firstSelectionPoint ? selectionRange.end : selectionRange.start;\n        var found = false;\n        var statementIndex = 0;\n        var insideSelection = false;\n        if (lastKnownStatements.length === 1) {\n          activeStatement = lastKnownStatements[0];\n        } else {\n          lastKnownStatements.forEach(function (statement) {\n            if (!equalPositions(firstSelectionPoint, lastSelectionPoint)) {\n              if (!insideSelection && isPointInside(statement.location, firstSelectionPoint)) {\n                insideSelection = true;\n              }\n              if (insideSelection) {\n                selectedStatements.push(statement);\n                if (isPointInside(statement.location, lastSelectionPoint) || statement.location.last_line === lastSelectionPoint.row + 1 && statement.location.last_column === lastSelectionPoint.column) {\n                  insideSelection = false;\n                }\n              }\n            }\n            if (isPointInside(statement.location, cursorLocation)) {\n              statementIndex++;\n              found = true;\n              activeStatement = statement;\n            } else if (!found) {\n              statementIndex++;\n              if (precedingStatements.length === STATEMENT_COUNT_AROUND_ACTIVE) {\n                precedingStatements.shift();\n              }\n              precedingStatements.push(statement);\n            } else if (found && followingStatements.length < STATEMENT_COUNT_AROUND_ACTIVE) {\n              followingStatements.push(statement);\n            }\n          });\n\n          // Can happen if multiple statements and the cursor is after the last one\n          if (!found) {\n            precedingStatements.pop();\n            activeStatement = lastKnownStatements[lastKnownStatements.length - 1];\n          }\n        }\n        if (!selectedStatements.length) {\n          selectedStatements.push(activeStatement);\n        }\n        huePubSub.publish(ACTIVE_STATEMENT_CHANGED_EVENT, {\n          id: self.editorId,\n          editorChangeTime: lastKnownStatements.editorChangeTime,\n          activeStatementIndex: statementIndex,\n          totalStatementCount: lastKnownStatements.length,\n          precedingStatements: precedingStatements,\n          activeStatement: activeStatement,\n          selectedStatements: selectedStatements,\n          followingStatements: followingStatements\n        });\n        if (activeStatement) {\n          self.checkForSyntaxErrors(activeStatement.location, firstSelectionPoint);\n        }\n      };\n      var parseForStatements = function parseForStatements() {\n        if (self.snippet.isSqlDialect()) {\n          try {\n            var lastChangeTime = self.editor.lastChangeTime;\n            lastKnownStatements = getStatementsParser(self.snippet.connector()).parse(self.editor.getValue());\n            lastKnownStatements.editorChangeTime = lastChangeTime;\n            if (typeof hueDebug !== 'undefined' && hueDebug.logStatementLocations) {\n              // eslint-disable-next-line no-restricted-syntax\n              console.log(lastKnownStatements);\n            }\n          } catch (error) {\n            console.warn('Could not parse statements!');\n            console.warn(error);\n          }\n        }\n      };\n      var changeThrottle = window.setTimeout(parseForStatements, 0);\n      var updateThrottle = window.setTimeout(updateActiveStatement, 0);\n      var cursorChangePaused = false; // On change the cursor is also moved, this limits the calls while typing\n\n      var lastStart;\n      var lastCursorPosition;\n      var changeSelectionListener = self.editor.on('changeSelection', function () {\n        if (cursorChangePaused) {\n          return;\n        }\n        window.clearTimeout(changeThrottle);\n        changeThrottle = window.setTimeout(function () {\n          var newCursorPosition = self.editor.getCursorPosition();\n          if (!lastCursorPosition || lastCursorPosition.row !== newCursorPosition.row || lastCursorPosition.column !== newCursorPosition.column) {\n            huePubSub.publish(CURSOR_POSITION_CHANGED_EVENT, {\n              editorId: self.snippet.id(),\n              position: newCursorPosition\n            });\n            lastCursorPosition = newCursorPosition;\n          }\n\n          // The active statement is initially the top one in the selection, batch execution updates this.\n          var newStart = self.editor.getSelectionRange().start;\n          if (self.snippet.isSqlDialect() && (!lastStart || !equalPositions(lastStart, newStart))) {\n            window.clearTimeout(updateThrottle);\n            updateActiveStatement(true);\n            lastStart = newStart;\n          }\n        }, 100);\n      });\n      var changeListener = self.editor.on('change', function () {\n        if (self.snippet.isSqlDialect()) {\n          window.clearTimeout(changeThrottle);\n          cursorChangePaused = true;\n          changeThrottle = window.setTimeout(function () {\n            window.clearTimeout(updateThrottle);\n            parseForStatements();\n            updateActiveStatement();\n            cursorChangePaused = false;\n          }, 500);\n          self.editor.lastChangeTime = Date.now();\n        }\n      });\n      var locateSubscription = huePubSub.subscribe(REFRESH_STATEMENT_LOCATIONS_EVENT, function (editorId) {\n        if (editorId === self.snippet.id()) {\n          cursorChangePaused = true;\n          window.clearTimeout(changeThrottle);\n          window.clearTimeout(updateThrottle);\n          parseForStatements();\n          updateActiveStatement();\n          cursorChangePaused = false;\n        }\n      });\n      self.disposeFunctions.push(function () {\n        window.clearTimeout(changeThrottle);\n        window.clearTimeout(updateThrottle);\n        self.editor.off('changeSelection', changeSelectionListener);\n        self.editor.off('change', changeListener);\n        locateSubscription.remove();\n      });\n    }\n  }, {\n    key: \"clearMarkedErrors\",\n    value: function clearMarkedErrors(type) {\n      var self = this;\n      for (var marker in self.editor.getSession().$backMarkers) {\n        if (self.editor.getSession().$backMarkers[marker].clazz.indexOf('hue-ace-syntax-' + (type || '')) === 0) {\n          self.editor.getSession().$backMarkers[marker].dispose();\n        }\n      }\n    }\n  }, {\n    key: \"checkForSyntaxErrors\",\n    value: function checkForSyntaxErrors(statementLocation, cursorPosition) {\n      var self = this;\n      if (self.sqlSyntaxWorkerSub !== null && (self.dialect() === DIALECT.impala || self.dialect() === DIALECT.hive || self.dialect() === DIALECT.sparksql)) {\n        var AceRange = ace.require('ace/range').Range;\n        var editorChangeTime = self.editor.lastChangeTime;\n        var beforeCursor = self.editor.getSession().getTextRange(new AceRange(statementLocation.first_line - 1, statementLocation.first_column, cursorPosition.row, cursorPosition.column));\n        var afterCursor = self.editor.getSession().getTextRange(new AceRange(cursorPosition.row, cursorPosition.column, statementLocation.last_line - 1, statementLocation.last_column));\n        huePubSub.publish(POST_TO_SYNTAX_WORKER_EVENT, {\n          id: self.snippet.id(),\n          editorChangeTime: editorChangeTime,\n          beforeCursor: beforeCursor,\n          afterCursor: afterCursor,\n          statementLocation: statementLocation,\n          connector: self.snippet.connector()\n        });\n      }\n    }\n  }, {\n    key: \"addAnchoredMarker\",\n    value: function addAnchoredMarker(range, token, clazz) {\n      var self = this;\n      range.start = self.editor.getSession().doc.createAnchor(range.start);\n      range.end = self.editor.getSession().doc.createAnchor(range.end);\n      var markerId = self.editor.getSession().addMarker(range, clazz);\n      var marker = self.editor.getSession().$backMarkers[markerId];\n      marker.token = token;\n      marker.dispose = function () {\n        range.start.detach();\n        range.end.detach();\n        delete marker.token.syntaxError;\n        delete marker.token.notFound;\n        self.editor.getSession().removeMarker(markerId);\n      };\n    }\n  }, {\n    key: \"attachSqlSyntaxWorker\",\n    value: function attachSqlSyntaxWorker() {\n      var self = this;\n      if (self.sqlSyntaxWorkerSub !== null) {\n        return;\n      }\n      self.sqlSyntaxWorkerSub = huePubSub.subscribe(POST_FROM_SYNTAX_WORKER_EVENT, function (e) {\n        if (e.data.id !== self.snippet.id() || e.data.editorChangeTime !== self.editor.lastChangeTime) {\n          return;\n        }\n        self.clearMarkedErrors('error');\n        if (!e.data.syntaxError || !e.data.syntaxError.expected || e.data.syntaxError.expected.length === 0) {\n          // Only show errors that we have suggestions for\n          return;\n        }\n        var suppressedRules = getFromLocalStorage('hue.syntax.checker.suppressedRules', {});\n        if (e.data.syntaxError && e.data.syntaxError.ruleId && !suppressedRules[e.data.syntaxError.ruleId.toString() + e.data.syntaxError.text.toLowerCase()]) {\n          if (self.snippet.positionStatement() && sqlUtils.locationEquals(e.data.statementLocation, self.snippet.positionStatement().location)) {\n            self.snippet.positionStatement().syntaxError = true;\n          }\n          if (hueDebug && hueDebug.showSyntaxParseResult) {\n            // eslint-disable-next-line no-restricted-syntax\n            console.log(e.data.syntaxError);\n          }\n          var token = self.editor.getSession().getTokenAt(e.data.syntaxError.loc.first_line - 1, e.data.syntaxError.loc.first_column + 1);\n\n          // Don't mark the current edited word as an error if the cursor is at the end of the word\n          // For now [a-z] is fine as we only check syntax for keywords\n          if (/[a-z]$/i.test(self.editor.getTextBeforeCursor()) && !/^[a-z]/i.test(self.editor.getTextAfterCursor())) {\n            var cursorPos = self.editor.getCursorPosition();\n            var cursorToken = self.editor.getSession().getTokenAt(cursorPos.row, cursorPos.column);\n            if (cursorToken === token) {\n              return;\n            }\n          }\n\n          // If no token is found it likely means that the parser response came back after the text was changed,\n          // at which point it will trigger another parse so we can ignore this.\n          if (token) {\n            token.syntaxError = e.data.syntaxError;\n            var AceRange = ace.require('ace/range').Range;\n            var range = new AceRange(e.data.syntaxError.loc.first_line - 1, e.data.syntaxError.loc.first_column, e.data.syntaxError.loc.last_line - 1, e.data.syntaxError.loc.first_column + e.data.syntaxError.text.length);\n            self.addAnchoredMarker(range, token, 'hue-ace-syntax-error');\n          }\n        }\n      });\n      huePubSub.publish(REFRESH_STATEMENT_LOCATIONS_EVENT, self.snippet.id());\n    }\n  }, {\n    key: \"detachSqlSyntaxWorker\",\n    value: function detachSqlSyntaxWorker() {\n      var self = this;\n      if (self.sqlSyntaxWorkerSub !== null) {\n        self.sqlSyntaxWorkerSub.remove();\n        self.sqlSyntaxWorkerSub = null;\n      }\n      self.clearMarkedErrors();\n    }\n  }, {\n    key: \"fetchChildren\",\n    value: function fetchChildren(identifierChain) {\n      var self = this;\n      var deferred = $.Deferred();\n      dataCatalog.getChildren({\n        connector: self.snippet.connector(),\n        namespace: self.snippet.namespace(),\n        compute: self.snippet.compute(),\n        temporaryOnly: self.snippet.autocompleteSettings.temporaryOnly,\n        path: $.map(identifierChain, function (identifier) {\n          return identifier.name;\n        }),\n        silenceErrors: true,\n        cachedOnly: true\n      }).then(deferred.resolve)[\"catch\"](function () {\n        deferred.reject([]);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"fetchPossibleValues\",\n    value: function fetchPossibleValues(token) {\n      var self = this;\n      var promise = $.Deferred();\n      if (token.parseLocation.tables && token.parseLocation.tables.length > 0) {\n        var tablePromises = [];\n        token.parseLocation.tables.forEach(function (table) {\n          if (table.identifierChain) {\n            tablePromises.push(self.fetchChildren(table.identifierChain));\n          }\n        });\n        $.when.apply($, tablePromises).done(function () {\n          var joined = [];\n          for (var i = 0; i < arguments.length; i++) {\n            joined = joined.concat(arguments[i]);\n          }\n          if (token.parseLocation.type === 'column') {\n            // Could be a table reference\n            token.parseLocation.tables.forEach(function (table) {\n              if (!table.alias) {\n                // Aliases are added later\n                joined.push(table.identifierChain[table.identifierChain.length - 1]);\n              }\n            });\n          }\n          promise.resolve(joined);\n        }).fail(promise.reject);\n      } else if (token.parseLocation.identifierChain && token.parseLocation.identifierChain.length > 0) {\n        // fetch the parent\n        return self.fetchChildren(token.parseLocation.identifierChain.slice(0, token.parseLocation.identifierChain.length - 1));\n      } else {\n        promise.reject([]);\n      }\n      return promise;\n    }\n  }, {\n    key: \"verifyExists\",\n    value: function verifyExists(tokens, allLocations) {\n      var self = this;\n      window.clearInterval(self.verifyThrottle);\n      self.clearMarkedErrors('warning');\n      if (self.sqlSyntaxWorkerSub === null) {\n        return;\n      }\n      var cursorPos = self.editor.getCursorPosition();\n      var tokensToVerify = tokens.filter(function (token) {\n        return token && token.parseLocation && (token.parseLocation.type === 'table' || token.parseLocation.type === 'column') && (token.parseLocation.identifierChain || token.parseLocation.tables) && !(cursorPos.row + 1 === token.parseLocation.location.last_line && cursorPos.column + 1 === token.parseLocation.location.first_column + token.value.length);\n      }).slice(0, VERIFY_LIMIT);\n      if (tokensToVerify.length === 0) {\n        return;\n      }\n      var aliasIndex = {};\n      var aliases = [];\n      allLocations.forEach(function (location) {\n        if (location.type === 'alias' && (location.source === 'column' || location.source === 'table' || location.source === 'subquery' || location.source === 'cte')) {\n          aliasIndex[location.alias.toLowerCase()] = location;\n          aliases.push({\n            name: location.alias.toLowerCase()\n          });\n        }\n      });\n      var resolvePathFromTables = function resolvePathFromTables(location) {\n        var promise = $.Deferred();\n        if (location.type === 'column' && typeof location.tables !== 'undefined' && location.identifierChain.length === 1) {\n          var findIdentifierChainInTable = function findIdentifierChainInTable(tablesToGo) {\n            var nextTable = tablesToGo.shift();\n            if (typeof nextTable.subQuery === 'undefined') {\n              dataCatalog.getChildren({\n                connector: self.snippet.connector(),\n                namespace: self.snippet.namespace(),\n                compute: self.snippet.compute(),\n                temporaryOnly: self.snippet.autocompleteSettings.temporaryOnly,\n                path: $.map(nextTable.identifierChain, function (identifier) {\n                  return identifier.name;\n                }),\n                cachedOnly: true,\n                silenceErrors: true\n              }).then(function (entries) {\n                var containsColumn = entries.some(function (entry) {\n                  return sqlUtils.identifierEquals(entry.name, location.identifierChain[0].name);\n                });\n                if (containsColumn) {\n                  location.identifierChain = nextTable.identifierChain.concat(location.identifierChain);\n                  delete location.tables;\n                  promise.resolve();\n                } else if (tablesToGo.length > 0) {\n                  findIdentifierChainInTable(tablesToGo);\n                } else {\n                  promise.resolve();\n                }\n              })[\"catch\"](promise.resolve);\n            } else if (tablesToGo.length > 0) {\n              findIdentifierChainInTable(tablesToGo);\n            } else {\n              promise.resolve();\n            }\n          };\n          if (location.tables.length > 1) {\n            findIdentifierChainInTable(location.tables.concat());\n          } else if (location.tables.length === 1 && location.tables[0].identifierChain) {\n            location.identifierChain = location.tables[0].identifierChain.concat(location.identifierChain);\n            delete location.tables;\n            promise.resolve();\n          }\n        } else {\n          promise.resolve();\n        }\n        return promise;\n      };\n      var verify = function verify() {\n        if (tokensToVerify.length === 0) {\n          return;\n        }\n        var token = tokensToVerify.shift();\n        var location = token.parseLocation;\n\n        // TODO: Verify columns in subqueries, i.e. 'code' in 'select code from (select * from web_logs) wl, customers c;'\n        if ((location.type === 'column' || location.type === 'complex') && location.tables) {\n          var hasSubQueries = location.tables.some(function (table) {\n            return typeof table.subQuery !== 'undefined';\n          });\n          if (hasSubQueries) {\n            self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n            return;\n          }\n        }\n        resolvePathFromTables(location).done(function () {\n          if (location.type === 'column') {\n            var possibleAlias;\n            if (!location.tables && location.identifierChain && location.identifierChain.length > 1) {\n              possibleAlias = aliasIndex[token.parseLocation.identifierChain[0].name.toLowerCase()];\n            } else if (location.tables) {\n              location.tables.some(function (table) {\n                if (table.identifierChain && table.identifierChain.length === 1 && table.identifierChain[0].name) {\n                  possibleAlias = aliasIndex[table.identifierChain[0].name.toLowerCase()];\n                  return possibleAlias;\n                }\n                return false;\n              });\n            }\n            if (possibleAlias && possibleAlias.source === 'cte') {\n              // We currently don't discover the columns from a CTE so we can't say if a column exists or not\n              self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n              return;\n            }\n          }\n          self.fetchPossibleValues(token).done( /*#__PURE__*/function () {\n            var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(possibleValues) {\n              var tokenValLower, uniqueIndex, uniqueValues, i, nameLower, isLowerCase, weightedExpected, path, AceRange, range;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (token.parseLocation) {\n                      _context.next = 3;\n                      break;\n                    }\n                    self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n                    return _context.abrupt(\"return\");\n                  case 3:\n                    // Append aliases unless qualified i.e.for 'b' in SELECT a.b we shouldn't suggest aliases\n                    if (token.parseLocation.type !== 'column' && token.parseLocation.type !== 'complex' || !token.parseLocation.qualified) {\n                      possibleValues = possibleValues.concat(aliases);\n                    }\n                    tokenValLower = token.actualValue.toLowerCase();\n                    uniqueIndex = {};\n                    uniqueValues = [];\n                    i = 0;\n                  case 8:\n                    if (!(i < possibleValues.length)) {\n                      _context.next = 20;\n                      break;\n                    }\n                    _context.next = 11;\n                    return sqlUtils.backTickIfNeeded(self.snippet.connector(), possibleValues[i].name);\n                  case 11:\n                    possibleValues[i].name = _context.sent;\n                    nameLower = possibleValues[i].name.toLowerCase();\n                    if (!(nameLower === tokenValLower || tokenValLower.indexOf('`') === 0 && tokenValLower.replace(/`/g, '') === nameLower)) {\n                      _context.next = 16;\n                      break;\n                    }\n                    // Break if found\n                    self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n                    return _context.abrupt(\"return\");\n                  case 16:\n                    if (!uniqueIndex[nameLower]) {\n                      uniqueValues.push(possibleValues[i]);\n                      uniqueIndex[nameLower] = true;\n                    }\n                  case 17:\n                    i++;\n                    _context.next = 8;\n                    break;\n                  case 20:\n                    possibleValues = uniqueValues;\n                    isLowerCase = tokenValLower === token.value;\n                    weightedExpected = $.map(possibleValues, function (val) {\n                      return {\n                        text: isLowerCase ? val.name.toLowerCase() : val.name,\n                        distance: stringDistance(token.value, val.name)\n                      };\n                    });\n                    weightedExpected.sort(function (a, b) {\n                      if (a.distance === b.distance) {\n                        return a.text.localeCompare(b.text);\n                      }\n                      return a.distance - b.distance;\n                    });\n                    token.syntaxError = {\n                      expected: weightedExpected.slice(0, 50)\n                    };\n                    token.notFound = true;\n                    if (token.parseLocation && token.parseLocation.type === 'table') {\n                      path = $.map(token.parseLocation.identifierChain, function (identifier) {\n                        return identifier.name;\n                      });\n                      token.qualifiedIdentifier = path.join('.');\n                    }\n                    if (token.parseLocation && weightedExpected.length > 0) {\n                      AceRange = ace.require('ace/range').Range;\n                      range = new AceRange(token.parseLocation.location.first_line - 1, token.parseLocation.location.first_column - 1, token.parseLocation.location.last_line - 1, token.parseLocation.location.last_column - 1);\n                      self.addAnchoredMarker(range, token, 'hue-ace-syntax-warning');\n                    }\n                    self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n                  case 29:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x) {\n              return _ref.apply(this, arguments);\n            };\n          }()).fail(function () {\n            // Can happen when tables aren't cached etc.\n            self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n          });\n        }).fail(function () {\n          // Can happen when tables aren't cached etc.\n          self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n        });\n      };\n      self.verifyThrottle = window.setTimeout(verify, VERIFY_DELAY);\n    }\n  }, {\n    key: \"isDatabase\",\n    value: function isDatabase(databaseIdentifier) {\n      var self = this;\n      if (!databaseIdentifier) {\n        return false;\n      }\n      var cleanIdentifier = databaseIdentifier.replace(/^\\s*`/, '').replace(/`\\s*$/, '').toLowerCase();\n      return self.databaseIndex[cleanIdentifier];\n    }\n  }, {\n    key: \"attachSqlWorker\",\n    value: function attachSqlWorker() {\n      var self = this;\n      var activeTokens = [];\n      var lastKnownLocations = {};\n      var getLocationsSub = huePubSub.subscribe('get.active.editor.locations', function (callback, snippet) {\n        if (self.snippet === snippet && (self.snippet.inFocus() || self.snippet.editorMode())) {\n          callback(lastKnownLocations);\n        }\n      });\n      self.disposeFunctions.push(function () {\n        getLocationsSub.remove();\n      });\n      var locationWorkerSub = huePubSub.subscribe(POST_FROM_LOCATION_WORKER_EVENT, function (e) {\n        if (e.data.id !== self.snippet.id() || e.data.editorChangeTime !== self.editor.lastChangeTime || !self.snippet.isSqlDialect()) {\n          return;\n        }\n        lastKnownLocations = {\n          id: self.editorId,\n          connector: self.snippet.connector(),\n          namespace: self.snippet.namespace(),\n          compute: self.snippet.compute(),\n          defaultDatabase: self.snippet.database(),\n          locations: e.data.locations,\n          editorChangeTime: e.data.editorChangeTime,\n          activeStatementLocations: e.data.activeStatementLocations,\n          totalStatementCount: e.data.totalStatementCount,\n          activeStatementIndex: e.data.activeStatementIndex\n        };\n\n        // Clear out old parse locations to prevent them from being shown when there's a syntax error in the statement\n        while (activeTokens.length > 0) {\n          delete activeTokens.pop().parseLocation;\n        }\n        var tokensToVerify = [];\n        e.data.locations.forEach(function (location) {\n          if (location.type === 'statementType' && self.dialect() !== DIALECT.impala) {\n            // We currently only have a good mapping from statement types to impala topics.\n            // TODO: Extract links between Hive topic IDs and statement types\n            return;\n          }\n          if (['statement', 'selectList', 'whereClause', 'limitClause'].indexOf(location.type) !== -1 || (location.type === 'table' || location.type === 'column') && typeof location.identifierChain === 'undefined') {\n            return;\n          }\n          if (location.identifierChain && location.identifierChain.length && location.identifierChain[0].name) {\n            // The parser isn't aware of the DDL so sometimes it marks complex columns as tables\n            // I.e. \"Impala SELECT a FROM b.c\" Is 'b' a database or a table? If table then 'c' is complex\n            if (self.dialect() === DIALECT.impala && location.identifierChain.length > 2 && (location.type === 'table' || location.type === 'column') && self.isDatabase(location.identifierChain[0].name)) {\n              location.type = 'complex';\n            }\n          }\n          var token = self.editor.getSession().getTokenAt(location.location.first_line - 1, location.location.first_column);\n\n          // Find open UDFs and prevent them from being marked as missing columns, i.e. cos in \"SELECT * FROM foo where cos(a|\"\n          var rowTokens = self.editor.getSession().getTokens(location.location.first_line - 1);\n          if (location.type === 'column' && token && rowTokens) {\n            var tokenFound = false;\n            var isFunction = false;\n            rowTokens.some(function (rowToken) {\n              if (tokenFound && /\\s+/.test(rowToken.value)) {\n                return false;\n              }\n              if (tokenFound) {\n                isFunction = rowToken.value === '(';\n                return true;\n              }\n              if (rowToken === token) {\n                tokenFound = true;\n              }\n            });\n            if (isFunction) {\n              location.type = 'function';\n              delete location.identifierChain;\n              location[\"function\"] = token.value;\n              token = null;\n            }\n          }\n          if (token && token.value && /`$/.test(token.value)) {\n            // Ace getTokenAt() thinks the first ` is a token, column +1 will include the first and last.\n            token = self.editor.getSession().getTokenAt(location.location.first_line - 1, location.location.first_column + 1);\n          }\n          if (token && token.value && /^\\s*\\${\\s*$/.test(token.value)) {\n            token = null;\n          }\n          if (token && token.value) {\n            var AceRange = ace.require('ace/range').Range;\n            // The Ace tokenizer also splits on '{', '(' etc. hence the actual value;\n            token.actualValue = self.editor.getSession().getTextRange(new AceRange(location.location.first_line - 1, location.location.first_column - 1, location.location.last_line - 1, location.location.last_column - 1));\n          }\n          if (token !== null) {\n            token.parseLocation = location;\n            activeTokens.push(token);\n            delete token.notFound;\n            delete token.syntaxError;\n            if (location.active) {\n              tokensToVerify.push(token);\n            }\n          }\n        });\n        if (self.dialect() === DIALECT.impala || self.dialect() === DIALECT.hive || self.dialect() === DIALECT.sparksql) {\n          self.verifyExists(tokensToVerify, e.data.activeStatementLocations);\n        }\n        huePubSub.publish('editor.active.locations', lastKnownLocations);\n      });\n      self.disposeFunctions.push(function () {\n        locationWorkerSub.remove();\n      });\n      var lastContextRequest;\n      var statementSubscription = huePubSub.subscribe('editor.active.statement.changed', function (statementDetails) {\n        if (statementDetails.id !== self.editorId) {\n          return;\n        }\n        if (self.snippet.isSqlDialect()) {\n          if (lastContextRequest) {\n            lastContextRequest.dispose();\n          }\n          lastContextRequest = self.snippet.whenContextSet().done(function () {\n            huePubSub.publish(POST_TO_LOCATION_WORKER_EVENT, {\n              id: self.snippet.id(),\n              statementDetails: statementDetails,\n              connector: self.snippet.connector(),\n              namespace: self.snippet.namespace(),\n              compute: self.snippet.compute(),\n              defaultDatabase: self.snippet.database()\n            });\n          });\n        }\n      });\n      self.disposeFunctions.push(function () {\n        statementSubscription.remove();\n      });\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      if (self.sqlSyntaxWorkerSub !== null) {\n        self.sqlSyntaxWorkerSub.remove();\n        self.sqlSyntaxWorkerSub = null;\n      }\n      self.disposeFunctions.forEach(function (dispose) {\n        dispose();\n      });\n    }\n  }]);\n}();\nexport default AceLocationHandler;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport ace from 'ext/aceHelper';\nimport { format } from '@gethue/sql-formatter';\nimport AceLocationHandler, { REFRESH_STATEMENT_LOCATIONS_EVENT } from \"./aceLocationHandler\";\nimport AceGutterHandler from \"./aceGutterHandler\";\nimport { registerBinding } from \"../bindingUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nexport var NAME = 'aceEditor';\nexport var INSERT_AT_CURSOR_EVENT = 'editor.insert.at.cursor';\nregisterBinding(NAME, {\n  init: function init(element, valueAccessor) {\n    var $el = $(element);\n    var options = ko.unwrap(valueAccessor());\n    var snippet = options.snippet;\n    var aceOptions = options.aceOptions || {};\n    var disposeFunctions = [];\n    var dispose = function dispose() {\n      disposeFunctions.forEach(function (dispose) {\n        dispose();\n      });\n    };\n    ko.utils.domNodeDisposal.addDisposeCallback(element, dispose);\n    $el.text(snippet.statement_raw());\n    var editor = ace.edit(snippet.id());\n    var AceRange = ace.require('ace/range').Range;\n    var resizeAce = function resizeAce() {\n      window.setTimeout(function () {\n        try {\n          editor.resize(true);\n        } catch (e) {\n          // Can happen when the editor hasn't been initialized\n        }\n      }, 0);\n    };\n    var assistToggleSub = huePubSub.subscribe('assist.set.manual.visibility', resizeAce);\n    var resizePubSub = huePubSub.subscribe('split.panel.resized', resizeAce);\n    disposeFunctions.push(function () {\n      assistToggleSub.remove();\n      resizePubSub.remove();\n    });\n    var aceLocationHandler = new AceLocationHandler({\n      editor: editor,\n      editorId: $el.attr('id'),\n      snippet: snippet,\n      i18n: {\n        expandStar: options.expandStar,\n        contextTooltip: options.contextTooltip\n      }\n    });\n    var aceGutterHandler = new AceGutterHandler({\n      editor: editor,\n      editorId: $el.attr('id'),\n      executor: snippet.executor\n    });\n    disposeFunctions.push(function () {\n      aceLocationHandler.dispose();\n      aceGutterHandler.dispose();\n    });\n    editor.session.setMode(snippet.getAceMode());\n    editor.setOptions({\n      fontSize: getFromLocalStorage('hue.ace.fontSize', navigator.platform && navigator.platform.toLowerCase().indexOf('linux') > -1 ? '14px' : '12px')\n    });\n    function processErrorsAndWarnings(type, list) {\n      editor.clearErrorsAndWarnings(type);\n      var offset = 0;\n      if (snippet.isSqlDialect() && editor.getSelectedText()) {\n        var selectionRange = editor.getSelectionRange();\n        offset = Math.min(selectionRange.start.row, selectionRange.end.row);\n      }\n      if (list.length > 0) {\n        list.forEach(function (item, cnt) {\n          if (item.line !== null) {\n            if (type === 'error') {\n              editor.addError(item.message, item.line + offset);\n            } else {\n              editor.addWarning(item.message, item.line + offset);\n            }\n            if (cnt === 0) {\n              editor.scrollToLine(item.line + offset, true, true, function () {});\n              if (item.col !== null) {\n                editor.renderer.scrollCursorIntoView({\n                  row: item.line + offset,\n                  column: item.col + 10\n                }, 0.5);\n              }\n            }\n          }\n        });\n      }\n    }\n    var errorsSub = snippet.errors.subscribe(function (newErrors) {\n      processErrorsAndWarnings('error', newErrors);\n    });\n    var aceWarningsSub = snippet.aceWarnings.subscribe(function (newWarnings) {\n      processErrorsAndWarnings('warning', newWarnings);\n    });\n    var aceErrorsSub = snippet.aceErrors.subscribe(function (newErrors) {\n      processErrorsAndWarnings('error', newErrors);\n    });\n    disposeFunctions.push(function () {\n      errorsSub.dispose();\n      aceWarningsSub.dispose();\n      aceErrorsSub.dispose();\n    });\n    var darkThemeEnabled = getFromLocalStorage('ace.dark.theme.enabled', false);\n    editor.setTheme(darkThemeEnabled ? 'ace/theme/hue_dark' : 'ace/theme/hue');\n    var editorOptions = {\n      enableSnippets: true,\n      showGutter: false,\n      showLineNumbers: false,\n      showPrintMargin: false,\n      scrollPastEnd: 0.1,\n      minLines: 1,\n      maxLines: 25\n    };\n    editor.enabledMenuOptions = {\n      setShowInvisibles: true,\n      setTabSize: true,\n      setShowGutter: true\n    };\n    editor.customMenuOptions = {\n      setEnableDarkTheme: function setEnableDarkTheme(enabled) {\n        darkThemeEnabled = enabled;\n        setInLocalStorage('ace.dark.theme.enabled', darkThemeEnabled);\n        editor.setTheme(darkThemeEnabled ? 'ace/theme/hue_dark' : 'ace/theme/hue');\n      },\n      getEnableDarkTheme: function getEnableDarkTheme() {\n        return darkThemeEnabled;\n      },\n      setEnableAutocompleter: function setEnableAutocompleter(enabled) {\n        editor.setOption('enableBasicAutocompletion', enabled);\n        setInLocalStorage('hue.ace.enableBasicAutocompletion', enabled);\n        var $enableLiveAutocompletionChecked = $('#setEnableLiveAutocompletion:checked');\n        var $setEnableLiveAutocompletion = $('#setEnableLiveAutocompletion');\n        if (enabled && $enableLiveAutocompletionChecked.length === 0) {\n          $setEnableLiveAutocompletion.trigger('click');\n        } else if (!enabled && $enableLiveAutocompletionChecked.length !== 0) {\n          $setEnableLiveAutocompletion.trigger('click');\n        }\n      },\n      getEnableAutocompleter: function getEnableAutocompleter() {\n        return editor.getOption('enableBasicAutocompletion');\n      },\n      setEnableLiveAutocompletion: function setEnableLiveAutocompletion(enabled) {\n        editor.setOption('enableLiveAutocompletion', enabled);\n        setInLocalStorage('hue.ace.enableLiveAutocompletion', enabled);\n        if (enabled && $('#setEnableAutocompleter:checked').length === 0) {\n          $('#setEnableAutocompleter').trigger('click');\n        }\n      },\n      getEnableLiveAutocompletion: function getEnableLiveAutocompletion() {\n        return editor.getOption('enableLiveAutocompletion');\n      },\n      setFontSize: function setFontSize(size) {\n        if (size.toLowerCase().indexOf('px') === -1 && size.toLowerCase().indexOf('em') === -1) {\n          size += 'px';\n        }\n        editor.setOption('fontSize', size);\n        setInLocalStorage('hue.ace.fontSize', size);\n      },\n      getFontSize: function getFontSize() {\n        var size = editor.getOption('fontSize');\n        if (size.toLowerCase().indexOf('px') === -1 && size.toLowerCase().indexOf('em') === -1) {\n          size += 'px';\n        }\n        return size;\n      }\n    };\n    if (window.ENABLE_SQL_SYNTAX_CHECK && window.Worker) {\n      var errorHighlightingEnabled = getFromLocalStorage('hue.ace.errorHighlightingEnabled', true);\n      if (errorHighlightingEnabled) {\n        aceLocationHandler.attachSqlSyntaxWorker();\n      }\n      editor.customMenuOptions.setErrorHighlighting = function (enabled) {\n        errorHighlightingEnabled = enabled;\n        setInLocalStorage('hue.ace.errorHighlightingEnabled', enabled);\n        if (enabled) {\n          aceLocationHandler.attachSqlSyntaxWorker();\n        } else {\n          aceLocationHandler.detachSqlSyntaxWorker();\n        }\n      };\n      editor.customMenuOptions.getErrorHighlighting = function () {\n        return errorHighlightingEnabled;\n      };\n      editor.customMenuOptions.setClearIgnoredSyntaxChecks = function () {\n        setInLocalStorage('hue.syntax.checker.suppressedRules', {});\n        $('#setClearIgnoredSyntaxChecks').hide().before('<div style=\"margin-top:5px;float:right;\">done</div>');\n      };\n      editor.customMenuOptions.getClearIgnoredSyntaxChecks = function () {\n        return false;\n      };\n    }\n    $.extend(editorOptions, aceOptions);\n    editorOptions['enableBasicAutocompletion'] = getFromLocalStorage('hue.ace.enableBasicAutocompletion', true);\n    if (editorOptions['enableBasicAutocompletion']) {\n      editorOptions['enableLiveAutocompletion'] = getFromLocalStorage('hue.ace.enableLiveAutocompletion', true);\n    }\n    editorOptions['tabSize'] = 2;\n    editorOptions['useSoftTabs'] = true;\n    editor.setOptions(editorOptions);\n    var AceAutocomplete = ace.require('ace/autocomplete').Autocomplete;\n    if (!editor.completer) {\n      editor.completer = new AceAutocomplete();\n    }\n    editor.completer.exactMatch = !snippet.isSqlDialect();\n    var initAutocompleters = function initAutocompleters() {\n      if (editor.completers) {\n        editor.completers.length = 0;\n        if (snippet.isSqlDialect()) {\n          editor.useHueAutocompleter = true;\n        } else {\n          editor.completers.push(langTools.snippetCompleter);\n          editor.completers.push(langTools.textCompleter);\n          editor.completers.push(langTools.keyWordCompleter);\n          editor.completers.push(snippet.autocompleter);\n        }\n      }\n    };\n    var langTools = ace.require('ace/ext/language_tools');\n    langTools.textCompleter.setSqlMode(snippet.isSqlDialect());\n    initAutocompleters();\n    var UNICODES_TO_REMOVE = /[\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u202F\\u205F\\u3000\\uFEFF]/gi; //taken from https://www.cs.tut.fi/~jkorpela/chars/spaces.html\n\n    var removeUnicodes = function removeUnicodes(value) {\n      return value.replace(UNICODES_TO_REMOVE, ' ');\n    };\n    var placeHolderElement = null;\n    var placeHolderVisible = false;\n    var placeHolderText = snippet.getPlaceHolder();\n    if (placeHolderText) {\n      placeHolderElement = $('<div>').text(placeHolderText).css('margin-left', '6px').addClass('ace_invisible ace_emptyMessage');\n      if (editor.getValue().length === 0) {\n        placeHolderElement.appendTo(editor.renderer.scroller);\n        placeHolderVisible = true;\n      }\n    }\n    var pasteListener = editor.on('paste', function (e) {\n      e.text = removeUnicodes(e.text);\n    });\n    disposeFunctions.push(function () {\n      editor.off('paste', pasteListener);\n    });\n    var inputListener = editor.on('input', function () {\n      if (editor.getValue().length === 0) {\n        if (!placeHolderVisible && placeHolderElement) {\n          placeHolderElement.appendTo(editor.renderer.scroller);\n          placeHolderVisible = true;\n        }\n      } else {\n        placeHolderElement.remove();\n        placeHolderVisible = false;\n      }\n      if (options.updateOnInput) {\n        snippet.statement_raw(removeUnicodes(editor.getValue()));\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.off('input', inputListener);\n    });\n    if (snippet.aceCursorPosition()) {\n      editor.moveCursorToPosition(snippet.aceCursorPosition());\n      window.setTimeout(function () {\n        editor.centerSelection();\n      }, 0);\n    }\n    var focusListener = editor.on('focus', function () {\n      initAutocompleters();\n      snippet.inFocus(true);\n      $('.ace-editor').data('last-active-editor', false);\n      $el.data('last-active-editor', true);\n      if (editor.session.$backMarkers) {\n        for (var marker in editor.session.$backMarkers) {\n          if (editor.session.$backMarkers[marker].clazz === 'highlighted') {\n            editor.session.removeMarker(editor.session.$backMarkers[marker].id);\n          }\n        }\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.off('focus', focusListener);\n    });\n    var changeSelectionListener = editor.selection.on('changeSelection', function () {\n      snippet.selectedStatement(editor.getSelectedText());\n    });\n    disposeFunctions.push(function () {\n      editor.selection.off('changeSelection', changeSelectionListener);\n    });\n    var blurListener = editor.on('blur', function () {\n      snippet.inFocus(false);\n      snippet.statement_raw(removeUnicodes(editor.getValue()));\n      if (options.onBlur) {\n        options.onBlur($el, removeUnicodes(editor.getValue()));\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.off('blur', blurListener);\n    });\n    editor.previousSize = 0;\n\n    // TODO: Get rid of this\n    var idInterval = window.setInterval(function () {\n      editor.session.getMode().$id = snippet.getAceMode(); // forces the id again because of Ace command internals\n    }, 100);\n    disposeFunctions.push(function () {\n      window.clearInterval(idInterval);\n    });\n    editor.middleClick = false;\n    var mousedownListener = editor.on('mousedown', function (e) {\n      if (e.domEvent.which === 2) {\n        // middle click\n        editor.middleClick = true;\n        var tempText = editor.getSelectedText();\n        if (e.$pos) {\n          editor.session.insert(e.$pos, tempText);\n        }\n        window.setTimeout(function () {\n          editor.middleClick = false;\n          if (e.$pos) {\n            editor.moveCursorTo(e.$pos.row, e.$pos.column + tempText.length);\n          }\n        }, 200);\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.off('mousedown', mousedownListener);\n    });\n    var aceReplaceSub = huePubSub.subscribe('ace.replace', function (data) {\n      var Range = ace.require('ace/range').Range;\n      var range = new Range(data.location.first_line - 1, data.location.first_column - 1, data.location.last_line - 1, data.location.last_column - 1);\n      editor.getSession().getDocument().replace(range, data.text);\n    });\n    disposeFunctions.push(function () {\n      aceReplaceSub.remove();\n    });\n    var clickListener = editor.on('click', function () {\n      editor.clearErrorsAndWarnings();\n    });\n    disposeFunctions.push(function () {\n      editor.off('click', clickListener);\n    });\n    var changeListener = editor.on('change', function () {\n      snippet.statement_raw(removeUnicodes(editor.getValue()));\n      editor.session.getMode().$id = snippet.getAceMode();\n      var currentSize = editor.session.getLength();\n      if (currentSize !== editor.previousSize && currentSize >= editorOptions.minLines && currentSize <= editorOptions.maxLines) {\n        editor.previousSize = editor.session.getLength();\n        $(document).trigger('editorSizeChanged');\n      }\n      // automagically change snippet type\n      // TODO: Remove completely, check if used in code, '% dialect'\n      var firstLine = editor.session.getLine(0);\n      if (firstLine.indexOf('%') === 0 && firstLine.charAt(firstLine.length - 1) === ' ') {\n        var availableSnippets = snippet.availableSnippets;\n        var removeFirstLine = false;\n        for (var i = 0; i < availableSnippets.length; i++) {\n          if ($.trim(firstLine.substr(1)) === availableSnippets[i].type()) {\n            snippet.type(availableSnippets[i].type());\n            removeFirstLine = true;\n            break;\n          }\n        }\n        if (removeFirstLine) {\n          editor.session.remove(new AceRange(0, 0, 0, 200));\n        }\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.off('change', changeListener);\n    });\n    editor.commands.addCommand({\n      name: 'execute',\n      bindKey: {\n        win: 'Ctrl-Enter',\n        mac: 'Command-Enter|Ctrl-Enter'\n      },\n      exec: function exec() {\n        snippet.statement_raw(removeUnicodes(editor.getValue()));\n        snippet.execute();\n      }\n    });\n    editor.commands.addCommand({\n      name: 'switchTheme',\n      bindKey: {\n        win: 'Ctrl-Alt-t',\n        mac: 'Command-Alt-t'\n      },\n      exec: function exec() {\n        darkThemeEnabled = !darkThemeEnabled;\n        setInLocalStorage('ace.dark.theme.enabled', darkThemeEnabled);\n        editor.setTheme(darkThemeEnabled ? 'ace/theme/hue_dark' : 'ace/theme/hue');\n      }\n    });\n    editor.commands.addCommand({\n      name: 'new',\n      bindKey: {\n        win: 'Ctrl-e',\n        mac: 'Command-e'\n      },\n      exec: function exec() {\n        huePubSub.publish('editor.create.new');\n      }\n    });\n    editor.commands.addCommand({\n      name: 'save',\n      bindKey: {\n        win: 'Ctrl-s',\n        mac: 'Command-s|Ctrl-s'\n      },\n      exec: function exec() {\n        huePubSub.publish('editor.save');\n      }\n    });\n    editor.commands.addCommand({\n      name: 'esc',\n      bindKey: {\n        win: 'Ctrl-Shift-p',\n        mac: 'Ctrl-Shift-p|Command-Shift-p'\n      },\n      exec: function exec() {\n        huePubSub.publish('editor.presentation.toggle');\n      }\n    });\n    editor.commands.bindKey('Ctrl-P', 'golineup');\n    editor.commands.addCommand({\n      name: 'format',\n      bindKey: {\n        win: 'Ctrl-i|Ctrl-Shift-f|Ctrl-Alt-l',\n        mac: 'Command-i|Ctrl-i|Ctrl-Shift-f|Command-Shift-f|Ctrl-Shift-l|Cmd-Shift-l'\n      },\n      exec: function exec() {\n        var formatted_statements = format(editor.getSelectedText() !== '' ? editor.getSelectedText() : editor.getValue(), {\n          uppercase: true,\n          linesBetweenQueries: 2,\n          indentQuerySeparator: true\n        });\n        if (editor.getSelectedText() !== '') {\n          editor.session.replace(editor.session.selection.getRange(), formatted_statements);\n        } else {\n          editor.setValue(formatted_statements);\n          snippet.statement_raw(removeUnicodes(editor.getValue()));\n        }\n      }\n    });\n    editor.commands.addCommand({\n      name: 'gotolinealternative',\n      bindKey: {\n        win: 'Ctrl-j',\n        mac: 'Command-j|Ctrl-j'\n      },\n      exec: editor.commands.commands['gotoline'].exec\n    });\n    var isNewStatement = function isNewStatement() {\n      return /^\\s*$/.test(editor.getValue()) || /^.*;\\s*$/.test(editor.getTextBeforeCursor());\n    };\n    var insertSqlAtCursor = function insertSqlAtCursor(text, cursorEndAdjust, menu) {\n      var before = editor.getTextBeforeCursor();\n      if (/\\S+$/.test(before)) {\n        text = ' ' + text;\n      }\n      if (menu) {\n        menu.hide();\n      }\n      editor.session.insert(editor.getCursorPosition(), text);\n      if (cursorEndAdjust !== 0) {\n        var cursor = editor.getCursorPosition();\n        editor.moveCursorToPosition({\n          row: cursor.row,\n          column: cursor.column + cursorEndAdjust\n        });\n      }\n      editor.clearSelection();\n      editor.focus();\n    };\n    var insertTableAtCursorSub = huePubSub.subscribe('editor.insert.table.at.cursor', function (details) {\n      if ($el.data('last-active-editor')) {\n        var qualifiedName = snippet.database() === details.database ? details.name : details.database + '.' + details.name;\n        if (isNewStatement()) {\n          insertSqlAtCursor('SELECT * FROM ' + qualifiedName + ' LIMIT 100;', -1);\n        } else {\n          insertSqlAtCursor(qualifiedName + ' ', 0);\n        }\n      }\n    });\n    var insertColumnAtCursorSub = huePubSub.subscribe('editor.insert.column.at.cursor', function (details) {\n      if ($el.data('last-active-editor')) {\n        if (isNewStatement()) {\n          var qualifiedFromName = snippet.database() === details.database ? details.table : details.database + '.' + details.table;\n          insertSqlAtCursor('SELECT ' + details.name + ' FROM ' + qualifiedFromName + ' LIMIT 100;', -1);\n        } else {\n          insertSqlAtCursor(details.name + ' ', 0);\n        }\n      }\n    });\n    var insertAtCursorSub = huePubSub.subscribe(INSERT_AT_CURSOR_EVENT, function (details) {\n      if (details.targetEditor && details.targetEditor === editor || $el.data('last-active-editor')) {\n        insertSqlAtCursor(details.text + ' ', details.cursorEndAdjust || 0);\n      }\n    });\n    disposeFunctions.push(function () {\n      insertTableAtCursorSub.remove();\n      insertColumnAtCursorSub.remove();\n      insertAtCursorSub.remove();\n    });\n    var dblClickHdfsItemSub = huePubSub.subscribe('assist.dblClickHdfsItem', function (assistHdfsEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), \"'\" + assistHdfsEntry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickHdfsItemSub.remove();\n    });\n    var dblClickAdlsItemSub = huePubSub.subscribe('assist.dblClickAdlsItem', function (assistHdfsEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), 'adl:/' + assistHdfsEntry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickAdlsItemSub.remove();\n    });\n    var dblClickAbfsItemSub = huePubSub.subscribe('assist.dblClickAbfsItem', function (assistHdfsEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), 'abfs://' + assistHdfsEntry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickAbfsItemSub.remove();\n    });\n    var dblClickOfsItemSub = huePubSub.subscribe('assist.dblClickOfsItem', function (assistOfsEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), 'ofs://' + assistOfsEntry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickOfsItemSub.remove();\n    });\n    var dblClickGitItemSub = huePubSub.subscribe('assist.dblClickGitItem', function (assistGitEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.setValue(assistGitEntry.fileContent());\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickGitItemSub.remove();\n    });\n    var dblClickS3ItemSub = huePubSub.subscribe('assist.dblClickS3Item', function (assistS3Entry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), \"'s3a://\" + assistS3Entry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickS3ItemSub.remove();\n    });\n    var dblClickGSItemSub = huePubSub.subscribe('assist.dblClickGSItem', function (assistGSEntry) {\n      if ($el.data('last-active-editor')) {\n        editor.session.insert(editor.getCursorPosition(), \"'gs://\" + assistGSEntry.path + \"'\");\n      }\n    });\n    disposeFunctions.push(function () {\n      dblClickGSItemSub.remove();\n    });\n    var sampleErrorInsertSub = huePubSub.subscribe('sample.error.insert.click', function (popoverEntry) {\n      var table = popoverEntry.identifierChain[popoverEntry.identifierChain.length - 1]['name'];\n      var text = 'SELECT * FROM ' + table + ' LIMIT 100;';\n      insertSqlAtCursor(text, -1);\n    });\n    disposeFunctions.push(function () {\n      sampleErrorInsertSub.remove();\n    });\n    var autocompleteTemporarilyDisabled = false;\n    var autocompleteThrottle = -1;\n    var afterExecListener = editor.commands.on('afterExec', function (e) {\n      if (editor.getOption('enableLiveAutocompletion') && e.command.name === 'insertstring') {\n        if (/\\S+\\(\\)$/.test(e.args)) {\n          editor.moveCursorTo(editor.getCursorPosition().row, editor.getCursorPosition().column - 1);\n          return;\n        }\n        window.clearTimeout(autocompleteThrottle);\n        autocompleteThrottle = window.setTimeout(function () {\n          var textBeforeCursor = editor.getTextBeforeCursor();\n          var questionMarkMatch = textBeforeCursor.match(/select\\s+(\\? from \\S+[^.]\\s*$)/i);\n          if (questionMarkMatch && $('.ace_autocomplete:visible').length === 0) {\n            editor.moveCursorTo(editor.getCursorPosition().row, editor.getCursorPosition().column - (questionMarkMatch[1].length - 1));\n            editor.removeTextBeforeCursor(1);\n            huePubSub.publish(REFRESH_STATEMENT_LOCATIONS_EVENT, snippet.id());\n            window.setTimeout(function () {\n              editor.execCommand('startAutocomplete');\n            }, 1);\n          } else if (/\\.$/.test(textBeforeCursor)) {\n            huePubSub.publish(REFRESH_STATEMENT_LOCATIONS_EVENT, snippet.id());\n            window.setTimeout(function () {\n              editor.execCommand('startAutocomplete');\n            }, 1);\n          }\n        }, 400);\n      }\n      editor.session.getMode().$id = snippet.getAceMode(); // forces the id again because of Ace command internals\n      // if it's pig and before it's LOAD ' we disable the autocomplete and show a filechooser btn\n      if (editor.session.getMode().$id === 'ace/mode/pig' && e.args) {\n        var textBefore = editor.getTextBeforeCursor();\n        if (e.args === \"'\" && textBefore.toUpperCase().indexOf('LOAD ') > -1 && textBefore.toUpperCase().indexOf('LOAD ') === textBefore.toUpperCase().length - 5 || textBefore.toUpperCase().indexOf(\"LOAD '\") > -1 && textBefore.toUpperCase().indexOf(\"LOAD '\") === textBefore.toUpperCase().length - 6) {\n          if (editor.getOption('enableBasicAutocompletion')) {\n            editor.disableAutocomplete();\n            autocompleteTemporarilyDisabled = true;\n          }\n          var btn = editor.showFileButton();\n          btn.on('click', function (ie) {\n            ie.preventDefault();\n            // TODO: Turn the ace file chooser into a component and remove css class references\n            var $aceFileChooseContent = $('.ace-filechooser-content');\n            if (!$aceFileChooseContent.data('jHueFileChooser')) {\n              if ($aceFileChooseContent.data('spinner') == null) {\n                $aceFileChooseContent.data('spinner', $aceFileChooseContent.html());\n              } else {\n                $aceFileChooseContent.html($aceFileChooseContent.data('spinner'));\n              }\n              $aceFileChooseContent.jHueFileChooser({\n                onFileChoose: function onFileChoose(filePath) {\n                  editor.session.insert(editor.getCursorPosition(), filePath + \"'\");\n                  editor.hideFileButton();\n                  if (autocompleteTemporarilyDisabled) {\n                    editor.enableAutocomplete();\n                    autocompleteTemporarilyDisabled = false;\n                  }\n                  $('.ace-filechooser').hide();\n                },\n                selectFolder: false,\n                createFolder: false\n              });\n            }\n            $('.ace-filechooser').css({\n              top: $(ie.currentTarget).position().top,\n              left: $(ie.currentTarget).position().left\n            }).show();\n          });\n        } else {\n          editor.hideFileButton();\n          if (autocompleteTemporarilyDisabled) {\n            editor.enableAutocomplete();\n            autocompleteTemporarilyDisabled = false;\n          }\n        }\n        if (e.args !== \"'\" && textBefore.toUpperCase().indexOf(\"LOAD '\") > -1 && textBefore.toUpperCase().indexOf(\"LOAD '\") === textBefore.toUpperCase().length - 6) {\n          editor.hideFileButton();\n          if (autocompleteTemporarilyDisabled) {\n            editor.enableAutocomplete();\n            autocompleteTemporarilyDisabled = false;\n          }\n        }\n      }\n    });\n    disposeFunctions.push(function () {\n      editor.commands.off('afterExec', afterExecListener);\n    });\n    editor.$blockScrolling = Infinity;\n    snippet.ace(editor);\n  },\n  update: function update(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var snippet = options.snippet;\n    var AceRange = ace.require('ace/range').Range;\n    if (snippet.ace()) {\n      var editor = snippet.ace();\n      if (typeof options.readOnly !== 'undefined') {\n        editor.setReadOnly(options.readOnly);\n      }\n      var range = options.highlightedRange ? options.highlightedRange() : null;\n      editor.session.setMode(snippet.getAceMode());\n      if (range && JSON.stringify(range.start) !== JSON.stringify(range.end)) {\n        var conflictingWithErrorMarkers = false;\n        if (editor.session.$backMarkers) {\n          for (var marker in editor.session.$backMarkers) {\n            if (editor.session.$backMarkers[marker].clazz === 'ace_error-line') {\n              var errorRange = editor.session.$backMarkers[marker].range;\n              if (range.start.row <= errorRange.end.row && range.end.row >= errorRange.start.row) {\n                conflictingWithErrorMarkers = true;\n              }\n            }\n            if (editor.session.$backMarkers[marker].clazz === 'highlighted') {\n              editor.session.removeMarker(editor.session.$backMarkers[marker].id);\n            }\n          }\n        }\n        if (!conflictingWithErrorMarkers) {\n          var lineOffset = snippet.lastAceSelectionRowOffset();\n          window.setTimeout(function () {\n            editor.session.addMarker(new AceRange(range.start.row + lineOffset, range.start.column, range.end.row + lineOffset, range.end.column), 'highlighted', 'line');\n            ace.require('ace/lib/dom').importCssString('.highlighted {\\\n                  background-color: #E3F7FF;\\\n                  position: absolute;\\\n              }');\n            editor.scrollToLine(range.start.row + lineOffset, true, true, function () {});\n          }, 0);\n        }\n      }\n      try {\n        editor._emit('change');\n      } catch (e) {}\n    }\n  }\n});","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { hueLocalStorage } from 'utils/storageUtils';\nko.bindingHandlers.aceResizer = {\n  init: function init(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var ace = options.snippet.ace.bind(options.snippet);\n    var $target = $(options.target);\n    var $resizer = $(element);\n    var $contentPanel = $('.content-panel');\n    var $execStatus = $resizer.prev('.snippet-execution-status');\n    var $variables = $resizer.siblings('.snippet-row').find('.variables');\n    var lastEditorSize = hueLocalStorage('hue.editor.editor.size') || 131;\n    var editorHeight = Math.floor(lastEditorSize / 16);\n    $target.height(lastEditorSize);\n    var autoExpand = typeof options.snippet.aceAutoExpand !== 'undefined' ? options.snippet.aceAutoExpand : true;\n    var draggedOnce = false;\n    function throttleChange() {\n      if (autoExpand && !draggedOnce) {\n        var maxAutoLines = Math.floor(($(window).height() - 80) / 2 / 16);\n        var resized = false;\n        if (ace().session.getLength() > editorHeight) {\n          if (ace().session.getLength() < maxAutoLines) {\n            $target.height(ace().session.getLength() * 16);\n          } else {\n            $target.height(maxAutoLines * 16); // height of maxAutoLines\n          }\n          resized = true;\n        } else {\n          $target.height(Math.max(ace().session.getLength() * 16, hueLocalStorage('hue.editor.editor.size') || 131));\n          resized = true;\n        }\n        if (ace().session.getLength() === editorHeight) {\n          resized = false;\n        }\n        if (resized && $target.height() !== lastEditorSize) {\n          ace().resize();\n          editorHeight = Math.min(maxAutoLines, ace().session.getLength());\n          lastEditorSize = $target.height();\n          huePubSub.publish('redraw.fixed.headers');\n        }\n      }\n    }\n    var changeTimeout = -1;\n    ace().on('change', function () {\n      window.clearTimeout(changeTimeout);\n      changeTimeout = window.setTimeout(throttleChange, 10);\n    });\n    var setAutoExpandSubscription = huePubSub.subscribe('ace.set.autoexpand', function (options) {\n      if (ace().container.id === options.snippet.id()) {\n        autoExpand = options.autoExpand;\n      }\n    });\n    $resizer.draggable({\n      axis: 'y',\n      start: options.onStart ? options.onStart : function () {},\n      drag: function drag(event, ui) {\n        draggedOnce = true;\n        var currentHeight = ui.offset.top + $contentPanel.scrollTop() - (125 + $execStatus.outerHeight(true) + $variables.outerHeight(true));\n        $target.css('height', currentHeight + 'px');\n        ace().resize();\n        ui.offset.top = 0;\n        ui.position.top = 0;\n      },\n      stop: function stop(event, ui) {\n        ui.offset.top = 0;\n        ui.position.top = 0;\n        hueLocalStorage('hue.editor.editor.size', $target.height());\n        huePubSub.publish('redraw.fixed.headers');\n        $(document).trigger('editorSizeChanged');\n      }\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      setAutoExpandSubscription.remove();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nexport var registerBinding = function registerBinding(name, model) {\n  if (ko.bindingHandlers[name]) {\n    return;\n  }\n  ko.bindingHandlers[name] = model;\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport nv from \"../../../ext/nv.d3.1.1.15b.custom\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nvar MS = 1;\nvar SECOND_MS = 1000 * MS;\nvar MINUTE_MS = SECOND_MS * 60;\nvar HOUR_MS = MINUTE_MS * 60;\nvar DAY_MS = HOUR_MS * 24;\nvar WEEK_MS = DAY_MS * 7;\nvar MONTH_MS = DAY_MS * 30.5;\nvar YEAR_MS = DAY_MS * 365;\nvar addLegend = function addLegend(element) {\n  var $el = d3v3.select($(element)[0]);\n  var $div = $el.select('div');\n  if (!$div.size()) {\n    $el.append('div').style('position', 'absolute').style('overflow', 'auto').style('top', '20px').style('right', '0px').style('width', '175px').style('height', 'calc(100% - 20px)').append('svg');\n  } else {\n    $div.append('svg');\n  }\n};\nvar barChartBuilder = function barChartBuilder(element, options, isTimeline) {\n  var _datum = options.transformer(options.datum, isTimeline);\n  $(element).height(300);\n  var _isPivot = options.isPivot != null ? options.isPivot : false;\n  if ($(element).find('svg').length > 0 && (_datum.length === 0 || _datum[0].values.length === 0)) {\n    $(element).find('svg').remove();\n  }\n  if (_datum.length > 0 && _datum[0].values.length > 0 && isNaN(_datum[0].values[0].y)) {\n    _datum = [];\n    $(element).find('svg').remove();\n  }\n  nv.addGraph(function () {\n    if ($(element).find('svg').length > 0 && $(element).find('.nv-discreteBarWithAxes').length > 0) {\n      $(element).find('svg').empty();\n    }\n    var _chart = nv.models.multiBarWithBrushChart();\n    _chart.noData(_datum.message || I18n('No Data Available.'));\n    if (_datum.length > 0) {\n      $(element).data('chart_type', 'multibar_brush');\n    }\n    _chart.onSelectRange(function (from, to) {\n      huePubSub.publish('charts.state', {\n        updating: true\n      });\n      options.onSelectRange(from, to);\n    });\n    _chart.multibar.dispatch.on('elementClick', function (d) {\n      if (typeof options.onClick != 'undefined') {\n        huePubSub.publish('charts.state', {\n          updating: true\n        });\n        options.onClick(d.point);\n      }\n    });\n    _chart.onStateChange(options.onStateChange);\n    if (options.selectedSerie) {\n      _chart.onLegendChange(function (state) {\n        var selectedSerie = options.selectedSerie();\n        var _datum = d3v3.select($(element).find('svg')[0]).datum();\n        for (var i = 0; i < state.disabled.length; i++) {\n          selectedSerie[_datum[i].key] = !state.disabled[i];\n        }\n        options.selectedSerie(selectedSerie);\n      });\n    }\n    _chart.multibar.hideable(true);\n    _chart.multibar.stacked(typeof options.stacked != 'undefined' ? options.stacked : false);\n    if (isTimeline) {\n      _chart.convert = function (d) {\n        return isTimeline ? new Date(moment(d[0].obj.from).valueOf()) : parseFloat(d);\n      };\n      _chart.staggerLabels(false);\n      _chart.tooltipContent(function (values) {\n        return values.map(function (value) {\n          value = JSON.parse(JSON.stringify(value));\n          value.x = moment(value.x).utc().format('YYYY-MM-DD HH:mm:ss');\n          value.y = _chart.yAxis.tickFormat()(value.y);\n          return value;\n        });\n      });\n      _chart.xAxis.tickFormat(multi(_chart.xAxis));\n      _chart.multibar.stacked(typeof options.stacked != 'undefined' ? options.stacked : false);\n      _chart.onChartUpdate(function () {\n        _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n          insertLinebreaks(_chart, d, this);\n        });\n      });\n    } else if (numeric(_datum)) {\n      _chart.xAxis.showMaxMin(false).tickFormat(d3v3.format(',0f'));\n      _chart.staggerLabels(false);\n    } else if (!_isPivot) {\n      _chart.multibar.barColor(nv.utils.defaultColor());\n      _chart.staggerLabels(true);\n    }\n    if ($(element).width() < 300 && typeof _chart.showLegend != 'undefined') {\n      _chart.showLegend(false);\n    }\n    _chart.transitionDuration(0);\n    _chart.yAxis.tickFormat(d3v3.format('s'));\n    $(element).data('chart', _chart);\n    handleSelection(_chart, options, _datum);\n    var _d3 = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).insert('svg', ':first-child');\n    if ($(element).find('svg').length < 2) {\n      addLegend(element);\n    }\n    _d3.datum(_datum).transition().duration(150).each('end', function () {\n      if (options.onComplete != null) {\n        options.onComplete();\n      }\n      if (isTimeline) {\n        _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n          insertLinebreaks(_chart, d, this);\n        });\n      }\n      if (options.slot && _chart.recommendedTicks) {\n        options.slot(_chart.recommendedTicks());\n      }\n    }).call(_chart);\n    if (!options.skipWindowResize) {\n      var _resizeTimeout = -1;\n      nv.utils.windowResize(function () {\n        window.clearTimeout(_resizeTimeout);\n        _resizeTimeout = window.setTimeout(function () {\n          _chart.update();\n        }, 200);\n      });\n    }\n    $(element).on('forceUpdate', function () {\n      _chart.update();\n    });\n    return _chart;\n  });\n};\nvar handleSelection = function handleSelection(_chart, _options, _datum) {\n  var i, j;\n  if (_options.selectedSerie) {\n    var selectedSerie = _options.selectedSerie();\n    var enabledCount = 0;\n    for (i = 0; i < _datum.length; i++) {\n      if (!selectedSerie[_datum[i].key]) {\n        _datum[i].disabled = true;\n      } else {\n        enabledCount++;\n      }\n    }\n    if (enabledCount === 0) {\n      // Get the 5 series with the most non zero elements on x axis & total value.\n      var stats = {};\n      for (i = 0; i < _datum.length; i++) {\n        if (!stats[_datum[i].key]) {\n          stats[_datum[i].key] = {\n            count: 0,\n            total: 0\n          };\n        }\n        for (j = 0; j < _datum[i].values.length; j++) {\n          stats[_datum[i].key].count += Math.min(_datum[i].values[j].y, 1);\n          stats[_datum[i].key].total += _datum[i].values[j].y;\n        }\n      }\n      var aStats = Object.keys(stats).map(function (key) {\n        return {\n          key: key,\n          stat: stats[key]\n        };\n      });\n      aStats.sort(function (a, b) {\n        return a.stat.count - b.stat.count || a.stat.total - b.stat.total;\n      });\n      for (i = aStats.length - 1; i >= Math.max(aStats.length - 5, 0); i--) {\n        _datum[i].disabled = false;\n        selectedSerie[_datum[i].key] = true;\n      }\n    }\n  }\n  var _isPivot = _options.isPivot != null ? _options.isPivot : false;\n  var _hideSelection = typeof _options.hideSelection !== 'undefined' ? typeof _options.hideSelection === 'function' ? _options.hideSelection() : _options.hideSelection : false;\n  var _enableSelection = typeof _options.enableSelection !== 'undefined' ? typeof _options.enableSelection === 'function' ? _options.enableSelection() : _options.enableSelection : true;\n  _enableSelection = _enableSelection && numeric(_datum);\n  var _hideStacked = _options.hideStacked !== null ? typeof _options.hideStacked === 'function' ? _options.hideStacked() : _options.hideStacked : false;\n  var _displayValuesInLegend = _options.displayValuesInLegend !== null ? typeof _options.displayValuesInLegend === 'function' ? _options.displayValuesInLegend() : _options.displayValuesInLegend : false;\n  var fHideSelection = _isPivot || _hideSelection ? _chart.hideSelection : _chart.showSelection;\n  if (fHideSelection) {\n    fHideSelection.call(_chart);\n  }\n  var fEnableSelection = _enableSelection ? _chart.enableSelection : _chart.disableSelection;\n  if (fEnableSelection) {\n    fEnableSelection.call(_chart);\n  }\n  var fHideStacked = _hideStacked ? _chart.hideStacked : _chart.showStacked;\n  if (fHideStacked) {\n    fHideStacked.call(_chart);\n  }\n  if (_chart.displayValuesInLegend) {\n    _chart.displayValuesInLegend(_displayValuesInLegend);\n  }\n  if (_chart.selectBars) {\n    var _field = typeof _options.field == 'function' ? _options.field() : _options.field;\n    var bHasSelection = false;\n    $.each(_options.fqs ? _options.fqs() : [], function (cnt, item) {\n      if (item.id() === _options.datum.widget_id) {\n        if (item.field() === _field) {\n          if (item.properties && typeof item.properties === 'function') {\n            bHasSelection = true;\n            _chart.selectBars({\n              singleValues: $.map(item.filter(), function (it) {\n                return it.value();\n              }),\n              rangeValues: $.map(item.properties(), function (it) {\n                return {\n                  from: it.from(),\n                  to: it.to()\n                };\n              })\n            });\n          } else {\n            bHasSelection = true;\n            _chart.selectBars($.map(item.filter(), function (it) {\n              return it.value();\n            }));\n          }\n        }\n        if (Array.isArray(item.field())) {\n          bHasSelection = true;\n          _chart.selectBars({\n            field: item.field(),\n            selected: $.map(item.filter(), function (it) {\n              return {\n                values: it.value()\n              };\n            })\n          });\n        }\n      }\n    });\n    if (!bHasSelection) {\n      _chart.selectBars({\n        field: '',\n        selected: []\n      });\n    }\n  }\n};\nvar insertLinebreaks = function insertLinebreaks(_chart, d, ref) {\n  var _el = d3v3.select(ref);\n  var _mom = moment(d);\n  if (_mom != null && _mom.isValid()) {\n    var _words = _el.text().split(' ');\n    _el.text('');\n    for (var i = 0; i < _words.length; i++) {\n      var tspan = _el.append('tspan').text(_words[i]);\n      if (i > 0) {\n        tspan.attr('x', 0).attr('dy', '15');\n      }\n    }\n  }\n};\nvar lineChartBuilder = function lineChartBuilder(element, options, isTimeline) {\n  var _datum = options.transformer(options.datum);\n  $(element).height(300);\n  if ($(element).find('svg').length > 0 && (_datum.length === 0 || _datum[0].values.length === 0)) {\n    $(element).find('svg').empty();\n  }\n  if (_datum.length > 0 && _datum[0].values.length > 0 && (isNaN(_datum[0].values[0].x) || isNaN(_datum[0].values[0].y))) {\n    _datum = [];\n    $(element).find('svg').empty();\n  }\n  if ($(element).is(':visible')) {\n    nv.addGraph(function () {\n      var _chart = nv.models.lineWithBrushChart();\n      _chart.noData(_datum.message || I18n('No Data Available.'));\n      $(element).data('chart', _chart);\n      _chart.transitionDuration(0);\n      _chart.convert = function (d) {\n        return isTimeline ? new Date(moment(d[0].obj.from).valueOf()) : parseFloat(d);\n      };\n      if (options.showControls != null) {\n        _chart.showControls(false);\n      }\n      _chart.onSelectRange(function (from, to) {\n        huePubSub.publish('charts.state', {\n          updating: true\n        });\n        options.onSelectRange($.isNumeric(from) && isTimeline ? new Date(moment(from).valueOf()) : parseInt(from), $.isNumeric(to) && isTimeline ? new Date(moment(to).valueOf()) : parseInt(to)); // FIXME when using pdouble we should not parseInt.\n      });\n      if (options.selectedSerie) {\n        _chart.onLegendChange(function (state) {\n          var selectedSerie = options.selectedSerie();\n          var _datum = d3v3.select($(element).find('svg')[0]).datum();\n          for (var i = 0; i < state.disabled.length; i++) {\n            selectedSerie[_datum[i].key] = !state.disabled[i];\n          }\n          options.selectedSerie(selectedSerie);\n        });\n      }\n      _chart.xAxis.showMaxMin(false);\n      if (isTimeline) {\n        _chart.xScale(d3v3.time.scale.utc());\n        _chart.tooltipContent(function (values) {\n          return values.map(function (value) {\n            value = JSON.parse(JSON.stringify(value));\n            value.x = moment(value.x).utc().format('YYYY-MM-DD HH:mm:ss');\n            value.y = _chart.yAxis.tickFormat()(value.y);\n            return value;\n          });\n        });\n        _chart.xAxis.tickFormat(multi(_chart.xAxis, _chart));\n        _chart.onChartUpdate(function () {\n          _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n            insertLinebreaks(_chart, d, this);\n          });\n        });\n      }\n      _chart.yAxis.tickFormat(d3v3.format('s'));\n      handleSelection(_chart, options, _datum);\n      var _d3 = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).insert('svg', ':first-child');\n      if ($(element).find('svg').length < 2) {\n        addLegend(element);\n      }\n      _d3.datum(_datum).transition().duration(150).each('end', function () {\n        if (options.onComplete != null) {\n          options.onComplete();\n        }\n        if (isTimeline) {\n          _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n            insertLinebreaks(_chart, d, this);\n          });\n        }\n      }).call(_chart);\n      var _resizeTimeout = -1;\n      nv.utils.windowResize(function () {\n        window.clearTimeout(_resizeTimeout);\n        _resizeTimeout = window.setTimeout(function () {\n          _chart.update();\n        }, 200);\n      });\n      $(element).on('forceUpdate', function () {\n        _chart.update();\n      });\n      _chart.lines.dispatch.on('elementClick', function (d) {\n        if (typeof options.onClick != 'undefined') {\n          huePubSub.publish('charts.state', {\n            updating: true\n          });\n          options.onClick(d.point);\n        }\n      });\n      return _chart;\n    });\n  }\n};\nvar multi = function multi(xAxis) {\n  var previous = new Date(9999, 11, 31);\n  return d3v3.time.format.utc.multi([['%H:%M:%S %Y-%m-%d', function (d) {\n    var domain = xAxis.domain();\n    var result = (previous > d || d === domain[0]) && moment(d).utc().seconds();\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%H:%M %Y-%m-%d', function (d) {\n    var domain = xAxis.domain();\n    var result = previous > d || d === domain[0];\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%S %H:%M', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().minutes() !== moment(d).utc().minutes() && previousDiff < MINUTE_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%S', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().seconds() !== moment(d).utc().seconds() && previousDiff < MINUTE_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%H:%M:%S %Y-%m-%d', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().date() !== moment(d).utc().date() && previousDiff < WEEK_MS && moment(d).utc().seconds();\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%H:%M %Y-%m-%d', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().date() !== moment(d).utc().date() && previousDiff < WEEK_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%H:%M:%S', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = (moment(previous).utc().hours() !== moment(d).utc().hours() || moment(previous).utc().minutes() !== moment(d).utc().minutes()) && previousDiff < WEEK_MS && moment(d).utc().seconds();\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%H:%M', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = (moment(previous).utc().hours() !== moment(d).utc().hours() || moment(previous).utc().minutes() !== moment(d).utc().minutes()) && previousDiff < WEEK_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%d %Y-%m', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().months() !== moment(d).utc().months() && previousDiff < MONTH_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%d', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().date() !== moment(d).utc().date() && previousDiff < MONTH_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%m %Y', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().years() !== moment(d).utc().years() && previousDiff < YEAR_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%m', function (d) {\n    var previousDiff = Math.abs(d - previous);\n    var result = moment(previous).utc().months() !== moment(d).utc().months() && previousDiff < YEAR_MS;\n    if (result) {\n      previous = d;\n    }\n    return result;\n  }], ['%Y', function (d) {\n    previous = d;\n    return true;\n  }]]);\n};\nvar numeric = function numeric(_datum) {\n  for (var j = 0; j < _datum.length; j++) {\n    for (var i = 0; i < _datum[j].values.length; i++) {\n      if (isNaN(_datum[j].values[i].x * 1)) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\nexport { barChartBuilder, handleSelection, insertLinebreaks, lineChartBuilder, numeric };","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport nv from \"../../../ext/nv.d3.1.1.15b.custom\";\nimport I18n from \"../../../utils/i18n\";\nimport { barChartBuilder, handleSelection, lineChartBuilder, numeric } from \"./chartUtils\";\nimport huePubSub from 'utils/huePubSub';\nvar getChartType = function getChartType(options) {\n  if (typeof (options === null || options === void 0 ? void 0 : options.type) === 'function') {\n    var typeResult = options.type();\n    return Array.isArray(typeResult) ? typeResult[0] : typeResult;\n  } else if (typeof console.warn !== 'undefined') {\n    console.warn('Expected chart options type to be a function');\n  }\n};\nko.bindingHandlers.barChart = {\n  init: function init(element, valueAccessor) {\n    var _options = ko.unwrap(valueAccessor());\n    if (getChartType(_options) === 'line') {\n      window.setTimeout(function () {\n        lineChartBuilder(element, valueAccessor(), false);\n      }, 0);\n      $(element).data('type', 'line');\n    } else {\n      window.setTimeout(function () {\n        barChartBuilder(element, valueAccessor(), false);\n      }, 0);\n      $(element).data('type', 'bar');\n    }\n  },\n  update: function update(element, valueAccessor) {\n    var _options = ko.unwrap(valueAccessor());\n    var chosenChartType = getChartType(_options);\n    var renderedChartType = $(element).data('type');\n    var chartTypeHasChanged = chosenChartType !== renderedChartType;\n    var chartNotBuilt = !$(element).data('chart');\n    if (chartTypeHasChanged || chartNotBuilt) {\n      if ($(element).find('svg').length > 0) {\n        $(element).find('svg').remove();\n      }\n      if (chosenChartType === 'line') {\n        window.setTimeout(function () {\n          lineChartBuilder(element, valueAccessor(), false);\n        }, 0);\n      } else {\n        window.setTimeout(function () {\n          barChartBuilder(element, valueAccessor(), false);\n        }, 0);\n      }\n      $(element).data('type', chosenChartType);\n    }\n    var _datum = _options.transformer(_options.datum);\n    var _chart = $(element).data('chart');\n    var _isPivot = _options.isPivot != null ? _options.isPivot : false;\n    if (_chart) {\n      _chart.noData(_datum.message || I18n('No Data Available.'));\n      if (_chart.multibar) {\n        _chart.multibar.stacked(typeof _options.stacked != 'undefined' ? _options.stacked : false);\n      }\n      if (numeric(_datum)) {\n        _chart.xAxis.showMaxMin(false).tickFormat(d3v3.format(',0f'));\n        if (_chart.multibar) {\n          _chart.multibar.barColor(null);\n        }\n      } else {\n        _chart.xAxis.tickFormat(function (s) {\n          return s;\n        });\n        if (_chart.multibar) {\n          if (!_isPivot) {\n            _chart.multibar.barColor(nv.utils.defaultColor());\n          } else {\n            _chart.multibar.barColor(null);\n          }\n        }\n      }\n      window.setTimeout(function () {\n        handleSelection(_chart, _options, _datum);\n        var _d3 = d3v3.select($(element).find('svg')[0]);\n        _d3.datum(_datum).transition().duration(150).each('end', function () {\n          if (_options.onComplete != null) {\n            _options.onComplete();\n          }\n        }).call(_chart);\n        huePubSub.publish('charts.state');\n      }, 0);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport \"../../../ext/leaflet/leaflet\";\nimport \"../../../ext/leaflet/leaflet.markercluster\";\nimport \"../../../ext/leaflet/leaflet.heat\";\nimport \"../../../ext/leaflet/leaflet.zoombox\";\nimport { GLOBAL_ERROR_TOPIC } from 'reactComponents/AlertComponent/events';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.leafletMapChart = {\n  update: function update(element, valueAccessor) {\n    var L = window.L;\n    var _options = valueAccessor();\n    var _data = _options.transformer(valueAccessor().datum);\n    function toggleVisibility() {\n      if (!_data.message && (_options.visible != null && _options.visible || _options.visible == null || typeof _options == 'undefined')) {\n        $(element).show();\n        $(element).siblings('.leaflet-nodata').remove();\n      } else {\n        $(element).hide();\n        if ((_data.message || _options.visible != null && _options.visible) && !_options.isLoading) {\n          $(element).siblings('.leaflet-nodata').remove();\n          $(element).before($('<div>').addClass('leaflet-nodata').css({\n            textAlign: 'center',\n            fontSize: '18px',\n            fontWeight: 700,\n            marginTop: '20px'\n          }).text(_data.message || window.I18n('No Data Available.')));\n        }\n      }\n    }\n    if ($(element).data('mapData') == null || $(element).data('mapData') !== ko.toJSON(_data) || _options.forceRedraw) {\n      $(element).data('mapData', ko.toJSON(_data));\n      var _hasAtLeastOneLat = false;\n      _data.forEach(function (item) {\n        if (item.lat != null && $.isNumeric(item.lat)) {\n          _hasAtLeastOneLat = true;\n        }\n      });\n      var _hasAtLeastOneLng = false;\n      _data.forEach(function (item) {\n        if (item.lng != null && $.isNumeric(item.lng)) {\n          _hasAtLeastOneLng = true;\n        }\n      });\n      if (_options.height != null) {\n        $(element).height(_options.height * 1);\n      } else if ($(element).parents('.tab-pane').length > 0) {\n        $(element).height($(element).parents('.tab-pane').height() - 100);\n      } else {\n        $(element).height(300);\n      }\n      toggleVisibility();\n      var _map = null;\n      if ($(element).data('_map') != null) {\n        _map = $(element).data('_map');\n        _map.removeLayer($(element).data('_markerLayer'));\n        if ($(element).data('_heatLayer')) {\n          _map.removeLayer($(element).data('_heatLayer'));\n          $(element).data('_heatLayer', null);\n        }\n      }\n      var _clusterGroup = L.markerClusterGroup({\n        maxClusterRadius: 10,\n        polygonOptions: {\n          weight: 1.5\n        }\n      });\n      var heat;\n      if (_hasAtLeastOneLat && _hasAtLeastOneLng) {\n        try {\n          if (_map == null) {\n            if (window.LEAFLET_DEFAULTS.mapOptions.crs) {\n              window.LEAFLET_DEFAULTS.mapOptions.crs = L.CRS[window.LEAFLET_DEFAULTS.mapOptions.crs];\n            }\n            _map = L.map(element, window.LEAFLET_DEFAULTS.mapOptions);\n            var tileLayerOptions = {\n              layer: 'http://{s}.tile.osm.org/{z}/{x}/{y}.png',\n              attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            };\n            if (window.LEAFLET_DEFAULTS.layer) {\n              tileLayerOptions.layer = window.LEAFLET_DEFAULTS.layer;\n            }\n            if (window.LEAFLET_DEFAULTS.attribution) {\n              tileLayerOptions.attribution = window.LEAFLET_DEFAULTS.attribution;\n            }\n            if (window.LEAFLET_DEFAULTS.layerOptions) {\n              tileLayerOptions = $.extend(tileLayerOptions, window.LEAFLET_DEFAULTS.layerOptions);\n            }\n            L.tileLayer(tileLayerOptions.layer, tileLayerOptions).addTo(_map);\n            if (L.control.zoomBox) {\n              var _zoomBox = L.control.zoomBox({\n                modal: true\n              });\n              _map.addControl(_zoomBox);\n            }\n            if (_options.showMoveCheckbox) {\n              var _command = L.control({\n                position: $(element).width() > 300 ? 'topright' : 'bottomleft'\n              });\n              _command.onAdd = function (map) {\n                var div = L.DomUtil.create('div', 'leaflet-search-command leaflet-bar leaflet-move-label');\n                div.innerHTML = '<button id=\"command' + $(element).parents('.card-widget').attr('id') + '\" type=\"button\" class=\"btn btn-mini disable-feedback\"><i class=\"fa fa-fw fa-square-o\"></i> ' + (_options.moveCheckboxLabel ? _options.moveCheckboxLabel : 'Search as I move the map') + '</button>';\n                return div;\n              };\n              _command.addTo(_map);\n              if (_options.onRegionChange == null) {\n                _options.onRegionChange = function () {};\n              }\n              var _onRegionChange = function _onRegionChange() {};\n              $('#command' + $(element).parents('.card-widget').attr('id')).on('click', function (e) {\n                $(this).toggleClass('btn-primary');\n                $(this).find('.fa-fw').toggleClass('fa-check-square');\n                if ($(this).hasClass('btn-primary')) {\n                  if (_options.onRegionChange != null) {\n                    _onRegionChange = _options.onRegionChange;\n                  }\n                } else {\n                  _onRegionChange = function _onRegionChange() {};\n                }\n              });\n              ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n                $('#command' + $(element).parents('.card-widget').attr('id')).off('click');\n              });\n              _map.on('boxzoomend', function (e) {\n                _onRegionChange(e.boxZoomBounds);\n              });\n              _map.on('dragend', function () {\n                _onRegionChange(_map.getBounds());\n              });\n              _map.on('zoomend', function () {\n                _onRegionChange(_map.getBounds());\n              });\n              _map.on('viewreset', function () {\n                huePubSub.publish('leaflet.afterplot', element);\n              });\n            }\n          }\n          var heatData = [];\n          var sumHeatData = function sumHeatData(data) {\n            var sumData = [];\n            data.forEach(function (d) {\n              var found = false;\n              if (d.length === 3) {\n                sumData.forEach(function (s) {\n                  if (d[0] === s[0] && d[1] === s[1]) {\n                    found = true;\n                    s[2] += d[2];\n                  }\n                });\n              }\n              if (!found) {\n                sumData.push(d);\n              }\n            });\n            return sumData;\n          };\n          var getMaxIntensity = function getMaxIntensity(data) {\n            var maxIntensity = 0;\n            data.forEach(function (d) {\n              if (d[2] > maxIntensity) {\n                maxIntensity = d[2];\n              }\n            });\n            return maxIntensity;\n          };\n          _data.forEach(function (item) {\n            if (item && item.lng != null && item.lat != null) {\n              var _addMarker = false;\n              try {\n                var _latLngObj = L.latLng(item.lat, item.lng);\n                _addMarker = true;\n              } catch (e) {\n                if (typeof console != 'undefined') {\n                  console.error(e);\n                }\n              }\n              if (_addMarker) {\n                var _marker = L.marker([item.lat, item.lng]);\n                if (item.isHeat) {\n                  if (item.intensity != null) {\n                    heatData.push([item.lat, item.lng, item.intensity]);\n                  } else {\n                    heatData.push([item.lat, item.lng]);\n                  }\n                } else if (item.label != null) {\n                  _marker.bindPopup($.isArray(item.label) ? item.label.join('') : item.label);\n                }\n                _clusterGroup.addLayer(_marker);\n              }\n            }\n          });\n          if (heatData.length > 0) {\n            heatData = sumHeatData(heatData);\n            heat = L.heatLayer(heatData);\n            if (heatData[0].length === 3) {\n              // it has intensity\n              heat.setOptions(getMaxIntensity(heatData));\n            }\n          }\n          window.setTimeout(function () {\n            if (!$('#command' + $(element).parents('.card-widget').attr('id')).is(':checked')) {\n              _map.fitBounds(_clusterGroup.getBounds());\n            }\n            if ($(element).find('.leaflet-tile-pane').children().length > 0) {\n              if (heatData.length == 0) {\n                _map.addLayer(_clusterGroup);\n                $('.leaflet-heatmap-layer').remove();\n              } else {\n                try {\n                  $('.leaflet-heatmap-layer').remove();\n                  heat.addTo(_map);\n                } catch (e) {} // context2D not initialized yet\n              }\n            }\n            if (_options.onComplete != null) {\n              _options.onComplete();\n            }\n          }, 0);\n          var resizeSubscription = huePubSub.subscribe('resize.leaflet.map', function () {\n            if ($(element).data('_map')) {\n              $(element).data('_map').invalidateSize();\n              if ($(element).data('_markerLayer')) {\n                try {\n                  $(element).data('_map').fitBounds($(element).data('_markerLayer').getBounds());\n                } catch (e) {}\n              }\n            }\n          });\n          ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n            resizeSubscription.remove();\n          });\n        } catch (err) {\n          huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n            message: err.message\n          });\n        }\n      }\n      var previousMarkerLayer = $(element).data('_markerLayer');\n      if (previousMarkerLayer) {\n        window.setTimeout(function () {\n          try {\n            previousMarkerLayer.removeLayers(previousMarkerLayer.getLayers());\n          } catch (e) {}\n        }, 0);\n      }\n      $(element).data('_map', _map);\n      $(element).data('_markerLayer', _clusterGroup);\n      $(element).data('_heatLayer', heat);\n      if (_options.onComplete != null) {\n        _options.onComplete();\n      }\n    } else {\n      toggleVisibility();\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport I18n from \"../../../utils/i18n\";\nimport { insertLinebreaks, lineChartBuilder } from \"./chartUtils\";\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.lineChart = {\n  init: function init(element, valueAccessor) {\n    window.setTimeout(function () {\n      lineChartBuilder(element, valueAccessor(), false);\n    }, 0);\n  },\n  update: function update(element, valueAccessor) {\n    var _options = valueAccessor();\n    var _datum = _options.transformer(_options.datum);\n    var _chart = $(element).data('chart');\n    if (_chart) {\n      window.setTimeout(function () {\n        _chart.noData(_datum.message || I18n('No Data Available.'));\n        var _d3 = d3v3.select($(element).find('svg')[0]);\n        if (_datum.length > 0 && _datum[0].values.length > 0 && typeof _datum[0].values[0].x.isValid === 'function') {\n          _chart.xAxis.tickFormat(function (d) {\n            return d3v3.time.format('%Y-%m-%d %H:%M:%S')(new Date(d));\n          });\n          _chart.onChartUpdate(function () {\n            _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n              insertLinebreaks(_chart, d, this);\n            });\n          });\n        }\n        _d3.datum(_datum).transition().duration(150).each('end', function () {\n          if (_options.onComplete != null) {\n            _options.onComplete();\n          }\n        }).call(_chart);\n        huePubSub.publish('charts.state');\n      }, 0);\n    } else if (_datum.length > 0) {\n      ko.bindingHandlers.lineChart.init(element, valueAccessor);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport HueColors from \"../../../utils/hueColors\";\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.partitionChart = {\n  render: function render(element, valueAccessor) {\n    huePubSub.publish('charts.state');\n    var MIN_HEIGHT_FOR_TOOLTIP = 24;\n    var _options = valueAccessor();\n    var _data = _options.transformer(valueAccessor().datum);\n    var _w = $(element).width(),\n      _h = 300,\n      _x = d3v3.scale.linear().range([0, _w]),\n      _y = d3v3.scale.linear().range([0, _h]);\n    if ($(element).find('svg').length > 0) {\n      $(element).find('svg').empty();\n    }\n    var _tip = d3v3.tip().attr('class', 'd3-tip').html(function (d) {\n      if (d.depth === 0) {\n        return _options.tooltip || '';\n      } else if (d.depth > 0 && d.depth < 2) {\n        return d.name + ' (' + d.value + ')';\n      } else {\n        return d.parent.name + ' - ' + d.name + ' (' + d.value + ')';\n      }\n    }).offset([-12, 0]);\n    var _svg = $(element).find('svg.tip').length > 0 ? d3v3.select($(element).find('svg.tip')[0]) : d3v3.select($(element)[0]).append('svg');\n    _svg.attr('class', 'tip').style('height', '0px');\n    _svg.call(_tip);\n    var _vis = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).append('svg');\n    _vis.attr('class', 'partitionChart').style('width', _w + 'px').style('height', _h + 'px').attr('width', _w).attr('height', _h);\n    var _partition = d3v3.layout.partition().value(function (d) {\n      return d.size;\n    });\n    var g = _vis.selectAll('g').data(_partition.nodes(_data)).enter().append('svg:g').attr('transform', function (d) {\n      return 'translate(' + _x(d.y) + ',' + _y(d.x) + ')';\n    }).on('mouseover', function (d, i) {\n      if (element.querySelectorAll('rect')[i].getBBox().height < MIN_HEIGHT_FOR_TOOLTIP || d.depth === 0) {\n        _tip.attr('class', 'd3-tip').show(d);\n      }\n      if (typeof this.__data__.parent === 'undefined') {\n        return;\n      }\n      d3v3.select(this).select('rect').classed('mouseover', true);\n    }).on('mouseout', function (d, i) {\n      if (element.querySelectorAll('rect')[i].getBBox().height < MIN_HEIGHT_FOR_TOOLTIP || d.depth === 0) {\n        _tip.attr('class', 'd3-tip').show(d);\n        _tip.hide();\n      }\n      d3v3.select(this).select('rect').classed('mouseover', false);\n    });\n    if (typeof _options.zoomable == 'undefined' || _options.zoomable) {\n      g.on('click', click).on('dblclick', function (d) {\n        if (typeof _options.onClick != 'undefined' && d.depth > 0) {\n          huePubSub.publish('charts.state', {\n            updating: true\n          });\n          _options.onClick(d);\n        }\n      });\n    } else {\n      g.on('click', function (d) {\n        if (typeof _options.onClick != 'undefined' && d.depth > 0) {\n          huePubSub.publish('charts.state', {\n            updating: true\n          });\n          _options.onClick(d);\n        }\n      });\n    }\n    var _kx = _w / _data.dx,\n      _ky = _h / 1;\n    var _colors = [HueColors.cuiD3Scale('gray')[0]];\n    g.append('svg:rect').attr('width', _data.dy * _kx).attr('height', function (d) {\n      return d.dx * _ky;\n    }).attr('class', function (d) {\n      return d.children ? 'parent' : 'child';\n    }).attr('stroke', function () {\n      return HueColors.cuiD3Scale('gray')[3];\n    }).attr('fill', function (d) {\n      var _fill = _colors[d.depth] || _colors[_colors.length - 1];\n      if (d.obj && _options.fqs) {\n        $.each(_options.fqs(), function (cnt, item) {\n          $.each(item.filter(), function (icnt, filter) {\n            if (JSON.stringify(filter.value()) === JSON.stringify(d.obj.fq_values)) {\n              _fill = HueColors.cuiD3Scale('gray')[3];\n            }\n          });\n        });\n      }\n      return _fill;\n    });\n    g.append('svg:text').attr('transform', transform).attr('dy', '.35em').style('opacity', function (d) {\n      return d.dx * _ky > 12 ? 1 : 0;\n    }).text(function (d) {\n      if (d.depth < 2) {\n        return d.name + ' (' + d.value + ')';\n      } else {\n        return d.parent.name + ' - ' + d.name + ' (' + d.value + ')';\n      }\n    });\n    d3v3.select(window).on('click', function () {\n      click(_data);\n    });\n    function click(d) {\n      _tip.hide();\n      if (!d.children) {\n        return;\n      }\n      _kx = (d.y ? _w - 40 : _w) / (1 - d.y);\n      _ky = _h / d.dx;\n      _x.domain([d.y, 1]).range([d.y ? 40 : 0, _w]);\n      _y.domain([d.x, d.x + d.dx]);\n      var t = g.transition().delay(250).duration(d3v3.event.altKey ? 7500 : 750).attr('transform', function (d) {\n        return 'translate(' + _x(d.y) + ',' + _y(d.x) + ')';\n      });\n      t.select('rect').attr('width', d.dy * _kx).attr('height', function (d) {\n        return d.dx * _ky;\n      });\n      t.select('text').attr('transform', transform).style('opacity', function (d) {\n        return d.dx * _ky > 12 ? 1 : 0;\n      });\n      d3v3.event.stopPropagation();\n    }\n    function transform(d) {\n      return 'translate(8,' + d.dx * _ky / 2 + ')';\n    }\n    if (_options.onComplete) {\n      _options.onComplete();\n    }\n  },\n  init: function init(element, valueAccessor) {\n    ko.bindingHandlers.partitionChart.render(element, valueAccessor);\n  },\n  update: function update(element, valueAccessor) {\n    ko.bindingHandlers.partitionChart.render(element, valueAccessor);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport nv from \"../../../ext/nv.d3.1.1.15b.custom\";\nimport huePubSub from 'utils/huePubSub';\nimport htmlEncode from 'utils/html/htmlEncode';\nimport I18n from \"../../../utils/i18n\";\nko.bindingHandlers.pieChart = {\n  init: function init(element, valueAccessor) {\n    window.setTimeout(function () {\n      var _options = valueAccessor();\n      var _data = _options.transformer(_options.data);\n      $(element).css('marginLeft', 'auto');\n      $(element).css('marginRight', 'auto');\n      if (typeof _options.maxWidth != 'undefined') {\n        var _max = _options.maxWidth * 1;\n        $(element).width(Math.min($(element).parent().width(), _max));\n      }\n      if ($(element).find('svg').length > 0 && _data.length === 0) {\n        $(element).find('svg').empty();\n      }\n      if (_data.length > 0 && isNaN(_data[0].value)) {\n        _data = [];\n        $(element).find('svg').empty();\n      }\n      if ($(element).is(':visible')) {\n        nv.addGraph(function () {\n          var _chart = nv.models.growingPieChart().x(function (d) {\n            return d.label;\n          }).y(function (d) {\n            return d.value;\n          }).height($(element).width()).showLabels(true).showLegend(false).tooltipContent(function (key, y) {\n            return '<h3>' + htmlEncode(key) + '</h3><p>' + y + '</p>';\n          });\n          _chart.noData(_data.message || I18n('No Data Available.'));\n          var _d3 = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).append('svg');\n          _d3.datum(_data).transition().duration(150).each('end', _options.onComplete != null ? _options.onComplete : void 0).call(_chart);\n          if (_options.fqs) {\n            $.each(_options.fqs(), function (cnt, item) {\n              if (item.id() === _options.data.widget_id && item.field() === _options.field()) {\n                _chart.selectSlices($.map(item.filter(), function (it) {\n                  return it.value();\n                }));\n              }\n            });\n          }\n          $(element).data('chart', _chart);\n          var _resizeTimeout = -1;\n          nv.utils.windowResize(function () {\n            window.clearTimeout(_resizeTimeout);\n            _resizeTimeout = window.setTimeout(function () {\n              _chart.update();\n            }, 200);\n          });\n          $(element).on('forceUpdate', function () {\n            _chart.update();\n          });\n          $(element).height($(element).width());\n          var _parentSelector = typeof _options.parentSelector != 'undefined' ? _options.parentSelector : '.card-widget';\n          $(element).parents(_parentSelector).on('resize', function () {\n            if (typeof _options.maxWidth != 'undefined') {\n              var _max2 = _options.maxWidth * 1;\n              $(element).width(Math.min($(element).parent().width(), _max2));\n            }\n            $(element).height($(element).width());\n            _chart.update();\n          });\n          return _chart;\n        }, function () {\n          var _d3 = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).append('svg');\n          _d3.selectAll('.nv-slice').on('click', function (d) {\n            if (typeof _options.onClick != 'undefined') {\n              huePubSub.publish('charts.state', {\n                updating: true\n              });\n              _options.onClick(d);\n            }\n          });\n        });\n      }\n    }, 0);\n  },\n  update: function update(element, valueAccessor) {\n    var _options = valueAccessor();\n    var _data = _options.transformer(_options.data);\n    var _chart = $(element).data('chart');\n    if (_chart) {\n      _chart.noData(_data.message || I18n('No Data Available.'));\n      var _d3 = d3v3.select($(element).find('svg')[0]);\n      _d3.datum(_data).transition().duration(150).each('end', _options.onComplete != null ? _options.onComplete : void 0).call(_chart);\n      if (_options.fqs) {\n        $.each(_options.fqs(), function (cnt, item) {\n          if (item.id() === _options.data.widget_id && item.field() === _options.field()) {\n            _chart.selectSlices($.map(item.filter(), function (it) {\n              return it.value();\n            }));\n          }\n        });\n      }\n      huePubSub.publish('charts.state');\n    } else if (_data.length > 0) {\n      ko.bindingHandlers.pieChart.init(element, valueAccessor);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport nv from \"../../../ext/nv.d3.1.1.15b.custom\";\nko.bindingHandlers.scatterChart = {\n  update: function update(element, valueAccessor) {\n    var options = valueAccessor();\n    var _datum = options.transformer(options.datum);\n    window.setTimeout(function () {\n      $(element).height(300);\n      if ($(element).find('svg').length > 0 && (_datum.length === 0 || _datum[0].values.length === 0)) {\n        $(element).find('svg').empty();\n      }\n      if (_datum.length > 0 && _datum[0].values.length > 0 && (isNaN(_datum[0].values[0].x) || isNaN(_datum[0].values[0].y))) {\n        _datum = [];\n        $(element).find('svg').empty();\n      }\n      if ($(element).is(':visible')) {\n        nv.addGraph(function () {\n          var _chart = nv.models.scatterChart().transitionDuration(350).color(d3v3.scale.category10().range()).useVoronoi(false);\n          _chart.tooltipContent(function (key, x, y, obj) {\n            return '<h3>' + key + '</h3><div class=\"center\">' + obj.point.size + '</div>';\n          });\n          _chart.xAxis.tickFormat(d3v3.format('.02f'));\n          _chart.yAxis.tickFormat(d3v3.format('.02f'));\n          _chart.scatter.onlyCircles(true);\n          var _d3 = $(element).find('svg').length > 0 ? d3v3.select($(element).find('svg')[0]) : d3v3.select($(element)[0]).append('svg');\n          _d3.datum(_datum).transition().duration(150).each('end', options.onComplete != null ? options.onComplete : void 0).call(_chart);\n          var _resizeTimeout = -1;\n          nv.utils.windowResize(function () {\n            window.clearTimeout(_resizeTimeout);\n            _resizeTimeout = window.setTimeout(function () {\n              _chart.update();\n            }, 200);\n          });\n          $(element).on('forceUpdate', function () {\n            _chart.update();\n          });\n          return _chart;\n        });\n      }\n    }, 0);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport * as ko from 'knockout';\nimport I18n from \"../../../utils/i18n\";\nimport { barChartBuilder, handleSelection, insertLinebreaks, lineChartBuilder } from \"./chartUtils\";\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.timelineChart = {\n  init: function init(element, valueAccessor) {\n    if (valueAccessor().type && valueAccessor().type() === 'line') {\n      window.setTimeout(function () {\n        lineChartBuilder(element, valueAccessor(), true);\n      }, 0);\n      $(element).data('type', 'line');\n    } else {\n      window.setTimeout(function () {\n        barChartBuilder(element, valueAccessor(), true);\n      }, 0);\n      $(element).data('type', 'bar');\n    }\n  },\n  update: function update(element, valueAccessor) {\n    var _options = valueAccessor();\n    if (valueAccessor().type && valueAccessor().type() !== $(element).data('type')) {\n      if ($(element).find('svg').length > 0) {\n        $(element).find('svg').remove();\n      }\n      if (valueAccessor().type() === 'line') {\n        window.setTimeout(function () {\n          lineChartBuilder(element, valueAccessor(), true);\n        }, 0);\n      } else {\n        window.setTimeout(function () {\n          barChartBuilder(element, valueAccessor(), true);\n        }, 0);\n      }\n      $(element).data('type', valueAccessor().type());\n    }\n    var _datum = _options.transformer(_options.datum, true);\n    var _chart = $(element).data('chart');\n    if (_chart) {\n      window.setTimeout(function () {\n        _chart.noData(_datum.message || I18n('No Data Available.'));\n        if (_chart.multibar) {\n          _chart.multibar.stacked(typeof _options.stacked != 'undefined' ? _options.stacked : false);\n        }\n        handleSelection(_chart, _options, _datum);\n        var _d3 = d3v3.select($(element).find('svg')[0]);\n        _d3.datum(_datum).transition().duration(150).each('end', function () {\n          if (_options.onComplete != null) {\n            _options.onComplete();\n          }\n        }).call(_chart);\n        _d3.selectAll('g.nv-x.nv-axis g text').each(function (d) {\n          insertLinebreaks(_chart, d, this);\n        });\n        huePubSub.publish('charts.state');\n      }, 0);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport d3v3 from 'd3v3';\nimport jQuery from 'jquery';\nimport topojson from \"../../../../ext/topojson.v1.min\";\nimport apiHelper from \"../../../../api/apiHelper\";\nvar d3 = d3v3;\nvar defaultOptions = {\n  scope: 'world',\n  setProjection: setProjection,\n  projection: 'equirectangular',\n  dataType: 'json',\n  onClick: function onClick() {},\n  done: function done() {},\n  legendData: [],\n  fills: {\n    defaultFill: '#ABDDA4'\n  },\n  geographyConfig: {\n    dataUrl: null,\n    hideAntarctica: true,\n    borderWidth: 1,\n    borderColor: '#FDFDFD',\n    popupTemplate: function popupTemplate(geography, data) {\n      return '<div class=\"hoverinfo\"><strong>' + geography.properties.name + '</strong></div>';\n    },\n    popupOnHover: true,\n    highlightOnHover: true,\n    highlightFillColor: '#FC8D59',\n    highlightBorderColor: 'rgba(250, 15, 160, 0.2)',\n    selectedFillColor: '#666666',\n    selectedBorderColor: '#666666',\n    highlightBorderWidth: 2\n  },\n  bubblesConfig: {\n    borderWidth: 2,\n    borderColor: '#FFFFFF',\n    popupOnHover: true,\n    popupTemplate: function popupTemplate(geography, data) {\n      return '<div class=\"hoverinfo\"><strong>' + data.name + '</strong></div>';\n    },\n    fillOpacity: 0.75,\n    animate: true,\n    highlightOnHover: true,\n    highlightFillColor: '#FC8D59',\n    highlightBorderColor: 'rgba(250, 15, 160, 0.2)',\n    highlightBorderWidth: 2,\n    highlightFillOpacity: 0.85,\n    exitDelay: 100\n  },\n  arcConfig: {\n    strokeColor: '#DD1C77',\n    strokeWidth: 1,\n    arcSharpness: 1,\n    animationSpeed: 600\n  }\n};\nfunction addContainer(element) {\n  this.svg = d3.select(element).append('svg').attr('width', element.offsetWidth).attr('class', 'datamap').attr('height', element.offsetHeight);\n  return this.svg;\n}\n\n// setProjection takes the svg element and options\nfunction setProjection(element, options) {\n  var projection;\n  if (options && typeof options.scope === 'undefined') {\n    options.scope = 'world';\n  }\n  var defaultTranslate = [element.offsetWidth / 2, element.offsetHeight / (options.projection === 'mercator' ? 1.45 : 1.8)];\n  switch (options.scope) {\n    case 'usa':\n      projection = d3.geo.albersUsa().scale(element.offsetWidth).translate([element.offsetWidth / 2, element.offsetHeight / 2]);\n      break;\n    case 'world':\n      projection = d3.geo[options.projection]().scale((element.offsetWidth + 1) / 2 / Math.PI).translate(defaultTranslate);\n      break;\n    case 'europe':\n      projection = d3.geo[options.projection]().center([8.43727461750008, 51.16822764400005]).scale(380).translate(defaultTranslate);\n      break;\n    case 'chn':\n      projection = d3.geo[options.projection]().center([104.18741784700012, 34.672410587000066]).rotate([0, 0]).scale(380).translate(defaultTranslate);\n      break;\n    case 'aus':\n      projection = d3.geo[options.projection]().center([136.0129500660001, -31.995293877999913]).rotate([0, 0]).scale(350).translate(defaultTranslate);\n      break;\n    case 'bra':\n      projection = d3.geo[options.projection]().center([-51.447769636499956, -14.23752777099994]).rotate([0, 0]).scale(320).translate(defaultTranslate);\n      break;\n    case 'can':\n      projection = d3.geo[options.projection]().center([-96.81107793155442, 62.3928040600001]).rotate([0, 0]).scale(300).translate(defaultTranslate);\n      break;\n    case 'fra':\n      projection = d3.geo[options.projection]().center([2, 46]).rotate([0, 0]).scale(1300).translate(defaultTranslate);\n      break;\n    case 'deu':\n      projection = d3.geo[options.projection]().center([10.43727461750008, 51.16822764400005]).rotate([0, 0]).scale(1600).translate(defaultTranslate);\n      break;\n    case 'ita':\n      projection = d3.geo[options.projection]().center([12.560077144500099, 41.287229413500036]).rotate([0, 0]).scale(1300).translate(defaultTranslate);\n      break;\n    case 'jpn':\n      projection = d3.geo[options.projection]().center([138.4618839855001, 34.779750881000126]).rotate([0, 0]).scale(700).translate(defaultTranslate);\n      break;\n    case 'gbr':\n      projection = d3.geo[options.projection]().center([-3, 54.501734]).rotate([0, 0]).scale(1300).translate(defaultTranslate);\n      break;\n  }\n  var path = d3.geo.path().projection(projection);\n  return {\n    path: path,\n    projection: projection\n  };\n}\nfunction addStyleBlock() {\n  if (d3.select('.datamaps-style-block').empty()) {\n    d3.select('head').attr('class', 'datamaps-style-block').append('style').html('.datamap path {stroke: #FFFFFF; stroke-width: 1px;} .datamaps-legend dt, .datamaps-legend dd { float: left; margin: 0 3px 0 0;} .datamaps-legend dd {width: 20px; margin-right: 3px; margin-left: 14px; border-radius: 3px;} .datamaps-legend {padding-bottom: 20px; z-index: 1001; font-size: 12px; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;} .datamaps-hoverover {display: none; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .hoverinfo {padding: 4px; border-radius: 1px; background-color: #FFF; box-shadow: 1px 1px 5px #CCC; font-size: 12px; border: 1px solid #CCC; } .hoverinfo hr {border:1px dotted #CCC; }');\n  }\n}\nfunction drawSubunits(data) {\n  var fillData = this.options.fills,\n    colorCodeData = this.options.data || {},\n    geoConfig = this.options.geographyConfig,\n    onClick = this.options.onClick;\n  var subunits = this.svg.select('g.datamaps-subunits');\n  if (subunits.empty()) {\n    subunits = this.addLayer('datamaps-subunits', null, true);\n  }\n  var geoData = topojson.feature(data, data.objects[this.options.scope]).features;\n  if (geoConfig.hideAntarctica) {\n    geoData = geoData.filter(function (feature) {\n      return feature.id !== 'ATA';\n    });\n  }\n  var geo = subunits.selectAll('path.datamaps-subunit').data(geoData);\n  geo.enter().append('path').attr('d', this.path).attr('class', function (d) {\n    return 'datamaps-subunit ' + d.id;\n  }).attr('data-info', function (d) {\n    return JSON.stringify(colorCodeData[d.id]);\n  }).style('fill', function (d) {\n    var fillColor;\n    if (colorCodeData[d.id]) {\n      fillColor = fillData[colorCodeData[d.id].fillKey];\n      if (colorCodeData[d.id].selected) {\n        fillColor = geoConfig.selectedFillColor;\n      }\n    }\n    return fillColor || fillData.defaultFill;\n  }).on('click', function (d) {\n    if (colorCodeData[d.id] && typeof onClick != 'undefined') {\n      onClick(colorCodeData[d.id]);\n    }\n  }).style('stroke-width', function (d) {\n    var strokeWidth = geoConfig.borderWidth;\n    if (colorCodeData[d.id] && colorCodeData[d.id].selected) {\n      strokeWidth = 2;\n    }\n    return strokeWidth;\n  }).style('stroke', function (d) {\n    var strokeColor = geoConfig.borderColor;\n    if (colorCodeData[d.id] && colorCodeData[d.id].selected) {\n      strokeColor = geoConfig.selectedBorderColor;\n    }\n    return strokeColor;\n  });\n}\nfunction handleGeographyConfig() {\n  var svg = this.svg;\n  var self = this;\n  var options = this.options.geographyConfig;\n  if (options.highlightOnHover || options.popupOnHover) {\n    svg.selectAll('.datamaps-subunit').on('mouseover', function (d) {\n      var $this = d3.select(this);\n      if (options.highlightOnHover) {\n        var previousAttributes = {\n          fill: $this.style('fill'),\n          stroke: $this.style('stroke'),\n          'stroke-width': $this.style('stroke-width'),\n          'fill-opacity': $this.style('fill-opacity')\n        };\n        $this.style('fill', options.highlightFillColor).style('stroke', options.highlightBorderColor).style('stroke-width', options.highlightBorderWidth).style('fill-opacity', options.highlightFillOpacity).attr('data-previousAttributes', JSON.stringify(previousAttributes));\n\n        //as per discussion on https://github.com/markmarkoh/datamaps/issues/19\n        if (!/MSIE/.test(navigator.userAgent)) {\n          moveToFront.call(this);\n        }\n      }\n      if (options.popupOnHover) {\n        self.updatePopup($this, d, options, svg);\n      }\n    }).on('mouseout', function () {\n      var $this = d3.select(this);\n      if (options.highlightOnHover) {\n        //reapply previous attributes\n        var previousAttributes = JSON.parse($this.attr('data-previousAttributes'));\n        for (var attr in previousAttributes) {\n          $this.style(attr, previousAttributes[attr]);\n        }\n      }\n      $this.on('mousemove', null);\n      d3.selectAll('.datamaps-hoverover').style('display', 'none');\n    });\n  }\n  function moveToFront() {\n    this.parentNode.appendChild(this);\n  }\n}\n\n//plugin to add a simple map legend\nfunction addLegend(layer, data, options) {\n  data = data || {};\n  if (!this.options.fills) {\n    return;\n  }\n  function compareLegendValues(a, b) {\n    if (a.idx < b.idx) {\n      return -1;\n    }\n    if (a.idx > b.idx) {\n      return 1;\n    }\n    return 0;\n  }\n  var html = '<dl>';\n  var _fills = this.options.fills;\n  this.options.legendData.sort(compareLegendValues).forEach(function (fill) {\n    html += '<dd style=\"background-color:' + _fills['fill_' + fill.idx] + '\">&nbsp;</dd>';\n    html += '<dt>' + fill.cat + '</dt>';\n  });\n  html += '</dl>';\n  d3.select(this.options.element).append('div').attr('class', 'datamaps-legend').html(html);\n}\nfunction handleArcs(layer, data, options) {\n  var self = this;\n  if (!data || data && !data.slice) {\n    throw 'Datamaps Error - arcs must be an array';\n  }\n  if (typeof options === 'undefined') {\n    options = defaultOptions.arcConfig;\n  }\n  var arcs = layer.selectAll('path.datamaps-arc').data(data, JSON.stringify);\n  arcs.enter().append('svg:path').attr('class', 'datamaps-arc').style('stroke-linecap', 'round').style('stroke', function (datum) {\n    if (datum.options && datum.options.strokeColor) {\n      return datum.options.strokeColor;\n    }\n    return options.strokeColor;\n  }).style('fill', 'none').style('stroke-width', function (datum) {\n    if (datum.options && datum.options.strokeWidth) {\n      return datum.options.strokeWidth;\n    }\n    return options.strokeWidth;\n  }).attr('d', function (datum) {\n    var originXY = self.latLngToXY(datum.origin.latitude, datum.origin.longitude);\n    var destXY = self.latLngToXY(datum.destination.latitude, datum.destination.longitude);\n    var midXY = [(originXY[0] + destXY[0]) / 2, (originXY[1] + destXY[1]) / 2];\n    return 'M' + originXY[0] + ',' + originXY[1] + 'S' + (midXY[0] + 50 * options.arcSharpness) + ',' + (midXY[1] - 75 * options.arcSharpness) + ',' + destXY[0] + ',' + destXY[1];\n  }).transition().delay(100).style('fill', function () {\n    /*\n       Thank you Jake Archibald, this is awesome.\n       Source: http://jakearchibald.com/2013/animated-line-drawing-svg/\n       */\n    var length = this.getTotalLength();\n    this.style.transition = this.style.WebkitTransition = 'none';\n    this.style.strokeDasharray = length + ' ' + length;\n    this.style.strokeDashoffset = length;\n    this.getBoundingClientRect();\n    this.style.transition = this.style.WebkitTransition = 'stroke-dashoffset ' + options.animationSpeed + 'ms ease-out';\n    this.style.strokeDashoffset = '0';\n    return 'none';\n  });\n  arcs.exit().transition().style('opacity', 0).remove();\n}\nfunction handleLabels(layer, options) {\n  var self = this;\n  options = options || {};\n  var labelStartCoodinates = this.projection([-67.707617, 42.722131]);\n  this.svg.selectAll('.datamaps-subunit').attr('data-foo', function (d) {\n    var center = self.path.centroid(d);\n    var xOffset = 7.5,\n      yOffset = 5;\n    if (['FL', 'KY', 'MI'].indexOf(d.id) > -1) {\n      xOffset = -2.5;\n    }\n    if (d.id === 'NY') {\n      xOffset = -1;\n    }\n    if (d.id === 'MI') {\n      yOffset = 18;\n    }\n    if (d.id === 'LA') {\n      xOffset = 13;\n    }\n    var x, y;\n    x = center[0] - xOffset;\n    y = center[1] + yOffset;\n    var smallStateIndex = ['VT', 'NH', 'MA', 'RI', 'CT', 'NJ', 'DE', 'MD', 'DC'].indexOf(d.id);\n    if (smallStateIndex > -1) {\n      var yStart = labelStartCoodinates[1];\n      x = labelStartCoodinates[0];\n      y = yStart + smallStateIndex * (2 + (options.fontSize || 12));\n      layer.append('line').attr('x1', x - 3).attr('y1', y - 5).attr('x2', center[0]).attr('y2', center[1]).style('stroke', options.labelColor || '#000').style('stroke-width', options.lineWidth || 1);\n    }\n    layer.append('text').attr('x', x).attr('y', y).style('font-size', (options.fontSize || 10) + 'px').style('font-family', options.fontFamily || 'Verdana').style('fill', options.labelColor || '#000').text(d.id);\n    return 'bar';\n  });\n}\nfunction handleBubbles(layer, data, options) {\n  var self = this,\n    fillData = this.options.fills,\n    svg = this.svg;\n  if (!data || data && !data.slice) {\n    throw 'Datamaps Error - bubbles must be an array';\n  }\n  var bubbles = layer.selectAll('circle.datamaps-bubble').data(data, JSON.stringify);\n  bubbles.enter().append('svg:circle').attr('class', 'datamaps-bubble').attr('cx', function (datum) {\n    var latLng;\n    if (datumHasCoords(datum)) {\n      latLng = self.latLngToXY(datum.latitude, datum.longitude);\n    } else if (datum.centered) {\n      latLng = self.path.centroid(svg.select('path.' + datum.centered).data()[0]);\n    }\n    if (latLng) {\n      return latLng[0];\n    }\n  }).attr('cy', function (datum) {\n    var latLng;\n    if (datumHasCoords(datum)) {\n      latLng = self.latLngToXY(datum.latitude, datum.longitude);\n    } else if (datum.centered) {\n      latLng = self.path.centroid(svg.select('path.' + datum.centered).data()[0]);\n    }\n    if (latLng) {\n      return latLng[1];\n    }\n  }).attr('r', 0) //for animation purposes\n  .attr('data-info', function (d) {\n    return JSON.stringify(d);\n  }).style('stroke', options.borderColor).style('stroke-width', options.borderWidth).style('fill-opacity', options.fillOpacity).style('fill', function (datum) {\n    var fillColor = fillData[datum.fillKey];\n    return fillColor || fillData.defaultFill;\n  }).on('mouseover', function (datum) {\n    var $this = d3.select(this);\n    if (options.highlightOnHover) {\n      //save all previous attributes for mouseout\n      var previousAttributes = {\n        fill: $this.style('fill'),\n        stroke: $this.style('stroke'),\n        'stroke-width': $this.style('stroke-width'),\n        'fill-opacity': $this.style('fill-opacity')\n      };\n      $this.style('fill', options.highlightFillColor).style('stroke', options.highlightBorderColor).style('stroke-width', options.highlightBorderWidth).style('fill-opacity', options.highlightFillOpacity).attr('data-previousAttributes', JSON.stringify(previousAttributes));\n    }\n    if (options.popupOnHover) {\n      self.updatePopup($this, datum, options, svg);\n    }\n  }).on('mouseout', function (datum) {\n    var $this = d3.select(this);\n    if (options.highlightOnHover) {\n      //reapply previous attributes\n      var previousAttributes = JSON.parse($this.attr('data-previousAttributes'));\n      for (var attr in previousAttributes) {\n        $this.style(attr, previousAttributes[attr]);\n      }\n    }\n    d3.selectAll('.datamaps-hoverover').style('display', 'none');\n  }).transition().duration(400).attr('r', function (datum) {\n    return datum.radius;\n  });\n  bubbles.exit().transition().delay(options.exitDelay).attr('r', 0).remove();\n  function datumHasCoords(datum) {\n    return typeof datum !== 'undefined' && typeof datum.latitude !== 'undefined' && typeof datum.longitude !== 'undefined';\n  }\n}\n\n//stolen from underscore.js\nfunction defaults(obj) {\n  Array.prototype.slice.call(arguments, 1).forEach(function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] == null) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n  });\n  return obj;\n}\n\n/**************************************\n Public Functions\n ***************************************/\n\nfunction Datamap(options) {\n  if (typeof d3 === 'undefined' || typeof topojson === 'undefined') {\n    throw new Error('Include d3.js (v3.0.3 or greater) and topojson on this page before creating a new map');\n  }\n\n  //set options for global use\n  this.options = defaults(options, defaultOptions);\n  this.options.geographyConfig = defaults(options.geographyConfig, defaultOptions.geographyConfig);\n  this.options.bubblesConfig = defaults(options.bubblesConfig, defaultOptions.bubblesConfig);\n  this.options.arcConfig = defaults(options.arcConfig, defaultOptions.arcConfig);\n\n  //add the SVG container\n  if (d3.select(this.options.element).select('svg').length > 0) {\n    addContainer.call(this, this.options.element);\n  }\n\n  /* Add core plugins to this instance */\n  this.addPlugin('bubbles', handleBubbles);\n  this.addPlugin('legend', addLegend);\n  this.addPlugin('arc', handleArcs);\n  this.addPlugin('labels', handleLabels);\n\n  //append style block with basic hoverover styles\n  if (!this.options.disableDefaultStyles) {\n    addStyleBlock();\n  }\n  return this.draw();\n}\n\n// actually draw the features(states & countries)\nDatamap.prototype.draw = function () {\n  //save off in a closure\n  var self = this;\n  var options = self.options;\n\n  //set projections and paths based on scope\n  var pathAndProjection = options.setProjection.apply(self, [options.element, options]);\n  this.path = pathAndProjection.path;\n  this.projection = pathAndProjection.projection;\n  apiHelper.fetchTopo({\n    location: options.scope === 'europe' ? 'world' : options.scope\n  }).done(function (topoData) {\n    var topo = JSON.parse(topoData);\n    if (options.scope === 'europe') {\n      var europeTopo = jQuery.extend(true, {}, topo);\n      europeTopo.objects['europe'] = europeTopo.objects['world'];\n      delete europeTopo.objects['world'];\n      topo = europeTopo;\n    }\n    self.customTopo = true;\n    draw(topo);\n  });\n  return this;\n  function draw(data) {\n    // if fetching remote data, draw the map first then call `updateChoropleth`\n    if (self.options.dataUrl) {\n      //allow for csv or json data types\n      d3[self.options.dataType](self.options.dataUrl, function (data) {\n        //in the case of csv, transform data to object\n        if (self.options.dataType === 'csv' && data && data.slice) {\n          var tmpData = {};\n          for (var i = 0; i < data.length; i++) {\n            tmpData[data[i].id] = data[i];\n          }\n          data = tmpData;\n        }\n        Datamap.prototype.updateChoropleth.call(self, data);\n      });\n    }\n    drawSubunits.call(self, data);\n    handleGeographyConfig.call(self);\n    if (self.options.geographyConfig.popupOnHover || self.options.bubblesConfig.popupOnHover) {\n      d3.select(self.options.element).append('div').attr('class', 'datamaps-hoverover').style('z-index', 10001).style('position', 'absolute');\n    }\n\n    //fire off finished callback\n    self.options.done(self);\n  }\n};\n\n/**************************************\n Utilities\n ***************************************/\n\n//convert lat/lng coords to X / Y coords\nDatamap.prototype.latLngToXY = function (lat, lng) {\n  return this.projection([lng, lat]);\n};\n\n//add <g> layer to root SVG\nDatamap.prototype.addLayer = function (className, id, first) {\n  var layer;\n  if (first) {\n    layer = this.svg.insert('g', ':first-child');\n  } else {\n    layer = this.svg.append('g');\n  }\n  return layer.attr('id', id || '').attr('class', className || '');\n};\nDatamap.prototype.updateChoropleth = function (data) {\n  var svg = this.svg;\n  for (var subunit in data) {\n    if (data.hasOwnProperty(subunit)) {\n      var color = void 0;\n      var subunitData = data[subunit];\n      if (!subunit) {\n        continue;\n      } else if (typeof subunitData === 'string') {\n        color = subunitData;\n      } else if (typeof subunitData.color === 'string') {\n        color = subunitData.color;\n      } else {\n        color = this.options.fills[subunitData.fillKey];\n      }\n      //if it's an object, overriding the previous data\n      if (subunitData === Object(subunitData)) {\n        this.options.data[subunit] = defaults(subunitData, this.options.data[subunit] || {});\n        this.svg.select('.' + subunit).attr('data-info', JSON.stringify(this.options.data[subunit]));\n      }\n      svg.selectAll('.' + subunit).transition().style('fill', color);\n    }\n  }\n};\nDatamap.prototype.updatePopup = function (element, d, options) {\n  var self = this;\n  element.on('mousemove', null);\n  element.on('mousemove', function () {\n    var position = d3.mouse(this);\n    var svgHeight = d3.select(self.svg[0][0].parentNode)[0][0].offsetHeight || -1;\n    d3.select(self.svg[0][0].parentNode).select('.datamaps-hoverover').style('top', position[1] + 30 + 'px').html(function () {\n      var data = JSON.parse(element.attr('data-info'));\n      //if ( !data ) return '';\n      return options.popupTemplate(d, data);\n    }).style('left', position[0] + 'px');\n    var popupHeight = d3.select(self.svg[0][0].parentNode).select('.datamaps-hoverover')[0][0].offsetHeight;\n    if (position[1] + 30 + popupHeight > svgHeight) {\n      d3.select(self.svg[0][0].parentNode).select('.datamaps-hoverover').style('top', position[1] - 10 - popupHeight + 'px');\n    }\n  });\n  d3.select(self.svg[0][0].parentNode).select('.datamaps-hoverover').style('display', 'block');\n};\nDatamap.prototype.addPlugin = function (name, pluginFn) {\n  if (typeof Datamap.prototype[name] === 'undefined') {\n    Datamap.prototype[name] = function (data, options, callback, createNewLayer) {\n      var layer;\n      if (typeof createNewLayer === 'undefined') {\n        createNewLayer = false;\n      }\n      if (typeof options === 'function') {\n        callback = options;\n        options = undefined;\n      }\n      options = defaults(options || {}, defaultOptions[name + 'Config']);\n\n      //add a single layer, reuse the old layer\n      if (!createNewLayer && this.options[name + 'Layer']) {\n        layer = this.options[name + 'Layer'];\n        options = options || this.options[name + 'Options'];\n      } else {\n        layer = this.addLayer(name);\n        this.options[name + 'Layer'] = layer;\n        this.options[name + 'Options'] = options;\n      }\n      pluginFn.apply(this, [layer, data, options]);\n      if (callback) {\n        callback(layer);\n      }\n    };\n  }\n};\njQuery.fn.datamaps = function (options, callback) {\n  options = options || {};\n  options.element = this[0];\n  var datamap = new Datamap(options);\n  if (typeof callback === 'function') {\n    callback(datamap, options);\n  }\n  return this;\n};\nexport default Datamap;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport nv from \"../../../../ext/nv.d3.1.1.15b.custom\";\nimport Datamap from \"./datamap\";\nimport huePubSub from 'utils/huePubSub';\nimport HueColors from \"../../../../utils/hueColors\";\nimport HueGeo from \"../../../../utils/hueGeo\";\nko.bindingHandlers.mapChart = {\n  render: function render(element, valueAccessor) {\n    var _options = valueAccessor();\n    var $element = $(element);\n    window.clearTimeout($element.data('drawThrottle'));\n    var timeout = window.setTimeout(function () {\n      $element.empty();\n      $element.css('position', 'relative');\n      $element.css('marginLeft', 'auto');\n      $element.css('marginRight', 'auto');\n      if (typeof _options.maxWidth != 'undefined') {\n        var _max = _options.maxWidth * 1;\n        $element.width(Math.min($element.parent().width(), _max));\n      } else {\n        $element.width($element.parent().width() - 10);\n      }\n      $element.height($element.width() / 2.23);\n      var scopeObservable = _options.data.scope || _options.data.chartScope;\n      var _scope = scopeObservable ? String(ko.unwrap(scopeObservable)) : 'world';\n      var _data = _options.transformer(_options.data);\n      var _is2d = false;\n      var _pivotCategories = [];\n      var _maxWeight = 0;\n      function comparePivotValues(a, b) {\n        if (a.count < b.count) {\n          return 1;\n        }\n        if (a.count > b.count) {\n          return -1;\n        }\n        return 0;\n      }\n      $(_data).each(function (cnt, item) {\n        if (item.value > _maxWeight) {\n          _maxWeight = item.value;\n        }\n        if (item.obj.is2d) {\n          _is2d = true;\n        }\n        if (item.obj.pivot && item.obj.pivot.length > 0) {\n          item.obj.pivot.forEach(function (piv) {\n            var _category = null;\n            _pivotCategories.forEach(function (category) {\n              if (category.value === piv.value) {\n                _category = category;\n                if (piv.count > _category.count) {\n                  _category.count = piv.count;\n                }\n              }\n            });\n            if (_category == null) {\n              _category = {\n                value: piv.value,\n                count: -1\n              };\n              _pivotCategories.push(_category);\n            }\n          });\n        }\n      });\n      _pivotCategories.sort(comparePivotValues);\n      var _chunk = _maxWeight / _data.length;\n      var _mapdata = {};\n      var _maphovers = {};\n      var _fills = {};\n      var _legend = [];\n      var _noncountries = [];\n      if (_options.isScale) {\n        _fills['defaultFill'] = HueColors.WHITE;\n        var _colors = _is2d ? HueColors.d3Scale() : HueColors.scale(HueColors.LIGHT_BLUE, HueColors.DARK_BLUE, _data.length);\n        $(_colors).each(function (cnt, item) {\n          _fills['fill_' + cnt] = item;\n        });\n        var getHighestCategoryValue = function getHighestCategoryValue(cnt, item) {\n          var _cat = '';\n          var _max = -1;\n          if (item.obj.pivot && item.obj.pivot.length > 0) {\n            item.obj.pivot.forEach(function (piv) {\n              if (piv.count > _max) {\n                _max = piv.count;\n                _cat = piv.value;\n              }\n            });\n          }\n          var _found = cnt;\n          if (_cat !== '') {\n            _pivotCategories.forEach(function (cat, i) {\n              if (cat.value === _cat) {\n                _found = i;\n              }\n            });\n          }\n          return {\n            idx: _found,\n            cat: _cat\n          };\n        };\n        var addToLegend = function addToLegend(category) {\n          var _found = false;\n          _legend.forEach(function (lg) {\n            if (lg.cat === category.cat) {\n              _found = true;\n            }\n          });\n          if (!_found) {\n            _legend.push(category);\n          }\n        };\n        $(_data).each(function (cnt, item) {\n          addToLegend(getHighestCategoryValue(cnt, item));\n          var _place = typeof item.label == 'string' ? item.label.toUpperCase() : item.label;\n          if (_place != null) {\n            if (_scope !== 'world' && _scope !== 'usa' && _scope !== 'europe' && _place.indexOf('.') === -1) {\n              _place = HueGeo.getISOAlpha2(_scope) + '.' + _place;\n            }\n            if ((_scope === 'world' || _scope === 'europe') && _place.length === 2) {\n              _place = HueGeo.getISOAlpha3(_place);\n            }\n            _mapdata[_place] = {\n              fillKey: 'fill_' + (_is2d ? getHighestCategoryValue(cnt, item).idx : Math.ceil(item.value / _chunk) - 1),\n              id: _place,\n              cat: item.obj.cat,\n              value: item.obj.values ? item.obj.values : item.obj.value,\n              pivot: _is2d ? item.obj.pivot : [],\n              selected: item.obj.selected,\n              fields: item.obj.fields ? item.obj.fields : null\n            };\n            _maphovers[_place] = item.value;\n          } else {\n            _noncountries.push(item);\n          }\n        });\n      } else {\n        _fills['defaultFill'] = HueColors.LIGHT_BLUE;\n        _fills['selected'] = HueColors.DARK_BLUE;\n        $(_data).each(function (cnt, item) {\n          var _place = item.label.toUpperCase();\n          if (_place != null) {\n            if (_scope !== 'world' && _scope !== 'usa' && _scope !== 'europe' && _place.indexOf('.') === -1) {\n              _place = HueGeo.getISOAlpha2(_scope) + '.' + _place;\n            }\n            if ((_scope === 'world' || _scope === 'europe') && _place.length === 2) {\n              _place = HueGeo.getISOAlpha3(_place);\n            }\n            _mapdata[_place] = {\n              fillKey: 'selected',\n              id: _place,\n              cat: item.obj.cat,\n              value: item.obj.values ? item.obj.values : item.obj.value,\n              pivot: [],\n              selected: item.obj.selected,\n              fields: item.obj.fields ? item.obj.fields : null\n            };\n            _maphovers[_place] = item.value;\n          } else {\n            _noncountries.push(item);\n          }\n        });\n      }\n      var _map = null;\n      function createDatamap(element, options, fills, mapData, nonCountries, mapHovers) {\n        _map = new Datamap({\n          element: element,\n          fills: fills,\n          scope: _scope,\n          data: mapData,\n          legendData: _legend,\n          onClick: function onClick(data) {\n            if (typeof options.onClick != 'undefined') {\n              huePubSub.publish('charts.state', {\n                updating: true\n              });\n              options.onClick(data);\n            }\n          },\n          done: function done() {\n            var _bubbles = [];\n            if (options.enableGeocoding) {\n              $(nonCountries).each(function (cnt, item) {\n                HueGeo.getCityCoordinates(item.label, function (lat, lng) {\n                  _bubbles.push({\n                    fillKey: 'selected',\n                    label: item.label,\n                    value: item.value,\n                    radius: 4,\n                    latitude: lat,\n                    longitude: lng\n                  });\n                  _map.bubbles(_bubbles, {\n                    popupTemplate: function popupTemplate(geo, data) {\n                      return '<div class=\"hoverinfo\" style=\"text-align: center\"><strong>' + data.label + '</strong><br/>' + item.value + '</div>';\n                    }\n                  });\n                });\n              });\n            }\n          },\n          geographyConfig: {\n            hideAntarctica: true,\n            borderWidth: 1,\n            borderColor: HueColors.DARK_BLUE,\n            highlightOnHover: true,\n            highlightFillColor: HueColors.DARK_BLUE,\n            highlightBorderColor: HueColors.BLUE,\n            selectedFillColor: HueColors.DARKER_BLUE,\n            selectedBorderColor: HueColors.DARKER_BLUE,\n            popupTemplate: function popupTemplate(geography, data) {\n              var _hover = '';\n              if (data != null) {\n                _hover = '<br/>';\n                if (data.pivot && data.pivot.length > 0) {\n                  data.pivot.sort(comparePivotValues);\n                  data.pivot.forEach(function (piv, cnt) {\n                    _hover += (cnt === 0 ? '<strong>' : '') + piv.value + ': ' + piv.count + (cnt === 0 ? '</strong>' : '') + '<br/>';\n                  });\n                } else {\n                  _hover += mapHovers[data.id];\n                }\n              }\n              return '<div class=\"hoverinfo\" style=\"text-align: center\"><strong>' + geography.properties.name + '</strong>' + _hover + '</div>';\n            }\n          }\n        });\n        if (options.onComplete != null) {\n          options.onComplete();\n        }\n        if (_is2d) {\n          _map.legend();\n        }\n      }\n      createDatamap(element, _options, _fills, _mapdata, _noncountries, _maphovers);\n      var _parentSelector = typeof _options.parentSelector != 'undefined' ? _options.parentSelector : '.card-widget';\n      $element.parents(_parentSelector).one('resize', function () {\n        ko.bindingHandlers.mapChart.render(element, valueAccessor);\n      });\n      var _resizeTimeout = -1;\n      nv.utils.windowResize(function () {\n        window.clearTimeout(_resizeTimeout);\n        _resizeTimeout = window.setTimeout(function () {\n          ko.bindingHandlers.mapChart.render(element, valueAccessor);\n        }, 200);\n      });\n      huePubSub.publish('charts.state');\n    }, 50);\n    $element.data('drawThrottle', timeout);\n  },\n  init: function init(element, valueAccessor) {\n    ko.bindingHandlers.mapChart.render(element, valueAccessor);\n  },\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    if (typeof allBindingsAccessor().mapChart.visible != 'undefined') {\n      if (typeof allBindingsAccessor().mapChart.visible == 'boolean' && allBindingsAccessor().mapChart.visible || typeof allBindingsAccessor().mapChart.visible == 'function' && allBindingsAccessor().mapChart.visible()) {\n        $(element).show();\n        ko.bindingHandlers.mapChart.render(element, valueAccessor);\n      } else {\n        $(element).hide();\n      }\n    } else {\n      ko.bindingHandlers.mapChart.render(element, valueAccessor);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.appAwareTemplateContextMenu = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    viewModel.$currentApp = ko.observable('');\n    viewModel.$containerContext = valueAccessor().containerContext || bindingContext;\n    huePubSub.publish('get.current.app.name', viewModel.$currentApp);\n    huePubSub.subscribe('set.current.app.name', viewModel.$currentApp);\n    ko.bindingHandlers.templateContextMenu.init(element, valueAccessor, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.assistFileDraggable = {\n  init: function init(element, valueAccessor, allBindings, boundEntry) {\n    var $element = $(element);\n    var dragStartY = -1;\n    var dragStartX = -1;\n    $element.draggable({\n      start: function start(event) {\n        var $container = $('.doc-browser-drag-container');\n        boundEntry.selected(true);\n        huePubSub.publish('doc.browser.dragging', {\n          selectedEntries: [boundEntry],\n          originEntry: boundEntry,\n          dragToSelect: false\n        });\n        huePubSub.publish('doc.drag.to.select', false);\n        dragStartX = event.clientX;\n        dragStartY = event.clientY;\n        if ($('.assist-file-entry-drag').length === 0) {\n          $('<div class=\"assist-file-entry-drag\"><span class=\"drag-text\"></span></div>').appendTo('body');\n        }\n        var $helper = $('.assist-file-entry-drag').clone().appendTo($container);\n        $helper.find('.drag-text').text(boundEntry.definition().name);\n        $helper.find('i').removeClass().addClass($element.find('.doc-browser-primary-col i').attr('class'));\n        $helper.show();\n      },\n      drag: function drag() {},\n      stop: function stop(event) {\n        var elementAtStart = document.elementFromPoint(dragStartX, dragStartY);\n        var elementAtStop = document.elementFromPoint(event.clientX, event.clientY);\n        if (elementAtStart.nodeName === 'A' && elementAtStop.nodeName === 'A' && Math.sqrt((dragStartX - event.clientX) * (dragStartX - event.clientX) + (dragStartY - event.clientY) * (dragStartY - event.clientY)) < 8) {\n          $(elementAtStop).trigger('click');\n        }\n        boundEntry.selected(false);\n      },\n      helper: function helper() {\n        return $('<div>').addClass('doc-browser-drag-container');\n      },\n      appendTo: 'body',\n      cursorAt: {\n        top: 0,\n        left: 0\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.assistFileDroppable = {\n  init: function init(element, valueAccessor, allBindings, boundEntry) {\n    var $element = $(element);\n    var dragData;\n    var dragSub = huePubSub.subscribe('doc.browser.dragging', function (data) {\n      dragData = data;\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      dragSub.remove();\n    });\n    if (boundEntry.isDirectory) {\n      $element.droppable({\n        drop: function drop() {\n          if (dragData && !dragData.dragToSelect && boundEntry.isDirectory()) {\n            boundEntry.moveHere(dragData.selectedEntries);\n            dragData.originEntry.load();\n          }\n          $element.removeClass('assist-file-entry-drop');\n        },\n        over: function over() {\n          if (!$element.hasClass('assist-file-entry-drop') && dragData && !dragData.dragToSelect && boundEntry.isDirectory()) {\n            $element.addClass('assist-file-entry-drop');\n          }\n        },\n        out: function out() {\n          $element.removeClass('assist-file-entry-drop');\n        }\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nko.bindingHandlers.assistVerticalResizer = {\n  init: function init(element, valueAccessor) {\n    var $container = $(element);\n    var options = ko.unwrap(valueAccessor());\n    var panelDefinitions = options.panels;\n    var checkForElements = function checkForElements() {\n      var $allPanels = $container.children('.assist-inner-panel');\n      var $allExtras = $container.children('.assist-fixed-height');\n      if (panelDefinitions().length === $allPanels.length && ($allExtras.length > 0 || options.noFixedHeights)) {\n        ko.bindingHandlers.assistVerticalResizer.updateWhenRendered(element, valueAccessor);\n      } else {\n        timeout = window.setTimeout(checkForElements, 10);\n      }\n    };\n    checkForElements();\n    var timeout = -1;\n    panelDefinitions.subscribe(function () {\n      window.clearTimeout(timeout);\n      timeout = window.setTimeout(checkForElements, 10);\n    });\n  },\n  updateWhenRendered: function updateWhenRendered(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var panelDefinitions = options.panels;\n    var $container = $(element);\n    var $allPanels = $container.children('.assist-inner-panel');\n    var $allResizers = $container.children('.assist-resizer');\n    var $allExtras = $container.children('.assist-fixed-height');\n    var allExtrasHeight = 0;\n    $allExtras.each(function (idx, extra) {\n      allExtrasHeight += $(extra).outerHeight(true);\n    });\n    window.clearInterval($container.data('height_interval'));\n    if (panelDefinitions().length === 0) {\n      $allExtras.show();\n      return;\n    }\n    if (panelDefinitions().length === 1) {\n      var adjustHeightSingle = function adjustHeightSingle() {\n        $allPanels.height($container.innerHeight() - allExtrasHeight);\n      };\n      var heightAdjustInterval = window.setInterval(adjustHeightSingle, 800);\n      adjustHeightSingle();\n      $container.data('height_interval', heightAdjustInterval);\n      $(window).resize(adjustHeightSingle);\n      huePubSub.subscribe('assist.forceRender', function () {\n        window.setTimeout(adjustHeightSingle, 200);\n      });\n      $allExtras.show();\n      $allPanels.show();\n      return;\n    }\n    var panelRatios = getFromLocalStorage('assist.innerPanelRatios', {});\n    var totalRatios = 0;\n    $.each($allPanels, function (idx, panel) {\n      var panelDef = panelDefinitions()[idx];\n      if (!panelRatios[panelDef.type]) {\n        panelRatios[panelDef.type] = 1 / panelDefinitions().length;\n      }\n      totalRatios += panelRatios[panelDef.type];\n      $(panel).data('minHeight', panelDef.minHeight);\n    });\n\n    // Normalize the ratios in case new panels were added or removed.\n    if (totalRatios !== 1) {\n      var diff = 1 / totalRatios;\n      $.each(panelDefinitions(), function (idx, panel) {\n        panelRatios[panel.type] = panelRatios[panel.type] * diff;\n      });\n    }\n    var totalHeight = -1;\n    var containerTop = $container.offset().top;\n\n    // Resizes all containers according to the set ratios\n    var resizeByRatio = function resizeByRatio() {\n      if (totalHeight === $container.innerHeight()) {\n        return;\n      }\n      $allPanels = $container.children('.assist-inner-panel');\n      totalHeight = $container.innerHeight();\n      containerTop = $container.offset().top;\n      $.each($allPanels, function (idx, panel) {\n        var panelDef = panelDefinitions()[idx];\n        if (!panelRatios[panelDef.type] || $allPanels.length === 1) {\n          panelRatios[panelDef.type] = 1 / panelDefinitions().length;\n        }\n        totalRatios += panelRatios[panelDef.type];\n        $(panel).data('minHeight', panelDef.minHeight);\n      });\n      var availableForPanels = totalHeight - allExtrasHeight;\n      var leftoverSpace = 0;\n      $allPanels.each(function (idx, panel) {\n        var $panel = $(panel);\n        var desiredHeight = availableForPanels * panelRatios[panelDefinitions()[idx].type];\n        var newHeight = Math.max($panel.data('minHeight'), desiredHeight);\n        $panel.height(newHeight);\n        leftoverSpace += newHeight - desiredHeight;\n      });\n      // The minheight is greater than the ratio so we shrink where possible\n      if (leftoverSpace > 0) {\n        $allPanels.each(function (idx, panel) {\n          if (leftoverSpace === 0) {\n            return false;\n          }\n          var $panel = $(panel);\n          var currentHeight = $panel.height();\n          var possibleContribution = Math.min(currentHeight - $panel.data('minHeight'), leftoverSpace);\n          if (possibleContribution > 0) {\n            $panel.height(currentHeight - possibleContribution);\n            leftoverSpace -= possibleContribution;\n          }\n        });\n      }\n    };\n    resizeByRatio();\n    $(window).resize(resizeByRatio);\n    window.setTimeout(resizeByRatio, 1000);\n    huePubSub.subscribe('assist.forceRender', function () {\n      window.setTimeout(resizeByRatio, 200);\n    });\n    $allExtras.show();\n    $allPanels.show();\n    var fitPanelHeights = function fitPanelHeights($panelsToResize, desiredTotalHeight) {\n      var currentHeightOfPanels = 0;\n      var noMoreSpace = true;\n      $panelsToResize.each(function (idx, panel) {\n        var $panel = $(panel);\n        var panelHeight = $panel.outerHeight(true);\n        noMoreSpace = noMoreSpace && panelHeight <= $panel.data('minHeight');\n        currentHeightOfPanels += panelHeight;\n      });\n      var distanceToGo = desiredTotalHeight - currentHeightOfPanels;\n      if (noMoreSpace && distanceToGo < 0) {\n        return;\n      }\n\n      // Add all to the first panel if expanding (distanceToGo is positive\n      if (distanceToGo >= 0) {\n        $panelsToResize.first().height($panelsToResize.first().height() + distanceToGo + 'px');\n        return;\n      }\n\n      // Remove as much as possible on each panel if shrinking (distanceToGo is negative)\n      $panelsToResize.each(function (idx, panel) {\n        var $panel = $(panel);\n        var initialHeight = $panel.height();\n        var newHeight = Math.max($panel.data('minHeight'), initialHeight + distanceToGo);\n        if (initialHeight === newHeight) {\n          return true;\n        }\n        $panel.height(newHeight);\n        distanceToGo += initialHeight - newHeight;\n        if (distanceToGo >= 0) {\n          return false;\n        }\n      });\n    };\n    $allResizers.each(function (idx, resizer) {\n      var $resizer = $(resizer);\n      var extrasBeforeHeight = 0;\n      $resizer.prevAll('.assist-fixed-height').each(function (idx, extra) {\n        extrasBeforeHeight += $(extra).outerHeight(true);\n      });\n      var $panelsBefore = $resizer.prevAll('.assist-inner-panel');\n      var limitBefore = extrasBeforeHeight;\n      $panelsBefore.each(function (idx, panel) {\n        limitBefore += $(panel).data('minHeight');\n      });\n      var extrasAfterHeight = allExtrasHeight - extrasBeforeHeight;\n      var $panelsAfter = $resizer.nextAll('.assist-inner-panel');\n      var requiredSpaceAfter = extrasAfterHeight;\n      $panelsAfter.each(function (idx, panel) {\n        requiredSpaceAfter += $(panel).data('minHeight');\n      });\n      $resizer.draggable({\n        axis: 'y',\n        drag: function drag(event, ui) {\n          var limitAfter = totalHeight - requiredSpaceAfter;\n          var position = ui.offset.top - containerTop;\n          if (position > limitBefore && position < limitAfter) {\n            fitPanelHeights($panelsBefore, position - extrasBeforeHeight);\n            fitPanelHeights($panelsAfter, totalHeight - extrasAfterHeight - position);\n          } else if (position > limitAfter) {\n            fitPanelHeights($panelsBefore, limitAfter - extrasBeforeHeight);\n            fitPanelHeights($panelsAfter, totalHeight - extrasAfterHeight - limitAfter);\n          } else if (position < limitBefore) {\n            fitPanelHeights($panelsBefore, limitBefore - extrasBeforeHeight);\n            fitPanelHeights($panelsAfter, totalHeight - extrasAfterHeight - limitBefore);\n          }\n          ui.offset.top = 0;\n          ui.position.top = 0;\n        },\n        stop: function stop(event, ui) {\n          ui.offset.top = 0;\n          ui.position.top = 0;\n          var totalHeightForPanels = 0;\n          $allPanels.each(function (idx, panel) {\n            totalHeightForPanels += $(panel).outerHeight(true);\n          });\n          $allPanels.each(function (idx, panel) {\n            panelRatios[panelDefinitions()[idx].type] = $(panel).outerHeight(true) / totalHeightForPanels;\n          });\n          setInLocalStorage('assist.innerPanelRatios', panelRatios);\n        }\n      });\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.attachViewModelToElementData = {\n  init: function init(el, valueAccessor, allBindingsAccessor, viewModel) {\n    $(el).data('__ko_vm', viewModel);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\n\n// TODO: less from bootstrap?\n\nko.bindingHandlers.augmentHtml = {\n  render: function render(element, valueAccessor) {\n    var _val = ko.unwrap(valueAccessor());\n    var _enc = $('<span>').html(_val);\n    if (_enc.find('style').length > 0) {\n      var parser = new less.Parser();\n      $(_enc.find('style')).each(function (cnt, item) {\n        var _less = '.result-container {' + $(item).text() + '}';\n        try {\n          parser.parse(_less, function (err, tree) {\n            $(item).text(tree.toCSS());\n          });\n        } catch (e) {}\n      });\n      $(element).html(_enc.html());\n    } else {\n      $(element).html(_val);\n    }\n  },\n  init: function init(element, valueAccessor, allBindingsAccessor, viewModel) {\n    ko.bindingHandlers.augmentHtml.render(element, valueAccessor, allBindingsAccessor, viewModel);\n  },\n  update: function update(element, valueAccessor, allBindingsAccessor, viewModel) {\n    ko.bindingHandlers.augmentHtml.render(element, valueAccessor, allBindingsAccessor, viewModel);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.autocomplete = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var getMenuElement = function getMenuElement() {\n      if (typeof options.appendTo === 'string') {\n        return $(options.appendTo);\n      }\n      return options.appendTo;\n    };\n    var delay = 400;\n    var showSpinner = function showSpinner() {\n      if (options.showSpinner) {\n        $element.addClass('input-spinner');\n      }\n    };\n    var spinThrottle = -1;\n    var hideSpinner = function hideSpinner() {\n      window.clearTimeout(spinThrottle);\n      $element.removeClass('input-spinner');\n    };\n    options = $.extend({\n      addCount: false,\n      closeOnEnter: true,\n      blurOnEnter: false,\n      classPrefix: 'hue-',\n      showOnFocus: false,\n      minLength: 0,\n      limitWidthToInput: false,\n      minWidth: 200,\n      delay: delay,\n      search: function search() {\n        window.clearTimeout(spinThrottle);\n        if (!$element.hueAutocomplete('option', 'disabled')) {\n          spinThrottle = window.setTimeout(showSpinner, 50);\n        }\n      },\n      open: function open() {\n        hideSpinner();\n      },\n      close: function close() {\n        hideSpinner();\n      }\n    }, options);\n    if (options.addCount) {\n      var oldSource = options.source;\n      options.source = function (request, callback) {\n        oldSource(request, function (values) {\n          callback(values);\n          var $menu = $($element.data('custom-hueAutocomplete').menu.element);\n          $menu.children('.autocomplete-count').remove();\n          var count = options.realCountCallback ? options.realCountCallback() : values.filter(function (value) {\n            return !value.divider && !value.noMatch;\n          }).length;\n          if (count > 0) {\n            $('<div>').addClass('autocomplete-count').text('(' + count + ')').appendTo(getMenuElement());\n          }\n        });\n      };\n    }\n    if (typeof $().hueAutocomplete === 'undefined') {\n      $.widget('custom.hueAutocomplete', $.ui.autocomplete, {\n        _renderItemData: function _renderItemData(ul, item) {\n          if (item.error && this.options.errorTemplate) {\n            var $li = $('<li data-bind=\"template: { name: \\'' + this.options.errorTemplate + '\\' }\">').addClass(this.options.classPrefix + 'autocomplete-item').appendTo(ul).data('ui-autocomplete-item', item);\n            ko.applyBindings(item, $li[0]);\n          } else if (item.noMatch && this.options.noMatchTemplate) {\n            var _$li = $('<li data-bind=\"template: { name: \\'' + this.options.noMatchTemplate + '\\' }\">').addClass(this.options.classPrefix + 'autocomplete-item').appendTo(ul).data('ui-autocomplete-item', item);\n            ko.applyBindings(item, _$li[0]);\n          } else if (item.divider) {\n            $('<li></li>').addClass(this.options.classPrefix + 'autocomplete-divider').appendTo(ul);\n          } else {\n            var _$li2 = $('<li data-bind=\"template: { name: \\'' + this.options.itemTemplate + '\\', data: $data }\">').addClass(this.options.classPrefix + 'autocomplete-item').appendTo(ul).data('ui-autocomplete-item', item);\n            ko.applyBindings(item.data, _$li2[0]);\n          }\n        },\n        _resizeMenu: function _resizeMenu() {\n          // This overrides the default behaviour of using dropdown width of the same size as input autocomplete box\n          if (options.limitWidthToInput) {\n            this.menu.element.outerWidth(options.minWidth);\n          }\n        },\n        _renderMenu: function _renderMenu(ul, items) {\n          var self = this;\n          hideSpinner();\n          if (options.limitWidthToInput) {\n            ul.css('max-width', Math.max(options.minWidth, $element.outerWidth(true)) + 'px');\n          }\n          ul.css('min-width', options.minWidth || $element.outerWidth(true));\n          ul.css('min-height', options.minHeight || '20px');\n          ul.addClass(this.options.classPrefix + 'autocomplete');\n          $.each(items, function (index, item) {\n            self._renderItemData(ul, item);\n          });\n        }\n      });\n    }\n    if (options.closeOnEnter || options.onEnter || options.blurOnEnter) {\n      $element.on('keyup', function (e) {\n        if (e.which === 13) {\n          if (options.reopenPattern && options.reopenPattern.test($element.val())) {\n            window.setTimeout(function () {\n              $element.hueAutocomplete('search', $element.val());\n            }, 0);\n            return;\n          }\n          if (options.closeOnEnter) {\n            hideSpinner();\n            $element.hueAutocomplete('close');\n            // Prevent autocomplete on enter\n            $element.hueAutocomplete('option', 'disabled', true);\n            window.setTimeout(function () {\n              $element.hueAutocomplete('option', 'disabled', false);\n            }, delay + 200);\n          }\n          if (options.valueObservable) {\n            options.valueObservable($element.val());\n          }\n          if (options.onEnter) {\n            options.onEnter();\n          }\n          if (options.blurOnEnter) {\n            hideSpinner();\n            $element.blur();\n          }\n        }\n      });\n    }\n    $element.on('keydown', function (e) {\n      // ctrl + backspace to delete words\n      if (e.which === 8 && e.ctrlKey) {\n        var lastSpaceOrColon = Math.max($element.val().lastIndexOf(' '), $element.val().lastIndexOf(':'));\n        if (lastSpaceOrColon < $element.val().length - 1) {\n          if (lastSpaceOrColon !== -1) {\n            $element.val($element.val().substring(0, lastSpaceOrColon + 1));\n          } else {\n            $element.val('');\n          }\n          e.preventDefault();\n          return false;\n        }\n      } else if (e.which === 32 && e.ctrlKey) {\n        $element.hueAutocomplete('search', $element.val());\n      }\n    });\n    if (options.showOnFocus) {\n      $element.on('focus', function () {\n        $element.hueAutocomplete('search', $element.val());\n      });\n    }\n    var closeSubscription = huePubSub.subscribe('autocomplete.close', function () {\n      hideSpinner();\n      $element.hueAutocomplete('close');\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      closeSubscription.remove();\n    });\n    if (options.reopenPattern || options.valueObservable || options.onSelect) {\n      var oldSelect = options.select;\n      options.select = function (event, ui) {\n        if (options.reopenPattern && options.reopenPattern.test(ui.item.value)) {\n          window.setTimeout(function () {\n            $element.hueAutocomplete('search', $element.val());\n          }, 0);\n          return;\n        }\n        if (options.valueObservable) {\n          options.valueObservable(ui.item.value);\n        }\n        if (options.onSelect) {\n          options.onSelect(ui.item);\n        }\n        if (oldSelect) {\n          oldSelect(event, ui);\n        }\n      };\n    }\n    $element.hueAutocomplete(options);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.autogrowInput = {\n  init: function init(element, valueAccessor) {\n    var o = $.extend({\n      minWidth: 0,\n      maxWidth: 1000,\n      comfortZone: 70\n    }, valueAccessor());\n    var minWidth = o.minWidth || $(element).width();\n    var input = $(element);\n    var testSubject = $('<tester></tester>').css({\n      position: 'absolute',\n      top: -9999,\n      left: -9999,\n      width: 'auto',\n      fontSize: input.css('fontSize'),\n      fontFamily: input.css('fontFamily'),\n      fontWeight: input.css('fontWeight'),\n      letterSpacing: input.css('letterSpacing'),\n      whiteSpace: 'nowrap'\n    });\n    var val = '';\n    var check = function check() {\n      if (val === (val = input.val())) {\n        return;\n      }\n      var escaped = val.replace(/&/g, '&amp;').replace(/\\s/g, ' ').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n      testSubject.html(escaped);\n      var testerWidth = testSubject.width(),\n        newWidth = testerWidth + o.comfortZone >= minWidth ? testerWidth + o.comfortZone : minWidth,\n        currentWidth = input.width(),\n        isValidWidthChange = newWidth < currentWidth && newWidth >= minWidth || newWidth > minWidth && newWidth < o.maxWidth;\n      if (isValidWidthChange) {\n        input.width(newWidth);\n      }\n    };\n    testSubject.insertAfter(element);\n    ko.utils.registerEventHandler(element, 'keyup keydown blur update', check);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.blurHide = {\n  init: function init(element, valueAccessor) {\n    var $el = $(element);\n    var prop = valueAccessor();\n    $el.on('blur', function () {\n      if ($.trim($el.val()) === '') {\n        if (ko.isObservable(prop)) {\n          prop(false);\n        }\n      }\n    });\n  },\n  update: function update(element, valueAccessor) {\n    var $el = $(element);\n    var prop = valueAccessor();\n    if (ko.isObservable(prop) && prop()) {\n      $el.focus();\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport sprintf from 'sprintf-js';\nko.bindingHandlers.bytesize = function () {\n  var that;\n  return that = {\n    units: ['B', 'KB', 'MB', 'GB', 'TB', 'PB'],\n    init: function init(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    update: function update(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    format: function format(element, valueAccessor) {\n      var value = valueAccessor();\n      var formatted = that.humanSize(ko.unwrap(value));\n      $(element).text(formatted);\n    },\n    getBaseLog: function getBaseLog(x, y) {\n      return Math.log(x) / Math.log(y);\n    },\n    humanSize: function humanSize(bytes) {\n      var isNumber = !isNaN(parseFloat(bytes)) && isFinite(bytes);\n      if (!isNumber) {\n        return '';\n      }\n\n      // Special case small numbers (including 0), because they're exact.\n      if (bytes < 1024) {\n        return sprintf.sprintf('%d B', bytes);\n      }\n      var index = Math.floor(that.getBaseLog(bytes, 1024));\n      index = Math.min(that.units.length - 1, index);\n      return sprintf.sprintf('%.1f %s', bytes / Math.pow(1024, index), that.units[index]);\n    }\n  };\n}();","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.chosen = {\n  init: function init(element, valueAccessor, allBindings) {\n    var $element = $(element);\n    var options = ko.unwrap(valueAccessor());\n    if (_typeof(options) === 'object') {\n      $element.chosen(options);\n    } else {\n      $element.chosen();\n    }\n    ['options', 'selectedOptions', 'value'].forEach(function (propName) {\n      if (allBindings.has(propName)) {\n        var prop = allBindings.get(propName);\n        if (ko.isObservable(prop)) {\n          prop.subscribe(function () {\n            $element.trigger('chosen:updated');\n          });\n        }\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.clearable = {\n  after: ['textInput', 'value', 'valueUpdate'],\n  init: function init(element, valueAccessor, allBindingsAccessor) {\n    var $element = $(element);\n    var params = valueAccessor();\n    var valueObservable = ko.isObservable(params) ? params : params.value;\n    function tog(v) {\n      return v ? 'addClass' : 'removeClass';\n    }\n    $element.addClass('clearable');\n    $element[tog(valueObservable())]('x');\n    $element.on('input', function () {\n      $element[tog(this.value)]('x');\n    }).on('mousemove', function (e) {\n      $element[tog(this.offsetWidth - 18 < e.clientX - this.getBoundingClientRect().left)]('onX');\n    }).on('click', function (e) {\n      if (this.offsetWidth - 18 < e.clientX - this.getBoundingClientRect().left) {\n        $element.removeClass('x onX').val('');\n        valueObservable('');\n        if (typeof params.onClear === 'function') {\n          params.onClear();\n        }\n      }\n    });\n    if (!allBindingsAccessor()['textInput'] || !allBindingsAccessor()['value']) {\n      $element.on('change', function () {\n        valueObservable($element.val());\n      }).on('blur', function () {\n        valueObservable($element.val());\n      });\n      if (allBindingsAccessor()['valueUpdate'] != null && allBindingsAccessor()['valueUpdate'] === 'afterkeydown') {\n        $element.on('keyup', function () {\n          valueObservable($element.val());\n        });\n      }\n      if (allBindingsAccessor()['valueUpdateDelay'] != null) {\n        var _timeout = -1;\n        $element.on('keyup', function (e) {\n          if (!([13, 37, 38, 39, 40].indexOf(e.keyCode) > -1)) {\n            window.clearTimeout(_timeout);\n            _timeout = window.setTimeout(function () {\n              valueObservable($element.val());\n            }, allBindingsAccessor()['valueUpdateDelay']);\n          }\n        });\n      }\n    }\n  },\n  update: function update(element, valueAccessor) {\n    var $element = $(element);\n    var params = valueAccessor();\n    var valueObservable = ko.isObservable(params) ? params : params.value;\n    if (!$element.is(':focus') || valueObservable() !== $element.val()) {\n      $element.val(valueObservable());\n    }\n    if ($element.val() === '') {\n      $element.removeClass('x');\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.clickForAceFocus = {\n  init: function init(element, valueAccessor) {\n    var editor = valueAccessor();\n    $(element).on('click', function (e) {\n      if (e.target === element) {\n        editor().focus();\n        editor().execCommand('gotolineend');\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.clickToCopy = {\n  init: function init(element, valueAccessor) {\n    $(element).click(function () {\n      var $input = $('<textarea>').css({\n        opacity: 0\n      }).val(ko.unwrap(valueAccessor())).appendTo('body').select();\n      document.execCommand('copy');\n      $input.remove();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport Clipboard from 'clipboard';\nko.bindingHandlers.clipboard = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor() || {};\n    var clipboard = new Clipboard(element, {\n      target: options.target,\n      text: options.text\n    });\n    if (options.onSuccess) {\n      clipboard.on('success', options.onSuccess);\n    }\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      clipboard.destroy();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport stripHtmlFromFunctions from 'utils/html/stripHtmlForFunctions';\nko.bindingHandlers.codemirror = {\n  init: function init(element, valueAccessor) {\n    var options = $.extend(valueAccessor(), {});\n    var editor = CodeMirror.fromTextArea(element, options);\n    element.editor = editor;\n    editor.setValue(options.data());\n    editor.refresh();\n    var wrapperElement = $(editor.getWrapperElement());\n    $(document).on('refreshCodemirror', function () {\n      editor.setSize('100%', 300);\n      editor.refresh();\n    });\n    $(document).on('addFieldToSource', function (e, field) {\n      if ($(element).data('template')) {\n        editor.replaceSelection('{{' + field.name() + '}}');\n      }\n    });\n    $(document).on('addFunctionToSource', function (e, fn) {\n      if ($(element).data('template')) {\n        editor.replaceSelection(fn);\n      }\n    });\n    var $chosenSelect = $('.chosen-select');\n    $chosenSelect.chosen({\n      disable_search_threshold: 10,\n      width: '75%'\n    });\n    $chosenSelect.trigger('chosen:updated');\n    var sourceDelay = -1;\n    editor.on('change', function (cm) {\n      clearTimeout(sourceDelay);\n      var _cm = cm;\n      sourceDelay = setTimeout(function () {\n        var _value = _cm.getValue();\n        if (options.stripScript) {\n          _value = _value.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');\n        }\n        valueAccessor().data(_value);\n        if ($('.widget-html-pill').parent().hasClass('active')) {\n          $('[contenteditable=true]').html(stripHtmlFromFunctions(valueAccessor().data()));\n        }\n      }, 100);\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      wrapperElement.remove();\n    });\n  },\n  update: function update(element) {\n    var editor = element.editor;\n    editor.refresh();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\n\n/**\n * This binding can be used to show a custom context menu on right-click,\n * It assumes that the context menu is nested within the bound element and\n * the selector for the menu has to be supplied as a parameter.\n *\n * Example:\n *\n * <div data-bind=\"contextMenu: {\n *   menuSelector: '.hue-context-menu',\n *   beforeOpen: function () { ... }\n * }\">\n *   <ul class=\"hue-context-menu\">...</ul>\n * </div>\n *\n */\nko.bindingHandlers.contextMenu = {\n  initContextMenu: function initContextMenu($menu, $scrollContainer, onShow, onHide) {\n    var active = false;\n    var currentLeft = 0;\n    var currentTop = 0;\n    var openScrollTop = 0;\n    var openScrollLeft = 0;\n    var adjustForScroll = function adjustForScroll() {\n      $menu.css('top', currentTop - $scrollContainer.scrollTop() + openScrollTop);\n      $menu.css('left', currentLeft - $scrollContainer.scrollLeft() + openScrollLeft);\n    };\n    return {\n      show: function show(event) {\n        $menu.css('top', 0);\n        $menu.css('left', 0);\n        $menu.css('opacity', 0);\n        $menu.show();\n        openScrollTop = $scrollContainer.scrollTop();\n        openScrollLeft = $scrollContainer.scrollLeft();\n        var menuWidth = $menu.outerWidth(true);\n        if (event.clientX + menuWidth > $(window).width()) {\n          currentLeft = $(window).width() - menuWidth;\n        } else {\n          currentLeft = event.clientX;\n        }\n        $menu.css('left', currentLeft);\n        var menuHeight = $menu.outerHeight(true);\n        if (event.clientY + menuHeight > $(window).height()) {\n          currentTop = $(window).height() - menuHeight;\n        } else {\n          currentTop = event.clientY;\n        }\n        $menu.css('top', currentTop);\n        $menu.css('opacity', 1);\n        active = true;\n        $scrollContainer.on('scroll', adjustForScroll);\n        if (onShow) {\n          onShow();\n        }\n      },\n      hide: function hide() {\n        if (active) {\n          $scrollContainer.off('scroll', adjustForScroll);\n          $menu.css('opacity', 0);\n          window.setTimeout(function () {\n            $menu.hide();\n          }, 300);\n          active = false;\n        }\n        if (onHide) {\n          onHide();\n        }\n      }\n    };\n  },\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var $element = $(element);\n    var options = valueAccessor();\n    var $menu = $element.find(options.menuSelector);\n    bindingContext.$altDown = ko.observable(false);\n    window.addEventListener('keydown', function (e) {\n      bindingContext.$altDown(e.altKey);\n    });\n    window.addEventListener('keyup', function () {\n      bindingContext.$altDown(false);\n    });\n    var $scrollContainer = $(options.scrollContainer).length > 0 ? $(options.scrollContainer) : $(window);\n    var menu = ko.bindingHandlers.contextMenu.initContextMenu($menu, $scrollContainer);\n    element.addEventListener('contextmenu', function (event) {\n      if (document.selection && document.selection.empty) {\n        document.selection.empty();\n      } else if (window.getSelection) {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n      }\n      if (typeof options.beforeOpen === 'function') {\n        options.beforeOpen.bind(viewModel)();\n      }\n      menu.show(event);\n      huePubSub.publish('contextmenu-active', element);\n      event.preventDefault();\n      event.stopPropagation();\n    });\n    huePubSub.subscribe('contextmenu-active', function (origin) {\n      if (origin !== element) {\n        menu.hide();\n      }\n    });\n    document.addEventListener('contextmenu', function () {\n      menu.hide();\n    });\n    $menu.click(function (e) {\n      menu.hide();\n      e.stopPropagation();\n    });\n    $(document).click(function (event) {\n      if ($element.find($(event.target)).length === 0) {\n        menu.hide();\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.contextSubMenu = {\n  init: function init(element, valueAccessor) {\n    var menuSelector = valueAccessor();\n    var $element = $(element);\n    var $menu = $element.find(menuSelector);\n    var $parentMenu = $element.parent('.hue-context-menu');\n    var open = false;\n    var closeSubMenu = function closeSubMenu() {\n      open = false;\n      $menu.hide();\n      $element.removeClass('active');\n    };\n    var hideTimeout = -1;\n    $element.add($menu).on('mouseenter', function () {\n      $element.addClass('active');\n      if (!open) {\n        huePubSub.publish('hue.sub.menu.close');\n      }\n      open = true;\n      window.clearTimeout(hideTimeout);\n      var menuHeight = $menu.outerHeight();\n      $menu.css('top', $element.position().top + $parentMenu.position().top + menuHeight > $(window).height() ? $(window).height() - menuHeight - 8 : $element.position().top + $parentMenu.position().top);\n      $menu.css('left', $element.offset().left + $element.outerWidth(true));\n      $menu.css('opacity', 0);\n      $menu.show();\n      $menu.css('opacity', 1);\n      huePubSub.subscribeOnce('hue.sub.menu.close', closeSubMenu);\n    });\n    $element.add($menu).on('mouseleave', function () {\n      window.clearTimeout(hideTimeout);\n      hideTimeout = window.setTimeout(closeSubMenu, 300);\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\n\n// https://stackoverflow.com/questions/19865364/knockoutjs-linking-value-from-a-input-to-a-datalist-value\n\nko.bindingHandlers.datalist = function () {\n  function getVal(rawItem, prop) {\n    var item = ko.unwrap(rawItem);\n    return item && prop ? ko.unwrap(item[prop]) : item;\n  }\n  function findItem(options, prop, ref) {\n    return ko.utils.arrayFirst(options, function (item) {\n      return ref === getVal(item, prop);\n    });\n  }\n  return {\n    init: function init(element, valueAccessor, allBindingsAccessor) {\n      var setup = valueAccessor(),\n        textProperty = ko.unwrap(setup.optionsText),\n        valueProperty = ko.unwrap(setup.optionsValue),\n        dataItems = ko.unwrap(setup.options),\n        myValue = setup.value,\n        koValue = allBindingsAccessor().value,\n        datalist = document.createElement('DATALIST');\n\n      // create an associated <datalist> element\n      datalist.id = element.getAttribute('list');\n      document.body.appendChild(datalist);\n\n      // when the value is changed, write to the associated myValue observable\n      function onNewValue(newVal) {\n        var setup = valueAccessor(),\n          dataItems = ko.unwrap(setup.options),\n          selectedItem = findItem(dataItems, textProperty, newVal),\n          newValue = selectedItem ? getVal(selectedItem, valueProperty) : newVal;\n        if (ko.isWriteableObservable(myValue)) {\n          myValue(newValue);\n        }\n      }\n\n      // listen for value changes\n      // - either via KO's value binding (preferred) or the change event\n      if (ko.isSubscribable(koValue)) {\n        var onNewValueSubscription = koValue.subscribe(onNewValue);\n        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n          onNewValueSubscription.remove();\n        });\n      } else {\n        var event = allBindingsAccessor().valueUpdate === 'afterkeydown' ? 'input' : 'change';\n        ko.utils.registerEventHandler(element, event, function () {\n          onNewValue(this.value);\n        });\n      }\n\n      // init the element's value\n      // - either via the myValue observable (preferred) or KO's value binding\n      if (ko.isObservable(myValue) && myValue()) {\n        var selectedItem = findItem(dataItems, valueProperty, myValue());\n        element.value = selectedItem ? getVal(selectedItem, textProperty) : myValue();\n      } else if (ko.isObservable(koValue) && koValue()) {\n        onNewValue(koValue());\n      }\n    },\n    update: function update(element, valueAccessor) {\n      var setup = valueAccessor(),\n        datalist = element.list,\n        dataItems = ko.unwrap(setup.options),\n        textProperty = ko.unwrap(setup.optionsText);\n\n      // rebuild list of options when an underlying observable changes\n      datalist.innerHTML = '';\n      ko.utils.arrayForEach(dataItems, function (item) {\n        var option = document.createElement('OPTION');\n        option.value = getVal(item, textProperty);\n        datalist.appendChild(option);\n      });\n      ko.utils.triggerEvent(element, 'change');\n    }\n  };\n}();","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { GLOBAL_ERROR_TOPIC } from 'reactComponents/AlertComponent/events';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.dateRangePicker = {\n  INTERVAL_OPTIONS: [{\n    value: '+200MILLISECONDS',\n    label: '200ms'\n  }, {\n    value: '+1SECONDS',\n    label: '1s'\n  }, {\n    value: '+5SECONDS',\n    label: '5s'\n  }, {\n    value: '+30SECONDS',\n    label: '30s'\n  }, {\n    value: '+1MINUTES',\n    label: '1m'\n  }, {\n    value: '+5MINUTES',\n    label: '5m'\n  }, {\n    value: '+10MINUTES',\n    label: '10m'\n  }, {\n    value: '+30MINUTES',\n    label: '30m'\n  }, {\n    value: '+1HOURS',\n    label: '1h'\n  }, {\n    value: '+3HOURS',\n    label: '3h'\n  }, {\n    value: '+6HOURS',\n    label: '6h'\n  }, {\n    value: '+12HOURS',\n    label: '12h'\n  }, {\n    value: '+1DAYS',\n    label: '1d'\n  }, {\n    value: '+7DAYS',\n    label: '7d'\n  }, {\n    value: '+1MONTHS',\n    label: '1M'\n  }, {\n    value: '+6MONTHS',\n    label: '6M'\n  }, {\n    value: '+1YEARS',\n    label: '1y'\n  }, {\n    value: '+10YEARS',\n    label: '10y'\n  }],\n  EXTRA_INTERVAL_OPTIONS: [],\n  init: function init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\n    var DATE_FORMAT = 'YYYY-MM-DD';\n    var TIME_FORMAT = 'HH:mm:ss';\n    var DATETIME_FORMAT = DATE_FORMAT + ' ' + TIME_FORMAT;\n    var _el = $(element);\n    var _options = $.extend(valueAccessor(), {});\n    var _intervalOptions = [];\n    ko.bindingHandlers.dateRangePicker.INTERVAL_OPTIONS.forEach(function (interval) {\n      _intervalOptions.push('<option value=\"' + interval.value + '\">' + interval.label + '</option>');\n    });\n    function enableOptions() {\n      var _opts = [];\n      var _tmp = $('<div>').html(_intervalOptions.join(''));\n      $.each(arguments, function (cnt, item) {\n        if (_tmp.find(\"option[value='+\" + item + \"']\").length > 0) {\n          _opts.push('<option value=\"+' + item + '\">' + _tmp.find(\"option[value='+\" + item + \"']\").eq(0).text() + '</option>');\n        }\n      });\n      return _opts;\n    }\n    function renderOptions(opts) {\n      var _html = '';\n      for (var i = 0; i < opts.length; i++) {\n        _html += opts[i];\n      }\n      return _html;\n    }\n    var _tmpl = $('<div class=\"simpledaterangepicker\">' + '<div class=\"facet-field-cnt custom\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\"></div>' + '<div class=\"facet-field-switch\"><i class=\"fa fa-calendar muted\"></i> <a href=\"javascript:void(0)\">' + KO_DATERANGEPICKER_LABELS.DATE_PICKERS + '</a></div>' + '</div>' + '<div class=\"facet-field-cnt picker\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\"></div>' + '<div class=\"facet-field-switch\"><i class=\"fa fa-calendar-o muted\"></i> <a href=\"javascript:void(0)\">' + KO_DATERANGEPICKER_LABELS.CUSTOM_FORMAT + '</a></div>' + '</div>' + '<div class=\"facet-field-cnt picker\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.START + '</div>' + '<div class=\"input-prepend input-group\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-calendar\"></i></span>' + '<input type=\"text\" class=\"input-small form-control start-date\" />' + '</div>' + '<div class=\"input-prepend input-group left-margin\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-clock-o\"></i></span>' + '<input type=\"text\" class=\"input-mini form-control start-time\" />' + '</div>' + '</div>' + '<div class=\"facet-field-cnt picker\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.END + '</div>' + '<div class=\"input-prepend input-group\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-calendar\"></i></span>' + '<input type=\"text\" class=\"input-small form-control end-date\" />' + '</div>' + '<div class=\"input-prepend input-group left-margin\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-clock-o\"></i></span>' + '<input type=\"text\" class=\"input-mini form-control end-time\" />' + '</div>' + '</div>' + '<div class=\"facet-field-cnt picker\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.INTERVAL + '</div>' + '<div class=\"input-prepend input-group\"><span class=\"add-on input-group-addon\"><i class=\"fa fa-repeat\"></i></span></div>&nbsp;' + '<select class=\"input-small interval-select\" style=\"margin-right: 6px\">' + renderOptions(_intervalOptions) + '</select>' + '<input class=\"input interval hide\" type=\"hidden\" value=\"\" />' + '</div>' + '<div class=\"facet-field-cnt custom\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.START + '</div>' + '<div class=\"input-prepend input-group\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-calendar-o\"></i></span>' + '<input type=\"text\" class=\"input-large form-control start-date-custom\" />' + '</div>' + '<span class=\"pointer custom-popover\" data-trigger=\"click\" data-toggle=\"popover\" data-placement=\"right\" rel=\"popover\" data-html=\"true\"' + '       title=\"' + KO_DATERANGEPICKER_LABELS.CUSTOM_POPOVER_TITLE + '\"' + '       data-content=\"' + KO_DATERANGEPICKER_LABELS.CUSTOM_POPOVER_CONTENT + '\">' + '&nbsp;&nbsp;<i class=\"fa fa-question-circle\"></i>' + ' </span>' + '</div>' + '<div class=\"facet-field-cnt custom\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.END + '</div>' + '<div class=\"input-prepend input-group\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-calendar-o\"></i></span>' + '<input type=\"text\" class=\"input-large form-control end-date-custom\" />' + '</div>' + '</div>' + '<div class=\"facet-field-cnt custom\">' + '<div class=\"facet-field-label facet-field-label-fixed-width\">' + KO_DATERANGEPICKER_LABELS.INTERVAL + '</div>' + '<div class=\"input-prepend input-group\">' + '<span class=\"add-on input-group-addon\"><i class=\"fa fa-repeat\"></i></span>' + '<input type=\"text\" class=\"input-large form-control interval-custom\" />' + '</div>' + '</div>' + '</div>');\n    _tmpl.insertAfter(_el);\n    $('.custom-popover').popover();\n    var _minMoment = moment(_options.min());\n    var _maxMoment = moment(_options.max());\n    if (_minMoment.isValid() && _maxMoment.isValid()) {\n      _tmpl.find('.facet-field-cnt.custom').hide();\n      _tmpl.find('.facet-field-cnt.picker').show();\n      _tmpl.find('.start-date').val(_minMoment.utc().format(DATE_FORMAT));\n      _tmpl.find('.start-time').val(_minMoment.utc().format(TIME_FORMAT));\n      _tmpl.find('.end-date').val(_maxMoment.utc().format(DATE_FORMAT));\n      _tmpl.find('.end-time').val(_maxMoment.utc().format(TIME_FORMAT));\n      _tmpl.find('.interval').val(_options.gap());\n      _tmpl.find('.interval-select').val(_options.gap());\n      _tmpl.find('.interval-custom').val(_options.gap());\n      if (_tmpl.find('.interval-select').val() == null || ko.bindingHandlers.dateRangePicker.EXTRA_INTERVAL_OPTIONS.indexOf(_tmpl.find('.interval-select').val()) > -1) {\n        pushIntervalValue(_options.gap());\n        _tmpl.find('.facet-field-cnt.custom').show();\n        _tmpl.find('.facet-field-cnt.picker').hide();\n      }\n    } else {\n      _tmpl.find('.facet-field-cnt.custom').show();\n      _tmpl.find('.facet-field-cnt.picker').hide();\n      _tmpl.find('.start-date-custom').val(_options.min());\n      _tmpl.find('.end-date-custom').val(_options.max());\n      _tmpl.find('.interval-custom').val(_options.gap());\n      pushIntervalValue(_options.gap());\n    }\n    if (typeof _options.relatedgap != 'undefined') {\n      pushIntervalValue(_options.relatedgap());\n    }\n    _tmpl.find('.start-date').datepicker({\n      format: DATE_FORMAT.toLowerCase()\n    }).on('changeDate', function () {\n      rangeHandler(true);\n    });\n    _tmpl.find('.start-date').on('change', function () {\n      rangeHandler(true);\n    });\n    _tmpl.find('.start-time').timepicker({\n      minuteStep: 1,\n      showSeconds: true,\n      showMeridian: false,\n      defaultTime: false\n    });\n    _tmpl.find('.end-date').datepicker({\n      format: DATE_FORMAT.toLowerCase()\n    }).on('changeDate', function () {\n      rangeHandler(false);\n    });\n    _tmpl.find('.end-date').on('change', function () {\n      rangeHandler(true);\n    });\n    _tmpl.find('.end-time').timepicker({\n      minuteStep: 1,\n      showSeconds: true,\n      showMeridian: false,\n      defaultTime: false\n    });\n    _tmpl.find('.start-time').on('change', function () {\n      // the timepicker plugin doesn't have a change event handler\n      // so we need to wait a bit to handle in with the default field event\n      window.setTimeout(function () {\n        rangeHandler(true);\n      }, 200);\n    });\n    _tmpl.find('.end-time').on('change', function () {\n      window.setTimeout(function () {\n        rangeHandler(false);\n      }, 200);\n    });\n    if (_minMoment.isValid() && _maxMoment.isValid()) {\n      rangeHandler(true);\n    }\n    _tmpl.find('.facet-field-cnt.picker .facet-field-switch a').on('click', function () {\n      _tmpl.find('.facet-field-cnt.custom').show();\n      _tmpl.find('.facet-field-cnt.picker').hide();\n    });\n    _tmpl.find('.facet-field-cnt.custom .facet-field-switch a').on('click', function () {\n      _tmpl.find('.facet-field-cnt.custom').hide();\n      _tmpl.find('.facet-field-cnt.picker').show();\n    });\n    _tmpl.find('.start-date-custom').on('change', function () {\n      _options.min(_tmpl.find('.start-date-custom').val());\n      _tmpl.find('.start-date').val(moment(_options.min()).utc().format(DATE_FORMAT));\n      _tmpl.find('.start-time').val(moment(_options.min()).utc().format(TIME_FORMAT));\n      _options.start(_options.min());\n    });\n    _tmpl.find('.end-date-custom').on('change', function () {\n      _options.max(_tmpl.find('.end-date-custom').val());\n      _tmpl.find('.end-date').val(moment(_options.max()).utc().format(DATE_FORMAT));\n      _tmpl.find('.end-time').val(moment(_options.max()).utc().format(TIME_FORMAT));\n      _options.end(_options.max());\n    });\n    _tmpl.find('.interval-custom').on('change', function () {\n      _options.gap(_tmpl.find('.interval-custom').val());\n      matchIntervals(true);\n      if (typeof _options.relatedgap != 'undefined') {\n        _options.relatedgap(_options.gap());\n      }\n    });\n    function pushIntervalValue(newValue) {\n      var _found = false;\n      ko.bindingHandlers.dateRangePicker.INTERVAL_OPTIONS.forEach(function (interval) {\n        if (interval.value == newValue) {\n          _found = true;\n        }\n      });\n      if (!_found) {\n        ko.bindingHandlers.dateRangePicker.INTERVAL_OPTIONS.push({\n          value: newValue,\n          label: newValue\n        });\n        ko.bindingHandlers.dateRangePicker.EXTRA_INTERVAL_OPTIONS.push(newValue);\n        _intervalOptions.push('<option value=\"' + newValue + '\">' + newValue + '</option>');\n      }\n    }\n    function matchIntervals(fromCustom) {\n      _tmpl.find('.interval-select').val(_options.gap());\n      if (_tmpl.find('.interval-select').val() == null) {\n        if (fromCustom) {\n          pushIntervalValue(_options.gap());\n          if (bindingContext.$root.intervalOptions) {\n            bindingContext.$root.intervalOptions(ko.bindingHandlers.dateRangePicker.INTERVAL_OPTIONS);\n          }\n        } else {\n          _tmpl.find('.interval-select').val(_tmpl.find('.interval-select option:first').val());\n          _options.gap(_tmpl.find('.interval-select').val());\n          if (typeof _options.relatedgap != 'undefined') {\n            _options.relatedgap(_options.gap());\n          }\n          _tmpl.find('.interval-custom').val(_options.gap());\n        }\n      }\n    }\n    _tmpl.find('.interval-select').on('change', function () {\n      _options.gap(_tmpl.find('.interval-select').val());\n      if (typeof _options.relatedgap != 'undefined') {\n        _options.relatedgap(_options.gap());\n      }\n      _tmpl.find('.interval').val(_options.gap());\n      _tmpl.find('.interval-custom').val(_options.gap());\n    });\n    function rangeHandler(isStart) {\n      var startDate = moment(_tmpl.find('.start-date').val() + ' ' + _tmpl.find('.start-time').val(), DATETIME_FORMAT);\n      var endDate = moment(_tmpl.find('.end-date').val() + ' ' + _tmpl.find('.end-time').val(), DATETIME_FORMAT);\n      if (startDate.valueOf() > endDate.valueOf()) {\n        if (isStart) {\n          _tmpl.find('.end-date').val(startDate.utc().format(DATE_FORMAT));\n          _tmpl.find('.end-date').datepicker('setValue', startDate.utc().format(DATE_FORMAT));\n          _tmpl.find('.end-date').data('original-val', _tmpl.find('.end-date').val());\n          _tmpl.find('.end-time').val(startDate.utc().format(TIME_FORMAT));\n        } else {\n          if (_tmpl.find('.end-date').val() === _tmpl.find('.start-date').val()) {\n            _tmpl.find('.end-time').val(startDate.utc().format(TIME_FORMAT));\n            _tmpl.find('.end-time').data('timepicker').setValues(startDate.format(TIME_FORMAT));\n          } else {\n            _tmpl.find('.end-date').val(_tmpl.find('.end-date').data('original-val'));\n            _tmpl.find('.end-date').datepicker('setValue', _tmpl.find('.end-date').data('original-val'));\n          }\n          huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n            message: 'The end cannot be before the starting moment',\n            noStick: true\n          });\n        }\n      } else {\n        _tmpl.find('.end-date').data('original-val', _tmpl.find('.end-date').val());\n        _tmpl.find('.start-date').datepicker('hide');\n        _tmpl.find('.end-date').datepicker('hide');\n      }\n      var _calculatedStartDate = moment(_tmpl.find('.start-date').val() + ' ' + _tmpl.find('.start-time').val(), DATETIME_FORMAT);\n      var _calculatedEndDate = moment(_tmpl.find('.end-date').val() + ' ' + _tmpl.find('.end-time').val(), DATETIME_FORMAT);\n      _options.min(_calculatedStartDate.format('YYYY-MM-DD[T]HH:mm:ss[Z]'));\n      _options.start(_options.min());\n      _options.max(_calculatedEndDate.format('YYYY-MM-DD[T]HH:mm:ss[Z]'));\n      _options.end(_options.max());\n      _tmpl.find('.start-date-custom').val(_options.min());\n      _tmpl.find('.end-date-custom').val(_options.max());\n      var _opts = [];\n      // hide not useful options from interval\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'minutes') > 1 && _calculatedEndDate.diff(_calculatedStartDate, 'minutes') <= 60) {\n        _opts = enableOptions('200MILLISECONDS', '1SECONDS', '1MINUTES', '5MINUTES', '10MINUTES', '30MINUTES');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'hours') > 1 && _calculatedEndDate.diff(_calculatedStartDate, 'hours') <= 12) {\n        _opts = enableOptions('5MINUTES', '10MINUTES', '30MINUTES', '1HOURS', '3HOURS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'hours') > 12 && _calculatedEndDate.diff(_calculatedStartDate, 'hours') < 36) {\n        _opts = enableOptions('10MINUTES', '30MINUTES', '1HOURS', '3HOURS', '6HOURS', '12HOURS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'days') > 1 && _calculatedEndDate.diff(_calculatedStartDate, 'days') <= 7) {\n        _opts = enableOptions('30MINUTES', '1HOURS', '3HOURS', '6HOURS', '12HOURS', '1DAYS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'days') > 7 && _calculatedEndDate.diff(_calculatedStartDate, 'days') <= 14) {\n        _opts = enableOptions('3HOURS', '6HOURS', '12HOURS', '1DAYS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'days') > 14 && _calculatedEndDate.diff(_calculatedStartDate, 'days') <= 31) {\n        _opts = enableOptions('12HOURS', '1DAYS', '7DAYS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'months') >= 1) {\n        _opts = enableOptions('1DAYS', '7DAYS', '1MONTHS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'months') > 6) {\n        _opts = enableOptions('1DAYS', '7DAYS', '1MONTHS', '6MONTHS');\n      }\n      if (_calculatedEndDate.diff(_calculatedStartDate, 'months') > 12) {\n        _opts = enableOptions('7DAYS', '1MONTHS', '6MONTHS', '1YEARS', '10YEARS');\n      }\n      $('.interval-select').html(renderOptions(_opts));\n      matchIntervals(true);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.datepicker = {\n  init: function init(element, valueAccessor, allBindings) {\n    var _el = $(element);\n    var _options = ko.unwrap(valueAccessor());\n    _el.datepicker({\n      format: 'yyyy-mm-dd'\n    }).on('show', function (e) {\n      if (_options.momentFormat) {\n        var m = moment.utc(_el.val());\n        _el.datepicker('setValue', m.format('YYYY-MM-DD'));\n        _el.val(m.format(_options.momentFormat)); // Set value again as datepicker clears the time component\n      }\n    }).on('changeDate', function (e) {\n      setDate(e.date);\n    }).on('hide', function (e) {\n      setDate(e.date);\n    });\n    function setDate(d) {\n      if (_options.momentFormat) {\n        var m = moment(d);\n        // Keep time intact\n        var previous = moment.utc(allBindings().value());\n        previous.date(m.date());\n        previous.month(m.month());\n        previous.year(m.year());\n        _el.val(previous.format(_options.momentFormat));\n      }\n      allBindings().value(_el.val());\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.dblclick = {\n  init: function init(element, valueAccessor, allBindingsAccessor, viewModel) {\n    var fn = valueAccessor();\n    $(element).dblclick(function () {\n      var data = ko.dataFor(this);\n      fn.call(viewModel, data);\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.delayedOverflow = {\n  init: function init(element, valueAccessor) {\n    var $element = $(element);\n    $element.css('overflow', 'hidden');\n    var isTouch = false;\n    $element.on('touchstart', function () {\n      isTouch = true;\n    });\n    var scrollTimeout = -1;\n    $element.hover(function () {\n      scrollTimeout = window.setTimeout(function () {\n        $element.css('overflow', 'auto');\n      }, valueAccessor && valueAccessor() === 'slow' ? 500 : 30);\n    }, function () {\n      if (!isTouch) {\n        clearTimeout(scrollTimeout);\n        $element.css('overflow', 'hidden');\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport scrollbarWidth from 'utils/screen/scrollbarWidth';\nko.bindingHandlers.dockable = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor() || {};\n    var scrollable = options.scrollable ? options.scrollable : window;\n    var triggerAdjust = options.triggerAdjust || 0;\n    var zIndex = options.zIndex || 1000;\n    $(element).addClass('dockable');\n    var initialTopPosition = -1;\n    var initialSize = {\n      w: $(element).width() - scrollbarWidth(),\n      h: $(element).outerHeight() + (options.jumpCorrection || 0)\n    };\n    var ghost = $('<div>').css({\n      display: 'none',\n      height: initialSize.h\n    }).insertBefore($(element));\n    function dock() {\n      if (initialTopPosition === -1) {\n        initialTopPosition = $(element).position().top;\n        ghost.height($(element).outerHeight() + (options.jumpCorrection || 0));\n      }\n      if ($(scrollable).scrollTop() + triggerAdjust > initialTopPosition) {\n        $(element).attr('style', 'position: fixed!important; top: ' + options.topSnap + '; width: ' + initialSize.w + 'px!important; z-index: ' + zIndex);\n        ghost.show();\n      } else {\n        $(element).removeAttr('style');\n        ghost.hide();\n      }\n    }\n    $(scrollable).on('scroll', dock);\n    var scrollOffSubscription = huePubSub.subscribe('scrollable.scroll.off', function (scrollElement) {\n      if (scrollElement === scrollable) {\n        $(scrollable).on('scroll', dock);\n      }\n    });\n    function resetInitialStyle() {\n      $(element).removeAttr('style');\n      initialSize = {\n        w: $(element).width() - scrollbarWidth(),\n        h: $(element).outerHeight() + (options.jumpCorrection || 0)\n      };\n      dock();\n    }\n    $(window).on('resize', resetInitialStyle);\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $(window).off('resize', resetInitialStyle);\n      $(scrollable).off('scroll', dock);\n      scrollOffSubscription.remove();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../api/apiHelper\";\nvar TYPE_MAP = {\n  hive: 'query-hive',\n  impala: 'query-impala',\n  java: 'query-java',\n  spark: 'query-spark2',\n  pig: 'query-pig',\n  sqoop: 'query-sqoop1',\n  'distcp-doc': 'query-distcp',\n  'shell-doc': 'query-shell',\n  'mapreduce-doc': 'query-mapreduce',\n  'hive-document-widget': 'query-hive',\n  'impala-document-widget': 'query-impala',\n  'java-document-widget': 'query-java',\n  'spark-document-widget': 'query-spark2',\n  'pig-document-widget': 'query-pig',\n  'sqoop-document-widget': 'query-sqoop1',\n  'distcp-document-widget': 'query-distcp',\n  'shell-document-widget': 'query-shell',\n  'mapreduce-document-widget': 'query-mapreduce'\n};\nko.bindingHandlers.documentChooser = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var type = 'query-hive';\n    if (options.type) {\n      var tempType = ko.unwrap(options.type);\n      if (tempType === 'function') {\n        tempType = tempType();\n      }\n      type = TYPE_MAP[tempType] ? TYPE_MAP[tempType] : tempType;\n    }\n    var firstLoad = false;\n    $(element).selectize({\n      valueField: 'uuid',\n      labelField: 'name',\n      searchField: 'name',\n      options: [],\n      create: false,\n      preload: true,\n      dropdownParent: 'body',\n      render: {\n        option: function option(item, escape) {\n          return '<div>' + '<strong>' + escape(item.name) + '</strong><br>' + '<span class=\"muted\">' + escape(item.description) + '</span>' + '</div>';\n        }\n      },\n      load: function load(query, callback) {\n        if (query === '' && options.value && !firstLoad) {\n          firstLoad = true;\n        }\n        apiHelper.searchDocuments({\n          type: type,\n          text: query,\n          include_trashed: false,\n          limit: 100,\n          successCallback: function successCallback(data) {\n            callback(data.documents);\n          }\n        });\n      },\n      onChange: function onChange(val) {\n        if (options.value) {\n          options.value(val);\n        }\n        if (options.document) {\n          options.document(this.options[val]);\n        }\n        if (options.mappedDocument) {\n          options.mappedDocument(ko.mapping.fromJS(this.options[val]));\n        }\n      },\n      onLoad: function onLoad() {\n        if (options.value) {\n          this.setValue(options.value());\n        }\n        if (options.loading) {\n          options.loading(false);\n        }\n      }\n    });\n  },\n  update: function update(element, valueAccessor) {\n    var options = valueAccessor();\n    if (options.value) {\n      element.selectize.setValue(options.value());\n    }\n    if (options.dependentValue && options.dependentValue() !== '') {\n      element.selectize.setValue(options.dependentValue());\n      options.dependentValue('');\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\n\n/**\n * Show the Context Popover for Documents when the bound element is clicked.\n *\n * Parameters:\n *\n * {string} uuid - the uuid of the document\n * {string} [orientation] - 'top', 'right', 'bottom', 'left'. Default 'right'\n * {Object} [offset] - Optional offset from the element\n * {number} [offset.top] - Offset in pixels\n * {number} [offset.left] - Offset in pixels\n *\n * Examples:\n *\n * data-bind=\"documentContextPopover: { uuid: 'bana-na12-3456-7890' }\"\n * data-bind=\"documentContextPopover: { uuid: 'bana-na12-3456-7890', orientation: 'bottom', offset: { top: 5 } }\"\n *\n * @type {{init: ko.bindingHandlers.documentContextPopover.init}}\n */\nko.bindingHandlers.documentContextPopover = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    ko.bindingHandlers.click.init(element, function () {\n      return function () {\n        var options = valueAccessor();\n        apiHelper.fetchDocument({\n          uuid: options.uuid,\n          fetchContents: true,\n          silenceErrors: true\n        }).done(function (response) {\n          var $source = $(element);\n          var offset = $source.offset();\n          if (options.offset) {\n            offset.top += options.offset.top || 0;\n            offset.left += options.offset.left || 0;\n          }\n          huePubSub.publish('context.popover.show', {\n            data: {\n              type: 'hue',\n              definition: response.document\n            },\n            showInAssistEnabled: true,\n            orientation: options.orientation || 'right',\n            source: {\n              element: element,\n              left: offset.left,\n              top: offset.top,\n              right: offset.left + $source.width(),\n              bottom: offset.top + $source.height()\n            }\n          });\n        });\n      };\n    }, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { registerBinding } from \"./bindingUtils\";\nexport var DRAGGABLE_TEXT_META_EVENT = 'draggable.text.meta';\nexport var NAME = 'draggableText';\nvar moreThanTenPixels = function moreThanTenPixels(startX, startY, event) {\n  return Math.sqrt((startX - event.clientX) * (startX - event.clientX) + (startY - event.clientY) * (startY - event.clientY)) > 10;\n};\nregisterBinding(NAME, {\n  init: function init(element, valueAccessor) {\n    var $element = $(element);\n    var options = valueAccessor();\n    var dragStartX = -1;\n    var dragStartY = -1;\n    var notifiedOnDragStarted = false;\n    var $helper;\n    $element.addClass('draggableText');\n    $element.draggable({\n      helper: function helper() {\n        $helper = $('<div>').text(ko.unwrap(options.text)).css('z-index', '99999');\n        return $helper;\n      },\n      appendTo: 'body',\n      start: function start(event) {\n        dragStartX = event.clientX;\n        dragStartY = event.clientY;\n        huePubSub.publish(DRAGGABLE_TEXT_META_EVENT, options.meta);\n        notifiedOnDragStarted = false;\n      },\n      drag: function drag(event) {\n        huePubSub.publish('draggable.text.drag', {\n          event: event,\n          meta: options.meta\n        });\n        if (!notifiedOnDragStarted && moreThanTenPixels(dragStartX, dragStartY, event)) {\n          huePubSub.publish('draggable.text.started', options.meta);\n          notifiedOnDragStarted = true;\n        }\n      },\n      stop: function stop(event) {\n        if ($helper) {\n          $helper.remove();\n        }\n        if (!moreThanTenPixels(dragStartX, dragStartY, event)) {\n          var elementAtStart = document.elementFromPoint(dragStartX, dragStartY);\n          var elementAtStop = document.elementFromPoint(event.clientX, event.clientY);\n          if (elementAtStart === elementAtStop) {\n            $(elementAtStop).trigger('click');\n          }\n        }\n        notifiedOnDragStarted = false;\n        huePubSub.publish('draggable.text.stopped');\n      }\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $element.draggable('destroy');\n    });\n  }\n});","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.dropdown = {\n  init: function init(element) {\n    $(element).dropdown();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport Dropzone from 'dropzone';\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { GLOBAL_ERROR_TOPIC, GLOBAL_INFO_TOPIC } from 'reactComponents/AlertComponent/events';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\n\n// TODO: Depends on Dropzone\n\nko.bindingHandlers.dropzone = {\n  init: function init(element, valueAccessor) {\n    var value = ko.unwrap(valueAccessor());\n    if (value.disabled) {\n      return;\n    }\n    var options = {\n      autoDiscover: false,\n      timeout: 300000,\n      maxFilesize: 5000000,\n      previewsContainer: '#progressStatusContent',\n      previewTemplate: '<div class=\"progress-row\">' + '<span class=\"break-word\" data-dz-name></span>' + '<div class=\"pull-right\">' + '<span class=\"muted\" data-dz-size></span>&nbsp;&nbsp;' + '<span data-dz-remove><a href=\"javascript:undefined;\" title=\"' + I18n('Cancel upload') + '\"><i class=\"fa fa-fw fa-times\"></i></a></span>' + '<span style=\"display: none\" data-dz-uploaded><i class=\"fa fa-fw fa-check muted\"></i></span>' + '</div>' + '<div class=\"progress-row-bar\" data-dz-uploadprogress></div>' + '</div>',\n      sending: function sending() {\n        $('.hoverMsg').addClass('hide');\n        $('#progressStatus').removeClass('hide');\n        $('#progressStatusBar').removeClass('hide');\n        $('#progressStatus .progress-row').remove();\n        $('#progressStatusBar div').css('width', '0');\n      },\n      uploadprogress: function uploadprogress(file, progress) {\n        $('[data-dz-name]').each(function (cnt, item) {\n          if ($(item).text() === file.name) {\n            $(item).parents('.progress-row').find('[data-dz-uploadprogress]').width(progress.toFixed() + '%');\n            if (progress.toFixed() === '100') {\n              $(item).parents('.progress-row').find('[data-dz-remove]').hide();\n              $(item).parents('.progress-row').find('[data-dz-uploaded]').show();\n            }\n          }\n        });\n      },\n      totaluploadprogress: function totaluploadprogress(progress) {\n        $('#progressStatusBar div').width(progress.toFixed() + '%');\n      },\n      canceled: function canceled() {\n        huePubSub.publish(GLOBAL_INFO_TOPIC, {\n          message: I18n('The upload has been canceled')\n        });\n      },\n      complete: function complete(file) {\n        if (file.xhr.response !== '') {\n          var response = JSON.parse(file.xhr.response);\n          if (response && response.status != null) {\n            if (response.status !== 0) {\n              huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n                message: response.data\n              });\n              if (value.onError) {\n                value.onError(file.name);\n              }\n            } else {\n              huePubSub.publish(GLOBAL_INFO_TOPIC, {\n                message: response.path + ' ' + I18n('uploaded successfully')\n              });\n              if (value.onComplete) {\n                value.onComplete(response.path);\n              }\n            }\n          }\n        }\n      },\n      queuecomplete: function queuecomplete() {\n        window.setTimeout(function () {\n          $('#progressStatus').addClass('hide');\n          $('#progressStatusBar').addClass('hide');\n          $('#progressStatusBar div').css('width', '0');\n        }, 2500);\n      },\n      createImageThumbnails: false\n    };\n    $.extend(options, value);\n    $(element).addClass('dropzone');\n    new Dropzone(element, options);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport sprintf from 'sprintf-js';\nko.bindingHandlers.duration = function () {\n  var that;\n  return that = {\n    init: function init(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    update: function update(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    format: function format(element, valueAccessor) {\n      var value = valueAccessor();\n      var formatted = that.humanTime(ko.unwrap(value));\n      $(element).text(formatted);\n    },\n    humanTime: function humanTime(value) {\n      value = value * 1;\n      if (value < Math.pow(10, 3)) {\n        return sprintf.sprintf('%i ns', value);\n      } else if (value - Math.pow(10, 6) < -Math.pow(10, 3) / 2) {\n        // Make sure rounding doesn't cause numbers to have more than 4 significant digits.\n        value = value * 1.0 / Math.pow(10, 3);\n        var sprint = value > 100 ? '%i us' : '%.1f us';\n        return sprintf.sprintf(sprint, value);\n      } else if (value - Math.pow(10, 9) < -Math.pow(10, 6) / 2) {\n        value = value * 1.0 / Math.pow(10, 6);\n        var _sprint = value > 100 ? '%i ms' : '%.1f ms';\n        return sprintf.sprintf(_sprint, value);\n      } else {\n        // get the ms value\n        var SECOND = 1;\n        var MINUTE = SECOND * 60;\n        var HOUR = MINUTE * 60;\n        value = value * 1 / Math.pow(10, 9);\n        var buffer = '';\n        if (value > HOUR) {\n          buffer += sprintf.sprintf('%i h', value / HOUR);\n          value = value % HOUR;\n        }\n        if (buffer.length < 4 && value > MINUTE) {\n          var _sprint2 = buffer.length ? ' %i m' : '%i m';\n          buffer += sprintf.sprintf(_sprint2, value / MINUTE);\n          value = value % MINUTE;\n        }\n        if (buffer.length < 4 && value > SECOND) {\n          var _sprint3 = buffer.length ? ' %i s' : '%.1f s';\n          buffer += sprintf.sprintf(_sprint3, value * 1.0 / SECOND);\n        }\n        return buffer;\n      }\n    }\n  };\n}();","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.ellipsis = {\n  update: function update(element, valueAccessor) {\n    var value = ko.unwrap(valueAccessor());\n    var $element = $(element);\n    var chopLength = value.length ? value.length : 30;\n    var text = _typeof(value) === 'object' ? ko.unwrap(value.data) : value;\n    if (text.length > chopLength) {\n      $element.attr('title', text);\n      $element.text(text.substr(0, chopLength) + '...');\n    } else {\n      $element.text(text);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.fadeVisible = {\n  init: function init(element, valueAccessor) {\n    var value = valueAccessor();\n    var toggleValue = typeof value.value === 'undefined' ? value : value.value;\n    $(element).toggle(ko.unwrap(toggleValue));\n  },\n  update: function update(element, valueAccessor) {\n    var value = valueAccessor();\n    var toggleValue = typeof value.value === 'undefined' ? value : value.value;\n    var speed = typeof value.speed === 'undefined' ? 'normal' : value.speed;\n    var fadeOut = typeof value.fadeOut === 'undefined' ? false : value.fadeOut;\n    $(element).stop();\n    if (ko.unwrap(toggleValue)) {\n      $(element).fadeIn(speed);\n    } else if (fadeOut) {\n      $(element).fadeOut(speed);\n    } else {\n      $(element).hide();\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.fetchMore = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var throttle = -1;\n    $element.on('scroll.fetchMore', function () {\n      window.clearTimeout(throttle);\n      throttle = window.setTimeout(function () {\n        if (element.scrollTop + $element.innerHeight() >= element.scrollHeight - 10 && ko.unwrap(options.hasMore) && !ko.unwrap(options.loadingMore)) {\n          options.fetchMore();\n        }\n      }, 100);\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $element.off('scroll.fetchMore');\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport getFileBrowseButton from 'utils/html/getFileBrowseButton';\nko.bindingHandlers.filechooser = {\n  init: function init(element, valueAccessor, allBindingsAccessor) {\n    var $element = $(element);\n    var options = ko.unwrap(allBindingsAccessor());\n    $element.attr('autocomplete', 'off');\n    if (typeof valueAccessor() == 'function' || typeof valueAccessor().value == 'function') {\n      $element.val(valueAccessor().value ? valueAccessor().value() : valueAccessor()());\n      $element.data('fullPath', $element.val());\n      $element.attr('data-original-title', $element.val());\n      if (valueAccessor().displayJustLastBit) {\n        var _val = $element.val();\n        $element.val(_val.split('/')[_val.split('/').length - 1]);\n      }\n      $element.on('blur', function () {\n        if (valueAccessor().value) {\n          if (valueAccessor().displayJustLastBit) {\n            var _val2 = $element.data('fullPath');\n            valueAccessor().value(_val2.substr(0, _val2.lastIndexOf('/')) + '/' + $element.val());\n          } else {\n            valueAccessor().value($element.val());\n          }\n          $element.data('fullPath', valueAccessor().value());\n        } else {\n          valueAccessor()($element.val());\n          $element.data('fullPath', valueAccessor()());\n        }\n        $element.attr('data-original-title', $element.data('fullPath'));\n      });\n      if (options.valueUpdate && options.valueUpdate === 'afterkeydown') {\n        $element.on('keyup', function () {\n          if (valueAccessor().value) {\n            valueAccessor().value($element.val());\n          } else {\n            valueAccessor()($element.val());\n          }\n        });\n      }\n    } else {\n      $element.val(valueAccessor());\n      $element.on('blur', function () {\n        valueAccessor($element.val());\n      });\n      if (options.valueUpdate && options.valueUpdate === 'afterkeydown') {\n        $element.on('keyup', function () {\n          valueAccessor($element.val());\n        });\n      }\n    }\n    $element.after(getFileBrowseButton($element, true, valueAccessor, true, allBindingsAccessor, valueAccessor().isAddon, valueAccessor().isNestedModal, allBindingsAccessor && allBindingsAccessor().filechooserOptions && allBindingsAccessor().filechooserOptions.linkMarkup));\n    if (allBindingsAccessor && allBindingsAccessor().filechooserOptions && allBindingsAccessor().filechooserOptions.openOnFocus) {\n      $element.on('focus', function () {\n        if ($element.val() === '') {\n          $element.siblings('.filechooser-clickable').click();\n        }\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\n\n/**\n * This binding limits the rendered items based on what is visible within a scrollable container. It supports\n * multiple any amount of nested children with foreachVisible bindings\n *\n * The minHeight parameter is the initial expected rendered height of each entry, once rendered the real\n * height is used. It keeps a number of elements above and below the visible elements to make slow scrolling\n * smooth.\n *\n * The height of the container element has to be less than or equal to the inner height of the window.\n *\n * Example:\n *\n * <div class=\"container\" style=\"overflow-y: scroll; height: 100px\">\n *  <ul data-bind=\"foreachVisible: { data: items, minHeight: 20, container: '.container' }\">\n *    <li>...</li>\n *  </ul>\n * </div>\n *\n * For tables the binding has to be attached to the tbody element:\n *\n * <div class=\"container\" style=\"overflow-y: scroll; height: 100px\">\n *  <table>\n *    <thead>...</thead>\n *    <tbody data-bind=\"foreachVisible: { data: items, minHeight: 20, container: '.container' }>\n *      <tr>...</tr>\n *    </tbody>\n *  </ul>\n * </div>\n *\n * Currently the binding only supports one element inside the bound element otherwise the height\n * calculations will be off. In other words this will make it go bonkers:\n *\n * <div class=\"container\" style=\"overflow-y: scroll; height: 100px\">\n *  <ul data-bind=\"foreachVisible: { data: items, minHeight: 20, container: '.container' }\">\n *    <li>...</li>\n *    <li style=\"display: none;\">...</li>\n *  </ul>\n * </div>\n *\n */\nko.bindingHandlers.foreachVisible = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    return ko.bindingHandlers.template.init(element, function () {\n      return {\n        foreach: [],\n        templateEngine: ko.nativeTemplateEngine.instance\n      };\n    }, allBindings, viewModel, bindingContext);\n  },\n  update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var isTable = false;\n    if ($element.parent().is('table')) {\n      $element = $element.parent();\n      isTable = true;\n    }\n    var $container = $element.closest(options.container);\n    var id = Math.random();\n\n    // This is possibly a parent element that has the foreachVisible binding\n    var $parentFVElement = bindingContext.$parentForeachVisible || null;\n    var parentId = bindingContext.$parentForeachVisibleId || -1;\n    // This is the element from the parent foreachVisible rendered element that contains\n    // this one or container for root\n    var $parentFVOwnerElement = $container;\n    $element.data('parentForeachVisible', $parentFVElement);\n    var depth = bindingContext.$depth || 0;\n\n    // Locate the owning element if within another foreach visible binding\n    if ($parentFVElement) {\n      var myOffset = $element.offset().top;\n      $parentFVElement.children().each(function (idx, child) {\n        var $child = $(child);\n        if (myOffset > $child.offset().top) {\n          $parentFVOwnerElement = $child;\n        } else {\n          return false;\n        }\n      });\n    }\n    if ($parentFVOwnerElement.data('disposalFunction')) {\n      $parentFVOwnerElement.data('disposalFunction')();\n      $parentFVOwnerElement.data('lastKnownHeights', null);\n    }\n    var entryMinHeight = options.minHeight;\n    var allEntries = ko.utils.unwrapObservable(options.data);\n    var visibleEntryCount = 0;\n    var incrementLimit = 0; // The diff required to re-render, set to visibleCount below\n    var elementIncrement = 0; // Elements to add on either side of the visible elements, set to 3x visibleCount\n    var endIndex = 0;\n    var updateVisibleEntryCount = function updateVisibleEntryCount() {\n      // TODO: Drop the window innerHeight limitation.\n      // Sometimes after resizeWrapper() is called the reported innerHeight of the $container is the same as\n      // the wrapper causing the binding to render all the items. This limits the visibleEntryCount to the\n      // window height.\n      var newEntryCount = Math.ceil(Math.min($(window).innerHeight(), $container.innerHeight()) / entryMinHeight);\n      if (newEntryCount !== visibleEntryCount) {\n        var diff = newEntryCount - visibleEntryCount;\n        elementIncrement = options.elementIncrement || 25;\n        incrementLimit = options.incrementLimit || 5;\n        visibleEntryCount = newEntryCount;\n        endIndex += diff;\n        huePubSub.publish('foreach.visible.update', id);\n      }\n    };\n\n    // TODO: Move intervals to webworker\n    var updateCountInterval = setInterval(updateVisibleEntryCount, 300);\n    updateVisibleEntryCount();\n\n    // In case this element was rendered before use the last known indices\n    var startIndex = Math.max($parentFVOwnerElement.data('startIndex') || 0, 0);\n    endIndex = Math.min($parentFVOwnerElement.data('endIndex') || visibleEntryCount + elementIncrement, allEntries.length - 1);\n    var huePubSubs = [];\n    var _scrollToIndex = function scrollToIndex(idx, offset, instant, callback) {\n      var lastKnownHeights = $parentFVOwnerElement.data('lastKnownHeights');\n      if (!lastKnownHeights || lastKnownHeights.length <= idx) {\n        return;\n      }\n      var top = 0;\n      for (var i = 0; i < idx; i++) {\n        top += lastKnownHeights[i];\n      }\n      var bottom = top + lastKnownHeights[idx];\n      window.setTimeout(function () {\n        var newScrollTop = top + offset;\n        if (instant) {\n          if (newScrollTop >= $container.height() + $container.scrollTop()) {\n            $container.scrollTop(bottom - $container.height());\n          } else if (newScrollTop <= $container.scrollTop()) {\n            $container.scrollTop(newScrollTop);\n          }\n        } else {\n          $container.stop().animate({\n            scrollTop: newScrollTop\n          }, '500', 'swing', function () {\n            if (callback) {\n              callback();\n            }\n          });\n        }\n      }, 0);\n    };\n    if (!options.skipScrollEvent) {\n      huePubSubs.push(huePubSub.subscribe('assist.db.scrollTo', function (targetEntry) {\n        var foundIndex = -1;\n        $.each(allEntries, function (idx, entry) {\n          if (targetEntry === entry) {\n            foundIndex = idx;\n            return false;\n          }\n        });\n        if (foundIndex !== -1) {\n          var offset = depth > 0 ? $parentFVOwnerElement.position().top : 0;\n          _scrollToIndex(foundIndex, offset, false, function () {\n            huePubSub.publish('assist.db.scrollToComplete', targetEntry);\n          });\n        }\n      }));\n    }\n    if (ko.isObservable(viewModel.foreachVisible)) {\n      viewModel.foreachVisible({\n        scrollToIndex: function scrollToIndex(index) {\n          var offset = depth > 0 ? $parentFVOwnerElement.position().top : 0;\n          _scrollToIndex(index, offset, true);\n        }\n      });\n    }\n    var childBindingContext = bindingContext.createChildContext(bindingContext.$rawData, null, function (context) {\n      ko.utils.extend(context, {\n        $parentForeachVisible: $element,\n        $parentForeachVisibleId: id,\n        $depth: depth + 1,\n        $indexOffset: function $indexOffset() {\n          return startIndex;\n        }\n      });\n    });\n    var $wrapper = $element.parent();\n    if (!$wrapper.hasClass('foreach-wrapper')) {\n      $wrapper = $('<div>').css({\n        position: 'relative',\n        width: '100%'\n      }).addClass('foreach-wrapper').insertBefore($element);\n      if (options.usePreloadBackground) {\n        $wrapper.addClass('assist-preloader-wrapper');\n        $element.addClass('assist-preloader');\n      }\n      $element.css({\n        position: 'absolute',\n        top: 0,\n        width: '100%'\n      }).appendTo($wrapper);\n    }\n\n    // This is kept up to date with the currently rendered elements, it's used to keep track of any\n    // height changes of the elements.\n    var renderedElements = [];\n    if (!$parentFVOwnerElement.data('lastKnownHeights') || $parentFVOwnerElement.data('lastKnownHeights').length !== allEntries.length) {\n      var lastKnownHeights = [];\n      $.each(allEntries, function () {\n        lastKnownHeights.push(entryMinHeight);\n      });\n      $parentFVOwnerElement.data('lastKnownHeights', lastKnownHeights);\n    }\n    var resizeWrapper = function resizeWrapper() {\n      var totalHeight = 0;\n      var lastKnownHeights = $parentFVOwnerElement.data('lastKnownHeights');\n      if (!lastKnownHeights) {\n        return;\n      }\n      $.each(lastKnownHeights, function (idx, height) {\n        totalHeight += height;\n      });\n      $wrapper.height(totalHeight + 'px');\n    };\n    resizeWrapper();\n    var updateLastKnownHeights = function updateLastKnownHeights() {\n      if ($container.data('busyRendering')) {\n        return;\n      }\n      var lastKnownHeights = $parentFVOwnerElement.data('lastKnownHeights');\n      // Happens when closing first level and the third level is open, disposal tells the parents\n      // to update their heights...\n      if (!lastKnownHeights) {\n        return;\n      }\n      var diff = false;\n      var updateEntryCount = false;\n      $.each(renderedElements, function (idx, renderedElement) {\n        // TODO: Figure out why it goes over index at the end scroll position\n        if (startIndex + idx < lastKnownHeights.length) {\n          var renderedHeight = $(renderedElement).outerHeight(true);\n          if (renderedHeight > 5 && lastKnownHeights[startIndex + idx] !== renderedHeight) {\n            if (renderedHeight < entryMinHeight) {\n              entryMinHeight = renderedHeight;\n              updateEntryCount = true;\n            }\n            lastKnownHeights[startIndex + idx] = renderedHeight;\n            diff = true;\n          }\n        }\n      });\n      if (updateEntryCount) {\n        updateVisibleEntryCount();\n      }\n      // Only resize if a difference in height was noticed.\n      if (diff) {\n        $parentFVOwnerElement.data('lastKnownHeights', lastKnownHeights);\n        resizeWrapper();\n      }\n    };\n    var updateHeightsInterval = window.setInterval(updateLastKnownHeights, 600);\n    huePubSubs.push(huePubSub.subscribe('foreach.visible.update.heights', function (targetId) {\n      if (targetId === id) {\n        clearInterval(updateHeightsInterval);\n        updateLastKnownHeights();\n        huePubSub.publish('foreach.visible.update.heights', parentId);\n        updateHeightsInterval = window.setInterval(updateLastKnownHeights, 600);\n      }\n    }));\n    updateLastKnownHeights();\n    var positionList = function positionList() {\n      var lastKnownHeights = $parentFVOwnerElement.data('lastKnownHeights');\n      if (!lastKnownHeights) {\n        return;\n      }\n      var top = 0;\n      for (var i = 0; i < startIndex; i++) {\n        top += lastKnownHeights[i];\n      }\n      $element.css('top', top + 'px');\n    };\n    var _afterRender = function afterRender() {\n      renderedElements = isTable ? $element.children('tbody').children() : $element.children();\n      $container.data('busyRendering', false);\n      if (typeof options.fetchMore !== 'undefined' && endIndex === allEntries.length - 1) {\n        options.fetchMore();\n      }\n      huePubSub.publish('foreach.visible.update.heights', id);\n    };\n    var render = function render() {\n      if (endIndex === 0 && allEntries.length > 1 || endIndex < 0) {\n        ko.bindingHandlers.template.update(element, function () {\n          return {\n            foreach: [],\n            templateEngine: ko.nativeTemplateEngine.instance,\n            afterRender: function afterRender() {\n              // This is called once for each added element (not when elements are removed)\n              clearTimeout(throttle);\n              throttle = setTimeout(_afterRender, 0);\n            }\n          };\n        }, allBindings, viewModel, childBindingContext);\n        return;\n      }\n      $container.data('busyRendering', true);\n      // Save the start and end index for when the list is removed and is shown again.\n      $parentFVOwnerElement.data('startIndex', startIndex);\n      $parentFVOwnerElement.data('endIndex', endIndex);\n      positionList();\n\n      // This is to ensure that our afterRender is called (the afterRender of KO below isn't called\n      // when only elements are removed)\n      var throttle = setTimeout(_afterRender, 0);\n      ko.bindingHandlers.template.update(element, function () {\n        return {\n          foreach: allEntries.slice(startIndex, endIndex + 1),\n          templateEngine: ko.nativeTemplateEngine.instance,\n          afterRender: function afterRender() {\n            // This is called once for each added element (not when elements are removed)\n            clearTimeout(throttle);\n            throttle = setTimeout(_afterRender, 0);\n          }\n        };\n      }, allBindings, viewModel, childBindingContext);\n    };\n    var setStartAndEndFromScrollTop = function setStartAndEndFromScrollTop() {\n      var lastKnownHeights = $parentFVOwnerElement.data('lastKnownHeights');\n      if (!lastKnownHeights) {\n        return;\n      }\n      var parentSpace = 0;\n      var $lastParent = $parentFVElement;\n      var $lastRef = $element;\n      var _loop = function _loop() {\n        // Include the header, parent() is .foreach-wrapper, parent().parent() is the container (ul or div)\n        var lastRefOffset = $lastRef.parent().parent().offset().top;\n        var lastAddedSpace = 0;\n        $lastParent.children().each(function (idx, child) {\n          var $child = $(child);\n          if (lastRefOffset > $child.offset().top) {\n            lastAddedSpace = $child.outerHeight(true);\n            parentSpace += lastAddedSpace;\n          } else {\n            // Remove the height of the child which is the parent of this\n            parentSpace -= lastAddedSpace;\n            return false;\n          }\n        });\n        parentSpace += $lastParent.position().top;\n        $lastRef = $lastParent;\n        $lastParent = $lastParent.data('parentForeachVisible');\n      };\n      while ($lastParent) {\n        _loop();\n      }\n      var position = Math.min($container.scrollTop() - parentSpace, $wrapper.height());\n      for (var i = 0; i < lastKnownHeights.length; i++) {\n        position -= lastKnownHeights[i];\n        if (position <= 0) {\n          startIndex = Math.max(i - elementIncrement, 0);\n          endIndex = Math.min(allEntries.length - 1, i + elementIncrement + visibleEntryCount);\n          break;\n        }\n      }\n    };\n    var renderThrottle = -1;\n    var preloadGhostThrottle = -1;\n    var lastScrollTop = -1;\n    var onScroll = function onScroll() {\n      if (startIndex > incrementLimit && Math.abs(lastScrollTop - $container.scrollTop()) < incrementLimit * options.minHeight) {\n        return;\n      }\n      lastScrollTop = $container.scrollTop();\n      setStartAndEndFromScrollTop();\n\n      // adds a preload ghost image just on scroll and removes it 200ms after the scroll stops\n      if (options.usePreloadBackground) {\n        $wrapper.addClass('assist-preloader-ghost');\n        clearTimeout(preloadGhostThrottle);\n        preloadGhostThrottle = setTimeout(function () {\n          $wrapper.removeClass('assist-preloader-ghost');\n        }, 200);\n      }\n      clearTimeout(renderThrottle);\n      var startDiff = Math.abs($parentFVOwnerElement.data('startIndex') - startIndex);\n      var endDiff = Math.abs($parentFVOwnerElement.data('endIndex') - endIndex);\n      if (startDiff > incrementLimit || endDiff > incrementLimit || startDiff !== 0 && startIndex === 0 || endDiff !== 0 && endIndex === allEntries.length - 1) {\n        renderThrottle = setTimeout(render, 0);\n      }\n    };\n    huePubSubs.push(huePubSub.subscribe('foreach.visible.update', function (callerId) {\n      if (callerId === id && endIndex > 0) {\n        setStartAndEndFromScrollTop();\n        clearTimeout(renderThrottle);\n        renderThrottle = setTimeout(render, 0);\n      }\n    }));\n    $container.bind('scroll', onScroll);\n    $parentFVOwnerElement.data('disposalFunction', function () {\n      setTimeout(function () {\n        huePubSub.publish('foreach.visible.update.heights', parentId);\n      }, 0);\n      huePubSubs.forEach(function (pubSub) {\n        pubSub.remove();\n      });\n      $container.unbind('scroll', onScroll);\n      clearInterval(updateCountInterval);\n      clearInterval(updateHeightsInterval);\n      $parentFVOwnerElement.data('disposalFunction', null);\n    });\n    if (typeof options.pubSubDispose !== 'undefined') {\n      huePubSubs.push(huePubSub.subscribe(options.pubSubDispose, $parentFVOwnerElement.data('disposalFunction')));\n    }\n    ko.utils.domNodeDisposal.addDisposeCallback($wrapper[0], $parentFVOwnerElement.data('disposalFunction'));\n    setStartAndEndFromScrollTop();\n    render();\n  }\n};\nko.expressionRewriting.bindingRewriteValidators['foreachVisible'] = false;\nko.virtualElements.allowedBindings['foreachVisible'] = true;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport stripHtmlFromFunctions from 'utils/html/stripHtmlForFunctions';\nko.bindingHandlers.fresherEditor = {\n  init: function init(element, valueAccessor) {\n    var _el = $(element);\n    var options = $.extend(valueAccessor(), {});\n    _el.html(options.data());\n    _el.freshereditor({\n      excludes: ['strikethrough', 'removeFormat', 'insertorderedlist', 'justifyfull', 'insertheading1', 'insertheading2', 'superscript', 'subscript']\n    });\n    _el.freshereditor('edit', true);\n    _el.on('mouseup', function () {\n      storeSelection();\n      updateValues();\n    });\n    var sourceDelay = -1;\n    _el.on('keyup', function () {\n      clearTimeout(sourceDelay);\n      storeSelection();\n      sourceDelay = setTimeout(function () {\n        updateValues();\n      }, 100);\n    });\n    $('.chosen-select').chosen({\n      disable_search_threshold: 10,\n      width: '75%'\n    });\n    $(document).on('addFieldToVisual', function (e, field) {\n      _el.focus();\n      pasteHtmlAtCaret('{{' + field.name() + '}}');\n    });\n    $(document).on('addFunctionToVisual', function (e, fn) {\n      _el.focus();\n      pasteHtmlAtCaret(fn);\n    });\n    function updateValues() {\n      $('[data-template]')[0].editor.setValue(stripHtmlFromFunctions(_el.html()));\n      valueAccessor().data(_el.html());\n    }\n    function storeSelection() {\n      if (window.getSelection) {\n        // IE9 and non-IE\n        var sel = window.getSelection();\n        if (sel.getRangeAt && sel.rangeCount) {\n          var range = sel.getRangeAt(0);\n          _el.data('range', range);\n        }\n      } else if (document.selection && document.selection.type !== 'Control') {\n        // IE < 9\n        _el.data('selection', document.selection);\n      }\n    }\n    function pasteHtmlAtCaret(html) {\n      var sel, range;\n      if (window.getSelection) {\n        // IE9 and non-IE\n        sel = window.getSelection();\n        if (sel.getRangeAt && sel.rangeCount) {\n          if (_el.data('range')) {\n            range = _el.data('range');\n          } else {\n            range = sel.getRangeAt(0);\n          }\n          range.deleteContents();\n\n          // Range.createContextualFragment() would be useful here but is\n          // non-standard and not supported in all browsers (IE9, for one)\n          var el = document.createElement('div');\n          el.innerHTML = html;\n          var frag = document.createDocumentFragment();\n          var node, lastNode;\n          while (node = el.firstChild) {\n            lastNode = frag.appendChild(node);\n          }\n          range.insertNode(frag);\n\n          // Preserve the selection\n          if (lastNode) {\n            range = range.cloneRange();\n            range.setStartAfter(lastNode);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n          }\n        }\n      } else if (document.selection && document.selection.type !== 'Control') {\n        // IE < 9\n        if (_el.data('selection')) {\n          _el.data('selection').createRange().pasteHTML(html);\n        } else {\n          document.selection.createRange().pasteHTML(html);\n        }\n      }\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.hdfsAutocomplete = {\n  init: function init(element) {\n    var $element = $(element);\n    $element.attr('autocomplete', 'off');\n    $element.jHueHdfsAutocomplete({\n      skipKeydownEvents: true,\n      skipScrollEvent: true\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.hdfsTree = {\n  update: function update(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var $element = $(element);\n    $element.empty();\n    $element.jHueHdfsTree({\n      home: '',\n      isS3: !!options.isS3,\n      root: options.root,\n      initialPath: options.path,\n      withTopPadding: false,\n      onPathChange: function onPathChange(path) {\n        options.selectedPath(path);\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { hueLocalStorage } from 'utils/storageUtils';\n\n// TODO: Depends on Ace\n\nko.bindingHandlers.highlight = {\n  init: function init(element) {\n    $(element).addClass('ace-highlight');\n  },\n  update: function update(element, valueAccessor) {\n    var options = $.extend({\n      dialect: 'hive',\n      value: '',\n      formatted: false\n    }, valueAccessor());\n    var value = ko.unwrap(options.value);\n    if (typeof value !== 'undefined' && value !== '') {\n      // allows highlighting static code\n      if (options.path) {\n        value = value[options.path];\n      }\n      ace.require(['ace/mode/impala_highlight_rules', 'ace/mode/hive_highlight_rules', 'ace/mode/xml_highlight_rules', 'ace/tokenizer', 'ace/layer/text', 'ace/config'], function (impalaRules, hiveRules, xmlRules, tokenizer, text, config) {\n        var res = [];\n        var Tokenizer = tokenizer.Tokenizer;\n        var Rules = hiveRules.HiveHighlightRules;\n        if (options.dialect && ko.unwrap(options.dialect) === 'impala') {\n          Rules = impalaRules.ImpalaHighlightRules;\n        }\n        config.loadModule(['theme', hueLocalStorage('hue.ace.theme') || 'ace/theme/hue']);\n        var Text = text.Text;\n        var tok = new Tokenizer(new Rules().getRules());\n        var lines = value.split('\\n');\n        var renderSimpleLine = function renderSimpleLine(txt, stringBuilder, tokens) {\n          var screenColumn = 0;\n          var token = tokens[0];\n          var value = token.value;\n          if (value) {\n            try {\n              screenColumn = txt.$renderToken(stringBuilder, screenColumn, token, value);\n            } catch (e) {\n              console.warn(value, 'Failed to get screen column due to some parsing errors, skip rendering.');\n            }\n          }\n          for (var i = 1; i < tokens.length; i++) {\n            token = tokens[i];\n            value = token.value;\n            try {\n              screenColumn = txt.$renderToken(stringBuilder, screenColumn, token, value);\n            } catch (e) {\n              if (console && console.warn) {\n                console.warn(value, 'This token has some parsing errors and it has been rendered without highlighting.');\n              }\n              stringBuilder.push(value);\n              screenColumn = screenColumn + value.length;\n            }\n          }\n        };\n        var additionalClass = '';\n        if (!options.splitLines && !options.formatted) {\n          additionalClass = 'pull-left';\n        } else if (options.formatted) {\n          additionalClass = 'ace-highlight-pre';\n        }\n        lines.forEach(function (line) {\n          var renderedTokens = [];\n          var tokens = tok.getLineTokens(line);\n          if (tokens && tokens.tokens.length) {\n            renderSimpleLine(new Text(document.createElement('div')), renderedTokens, tokens.tokens);\n          }\n          res.push('<div class=\"ace_line ' + additionalClass + '\">' + renderedTokens.join('') + '&nbsp;</div>');\n        });\n        element.innerHTML = '<div class=\"ace_editor ace-hue\"' + (options.enableOverflow ? ' style=\"overflow: initial !important;\"' : '') + '><div class=\"ace_layer\" style=\"position: static;' + (options.enableOverflow ? ' overflow: initial !important;' : '') + '\">' + res.join('') + '</div></div>';\n        if (options.enableOverflow) {\n          $(element).css({\n            overflow: 'auto'\n          });\n        }\n        $(element).find('.ace_invisible_space').remove();\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.hiveChooser = {\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    var self = $(element);\n    var options = ko.unwrap(valueAccessor());\n    var complexConfiguration = false;\n    if (typeof options === 'function') {\n      self.val(options());\n    } else if (options && options.data) {\n      self.val(options.data);\n      complexConfiguration = true;\n    } else {\n      self.val(options);\n    }\n    if (complexConfiguration) {\n      self.jHueGenericAutocomplete({\n        showOnFocus: true,\n        skipColumns: ko.unwrap(options.skipColumns),\n        skipTables: ko.unwrap(options.skipTables),\n        startingPath: options.database + '.',\n        rewriteVal: true,\n        onPathChange: options.onChange,\n        namespace: ko.unwrap(options.namespace),\n        compute: ko.unwrap(options.compute),\n        searchEverywhere: ko.unwrap(options.searchEverywhere) || false,\n        apiHelperUser: ko.unwrap(options.apiHelperUser) || '',\n        apiHelperType: ko.unwrap(options.apiHelperType) || '',\n        mainScrollable: ko.unwrap(options.mainScrollable) || $(window)\n      });\n    } else {\n      options = allBindingsAccessor();\n      var setPathFromAutocomplete = function setPathFromAutocomplete(path) {\n        self.val(path);\n        valueAccessor()(path);\n        self.blur();\n      };\n      self.on('blur', function () {\n        if (!options.skipInvalids) {\n          valueAccessor()(self.val());\n        }\n      });\n      if (allBindingsAccessor().valueUpdate != null && allBindingsAccessor().valueUpdate === 'afterkeydown') {\n        self.on('keyup', function () {\n          valueAccessor()(self.val());\n        });\n      }\n      self.jHueGenericAutocomplete({\n        showOnFocus: true,\n        home: '/',\n        skipColumns: ko.unwrap(options.skipColumns) || false,\n        skipTables: ko.unwrap(options.skipTables) || false,\n        namespace: ko.unwrap(options.namespace),\n        compute: ko.unwrap(options.compute),\n        pathChangeLevel: ko.unwrap(options.pathChangeLevel) || '',\n        apiHelperUser: ko.unwrap(options.apiHelperUser) || '',\n        apiHelperType: ko.unwrap(options.apiHelperType) || '',\n        mainScrollable: ko.unwrap(options.mainScrollable) || $(window),\n        onPathChange: function onPathChange(path) {\n          setPathFromAutocomplete(path);\n        },\n        onEnter: function onEnter(el) {\n          if (!options.skipInvalids) {\n            setPathFromAutocomplete(el.val());\n          }\n        },\n        onBlur: function onBlur() {\n          if (self.val().lastIndexOf('.') === self.val().length - 1) {\n            self.val(self.val().substr(0, self.val().length - 1));\n          }\n          if (!options.skipInvalids) {\n            valueAccessor()(self.val());\n          }\n        }\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport deXSS from 'utils/html/deXSS';\n\n// we override the default html binding to prevent XSS/JS injection\nvar originalHtmlBinding = ko.bindingHandlers.html;\nko.bindingHandlers.html = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var newValueAccessor = function newValueAccessor() {\n      return deXSS(ko.unwrap(valueAccessor()));\n    };\n    originalHtmlBinding.init(element, newValueAccessor, allBindings, viewModel, bindingContext);\n  },\n  update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var newValueAccessor = function newValueAccessor() {\n      return deXSS(ko.unwrap(valueAccessor()));\n    };\n    originalHtmlBinding.update(element, newValueAccessor, allBindings, viewModel, bindingContext);\n  }\n};\nko.bindingHandlers.htmlUnsecure = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    originalHtmlBinding.init(element, valueAccessor, allBindings, viewModel, bindingContext);\n  },\n  update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    originalHtmlBinding.update(element, valueAccessor, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.bindingHandlers.hueCheckAll = {\n  init: function init(element, valueAccessor) {\n    var allValues = ko.utils.unwrapObservable(valueAccessor()).allValues;\n    var selectedValues = ko.utils.unwrapObservable(valueAccessor()).selectedValues;\n    var updateCheckedState = function updateCheckedState() {\n      ko.utils.toggleDomNodeCssClass(element, 'fa-check', allValues().length > 0 && selectedValues().length === allValues().length);\n      ko.utils.toggleDomNodeCssClass(element, 'fa-minus hue-uncheck', selectedValues().length > 0 && selectedValues().length !== allValues().length);\n    };\n    ko.utils.registerEventHandler(element, 'click', function () {\n      if (selectedValues().length === 0) {\n        selectedValues(allValues().slice(0));\n      } else {\n        selectedValues([]);\n      }\n    });\n    selectedValues.subscribe(updateCheckedState);\n    allValues.subscribe(updateCheckedState);\n    updateCheckedState();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.hueCheckbox = {\n  after: ['value', 'attr'],\n  init: function init(element, valueAccessor) {\n    var value = valueAccessor();\n    $(element).addClass('hue-checkbox fa');\n    var updateCheckedState = function updateCheckedState() {\n      ko.utils.toggleDomNodeCssClass(element, 'fa-check', value());\n    };\n    ko.utils.registerEventHandler(element, 'click', function () {\n      value(!value());\n    });\n    value.subscribe(updateCheckedState);\n    updateCheckedState();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.bindingHandlers.hueChecked = {\n  after: ['value', 'attr'],\n  init: function init(element, valueAccessor, allBindings, viewModel) {\n    var selectedValues = valueAccessor();\n    if (allBindings().checkedValue) {\n      viewModel = ko.unwrap(allBindings().checkedValue);\n    }\n    var updateCheckedState = function updateCheckedState() {\n      ko.utils.toggleDomNodeCssClass(element, 'fa-check', selectedValues.indexOf(viewModel) > -1);\n    };\n    ko.utils.registerEventHandler(element, 'click', function () {\n      var currentIndex = selectedValues.indexOf(viewModel);\n      if (currentIndex === -1) {\n        selectedValues.push(viewModel);\n      } else if (currentIndex > -1) {\n        selectedValues.splice(currentIndex, 1);\n      }\n    });\n    selectedValues.subscribe(updateCheckedState);\n    updateCheckedState();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.hueLink = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    ko.bindingHandlers.click.init(element, function () {\n      return function (data, event) {\n        var url = ko.unwrap(valueAccessor());\n        if (url) {\n          var prefix = window.HUE_BASE_URL + '/hue' + (url.indexOf('/') === 0 ? '' : '/');\n          if ($(element).attr('target')) {\n            window.open(prefix + url, $(element).attr('target'));\n          } else if (event.ctrlKey || event.metaKey || event.which === 2) {\n            window.open(prefix + url, '_blank');\n          } else {\n            huePubSub.publish('open.link', url);\n          }\n        }\n      };\n    }, allBindings, viewModel, bindingContext);\n    ko.bindingHandlers.hueLink.update(element, valueAccessor);\n  },\n  update: function update(element, valueAccessor) {\n    var url = ko.unwrap(valueAccessor());\n    if (url) {\n      $(element).attr('href', window.HUE_BASE_URL + '/hue' + (url.indexOf('/') === 0 ? url : '/' + url));\n    } else {\n      $(element).attr('href', 'javascript: void(0);');\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\n\n/**\n * Binding for adding a spinner to the page\n *\n * Example:\n *\n * <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n *\n */\nko.bindingHandlers.hueSpinner = {\n  update: function update(element, valueAccessor) {\n    var value = ko.unwrap(valueAccessor());\n    var options = {\n      size: 'default',\n      center: false,\n      overlay: false,\n      inline: false,\n      blackout: false\n    };\n    var spin = false;\n    if (ko.isObservable(valueAccessor())) {\n      spin = value();\n    } else {\n      $.extend(options, value);\n      spin = typeof value.spin === 'function' ? value.spin() : value.spin;\n    }\n    ko.virtualElements.emptyNode(element);\n    if (spin) {\n      var $container = $('<div>');\n      $container.addClass(options.overlay ? 'hue-spinner-overlay' : options.inline ? 'hue-spinner-inline' : 'hue-spinner');\n      if (options.blackout) {\n        $container.addClass('hue-spinner-blackout');\n      }\n      if (!options.overlay) {\n        var $spinner = $('<i>');\n        $spinner.addClass('fa fa-spinner fa-spin');\n        if (options.size === 'large') {\n          $spinner.addClass('hue-spinner-large');\n        }\n        if (options.size === 'xlarge') {\n          $spinner.addClass('hue-spinner-xlarge');\n        }\n        if (options.center) {\n          $spinner.addClass('hue-spinner-center');\n          if (options.inline) {\n            $container.css('width', '100%');\n          }\n        }\n        $container.append($spinner);\n      }\n      ko.virtualElements.prepend(element, $container[0]);\n    }\n  }\n};\nko.virtualElements.allowedBindings.hueSpinner = true;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.hueach = {\n  init: function init(element, valueAccessor, allBindings) {\n    var valueAccessorBuilder = function valueAccessorBuilder() {\n      return {\n        data: ko.observableArray([])\n      };\n    };\n    ko.bindingHandlers.foreach.init(element, valueAccessorBuilder, allBindings);\n  },\n  update: function update(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var $element = $(element);\n    var $parent = $element.parent();\n    var data = typeof valueAccessor().data === 'function' ? valueAccessor().data() : valueAccessor().data;\n    var considerStretching = valueAccessor().considerStretching || false;\n    var itemHeight = valueAccessor().itemHeight || 22;\n    var scrollable = valueAccessor().scrollable || 'body';\n    var scrollUp = valueAccessor().scrollUp || false;\n    var scrollableOffset = valueAccessor().scrollableOffset || 0;\n    var disableHueEachRowCount = valueAccessor().disableHueEachRowCount || 0;\n    var forceRenderSub = valueAccessor().forceRenderSub || null;\n    var renderTimeout = -1;\n    var dataHasChanged = true;\n    var wrappable = $(element);\n    if (data.length > disableHueEachRowCount) {\n      if ($parent.is('table')) {\n        wrappable = $parent;\n        $parent = wrappable.parent();\n      }\n      if (!wrappable.parent().hasClass('hueach')) {\n        wrappable.wrap('<div class=\"hueach\"></div>');\n        $parent = wrappable.parent();\n        wrappable.css({\n          position: 'absolute',\n          width: '100%'\n        });\n      }\n      $parent.height(data.length * itemHeight);\n      if (wrappable.is('table')) {\n        $parent.height($parent.height() + (data.length > 0 ? itemHeight : 0));\n      }\n    }\n    try {\n      if (ko.utils.domData.get(element, 'originalData') && JSON.stringify(ko.utils.domData.get(element, 'originalData')) === JSON.stringify(data)) {\n        dataHasChanged = false;\n      }\n    } catch (e) {}\n    if (dataHasChanged) {\n      ko.utils.domData.set(element, 'originalData', data);\n    }\n    var startItem = 0,\n      endItem = 0;\n    var valueAccessorBuilder = function valueAccessorBuilder() {\n      return {\n        data: ko.utils.domData.get(element, 'originalData') ? ko.observableArray(ko.utils.domData.get(element, 'originalData').slice(startItem, endItem)) : []\n      };\n    };\n    var render = function render() {\n      if ($parent.parents('.hueach').length === 0) {\n        var heightCorrection = 0,\n          fluidCorrection = 0;\n        var scrollTop = $parent.parents(scrollable).scrollTop();\n        if (wrappable.is('table')) {\n          if (scrollTop < scrollableOffset + itemHeight) {\n            wrappable.find('thead').css('opacity', '1');\n          } else {\n            wrappable.find('thead').css('opacity', '0');\n          }\n        } else {\n          wrappable.children(':visible').each(function (cnt, child) {\n            if ($(child).height() >= itemHeight) {\n              heightCorrection += $(child).height();\n            }\n          });\n          if (heightCorrection > 0) {\n            ko.utils.domData.set(element, 'heightCorrection', heightCorrection);\n          }\n          if (heightCorrection === 0 && ko.utils.domData.get(element, 'heightCorrection')) {\n            fluidCorrection = ko.utils.domData.get(element, 'heightCorrection') - 20;\n          }\n        }\n        startItem = Math.max(0, Math.floor(Math.max(1, scrollTop - heightCorrection - fluidCorrection - scrollableOffset) / itemHeight) - 10);\n        if (wrappable.is('table') && startItem % 2 === 1) {\n          startItem--;\n        }\n        endItem = Math.min(startItem + Math.ceil($parent.parents(scrollable).height() / itemHeight) + 20, data.length);\n        wrappable.css('top', startItem * itemHeight + fluidCorrection + 'px');\n      } else {\n        startItem = 0;\n        endItem = data.length;\n      }\n      bindingContext.$indexOffset = function () {\n        return startItem;\n      };\n      ko.bindingHandlers.foreach.update(element, valueAccessorBuilder, allBindings, viewModel, bindingContext);\n    };\n    $parent.parents(scrollable).off('scroll');\n    huePubSub.publish('scrollable.scroll.off', scrollable);\n    $parent.parents(scrollable).on('scroll', render);\n    if (scrollUp) {\n      $parent.parents(scrollable).jHueScrollUp();\n    }\n    if ($parent.parents('.hueach').length > 0) {\n      window.setTimeout(render, 100);\n    }\n    if (considerStretching) {\n      huePubSub.subscribe('assist.stretchDown', function () {\n        window.clearTimeout(renderTimeout);\n        renderTimeout = window.setTimeout(function () {\n          ko.utils.domData.set(element, 'hasStretched', true);\n          render();\n        }, 300);\n      });\n    }\n    if (forceRenderSub) {\n      huePubSub.subscribe(forceRenderSub, function () {\n        window.setTimeout(render, 300);\n      });\n    }\n    window.clearTimeout(renderTimeout);\n    renderTimeout = window.setTimeout(function () {\n      ko.utils.domData.set(element, 'hasStretched', true);\n      render();\n    }, 300);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\n\n// TODO: Depends on impalaDagre\n\nko.bindingHandlers.impalaDagre = function () {\n  return {\n    init: function init(element, valueAccessor, allBindingsAccessor) {\n      var id = $(element).attr('id');\n      element._impalaDagre = impalaDagre(id);\n      var clickSubscription = huePubSub.subscribe('impala.node.moveto', function (value) {\n        element._impalaDagre.moveTo(value);\n      });\n      var selectSubscription = huePubSub.subscribe('impala.node.select', function (value) {\n        element._impalaDagre.select(value);\n      });\n      ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n        clickSubscription.remove();\n        selectSubscription.remove();\n      });\n    },\n    update: function update(element, valueAccessor) {\n      var props = ko.unwrap(valueAccessor());\n      element._impalaDagre.metrics(props.metrics);\n      element._impalaDagre.height(props.height);\n      element._impalaDagre.update(props.value);\n    }\n  };\n}();","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.jHueRowSelector = {\n  init: function init(element) {\n    $(element).jHueRowSelector();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { hueLocalStorage } from 'utils/storageUtils';\nko.bindingHandlers.logResizer = {\n  init: function init(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor()),\n      $resizer = $(element),\n      $parent = $resizer.parents(options.parent),\n      $target = $parent.find(options.target),\n      onStart = options.onStart,\n      onResize = options.onResize;\n    var initialHeight = hueLocalStorage('hue.editor.logs.size') || 80;\n    window.setTimeout(function () {\n      $target.css('height', initialHeight + 'px');\n    }, 0);\n    $resizer.draggable({\n      axis: 'y',\n      start: function start() {\n        if (onStart) {\n          onStart();\n        }\n      },\n      drag: function drag(event, ui) {\n        var currentHeight = ui.offset.top - $target.offset().top - 20;\n        if (options.minHeight && currentHeight < options.minHeight) {\n          currentHeight = options.minHeight;\n        }\n        hueLocalStorage('hue.editor.logs.size', currentHeight);\n        $target.css('height', currentHeight + 'px');\n        ui.offset.top = 0;\n        ui.position.top = 0;\n      },\n      stop: function stop(event, ui) {\n        ui.offset.top = 0;\n        ui.position.top = 0;\n        if (onResize) {\n          onResize();\n        }\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport waitForRendered from 'utils/timing/waitForRendered';\nko.bindingHandlers.logScroller = {\n  init: function init(element, valueAccessor, allBindings) {\n    var $element = $(element);\n    $element.on('scroll', function () {\n      $element.data('lastScrollTop', $element.scrollTop());\n    });\n    $element.on('wheel', function () {\n      $element.data('hasUserScrolled', true);\n    });\n    function autoLogScroll() {\n      var elementHeight = $element.innerHeight();\n      var lastHeight = $element.data('lastHeight') || elementHeight;\n      var lastScrollTop = $element.data('lastScrollTop') || 0;\n      var hasUserScrolled = $element.data('hasUserScrolled') || false;\n      var lastScrollHeight = $element.data('lastScrollHeight') || elementHeight;\n      var stickToBottom = !hasUserScrolled || elementHeight !== lastHeight || lastScrollTop + elementHeight === lastScrollHeight;\n      if (stickToBottom) {\n        $element.scrollTop(element.scrollHeight - $element.height());\n        $element.data('lastScrollTop', $element.scrollTop());\n      }\n      $element.data('lastScrollHeight', element.scrollHeight);\n      $element.data('lastHeight', elementHeight);\n    }\n    var logValue = valueAccessor();\n    logValue.subscribe(function () {\n      window.setTimeout(autoLogScroll, 200);\n    });\n    if (typeof allBindings().logScrollerVisibilityEvent !== 'undefined') {\n      allBindings().logScrollerVisibilityEvent.subscribe(function () {\n        window.setTimeout(autoLogScroll, 0);\n      });\n    } else {\n      waitForRendered(element, function (el) {\n        return el.is(':visible');\n      }, autoLogScroll, 300);\n      ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n        window.clearTimeout($element.data('waitForRenderTimeout'));\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport MediumEditor from 'medium-editor';\nko.bindingHandlers.medium = {\n  init: function init(element, valueAccessor, allBindings) {\n    new MediumEditor($(element), {\n      buttons: ['header1', 'header2', 'bold', 'italic', 'underline', 'quote', 'anchor', 'orderedlist', 'unorderedlist', 'pre', 'outdent', 'indent'],\n      buttonLabels: 'fontawesome',\n      anchorTarget: true,\n      anchorInputPlaceholder: '${ _(\"Paste or type a link\") }',\n      anchorInputCheckboxLabel: '${ _(\"Open in new window\") }',\n      firstHeader: 'h2',\n      secondHeader: 'h3'\n    });\n    $(element).on('blur', function () {\n      allBindings().value($(element).html());\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.moment = {\n  update: function update(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var $element = $(element);\n    var value = typeof options.data === 'function' ? options.data() : options.data;\n    function render() {\n      var fMoment = moment(value);\n      var text;\n      if (!fMoment.isValid()) {\n        text = value;\n      } else if (options.format) {\n        text = fMoment.format(options.format);\n      } else {\n        text = fMoment.format();\n      }\n      $element.text(text);\n    }\n    render();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.momentFromNow = {\n  update: function update(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var $element = $(element);\n    var value = ko.unwrap(options.data);\n    function render() {\n      $element.text(moment(value).fromNow());\n      if (options.titleFormat) {\n        $element.attr('title', moment(value).format(options.titleFormat));\n      }\n    }\n    render();\n    if (options.interval) {\n      window.clearInterval($element.data('momentInterval'));\n      var interval = window.setInterval(render, options.interval);\n      $element.data('momentInterval', interval);\n      ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n        window.clearInterval(interval);\n      });\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.multiCheck = {\n  init: function init(element, valueAccessor) {\n    $(element).attr('unselectable', 'on').css('user-select', 'none').on('selectstart', false);\n    var $container = $(ko.unwrap(valueAccessor()));\n    $(element).click(function (e) {\n      var $self = $(e.target);\n      if ($self.data('noMultiCheck')) {\n        $self.data('noMultiCheck', false);\n        return;\n      }\n      var shouldCheck = $self.is(':checked') || !$self.hasClass('fa-check');\n      if (e.shiftKey && shouldCheck === $container.data('last-clicked-checkbox-state')) {\n        var insideGroup = false;\n        var allCheckboxes = $container.find(':checkbox');\n        if (allCheckboxes.length === 0) {\n          allCheckboxes = $container.find('.hue-checkbox');\n        }\n        for (var i = 0; i < allCheckboxes.length; i++) {\n          var checkbox = allCheckboxes[i];\n          if (checkbox === e.target || checkbox === $container.data('last-clicked-checkbox')) {\n            if (insideGroup) {\n              break;\n            }\n            insideGroup = true;\n            continue;\n          }\n          if (insideGroup) {\n            var $checkbox = $(checkbox);\n            $checkbox.data('noMultiCheck', true);\n            if (($checkbox.is(':checked') || $checkbox.hasClass('fa-check')) !== shouldCheck) {\n              $checkbox.trigger('click');\n            }\n          }\n        }\n      }\n      $container.data('last-clicked-checkbox', e.target);\n      $container.data('last-clicked-checkbox-state', shouldCheck);\n    });\n  },\n  update: function update() {}\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.multiCheckForeachVisible = {\n  init: function init(element, valueAccessor, allBindings, clickedEntry, bindingContext) {\n    var $element = $(element);\n    var parentContext = bindingContext.$parentContext;\n    var selectedAttr = valueAccessor().selectedAttr;\n    var entries = valueAccessor().entries;\n    $element.attr('unselectable', 'on').css('user-select', 'none').on('selectstart', false);\n    $element.on('click', function (e) {\n      if (e.shiftKey && parentContext.$multiCheckLastEntry) {\n        var lastEntry = parentContext.$multiCheckLastEntry;\n        var inside = false;\n        entries().every(function (otherEntry) {\n          if (otherEntry === lastEntry || otherEntry === clickedEntry) {\n            if (inside) {\n              return false;\n            }\n            inside = true;\n            return true;\n          }\n          if (inside && otherEntry[selectedAttr]() !== lastEntry[selectedAttr]()) {\n            otherEntry[selectedAttr](lastEntry[selectedAttr]());\n          }\n          return true;\n        });\n        if (clickedEntry[selectedAttr]() !== lastEntry[selectedAttr]()) {\n          clickedEntry[selectedAttr](lastEntry[selectedAttr]());\n        }\n      } else {\n        clickedEntry[selectedAttr](!clickedEntry[selectedAttr]());\n      }\n      parentContext.$multiCheckLastEntry = clickedEntry;\n      parentContext.$multiCheckLastChecked = clickedEntry[selectedAttr]();\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $element.off('click');\n    });\n  },\n  update: function update() {}\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.bindingHandlers.multiClick = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var clickHandlerFunction = valueAccessor().click;\n    var dblClickHandlerFunction = valueAccessor().dblClick;\n    if (!dblClickHandlerFunction && !clickHandlerFunction) {\n      return;\n    }\n    var clickedOnce = false;\n    var singleClickTimeout = -1;\n    var dblClickTimeout = -1;\n    var newValueAccessor = function newValueAccessor() {\n      return function () {\n        var clickArgs = arguments;\n        if (!dblClickHandlerFunction && clickHandlerFunction) {\n          clickHandlerFunction.apply(viewModel, clickArgs);\n          return;\n        }\n        if (clickedOnce) {\n          dblClickHandlerFunction.apply(viewModel, clickArgs);\n          clickedOnce = false;\n          clearTimeout(singleClickTimeout);\n          clearTimeout(dblClickTimeout);\n        } else if (clickHandlerFunction) {\n          clickedOnce = true;\n          singleClickTimeout = window.setTimeout(function () {\n            clickHandlerFunction.apply(viewModel, clickArgs);\n            dblClickTimeout = window.setTimeout(function () {\n              clickedOnce = false;\n            }, 100);\n          }, 225);\n        }\n      };\n    };\n    ko.bindingHandlers.click.init(element, newValueAccessor, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport MultiLineEllipsisHandler from \"../../utils/multiLineEllipsisHandler\";\nko.bindingHandlers.multiLineEllipsis = {\n  after: ['text', 'value'],\n  init: function init(element, valueAccessor) {},\n  update: function update(element, valueAccessor) {\n    var options = {};\n    if (valueAccessor && ko.isObservable(valueAccessor())) {\n      options.overflowing = valueAccessor();\n    } else if (valueAccessor) {\n      options = valueAccessor() || {};\n    }\n    var multiLineEllipsisHandler = new MultiLineEllipsisHandler({\n      element: element,\n      text: element.textContent,\n      overflowing: options.overflowing,\n      linkify: true,\n      expandable: options.expandable,\n      expanded: options.expanded,\n      expandActionClass: options.expandActionClass,\n      expandClass: options.expandClass\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      multiLineEllipsisHandler.dispose();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.numberFormat = function () {\n  var that;\n  return that = {\n    init: function init(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    update: function update(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    format: function format(element, valueAccessor) {\n      var value = valueAccessor();\n      var unwrapped = ko.unwrap(value);\n      $(element).text(that.human(unwrapped.value, unwrapped.unit));\n    },\n    human: function human(value, unit) {\n      var fn;\n      if (unit === 1) {\n        fn = function fn(value) {\n          return ko.bindingHandlers.simplesize.humanSize(value) + '/s';\n        };\n      } else if (unit === 3) {\n        fn = ko.bindingHandlers.bytesize.humanSize;\n      } else if (unit === 4) {\n        fn = function fn(value) {\n          return ko.bindingHandlers.bytesize.humanSize(value) + '/s';\n        };\n      } else if (unit === 5) {\n        fn = ko.bindingHandlers.duration.humanTime;\n      } else if (unit === 8) {\n        fn = function fn(value) {\n          return ko.bindingHandlers.duration.humanTime(value * 1000000);\n        };\n      } else if (unit === 9) {\n        fn = function fn(value) {\n          return ko.bindingHandlers.duration.humanTime(value * 1000000000);\n        };\n      } else {\n        fn = ko.bindingHandlers.simplesize.humanSize;\n      }\n      return fn(value);\n    }\n  };\n}();","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.bindingHandlers.numericTextInput = {\n  init: function init(element, valueAccessor, allBindings) {\n    var bindingOptions = ko.unwrap(valueAccessor());\n    var numericValue = ko.observable(bindingOptions.value()).extend({\n      numeric: {\n        precision: bindingOptions.precision,\n        allowEmpty: typeof bindingOptions.allowEmpty !== 'undefined' && bindingOptions.allowEmpty\n      }\n    });\n    numericValue.subscribe(function (newValue) {\n      bindingOptions.value(newValue);\n    });\n    ko.bindingHandlers.textInput.init(element, function () {\n      return numericValue;\n    }, allBindings);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.onClickOutside = {\n  update: function update(element, valueAccessor, allBindingsAccessor, viewModel) {\n    var options = valueAccessor();\n    var func = typeof options === 'function' ? options : options.onOutside;\n    var onDocumentClick = function onDocumentClick(event) {\n      if ($.contains(document, event.target) && !$.contains(element, event.target)) {\n        var result = func.bind(viewModel)();\n        if (typeof result === 'undefined' || result) {\n          $(document).off('click', onDocumentClick);\n        }\n      }\n    };\n    $(document).off('click', onDocumentClick);\n    $(document).on('click', onDocumentClick);\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $(document).off('click', onDocumentClick);\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.oneClickSelect = {\n  init: function init(element) {\n    $(element).click(function () {\n      if (document.selection) {\n        var range = document.body.createTextRange();\n        range.moveToElementText(element);\n        range.select();\n      } else if (window.getSelection) {\n        var _range = document.createRange();\n        _range.selectNode(element);\n        window.getSelection().addRange(_range);\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.parseArguments = {\n  init: function init(element, valueAccessor) {\n    var $el = $(element);\n    function splitStrings(str) {\n      var bits = [];\n      var isInQuotes = false;\n      var tempStr = '';\n      var charQuote = null;\n      str.replace(/<\\/?arg>|<\\/?command>/gi, ' ').replace(/\\r?\\n|\\r/g, '').replace(/\\s\\s+/g, ' ').split('').forEach(function (_char) {\n        if ((_char === '\"' || _char === \"'\") && (!charQuote || charQuote == _char)) {\n          charQuote = isInQuotes ? null : _char;\n          isInQuotes = !isInQuotes;\n        } else if ((_char === ' ' || _char === '\\n') && !isInQuotes && tempStr !== '') {\n          bits.push(tempStr);\n          tempStr = '';\n        } else {\n          tempStr += _char;\n        }\n      });\n      if (tempStr !== '') {\n        bits.push(tempStr);\n      }\n      return bits;\n    }\n    $el.bind('paste', function (e) {\n      var pasted = e.originalEvent.clipboardData.getData('text');\n      var args = splitStrings(pasted);\n      if (args.length > 1) {\n        var newList = [];\n        args.forEach(function (arg) {\n          var obj = {};\n          obj[valueAccessor().objectKey] = $.trim(arg);\n          newList.push(obj);\n        });\n        valueAccessor().list(ko.mapping.fromJS(newList)());\n        valueAccessor().callback();\n      }\n    });\n  }\n};","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.publish = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    ko.bindingHandlers.click.init(element, function () {\n      return function () {\n        var topicDetails = ko.unwrap(valueAccessor());\n        if (typeof topicDetails === 'string') {\n          huePubSub.publish(topicDetails);\n        } else if (_typeof(topicDetails) === 'object') {\n          var keys = Object.keys(topicDetails);\n          if (keys.length === 1) {\n            huePubSub.publish(keys[0], topicDetails[keys[0]]);\n          }\n        }\n      };\n    }, allBindings, viewModel, bindingContext);\n  }\n};","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as ko from 'knockout';\nimport { createElement } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { loadComponent } from \"../../reactComponents/imports\";\n\n/**\n * REACT KNOCKOUT INTEGRATION\n * This is a oneway binding from knockout to react.js. Use the data-binding called reactWrapper\n * followed by the component name. Props are passed in as js object literal coded as a string using\n * the props param. Any new components used must also be added to the import file\n * desktop/core/src/desktop/js/reactComponents/imports.js.\n *\n * Example usage:\n *\n * <MyComponent data-bind=\"reactWrapper: 'MyComponent',\n *    props: { title: 'Result title', activeExecutable: activeExecutable }\">\n * </MyComponent>\n *\n *\n * The name of the component element tag (eg <MyComponent>) can be anything, but for consistency\n * and to stay close to how normal react components look we use the actual component name.\n */\n\nvar getProps = function getProps(allBindings) {\n  var props = allBindings.get('props');\n\n  // Functions are not valid as a React child\n  return _objectSpread(_objectSpread({}, props), {}, {\n    children: ko.toJS(props.children)\n  });\n};\nvar unwrapProps = function unwrapProps(props) {\n  var processedProps = Object.create(null);\n  Object.entries(props).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      propName = _ref2[0],\n      propValue = _ref2[1];\n    processedProps[propName] = ko.unwrap(propValue);\n  });\n  return processedProps;\n};\nko.bindingHandlers.reactWrapper = function () {\n  return {\n    init: function init(el, valueAccessor, allBindings, viewModel, bindingContext) {\n      var componentName = ko.unwrap(valueAccessor());\n      var props = getProps(allBindings);\n\n      // The component's react root should only be created once per DOM\n      // load so we pass it along via the bindingContext to be reused in the KO update call.\n      var reactRoot = createRoot(el);\n      el.__KO_React_root = reactRoot;\n      loadComponent(componentName).then(function (Component) {\n        reactRoot.render( /*#__PURE__*/createElement(Component, unwrapProps(props)));\n      });\n\n      // Since the react component is a root component we need to handle the\n      // unmounting explicitly if the dom node is disposed by Knockout, e.g. via \"ko if:\"\n      ko.utils.domNodeDisposal.addDisposeCallback(el, function () {\n        return reactRoot.unmount();\n      });\n\n      // Tell Knockout that it does not need to update the children\n      // of this component, since that is now handled by React\n      return {\n        controlsDescendantBindings: true\n      };\n    },\n    update: function update(el, valueAccessor, allBindings, viewModel, bindingContext) {\n      var componentName = ko.unwrap(valueAccessor());\n      var props = getProps(allBindings);\n      loadComponent(componentName).then(function (Component) {\n        el.__KO_React_root.render( /*#__PURE__*/createElement(Component, unwrapProps(props)));\n      });\n\n      // Handle KO observables\n      Object.entries(props).forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          propName = _ref4[0],\n          propValue = _ref4[1];\n        if (ko.isObservable(propValue)) {\n          var koSubscription = propValue.subscribe(function () {\n            loadComponent(componentName).then(function (Component) {\n              el.__KO_React_root.render( /*#__PURE__*/createElement(Component, _objectSpread(_objectSpread({}, props), {}, _defineProperty({}, propName, propValue()))));\n            });\n          });\n          koSubscription.disposeWhenNodeIsRemoved(el);\n        }\n      });\n    }\n  };\n}();","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { hueLocalStorage } from 'utils/storageUtils';\n\n// TODO: Depends on Ace\n\nko.bindingHandlers.readOnlyAce = {\n  init: function init(element) {\n    $(element).css({\n      'min-height': '250px'\n    });\n    var editor = ace.edit(element);\n    editor.setOptions({\n      readOnly: true,\n      maxLines: Infinity\n    });\n    editor.setTheme(hueLocalStorage('hue.ace.theme') || 'ace/theme/hue');\n    $(element).data('aceEditor', editor);\n  },\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    var value = ko.unwrap(valueAccessor());\n    var options = ko.unwrap(allBindingsAccessor());\n    $(element).data('aceEditor').getSession().setMode('ace/mode/' + options.type || 'xml'); // e.g. xml, json...\n    if (typeof value !== 'undefined' && value !== '') {\n      // allows highlighting static code\n      if (options.path) {\n        value = value[options.path];\n      }\n      $(element).data('aceEditor').setValue(value, -1);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\n\n/**\n * Binding for jquery UI resizable\n *\n * @type {{init: ko.bindingHandlers.resizable.init}}\n */\nko.bindingHandlers.resizable = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor() || {};\n    $(element).resizable(options);\n    $(element).children('.ui-resizable-handle').css('z-index', 10000);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\n\n// TODO: Depends on Role\n\nko.bindingHandlers.select2 = {\n  init: function init(element, valueAccessor, allBindingsAccessor, viewModel) {\n    var options = ko.toJS(valueAccessor()) || {};\n    var $element = $(element);\n\n    // When the options are in the binding value accessor the data attribute will be used instead of any <select>\n    // tag it's attached to.\n    if (ko.isObservable(valueAccessor().options) && ko.isObservable(valueAccessor().value)) {\n      var optionsObservable = valueAccessor().options;\n      var valueObservable = valueAccessor().value;\n      options.data = $.map(optionsObservable(), function (value) {\n        return {\n          id: value,\n          text: value\n        };\n      });\n      options.val = valueObservable();\n      var refreshSelect2Data = function refreshSelect2Data() {\n        $element.select2('data', $.map(optionsObservable(), function (value) {\n          return {\n            id: value,\n            text: value\n          };\n        }));\n        $element.select2('val', valueObservable());\n      };\n      valueObservable.subscribe(function (newValue) {\n        if (newValue !== $element.select2('val')) {\n          refreshSelect2Data();\n        }\n      });\n      optionsObservable.subscribe(refreshSelect2Data);\n      window.setTimeout(function () {\n        refreshSelect2Data();\n      }, 10);\n    }\n    if (typeof valueAccessor().vm != 'undefined') {\n      viewModel = valueAccessor().vm;\n    }\n    if (typeof valueAccessor().update != 'undefined') {\n      if (options.type === 'user' && viewModel.selectableHadoopUsers().indexOf(options.update) === -1) {\n        viewModel.availableHadoopUsers.push({\n          username: options.update\n        });\n      }\n      if (options.type === 'group') {\n        if (options.update instanceof Array) {\n          options.update.forEach(function (opt) {\n            if (viewModel.selectableHadoopGroups().indexOf(opt) === -1) {\n              viewModel.availableHadoopGroups.push({\n                name: opt\n              });\n            }\n          });\n        } else if (viewModel.selectableHadoopGroups().indexOf(options.update) === -1) {\n          viewModel.availableHadoopGroups.push({\n            name: options.update\n          });\n        }\n      }\n      if (options.type === 'action' && viewModel.availableActions().indexOf(options.update) === -1) {\n        viewModel.availableActions.push(options.update);\n      }\n      if (options.type === 'scope' && viewModel.availablePrivileges().indexOf(options.update) === -1) {\n        viewModel.availablePrivileges.push(options.update);\n      }\n      if (options.type === 'parameter' && options.update !== '') {\n        var _found = false;\n        allBindingsAccessor().options().forEach(function (opt) {\n          var _option = opt[allBindingsAccessor().optionsValue];\n          if (ko.isObservable(_option)) {\n            _option = _option();\n          }\n          if (_option === options.update) {\n            _found = true;\n          }\n        });\n        if (!_found) {\n          allBindingsAccessor().options.push({\n            name: ko.observable(options.update),\n            value: ko.observable(options.update)\n          });\n        }\n      }\n    }\n    $element.select2(options).on('change', function (e) {\n      if (typeof e.val != 'undefined') {\n        if (typeof valueAccessor().update != 'undefined') {\n          valueAccessor().update(e.val);\n        }\n        if (typeof valueAccessor().value != 'undefined') {\n          valueAccessor().value(e.val);\n        }\n      }\n    }).on('select2-focus', function () {\n      if (typeof options.onFocus != 'undefined') {\n        options.onFocus();\n      }\n    }).on('select2-blur', function () {\n      if (typeof options.onBlur != 'undefined') {\n        options.onBlur();\n      }\n    }).on('select2-open', function () {\n      $('.select2-input').off('keyup').data('type', options.type).on('keyup', function (e) {\n        if (e.keyCode === 13) {\n          var _isArray = options.update instanceof Array;\n          var _newVal = $(this).val();\n          var _type = $(this).data('type');\n          if ($.trim(_newVal) !== '') {\n            if (_type === 'user') {\n              viewModel.availableHadoopUsers.push({\n                username: _newVal\n              });\n            }\n            if (_type === 'group') {\n              viewModel.availableHadoopGroups.push({\n                name: _newVal\n              });\n            }\n            if (_type === 'action') {\n              viewModel.availableActions.push(_newVal);\n            }\n            if (_type === 'scope') {\n              viewModel.availablePrivileges.push(_newVal);\n            }\n            if (_type === 'role' && window.Role) {\n              var _r = new Role(viewModel, {\n                name: _newVal\n              });\n              viewModel.tempRoles.push(_r);\n              viewModel.roles.push(_r);\n            }\n            if (_type === 'parameter') {\n              var _found2 = false;\n              allBindingsAccessor().options().forEach(function (opt) {\n                if (opt[allBindingsAccessor().optionsValue]() === _newVal) {\n                  _found2 = true;\n                }\n              });\n              if (!_found2) {\n                allBindingsAccessor().options.push({\n                  name: ko.observable(_newVal),\n                  value: ko.observable(_newVal)\n                });\n              }\n            }\n            if (_isArray) {\n              var _vals = $(element).select2('val');\n              _vals.push(_newVal);\n              $(element).select2('val', _vals, true);\n            } else {\n              $(element).select2('val', _newVal, true);\n            }\n            $(element).select2('close');\n          }\n        }\n      });\n    });\n    $element.data('select2').search.prop('readOnly', true).attr('onfocus', 'this.removeAttribute(\"readonly\");').wrap('<form autocomplete=\"off\">');\n  },\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    if (typeof allBindingsAccessor().visible != 'undefined') {\n      if (typeof allBindingsAccessor().visible == 'boolean' && allBindingsAccessor().visible || typeof allBindingsAccessor().visible == 'function' && allBindingsAccessor().visible()) {\n        $(element).select2('container').show();\n      } else {\n        $(element).select2('container').hide();\n      }\n    }\n    if (typeof valueAccessor().update != 'undefined') {\n      $(element).select2('val', valueAccessor().update());\n    }\n    if (typeof valueAccessor().readonly != 'undefined') {\n      $(element).select2('readonly', valueAccessor().readonly);\n      if (typeof valueAccessor().readonlySetTo != 'undefined') {\n        valueAccessor().readonlySetTo();\n      }\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport sprintf from 'sprintf-js';\nko.bindingHandlers.simplesize = function () {\n  var that;\n  return that = {\n    units: ['', 'K', 'M', 'G', 'T', 'P'],\n    init: function init(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    update: function update(element, valueAccessor) {\n      that.format(element, valueAccessor);\n    },\n    format: function format(element, valueAccessor) {\n      var value = valueAccessor();\n      var formatted = that.humanSize(ko.unwrap(value));\n      $(element).text(formatted);\n    },\n    getBaseLog: function getBaseLog(x, y) {\n      return Math.log(x) / Math.log(y);\n    },\n    humanSize: function humanSize(bytes) {\n      var isNumber = !isNaN(parseFloat(bytes)) && isFinite(bytes);\n      if (!isNumber) {\n        return '';\n      }\n\n      // Special case small numbers (including 0), because they're exact.\n      if (bytes < 1000) {\n        return sprintf.sprintf('%d', bytes);\n      }\n      var index = Math.floor(that.getBaseLog(bytes, 1000));\n      index = Math.min(that.units.length - 1, index);\n      return sprintf.sprintf('%.1f %s', bytes / Math.pow(1000, index), that.units[index]);\n    }\n  };\n}();","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.slideVisible = {\n  init: function init(element, valueAccessor) {\n    var value = valueAccessor();\n    $(element).toggle(ko.unwrap(value));\n  },\n  update: function update(element, valueAccessor, allBindings) {\n    var value = valueAccessor();\n    var onComplete = ko.unwrap(allBindings()).onComplete;\n    ko.unwrap(value) ? $(element).slideDown(100, onComplete ? onComplete() : function () {}) : $(element).slideUp(100, onComplete ? onComplete() : function () {});\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.slider = {\n  init: function init(element, valueAccessor) {\n    var _el = $(element);\n    var _options = $.extend(valueAccessor(), {});\n    _el.slider({\n      min: !isNaN(parseFloat(_options.start())) ? parseFloat(_options.start()) : 0,\n      max: !isNaN(parseFloat(_options.end())) ? parseFloat(_options.end()) : 10,\n      step: !isNaN(parseFloat(_options.gap())) ? parseFloat(_options.gap()) : 1,\n      handle: _options.handle ? _options.handle : 'triangle',\n      start: parseFloat(_options.min()),\n      end: parseFloat(_options.max()),\n      tooltip_split: true,\n      tooltip: 'always',\n      labels: _options.labels\n    });\n    _el.on('slide', function (e) {\n      _options.start(e.min);\n      _options.end(e.max);\n      _options.min(e.start);\n      _options.max(e.end);\n      if (_options.min() < _options.start()) {\n        _options.start(_options.min());\n      }\n      if (_options.max() > _options.end()) {\n        _options.end(_options.max());\n      }\n      _options.gap(e.step);\n      if (typeof _options.properties.initial_start == 'function') {\n        _options.properties.start(_options.properties.initial_start());\n        _options.properties.end(_options.properties.initial_end());\n        _options.properties.gap(_options.properties.initial_gap());\n      }\n    });\n    _el.on('slideStop', function () {\n      if (window.searchViewModel) {\n        window.searchViewModel.search();\n      }\n    });\n  },\n  update: function update(element, valueAccessor) {\n    $.extend(valueAccessor(), {});\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.solrChooser = {\n  init: function init(element, valueAccessor) {\n    var self = $(element);\n    self.val(valueAccessor()());\n    function setPathFromAutocomplete(path) {\n      self.val(path);\n      valueAccessor()(path);\n      self.blur();\n    }\n    self.on('blur', function () {\n      valueAccessor()(self.val());\n    });\n    self.jHueGenericAutocomplete({\n      showOnFocus: true,\n      home: '/',\n      serverType: 'SOLR',\n      skipTables: true,\n      // No notion of DB actually\n      onPathChange: function onPathChange(path) {\n        setPathFromAutocomplete(path);\n      },\n      onEnter: function onEnter(el) {\n        setPathFromAutocomplete(el.val());\n      },\n      onBlur: function onBlur() {\n        if (self.val().lastIndexOf('.') === self.val().length - 1) {\n          self.val(self.val().substr(0, self.val().length - 1));\n        }\n        valueAccessor()(self.val());\n      }\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.spinedit = {\n  init: function init(element, valueAccessor, allBindingsAccessor) {\n    var options = $.extend({\n      minimum: 0,\n      maximum: 10000,\n      step: 5,\n      value: ko.unwrap(valueAccessor()),\n      numberOfDecimals: 0\n    }, allBindingsAccessor().override);\n    $(element).spinedit(options);\n    $(element).on('valueChanged', function (e) {\n      valueAccessor()(e.value);\n    });\n  },\n  update: function update(element, valueAccessor) {\n    $(element).spinedit('setValue', ko.unwrap(valueAccessor()));\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { hueLocalStorage } from 'utils/storageUtils';\nko.bindingHandlers.splitDraggable = {\n  init: function init(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var leftPanelWidth = hueLocalStorage(options.appName + '_left_panel_width') != null ? Math.max(hueLocalStorage(options.appName + '_left_panel_width'), 250) : 250;\n    var rightPanelWidth = hueLocalStorage(options.appName + '_right_panel_width') != null ? Math.max(hueLocalStorage(options.appName + '_right_panel_width'), 250) : 290;\n    var containerSelector = options.containerSelector || '.panel-container';\n    var contentPanelSelector = options.contentPanelSelector || '.content-panel';\n    var onPosition = options.onPosition || function () {};\n    var hasLeftPanel = !!options.leftPanelVisible;\n    var hasRightPanel = !!options.rightPanelVisible;\n    var isRightPanel = !!options.isRightPanel;\n    var $resizer = $(element);\n    var $leftPanel = $('.left-panel');\n    var $rightPanel = $('.right-panel');\n    var $contentPanel = $(contentPanelSelector);\n    var $container = $(containerSelector);\n    var positionPanels = function positionPanels() {\n      if (isRightPanel) {\n        var oppositeWidth = hasLeftPanel && ko.unwrap(options.leftPanelVisible) ? $leftPanel.width() + $resizer.width() : 0;\n        var totalWidth = $container.width() - oppositeWidth;\n        if (ko.unwrap(options.rightPanelVisible) && ko.unwrap(options.rightPanelAvailable)) {\n          $resizer.show();\n          rightPanelWidth = Math.min(rightPanelWidth, $container.width() - 100);\n          var contentPanelWidth = totalWidth - rightPanelWidth - $resizer.width();\n          $rightPanel.css('width', rightPanelWidth + 'px');\n          $contentPanel.css('width', contentPanelWidth + 'px');\n          $resizer.css('left', $container.width() - rightPanelWidth - $resizer.width() + 'px');\n          $contentPanel.css('right', rightPanelWidth + $resizer.width() + 'px');\n        } else {\n          if (oppositeWidth === 0) {\n            $contentPanel.css('width', '100%');\n          } else {\n            $contentPanel.css('width', totalWidth);\n          }\n          $contentPanel.css('right', '0');\n          $resizer.hide();\n        }\n      } else {\n        var _oppositeWidth = hasRightPanel && ko.unwrap(options.rightPanelVisible) && ko.unwrap(options.rightPanelAvailable) ? $rightPanel.width() + $resizer.width() : 0;\n        var _totalWidth = $container.width() - _oppositeWidth;\n        if (ko.unwrap(options.leftPanelVisible)) {\n          $resizer.show();\n          leftPanelWidth = Math.min(leftPanelWidth, _totalWidth - 100);\n          var _contentPanelWidth = _totalWidth - leftPanelWidth - $resizer.width();\n          $leftPanel.css('width', leftPanelWidth + 'px');\n          $contentPanel.css('width', _contentPanelWidth + 'px');\n          $resizer.css('left', leftPanelWidth + 'px');\n          $contentPanel.css('left', leftPanelWidth + $resizer.width() + 'px');\n        } else {\n          if (_oppositeWidth === 0) {\n            $contentPanel.css('width', '100%');\n          } else {\n            $contentPanel.css('width', _totalWidth);\n          }\n          $contentPanel.css('left', '0');\n          $resizer.hide();\n        }\n      }\n      onPosition();\n    };\n    if (ko.isObservable(options.leftPanelVisible)) {\n      options.leftPanelVisible.subscribe(positionPanels);\n    }\n    if (ko.isObservable(options.rightPanelVisible)) {\n      options.rightPanelVisible.subscribe(positionPanels);\n    }\n    if (ko.isObservable(options.rightPanelAvailable)) {\n      options.rightPanelAvailable.subscribe(positionPanels);\n    }\n    var dragTimeout = -1;\n    $resizer.draggable({\n      axis: 'x',\n      containment: $container,\n      drag: function drag(event, ui) {\n        if (isRightPanel) {\n          ui.position.left = Math.min($container.width() - 200, ui.position.left);\n        } else {\n          ui.position.left = Math.min($container.width() - $container.position().left - 200, Math.max(250, ui.position.left));\n        }\n        window.clearTimeout(dragTimeout);\n        dragTimeout = window.setTimeout(function () {\n          if (isRightPanel) {\n            var oppositeWidth = hasLeftPanel && ko.unwrap(options.leftPanelVisible) ? $leftPanel.width() + $resizer.width() : 0;\n            var totalWidth = $container.width() - oppositeWidth;\n            rightPanelWidth = $container.width() - ui.position.left;\n            $rightPanel.css('width', rightPanelWidth + 'px');\n            $contentPanel.css('width', totalWidth - rightPanelWidth + 'px');\n            // $contentPanel.css(\"right\", rightPanelWidth + $resizer.width());\n          } else {\n            var _oppositeWidth2 = hasRightPanel && ko.unwrap(options.rightPanelVisible) ? $rightPanel.width() + $resizer.width() : 0;\n            var _totalWidth2 = $container.width() - _oppositeWidth2;\n            leftPanelWidth = ui.position.left;\n            $leftPanel.css('width', leftPanelWidth + 'px');\n            $contentPanel.css('width', _totalWidth2 - leftPanelWidth - $resizer.width() + 'px');\n            $contentPanel.css('left', leftPanelWidth + $resizer.width());\n          }\n          onPosition();\n        }, 10);\n      },\n      stop: function stop() {\n        if (isRightPanel) {\n          hueLocalStorage(options.appName + '_right_panel_width', rightPanelWidth);\n        } else {\n          hueLocalStorage(options.appName + '_left_panel_width', leftPanelWidth);\n        }\n        window.setTimeout(positionPanels, 100);\n        huePubSub.publish('split.panel.resized');\n      }\n    });\n    var positionTimeout = -1;\n    $(window).resize(function () {\n      window.clearTimeout(positionTimeout);\n      positionTimeout = window.setTimeout(function () {\n        positionPanels();\n      }, 1);\n    });\n    function initialPositioning() {\n      if (!$container.is(':visible')) {\n        window.setTimeout(initialPositioning, 50);\n      } else {\n        positionPanels();\n        // Even though the container is visible some slow browsers might not\n        // have rendered the panels\n        window.setTimeout(positionPanels, 100);\n      }\n    }\n    initialPositioning();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { hueLocalStorage } from 'utils/storageUtils';\nko.bindingHandlers.splitFlexDraggable = {\n  init: function init(element, valueAccessor) {\n    var options = ko.unwrap(valueAccessor());\n    var sidePanelWidth = hueLocalStorage(options.appName + '_' + options.orientation + '_panel_width') != null ? hueLocalStorage(options.appName + '_' + options.orientation + '_panel_width') : 290;\n    var $resizer = $(element);\n    var $sidePanel = $(options.sidePanelSelector);\n    var $container = $(options.containerSelector);\n    var isLeft = options.orientation === 'left';\n    var onPosition = options.onPosition || function () {};\n    var containerWidth = $container.width();\n    $sidePanel.css('flex-basis', sidePanelWidth + 'px');\n    $resizer.draggable({\n      axis: 'x',\n      containment: $container,\n      start: function start() {\n        sidePanelWidth = $sidePanel.width();\n        containerWidth = $container.width();\n      },\n      drag: function drag(event, ui) {\n        var flexBasis = Math.min(Math.max(sidePanelWidth + (isLeft ? ui.position.left : -ui.position.left), 200), containerWidth) + 'px';\n        $sidePanel.css('flex-basis', flexBasis);\n        onPosition(flexBasis);\n        ui.position.left = 0;\n      },\n      stop: function stop() {\n        sidePanelWidth = $sidePanel.width();\n        hueLocalStorage(options.appName + '_' + options.orientation + '_panel_width', sidePanelWidth);\n        window.setTimeout(positionPanels, 100);\n        huePubSub.publish('split.panel.resized');\n      }\n    });\n    var positionPanels = function positionPanels() {\n      if (options.sidePanelVisible()) {\n        $sidePanel.css('flex-basis', Math.max(sidePanelWidth, 200) + 'px');\n        onPosition();\n      }\n    };\n    options.sidePanelVisible.subscribe(positionPanels);\n    var positionTimeout = -1;\n    $(window).resize(function () {\n      window.clearTimeout(positionTimeout);\n      positionTimeout = window.setTimeout(function () {\n        positionPanels();\n      }, 1);\n    });\n    function initialPositioning() {\n      if (!$container.is(':visible') && !$sidePanel.is(':visible')) {\n        window.setTimeout(initialPositioning, 50);\n      } else {\n        positionPanels();\n        // Even though the container is visible some slow browsers might not\n        // have rendered the panels\n        window.setTimeout(positionPanels, 50);\n      }\n    }\n    initialPositioning();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { SqlAnalyzerMode } from 'catalog/analyzer/types';\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport dataCatalog from 'catalog/dataCatalog';\nimport huePubSub from 'utils/huePubSub';\n\n/**\n * Show the Context Popover for SQL or Solr entities when the bound element is clicked.\n *\n * Parameters:\n *\n * {string} sourceType - 'impala', 'hive' etc.\n * {ContextNamespace} namespace\n * {ContextCompute} compute\n * {string} path - the path, i.e. 'default.customers' or ['default', 'customers'\n * {string} [orientation] - 'top', 'right', 'bottom', 'left'. Default 'right'\n * {Object} [offset] - Optional offset from the element\n * {number} [offset.top] - Offset in pixels\n * {number} [offset.left] - Offset in pixels\n *\n * Examples:\n *\n * data-bind=\"sqlContextPopover: { sourceType: 'impala', namespace: { id: 'myNamespace' }, compute: { id: 'myCompute' }, path: 'default.customers' }\"\n * data-bind=\"sqlContextPopover: { sourceType: 'hive', namespace: { id: 'myNamespace' }, compute: { id: 'myCompute' }, path: 'default', orientation: 'bottom', offset: { top: 5 } }\"\n *\n * @type {{init: ko.bindingHandlers.sqlContextPopover.init}}\n */\nko.bindingHandlers.sqlContextPopover = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    ko.bindingHandlers.click.init(element, function () {\n      return function () {\n        var options = valueAccessor();\n\n        // TODO: Use connector for SQL context popover\n        if (!options.connector && (options.sourceType === 'hive' || options.sourceType === 'impala')) {\n          options.connector = {\n            optimizer: SqlAnalyzerMode.api,\n            id: options.sourceType,\n            dialect: options.sourceType\n          };\n        }\n        dataCatalog.getEntry(options).then(function (entry) {\n          var $source = $(element);\n          var offset = $source.offset();\n          if (options.offset) {\n            offset.top += options.offset.top || 0;\n            offset.left += options.offset.left || 0;\n          }\n          huePubSub.publish('context.popover.show', {\n            data: {\n              type: 'catalogEntry',\n              catalogEntry: entry\n            },\n            showInAssistEnabled: true,\n            orientation: options.orientation || 'right',\n            source: {\n              element: element,\n              left: offset.left,\n              top: offset.top,\n              right: offset.left + $source.width(),\n              bottom: offset.top + $source.height()\n            }\n          });\n        });\n      };\n    }, allBindings, viewModel, bindingContext);\n  }\n};","import $ from 'jquery';\nimport * as ko from 'knockout';\n\n/**\n * This binding can be used to emulate position sticky for any element.\n *\n * Example:\n *\n * <div databind=\"stickVertical: { scrollContainer: '.some-container' }\">...</div>\n *\n * @type {{init: ko.bindingHandlers.stickVertical.init}}\n */\nko.bindingHandlers.stickVertical = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor() || {};\n    var $scrollContainer = $(options.scrollContainer || window);\n    var $element = $(element);\n    var $parent = $element.parent();\n    var active = false;\n    var throttleTimeout = -1;\n    var throttledReposition = function throttledReposition() {\n      window.clearTimeout(throttleTimeout);\n      throttleTimeout = window.setTimeout(function () {\n        var diff = $scrollContainer.offset().top - $parent.offset().top;\n        if (diff > 0) {\n          $element.animate({\n            'margin-top': diff + 'px'\n          }, 40);\n          active = true;\n        } else if (active) {\n          $element.css({\n            'margin-top': ''\n          });\n          active = false;\n        }\n      }, 50);\n    };\n    $scrollContainer.on('scroll.stickVertical', throttledReposition);\n    $(window).on('resize.stickVertical', throttledReposition);\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $scrollContainer.off('scroll.stickVertical');\n      $(window).off('resize.stickVertical');\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport AssistStorageEntry from \"../components/assist/assistStorageEntry\";\nimport huePubSub from 'utils/huePubSub';\n\n/**\n * Show the Context Popover for files (HDFS, S3, ADLS, ...) when the bound element is clicked.\n *\n * Parameters:\n *\n * {string} path - the path (can include type, i.e. 'hdfs://tmp'\n * {string} [type] - Optional type, 'hdfs', 's3' etc. Default 'hdfs'.\n * {string} [orientation] - 'top', 'right', 'bottom', 'left'. Default 'right';\n * {Object} [offset] - Optional offset from the element\n * {number} [offset.top] - Offset in pixels\n * {number} [offset.left] - Offset in pixels\n *\n * Examples:\n *\n * data-bind=\"storageContextPopover: { path: '/tmp/banana.csv' }\"\n * data-bind=\"storageContextPopover: { path: 's3:/tmp/banana.csv', orientation: 'bottom', offset: { top: 5 } }\"\n *\n * @type {{init: ko.bindingHandlers.storageContextPopover.init}}\n */\nko.bindingHandlers.storageContextPopover = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    ko.bindingHandlers.click.init(element, function () {\n      return function () {\n        var options = valueAccessor();\n        AssistStorageEntry.getEntry(options.path, options.type).then(function (entry) {\n          var $source = $(element);\n          var offset = $source.offset();\n          if (options.offset) {\n            offset.top += options.offset.top || 0;\n            offset.left += options.offset.left || 0;\n          }\n          entry.open(true);\n          huePubSub.publish('context.popover.show', {\n            data: {\n              type: 'storageEntry',\n              storageEntry: entry\n            },\n            orientation: options.orientation || 'right',\n            source: {\n              element: element,\n              left: offset.left,\n              top: offset.top,\n              right: offset.left + $source.width(),\n              bottom: offset.top + $source.height()\n            }\n          });\n        });\n      };\n    }, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.stretchDown = {\n  init: function init(element) {\n    var $element = $(element);\n    var $parent = $element.parent();\n    var lastParentHeight = -1;\n    var lastTop = -1;\n    function stretch(force) {\n      if (lastParentHeight !== $parent.innerHeight() || lastTop !== $element.position().top || force) {\n        lastParentHeight = $parent.innerHeight();\n        lastTop = $element.position().top;\n        $element.height(lastParentHeight - lastTop - ($element.outerHeight(true) - $element.innerHeight()));\n        huePubSub.publish('assist.stretchDown', $element);\n      }\n    }\n    window.setInterval(stretch, 200);\n    huePubSub.subscribe('assist.forceStretchDown', function () {\n      stretch(true);\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport I18n from \"../../utils/i18n\";\nko.bindingHandlers.tagEditor = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var validRegExp = options.validRegExp ? new RegExp(options.validRegExp) : undefined;\n    var showValidationError = function showValidationError() {\n      var $errorWrapper = $element.siblings('.selectize-error');\n      if (options.invalidMessage && $errorWrapper.length > 0) {\n        $errorWrapper.find('.message').text(options.invalidMessage);\n        $errorWrapper.show();\n        window.setTimeout(function () {\n          $errorWrapper.fadeOut(400, function () {\n            $errorWrapper.hide();\n          });\n        }, 5000);\n      }\n    };\n    options = $.extend({\n      plugins: ['remove_button'],\n      options: $.map(options.setTags(), function (value) {\n        return {\n          value: value,\n          text: value\n        };\n      }),\n      delimiter: ',',\n      items: options.setTags(),\n      closeAfterSelect: true,\n      persist: true,\n      preload: true,\n      create: function create(input) {\n        if (typeof validRegExp !== 'undefined' && !validRegExp.test(input)) {\n          showValidationError();\n          return false;\n        }\n        return {\n          value: input.replace(/\\s/g, '-'),\n          text: input.replace(/\\s/g, '-')\n        };\n      }\n    }, options);\n    var $readOnlyContainer = $('<div>').hide().addClass('selectize-control selectize-read-only multi').attr('style', $element.attr('style')).insertAfter($(element));\n    if (!options.readOnly) {\n      $readOnlyContainer.on('mouseover', function () {\n        $readOnlyContainer.find('.selectize-actions').addClass('selectize-actions-visible');\n      });\n      $readOnlyContainer.on('mouseout', function () {\n        $readOnlyContainer.find('.selectize-actions').removeClass('selectize-actions-visible');\n      });\n    }\n    $element.hide();\n    var currentSelectize;\n    var optionsBeforeEdit = [];\n    var saveOnClickOutside = function saveOnClickOutside(event) {\n      if ($.contains(document, event.target) && currentSelectize && !$.contains(currentSelectize.$wrapper[0], event.target)) {\n        if (currentSelectize.getValue() !== optionsBeforeEdit.join(',')) {\n          options.onSave(currentSelectize.getValue());\n        }\n        $(document).off('click', saveOnClickOutside);\n        $(document).off('keyup', hideOnEscape);\n        showReadOnly();\n      }\n    };\n    var hideOnEscape = function hideOnEscape(event) {\n      if (event.which === 27) {\n        showReadOnly();\n      }\n    };\n    var sizeCheckInterval = -1;\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      window.clearInterval(sizeCheckInterval);\n    });\n    var showEdit = function showEdit() {\n      window.clearInterval(sizeCheckInterval);\n      optionsBeforeEdit = options.setTags().concat();\n      options.options = $.map(options.setTags(), function (value) {\n        return {\n          value: value,\n          text: value\n        };\n      });\n      currentSelectize = $element.selectize(options)[0].selectize;\n      $readOnlyContainer.hide();\n      $element.next().find('.selectize-input').css('padding-right', '38px');\n      $element.next().find('input').focus();\n      var $editActions = $('<div>').addClass('selectize-actions').appendTo($element.next());\n      $('<i>').addClass('fa fa-check').click(function () {\n        if (currentSelectize.getValue() !== optionsBeforeEdit.join(',')) {\n          options.onSave(currentSelectize.getValue());\n        }\n        showReadOnly();\n      }).appendTo($editActions);\n      $('<i>').addClass('fa fa-close').click(function () {\n        showReadOnly();\n      }).appendTo($editActions);\n      window.setTimeout(function () {\n        $(document).on('click', saveOnClickOutside);\n        $(document).on('keyup', hideOnEscape);\n      }, 0);\n    };\n    var lastKnownOffsetWidth = -1;\n    var lastKnownOffsetHeight = -1;\n    var addReadOnlyTagsTillOverflow = function addReadOnlyTagsTillOverflow($readOnlyInner) {\n      $readOnlyInner.empty();\n      var tagElements = [];\n      options.setTags().forEach(function (tag) {\n        tagElements.push($('<div>').text(tag).appendTo($readOnlyInner));\n      });\n      if (!options.readOnly && !options.hasErrors()) {\n        $('<i>').addClass('fa fa-pencil selectize-edit pointer').attr('title', I18n('Edit tags')).appendTo($readOnlyInner);\n        $readOnlyInner.click(function () {\n          showEdit();\n        });\n      }\n      if (!options.overflowEllipsis) {\n        return;\n      }\n      if ($readOnlyInner[0].offsetHeight < $readOnlyInner[0].scrollHeight || $readOnlyInner[0].offsetWidth < $readOnlyInner[0].scrollWidth && tagElements.length) {\n        tagElements[tagElements.length - 1].after($('<div>').addClass('hue-tag-overflow').text('...'));\n      }\n      while (tagElements.length && ($readOnlyInner[0].offsetHeight < $readOnlyInner[0].scrollHeight || $readOnlyInner[0].offsetWidth < $readOnlyInner[0].scrollWidth)) {\n        tagElements.pop().remove();\n      }\n      lastKnownOffsetWidth = $readOnlyInner[0].offsetWidth;\n      lastKnownOffsetHeight = $readOnlyInner[0].offsetHeight;\n    };\n    var showReadOnly = function showReadOnly() {\n      window.clearInterval(sizeCheckInterval);\n      $(document).off('click', saveOnClickOutside);\n      $(document).off('keyup', hideOnEscape);\n      if (currentSelectize) {\n        currentSelectize.destroy();\n        $element.hide();\n        $element.val(options.setTags().join(','));\n      }\n      $readOnlyContainer.empty();\n      var $readOnlyInner = $('<div>').addClass('selectize-input items not-full has-options has-items').appendTo($readOnlyContainer);\n      if (options.setTags().length > 0) {\n        addReadOnlyTagsTillOverflow($readOnlyInner);\n        if (options.overflowEllipsis) {\n          sizeCheckInterval = window.setInterval(function () {\n            if ($readOnlyInner[0].offsetWidth !== lastKnownOffsetWidth || $readOnlyInner[0].offsetHeight !== lastKnownOffsetHeight) {\n              addReadOnlyTagsTillOverflow($readOnlyInner);\n            }\n          }, 500);\n        }\n      } else {\n        if (options.hasErrors()) {\n          $('<span>').addClass('selectize-no-tags').text(options.errorMessage).appendTo($readOnlyInner);\n        } else {\n          $('<span>').addClass('selectize-no-tags').text(options.emptyPlaceholder).appendTo($readOnlyInner);\n        }\n        if (!options.readOnly && !options.hasErrors()) {\n          $('<i>').addClass('fa fa-pencil selectize-edit pointer').attr('title', I18n('Edit tags')).appendTo($readOnlyInner);\n          $readOnlyInner.click(function () {\n            showEdit();\n          });\n        }\n      }\n      $readOnlyContainer.attr('title', options.setTags().join(', '));\n      $readOnlyContainer.show();\n    };\n    showReadOnly();\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.tagsNotAllowed = {\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    var $element = $(element);\n    var params = allBindingsAccessor();\n    var valueObservable = ko.isObservable(params) ? params : params.textInput ? params.textInput : params.value;\n    var value = valueObservable();\n    var escaped = value.replace(/<|>/g, '');\n    if (escaped !== value) {\n      $element.val(escaped);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.templateContextMenu = {\n  init: function init(element, valueAccessor, allBindings, viewModel) {\n    var options = valueAccessor();\n    element.addEventListener('contextmenu', function (event) {\n      if (document.selection && document.selection.empty) {\n        document.selection.empty();\n      } else if (window.getSelection) {\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n      }\n      if (typeof options.beforeOpen === 'function') {\n        options.beforeOpen.bind(viewModel)();\n      }\n      var $menu = $('#hueContextMenu_' + options.template);\n      if ($menu.length === 0) {\n        $menu = $('<ul id=\"hueContextMenu_' + options.template + '\" class=\"hue-context-menu\" data-bind=\"template: { name: \\'' + options.template + '\\', data: viewModel, afterRender: afterRender }\"></ul>').appendTo('body');\n      } else {\n        ko.cleanNode($menu[0]);\n      }\n      $menu.data('active', true);\n      $menu.css('top', 0);\n      $menu.css('left', 0);\n      $menu.css('opacity', 0);\n      $menu.show();\n      var hideMenu = function hideMenu() {\n        if (!$menu.data('active')) {\n          $menu.hide();\n          ko.cleanNode($menu[0]);\n        }\n      };\n      ko.applyBindings({\n        afterRender: function afterRender() {\n          var menuWidth = $menu.outerWidth(true);\n          var menuHeight = $menu.outerHeight(true);\n          $menu.css('left', event.clientX + menuWidth > $(window).width() ? $(window).width() - menuWidth : event.clientX);\n          $menu.css('top', event.clientY + menuHeight > $(window).height() ? $(window).height() - menuHeight : event.clientY);\n          $menu.css('opacity', 1);\n          if (options.scrollContainer) {\n            $(options.scrollContainer).one('scroll', hideMenu);\n          }\n          window.setTimeout(function () {\n            $menu.data('active', false);\n            $(document).one('click', hideMenu);\n          }, 100);\n        },\n        viewModel: options.viewModel || viewModel\n      }, $menu[0]);\n      ko.contextFor($menu[0]).$contextSourceElement = element;\n      event.preventDefault();\n      event.stopPropagation();\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nko.bindingHandlers.templatePopover = {\n  init: function init(element, valueAccessor, allBindingsAccessor, viewModel) {\n    var options = ko.unwrap(valueAccessor());\n    var clickTrigger = options.trigger === 'click';\n    var $container = $('#popover-container');\n    if (!$container.length) {\n      $container = $('<div>').attr('id', 'popover-container').appendTo('body');\n      $('<div>').addClass('temp-content').hide().appendTo($container);\n      $('<div>').addClass('temp-title').hide().appendTo($container);\n    }\n    var $content = $container.find('.temp-content');\n    var $title = $container.find('.temp-title');\n    $.extend(options, {\n      html: true,\n      trigger: 'manual',\n      container: '#popover-container'\n    });\n    var $element = $(element);\n    var visible = options.visible || ko.observable(false);\n    var trackElementInterval = -1;\n    var hidePopover = function hidePopover() {\n      if (visible()) {\n        window.clearInterval(trackElementInterval);\n        $element.popover('hide');\n        visible(false);\n        $(document).off('click', hideOnClickOutside);\n      }\n    };\n    var closeSub = huePubSub.subscribe('close.popover', hidePopover);\n    var hideOnClickOutside = function hideOnClickOutside(event) {\n      if (visible() && $element.data('popover') && !$.contains($element.data('popover').$tip[0], event.target)) {\n        hidePopover();\n      }\n    };\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      if (visible && $element.data('popover')) {\n        hidePopover();\n      }\n      closeSub.remove();\n    });\n    var _afterRender = function afterRender() {\n      options.content = $content.html();\n      options.title = $title.html();\n      var triggerTitle;\n      if ($element.attr('title')) {\n        triggerTitle = $element.attr('title');\n        $element.attr('title', null);\n      }\n      $element.popover(options);\n      $element.popover('show');\n      if (triggerTitle) {\n        $element.attr('title', triggerTitle);\n      }\n      var $tip = $element.data('popover').$tip;\n      ko.cleanNode($tip.get(0));\n      ko.applyBindings(viewModel, $tip.get(0));\n      $tip.find('.close-popover, .close-template-popover').click(function (event) {\n        hidePopover();\n        event.stopPropagation();\n      });\n      if (options.minWidth) {\n        var heightBefore = $tip.outerHeight(true);\n        var widthBefore = $tip.outerWidth(true);\n        $tip.css('min-width', options.minWidth);\n        // The min-width might affect the height/width in which case we reposition the popover depending on placement\n        var heightDiff = (heightBefore - $tip.outerHeight(true)) / 2;\n        var widthDiff = (widthBefore - $tip.outerWidth(true)) / 2;\n        if ((!options.placement || options.placement === 'left' || options.placement === 'right') && heightDiff !== 0) {\n          $tip.css('top', $tip.position().top + heightDiff + 'px');\n        } else if (options.placement && (options.placement === 'bottom' || options.placement === 'top') && widthDiff !== 0) {\n          $tip.css('left', $tip.position().left + widthDiff + 'px');\n        }\n      }\n      var lastWidth = $element.outerWidth(true);\n      var lastOffset = $element.offset();\n      var lastHeight = $element.outerHeight(true);\n      trackElementInterval = window.setInterval(function () {\n        var elementWidth = $element.outerWidth(true);\n        var elementHeight = $element.outerHeight(true);\n        var elementOffset = $element.offset();\n        if (lastHeight !== elementHeight || lastWidth !== $element.outerWidth(true) || lastOffset.top !== elementOffset.top || lastOffset.left !== elementOffset.left) {\n          $tip.css({\n            left: elementOffset.left + elementWidth / 2 - $tip.outerWidth(true) / 2,\n            top: elementOffset.top + elementHeight + 10\n          });\n          lastWidth = elementWidth;\n          lastOffset = elementOffset;\n          lastHeight = elementHeight;\n        }\n      }, 50);\n      $content.empty();\n      $title.empty();\n      $(document).on('click', hideOnClickOutside);\n      visible(true);\n    };\n    var showPopover = function showPopover(preventClose) {\n      if (!preventClose) {\n        huePubSub.publish('close.popover');\n      }\n      ko.renderTemplate(options.contentTemplate, viewModel, {\n        afterRender: function afterRender() {\n          if (options.titleTemplate) {\n            ko.renderTemplate(options.titleTemplate, viewModel, {\n              afterRender: function afterRender() {\n                _afterRender();\n              }\n            }, $title.get(0), 'replaceChildren');\n          } else {\n            _afterRender();\n          }\n        }\n      }, $content.get(0), 'replaceChildren');\n    };\n    if (visible()) {\n      window.setTimeout(function () {\n        showPopover(true);\n      }, 0);\n    }\n    if (clickTrigger) {\n      $element.click(function (e) {\n        if (visible()) {\n          hidePopover();\n        } else {\n          showPopover();\n        }\n        e.stopPropagation();\n      });\n    } else {\n      $element.mouseenter(showPopover);\n      $element.mouseleave(hidePopover);\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.textSqueezer = {\n  init: function init(element, valueAccessor) {\n    var value = valueAccessor();\n    var $element = $(element);\n    $element.text(ko.unwrap(value));\n    $element.textSqueezer({\n      decimalPrecision: 2\n    });\n  },\n  update: function update(element, valueAccessor) {\n    var value = valueAccessor();\n    var $element = $(element);\n    $element.text(ko.unwrap(value));\n    $element.trigger('redraw');\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\n\n/**\n * This binding can be used to toggle a boolean value on click\n *\n * Example:\n *\n * <div databind=\"toggle: value\">...</div>\n *\n * @type {{init: ko.bindingHandlers.toggle.init}}\n */\nko.bindingHandlers.toggle = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var value = valueAccessor();\n    ko.bindingHandlers.click.init(element, function () {\n      return function () {\n        value(!value());\n      };\n    }, allBindings, viewModel, bindingContext);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport isOverflowing from 'utils/html/isOverflowing';\nko.bindingHandlers.toggleOverflow = {\n  render: function render($element, options) {\n    if (isOverflowing($element.find('.toggle-overflow'))) {\n      $('<div>').addClass('toggle-overflow-toggle').html('<i class=\"fa fa-caret-down muted\"></i>').appendTo($element);\n      $element.on('click', function () {\n        if ($element.find('.toggle-overflow-toggle i').hasClass('fa-caret-down')) {\n          $element.find('.toggle-overflow').css('max-height', '');\n          $element.css('cursor', 'n-resize');\n          $element.find('.toggle-overflow-toggle').removeClass('toggle-hidden').css('cursor', 'n-resize');\n          $element.find('.toggle-overflow-toggle i').removeClass('fa-caret-down').addClass('fa-caret-up');\n        } else {\n          if (options.height) {\n            $element.find('.toggle-overflow').height(options.height);\n          }\n          $element.css('cursor', 's-resize');\n          $element.find('.toggle-overflow-toggle').addClass('toggle-hidden').css('cursor', 's-resize');\n          $element.find('.toggle-overflow-toggle i').removeClass('fa-caret-up').addClass('fa-caret-down');\n        }\n      });\n    }\n  },\n  init: function init(element, valueAccessor) {\n    var $element = $(element);\n    var options = valueAccessor() || {};\n    $element.wrapInner('<div class=\"toggle-overflow\"></div>');\n    if (options.height) {\n      $element.find('.toggle-overflow').css('max-height', options.height + 'px');\n    }\n  },\n  update: function update(element, valueAccessor) {\n    var $element = $(element);\n    var options = valueAccessor() || {};\n    window.setTimeout(function () {\n      ko.bindingHandlers.toggleOverflow.render($element, options);\n    }, 100);\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { registerBinding } from \"./bindingUtils\";\nimport escapeOutput from 'utils/html/escapeOutput';\nexport var NAME = 'tooltip';\nregisterBinding(NAME, {\n  after: ['attr'],\n  update: function update(element, valueAccessor) {\n    var local = ko.utils.unwrapObservable(valueAccessor());\n    var options = {\n      container: 'body'\n    };\n    $(element).tooltip('destroy');\n    ko.utils.extend(options, local);\n    if (options.title) {\n      var title = ko.unwrap(options.title); // Not always an observable\n      if (typeof title === 'string' && !options.html) {\n        options.title = escapeOutput(title);\n      }\n    }\n    $(element).tooltip(options);\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $(element).tooltip('destroy');\n    });\n  }\n});","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.bindingHandlers.truncatedText = {\n  update: function update(element, valueAccessor, allBindingsAccessor) {\n    var text = ko.isObservable(valueAccessor()) ? ko.utils.unwrapObservable(valueAccessor()) : valueAccessor();\n    var length = ko.utils.unwrapObservable(allBindingsAccessor().maxLength) || 20;\n    var truncated = '';\n    if (typeof text !== 'undefined' && text !== null) {\n      truncated = text.length > length ? text.substring(0, length) + '...' : text;\n    }\n    ko.bindingHandlers.text.update(element, function () {\n      return truncated;\n    });\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.typeahead = {\n  init: function init(element, valueAccessor) {\n    var elem = $(element);\n    var options = valueAccessor();\n    var source = options.nonBindableSource ? options.nonBindableSource : function () {\n      var _source = ko.utils.unwrapObservable(valueAccessor.source);\n      if (options.extraKeywords) {\n        _source = _source.concat(options.extraKeywords.split(' '));\n      }\n      if (options.sourceSuffix && _source) {\n        var _tmp = [];\n        _source.forEach(function (item) {\n          _tmp.push(item + options.sourceSuffix);\n        });\n        _source = _tmp;\n      }\n      return _source;\n    };\n    if (options.nonBindableSource && options.displayProperty) {\n      source = ko.utils.arrayMap(options.nonBindableSource(), function (item) {\n        return item[options.displayProperty]();\n      });\n    }\n    var _options = {\n      source: source,\n      onselect: function onselect(val) {\n        if (typeof options.target == 'function') {\n          options.target(val);\n        } else {\n          options.target = val;\n        }\n      }\n    };\n    function extractor(query, extractorSeparator) {\n      var result = /([^ ]+)$/.exec(query);\n      if (extractorSeparator) {\n        result = new RegExp('([^\\\\' + extractorSeparator + ']+)$').exec(query);\n      }\n      if (result && result[1]) {\n        return result[1].trim();\n      }\n      return '';\n    }\n    if (options.multipleValues) {\n      var _extractorFound = null;\n      var updateExtractors = function updateExtractors() {\n        var _val = elem.val();\n        _extractorFound = null;\n        var _extractors = typeof options.multipleValuesExtractors == 'undefined' || options.multipleValuesExtractors == null ? [' '] : options.multipleValuesExtractors;\n        var _extractorFoundLastIndex = -1;\n        _extractors.forEach(function (extractor) {\n          if (_val.indexOf(extractor) > -1) {\n            if (_val.indexOf(extractor) >= _extractorFoundLastIndex) {\n              _extractorFound = extractor;\n              _extractorFoundLastIndex = _val.indexOf(extractor);\n            }\n          }\n        });\n      };\n      _options.updater = function (item) {\n        var _val = this.$element.val();\n        var _separator = typeof options.multipleValuesSeparator == 'undefined' || options.multipleValuesSeparator == null ? ':' : options.multipleValuesSeparator;\n        if (options.extraKeywords && options.extraKeywords.split(' ').indexOf(item) > -1) {\n          _separator = '';\n        }\n        var isSpecialResult = false;\n        if (item.indexOf('<i ') > -1) {\n          _separator = '';\n          isSpecialResult = true;\n        }\n        updateExtractors();\n        if (_extractorFound != null) {\n          return (isSpecialResult ? '\"' : '') + _val.substring(0, _val.lastIndexOf(_extractorFound)) + _extractorFound + $.trim(item.replace(/<[^>]*>/gi, '')) + (isSpecialResult ? '\"' : '') + _separator;\n        } else {\n          return (isSpecialResult ? '\"' : '') + $.trim(item.replace(/<[^>]*>/gi, '')) + (isSpecialResult ? '\"' : '') + _separator;\n        }\n      };\n      _options.matcher = function (item) {\n        updateExtractors();\n        var _tquery = extractor(this.query, _extractorFound);\n        if (!_tquery) {\n          return false;\n        }\n        return ~item.toLowerCase().indexOf(_tquery.toLowerCase());\n      };\n      _options.highlighter = function (item) {\n        updateExtractors();\n        var _query = extractor(this.query, _extractorFound).replace(/[\\-\\[\\]{}()*+?.:\\\\\\^$|#\\s]/g, '\\\\$&');\n        var _result = $.trim(item.replace(/<[^>]*>/gi, '')).replace(new RegExp('(' + _query + ')', 'ig'), function ($1, match) {\n          return '<strong>' + match + '</strong>';\n        });\n        if (item.indexOf('<i ') > -1) {\n          _result += ' ' + item.substr(item.indexOf('<i '));\n        }\n        return _result;\n      };\n    }\n    if (options.completeSolrRanges) {\n      elem.on('keyup', function (e) {\n        if (e.keyCode !== 8 && e.which !== 8 && elem.val() && (elem.val().slice(-1) === '[' || elem.val().slice(-1) === '{')) {\n          var _index = elem.val().length;\n          elem.val(elem.val() + ' TO ' + (elem.val().slice(-1) === '[' ? ']' : '}'));\n          if (element.createTextRange) {\n            var range = element.createTextRange();\n            range.move('character', _index);\n            range.select();\n          } else if (element.selectionStart != null) {\n            element.focus();\n            element.setSelectionRange(_index, _index);\n          }\n        }\n      });\n    }\n    if (options.triggerOnFocus) {\n      _options.minLength = 0;\n    }\n    element.typeahead = elem.typeahead(_options);\n    if (options.triggerOnFocus) {\n      elem.on('focus', function () {\n        elem.trigger('keyup');\n      });\n    }\n    elem.blur(function () {\n      if (typeof options.target == 'function') {\n        options.target(elem.val());\n      } else {\n        options.target = elem.val();\n      }\n    });\n  },\n  update: function update(element, valueAccessor) {\n    var elem = $(element);\n    var options = valueAccessor();\n    if (typeof options.completeSolrRanges === 'undefined') {\n      if (typeof options.target == 'function') {\n        elem.val(options.target());\n      } else {\n        elem.val(options.target);\n      }\n    }\n    if (options.forceUpdateSource) {\n      element.typeahead.data('typeahead').source = function () {\n        var _source = ko.utils.unwrapObservable(options.source);\n        if (options.extraKeywords) {\n          _source = _source.concat(options.extraKeywords.split(' '));\n        }\n        if (options.sourceSuffix && _source) {\n          var _tmp = [];\n          _source.forEach(function (item) {\n            _tmp.push(item + options.sourceSuffix);\n          });\n          _source = _tmp;\n        }\n        return _source;\n      };\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.verticalSlide = {\n  init: function init(element, valueAccessor) {\n    if (ko.utils.unwrapObservable(valueAccessor())) {\n      $(element).show();\n    } else {\n      $(element).hide();\n    }\n  },\n  update: function update(element, valueAccessor) {\n    if (ko.utils.unwrapObservable(valueAccessor())) {\n      $(element).slideDown('fast');\n    } else {\n      $(element).slideUp('fast');\n    }\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nko.bindingHandlers.visibleOnHover = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var selector = options.selector;\n    var showTimeout = -1;\n    var hideTimeout = -1;\n    ko.utils.domData.set(element, 'visibleOnHover.override', ko.utils.unwrapObservable(options.override) || false);\n    var inside = false;\n    var show = function show() {\n      if (options.childrenOnly) {\n        $element.children(selector).fadeTo('fast', 1);\n      } else {\n        $element.find(selector).fadeTo('fast', 1);\n      }\n      window.clearTimeout(hideTimeout);\n    };\n    var hide = function hide() {\n      if (!inside) {\n        window.clearTimeout(showTimeout);\n        hideTimeout = window.setTimeout(function () {\n          if (options.childrenOnly) {\n            $element.children(selector).fadeTo('fast', 0);\n          } else {\n            $element.find(selector).fadeTo('fast', 0);\n          }\n        }, 10);\n      }\n    };\n    ko.utils.domData.set(element, 'visibleOnHover.show', show);\n    ko.utils.domData.set(element, 'visibleOnHover.hide', hide);\n    if (ko.utils.domData.get(element, 'visibleOnHover.override')) {\n      window.setTimeout(show, 1);\n    }\n    $element.mouseenter(function () {\n      showTimeout = window.setTimeout(function () {\n        inside = true;\n        show();\n      }, 300);\n    });\n    $element.mouseleave(function () {\n      window.clearTimeout(showTimeout);\n      inside = false;\n      if (!ko.utils.domData.get(element, 'visibleOnHover.override')) {\n        hide();\n      }\n    });\n  },\n  update: function update(element, valueAccessor) {\n    if (ko.utils.unwrapObservable(valueAccessor().override)) {\n      ko.utils.domData.set(element, 'visibleOnHover.override', true);\n      ko.utils.domData.get(element, 'visibleOnHover.show')();\n    } else {\n      ko.utils.domData.set(element, 'visibleOnHover.override', false);\n      ko.utils.domData.get(element, 'visibleOnHover.hide')();\n    }\n  }\n};","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nfunction setProps(el, props) {\n  for (var key in props) {\n    el.setAttribute(key, props[key]);\n  }\n  Object.assign(el, props);\n}\nko.bindingHandlers.vueKoProps = {\n  init: function init(element, valueAccessor) {\n    var data = valueAccessor();\n    setProps(element, data);\n  }\n};\nko.bindingHandlers.vueProps = {\n  init: function init(element, valueAccessor) {\n    var data = valueAccessor();\n    setProps(element, ko.toJS(data));\n  }\n};\nko.bindingHandlers.vueEvents = {\n  init: function init(element, valueAccessor) {\n    var data = valueAccessor();\n    for (var _i = 0, _Object$entries = Object.entries(data); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        eventName = _Object$entries$_i[0],\n        handler = _Object$entries$_i[1];\n      element.addEventListener(eventName, handler);\n    }\n  }\n};"],"names":[],"sourceRoot":""}
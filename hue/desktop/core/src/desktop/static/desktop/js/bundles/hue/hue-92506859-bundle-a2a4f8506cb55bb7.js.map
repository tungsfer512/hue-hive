{"version":3,"file":"hue-92506859-bundle-a2a4f8506cb55bb7.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AChvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACrSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC5NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC9XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACvWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACpfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACnNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACtNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AChOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC7VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACnwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./desktop/core/src/desktop/js/ko/components/DisposableComponent.js","webpack:///./desktop/core/src/desktop/js/ko/components/appSwitcher/environment.js","webpack:///./desktop/core/src/desktop/js/ko/components/appSwitcher/ko.appSwitcher.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistDbNamespace.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistGitEntry.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistHBaseEntry.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistInnerPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistStorageEntry.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/assistViewModel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/events.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistDashboardPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistDbPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistDocumentsPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistEditorContextPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistFunctionsPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistGitPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistHBasePanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistLangRefPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistSchedulePanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.assistStoragePanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/assist/ko.rightAssistPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/componentUtils.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/asteriskContextTabs.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/collectionContextTabs.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/dataCatalogContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/documentContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/functionContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/ko.contextPopover.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/ko.documentContextFooter.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/ko.popoverOnHover.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/ko.quickQueryContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/langRefContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/partitionContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/resizeHelper.js","webpack:///./desktop/core/src/desktop/js/ko/components/contextPopover/storageContext.js","webpack:///./desktop/core/src/desktop/js/ko/components/doc/ko.linkSharing.js","webpack:///./desktop/core/src/desktop/js/ko/components/doc/ko.shareDocModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.catalogEntriesList.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.contextSelector.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.createDirectoryModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.deleteDocModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.dropDown.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.editorDroppableMenu.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.executionAnalysis.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.favoriteApp.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.fieldSamples.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.globalSearch.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.historyPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.importDocumentsModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.inlineAutocomplete.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.jobBrowserLinks.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.navProperties.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.navTags.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.pollingCatalogEntriesList.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.quickQueryAction.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.sentryPrivileges.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.sessionAuthModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.sessionPanel.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.shareGistModal.js","webpack:///./desktop/core/src/desktop/js/ko/components/ko.sqlColumnsTable.js","webpack:///./desktop/core/src/desktop/js/ko/components/simpleAceEditor/ko.simpleAceEditor.js","webpack:///./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrFormulaAutocompleter.js","webpack:///./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrQueryAutocompleter.js","webpack:///./desktop/core/src/desktop/js/ko/extenders/ko.maxLength.js","webpack:///./desktop/core/src/desktop/js/ko/extenders/ko.numeric.js","webpack:///./desktop/core/src/desktop/js/ko/extenders/ko.toJson.js"],"sourcesContent":["function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport huePubSub from 'utils/huePubSub';\nvar DisposableComponent = /*#__PURE__*/function () {\n  function DisposableComponent() {\n    _classCallCheck(this, DisposableComponent);\n    this.disposals = [];\n  }\n  return _createClass(DisposableComponent, [{\n    key: \"subscribe\",\n    value: function subscribe(subscribable, callback) {\n      if (typeof subscribable === 'string') {\n        var pubSub = huePubSub.subscribe(subscribable, callback);\n        this.disposals.push(function () {\n          pubSub.remove();\n        });\n        return pubSub;\n      }\n      if (subscribable.subscribe) {\n        var sub = subscribable.subscribe(callback);\n        this.disposals.push(function () {\n          sub.dispose();\n        });\n        return sub;\n      }\n    }\n  }, {\n    key: \"addDisposalCallback\",\n    value: function addDisposalCallback(callback) {\n      this.disposals.push(callback);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      while (this.disposals.length) {\n        try {\n          this.disposals.pop()();\n        } catch (err) {\n          console.warn(err);\n        }\n      }\n    }\n  }]);\n}();\nexport { DisposableComponent as default };","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nvar Environment = {\n  MOCK: 'MOCK',\n  LOCAL: 'LOCAL',\n  DEV: 'DEV',\n  INT: 'INT',\n  STAGE: 'STAGE',\n  PROD: 'PROD'\n};\n\n/**\n * Returns environment type based on current url.\n * E.g., PROD is returned for localhost.altus.cloudera.com\n * Default to PROD\n * @param environmentBaseUrl\n */\nvar getEnvironment = function getEnvironment(environmentBaseUrl) {\n  var hostName = environmentBaseUrl || window.location.hostname;\n  if (hostName.indexOf('localhost.') > -1) {\n    return Environment.LOCAL;\n  }\n  if (hostName.indexOf('-dev.cloudera.com') > -1) {\n    return Environment.DEV;\n  }\n  if (hostName.indexOf('-int.cloudera.com') > -1) {\n    return Environment.INT;\n  }\n  if (hostName.indexOf('-stage.cloudera.com') > -1) {\n    return Environment.STAGE;\n  }\n  return Environment.PROD;\n};\nexport var getAltusBaseUrl = function getAltusBaseUrl() {\n  var environment = getEnvironment(window.APP_SWITCHER_ALTUS_BASE_URL);\n  switch (environment) {\n    case Environment.MOCK:\n      return '';\n    case Environment.LOCAL:\n      return '';\n    case Environment.DEV:\n      return 'https://console.thunderhead-dev.cloudera.com';\n    case Environment.INT:\n      return 'https://console.thunderhead-int.cloudera.com';\n    case Environment.STAGE:\n      return 'https://console.thunderhead-stage.cloudera.com';\n    case Environment.PROD:\n      return window.APP_SWITCHER_ALTUS_BASE_URL || 'https://console.altus.cloudera.com';\n  }\n};\nexport var getMowBaseUrl = function getMowBaseUrl() {\n  var environment = getEnvironment(window.APP_SWITCHER_MOW_BASE_URL);\n  switch (environment) {\n    case Environment.MOCK:\n    case Environment.LOCAL:\n    case Environment.DEV:\n      return 'https://cloudera.dps.mow-dev.cloudera.com';\n    case Environment.INT:\n      return 'https://cloudera.cdp.mow-int.cloudera.com';\n    case Environment.STAGE:\n      return 'https://cloudera.cdp.mow-stage.cloudera.com';\n    case Environment.PROD:\n      return window.APP_SWITCHER_MOW_BASE_URL || 'https://cloudera.us-west-1.cdp.cloudera.com';\n  }\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apps from 'ko/components/appSwitcher/apps.v2';\nimport componentUtils from \"../componentUtils\";\nimport { getAltusBaseUrl, getMowBaseUrl } from \"./environment\";\nvar TEMPLATE = \"\\n  <div class=\\\"hue-sidebar-header\\\">\\n    <a class=\\\"hue-app-switcher-trigger\\\" data-bind=\\\"toggle: open\\\"><svg class=\\\"show\\\"><use href=\\\"#hi-app-picker\\\"></use></svg></a>\\n    <div class=\\\"hue-app-switcher-logo\\\"><svg><use href=\\\"#hi-sidebar-logo\\\"></use></svg></div>\\n  </div>\\n\\n  <div class=\\\"hue-app-switcher\\\" data-bind=\\\"css: { 'open': open }\\\">\\n    <div class=\\\"app-switcher-header\\\">\\n      <svg class=\\\"show\\\"><use href=\\\"#hi-cdp-logo\\\"></use></svg>\\n      <a href=\\\"javascript: void(0);\\\" class=\\\"close\\\" data-bind=\\\"toggle: open\\\">&times;</a></form>\\n    </div>\\n\\n    <ul data-bind=\\\"foreach: links\\\">\\n      <li><a data-bind=\\\"attr: { href: url }\\\"><i data-bind=\\\"html: svg\\\"></i><span data-bind=\\\"text: label\\\"></span></a></li>\\n    </ul>\\n  </div>\\n\";\nvar getUrl = function getUrl(baseUrl, path) {\n  if (baseUrl === 'mow') {\n    return getMowBaseUrl() + path;\n  } else if (baseUrl === 'altus') {\n    return getAltusBaseUrl() + path;\n  }\n  console.warn('Could not find baseUrl for \"' + baseUrl + '\", using relative link instead.');\n  return path;\n};\nvar AppSwitcher = function AppSwitcher() {\n  var _this = this;\n  this.links = apps.map(function (app) {\n    return {\n      label: app.displayName,\n      svg: app.logo,\n      url: getUrl(app.baseUrl, app.path)\n    };\n  });\n  this.open = ko.observable(false);\n  var closeOnClickOutside = function closeOnClickOutside(event) {\n    if (!_this.open()) {\n      return;\n    }\n    if ($.contains(document, event.target) && !$.contains($('.hue-app-switcher')[0], event.target)) {\n      _this.open(false);\n    }\n  };\n  this.open.subscribe(function (newVal) {\n    if (newVal) {\n      window.setTimeout(function () {\n        $(document).on('click', closeOnClickOutside);\n      }, 0);\n    } else {\n      $(document).off('click', closeOnClickOutside);\n    }\n  });\n};\ncomponentUtils.registerComponent('hue-app-switcher', AppSwitcher, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport sqlAnalyzerRepository from 'catalog/analyzer/sqlAnalyzerRepository';\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport sqlUtils from 'sql/sqlUtils';\nimport { findEditorConnector } from 'config/hueConfig';\nvar findNameInHierarchy = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(entry, searchCondition) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          while (entry && !searchCondition(entry)) {\n            entry = entry.parent;\n          }\n          if (!entry) {\n            _context.next = 5;\n            break;\n          }\n          _context.next = 4;\n          return sqlUtils.backTickIfNeeded(entry.catalogEntry.getConnector(), entry.catalogEntry.name);\n        case 4:\n          return _context.abrupt(\"return\", _context.sent);\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function findNameInHierarchy(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar AssistDbEntry = /*#__PURE__*/function () {\n  /**\n   * @param {DataCatalogEntry} catalogEntry\n   * @param {AssistDbEntry} parent\n   * @param {AssistDbNamespace} assistDbNamespace\n   * @param {Object} filter\n   * @param {function} filter.querySpec (observable)\n   * @param {Object} i18n\n   * @param {string} i18n.errorLoadingTablePreview\n   * @param {Object} navigationSettings\n   * @constructor\n   */\n  function AssistDbEntry(catalogEntry, parent, assistDbNamespace, filter, i18n, navigationSettings) {\n    _classCallCheck(this, AssistDbEntry);\n    var self = this;\n    self.catalogEntry = catalogEntry;\n    self.parent = parent;\n    self.assistDbNamespace = assistDbNamespace;\n    self.filter = filter;\n    self.i18n = i18n;\n    self.navigationSettings = navigationSettings;\n    self.sourceType = assistDbNamespace.sourceType;\n    self.phoenix_connector = findEditorConnector(function (connector) {\n      return connector.dialect === 'phoenix';\n    });\n    self.importer_url = self.phoenix_connector && self.sourceType === self.phoenix_connector.id ? window.HUE_URLS.IMPORTER_CREATE_PHOENIX_TABLE : window.HUE_URLS.IMPORTER_CREATE_TABLE;\n    self.expandable = self.catalogEntry.hasPossibleChildren();\n    self.filterColumnNames = ko.observable(false);\n    self.highlight = ko.observable(false);\n    self.popularity = ko.observable(0);\n    self.loaded = false;\n    self.loading = ko.observable(false);\n    self.open = ko.observable(false);\n    self.entries = ko.observableArray([]);\n    self.statsVisible = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.iconClass = '';\n    if (!self.navigationSettings.rightAssist) {\n      if (self.sourceType === 'solr') {\n        self.iconClass = 'fa-search';\n      } else if (self.sourceType === 'kafka') {\n        self.iconClass = 'fa-sitemap';\n      } else if (self.catalogEntry.isView()) {\n        self.iconClass = 'fa-eye';\n      } else if (self.catalogEntry.isModel()) {\n        self.iconClass = 'fa-puzzle-piece';\n      } else {\n        self.iconClass = 'fa-table';\n      }\n    }\n    self.open.subscribe(function (newValue) {\n      if (newValue && self.entries().length === 0) {\n        self.loadEntries();\n      }\n    });\n    self.hasEntries = ko.pureComputed(function () {\n      return self.entries().length > 0;\n    });\n    self.filteredEntries = ko.pureComputed(function () {\n      var facets = self.filter.querySpec().facets;\n      var facetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL\n      // Only text match on tables/views or columns if flag is set\n      var textMatch = !self.catalogEntry.isDatabase() && !self.filterColumnNames() || !self.filter.querySpec().text || self.filter.querySpec().text.length === 0;\n      if (facetMatch && textMatch) {\n        return self.entries();\n      }\n      return self.entries().filter(function (entry) {\n        var match = true;\n        if (match && !facetMatch) {\n          if (entry.catalogEntry.isField()) {\n            match = Object.keys(facets['type']).length === 2 && facets['type']['table'] && facets['type']['view'] || Object.keys(facets['type']).length === 1 && (facets['type']['table'] || facets['type']['view']) || facets['type'][entry.catalogEntry.getType()];\n          } else if (entry.catalogEntry.isTableOrView()) {\n            match = !facets['type']['table'] && !facets['type']['view'] || facets['type']['table'] && entry.catalogEntry.isTable() || facets['type']['view'] && entry.catalogEntry.isView();\n          }\n        }\n        if (match && !textMatch) {\n          var nameLower = entry.catalogEntry.name.toLowerCase();\n          match = self.filter.querySpec().text.every(function (text) {\n            return nameLower.indexOf(text.toLowerCase()) !== -1;\n          });\n        }\n        return match;\n      });\n    });\n    self.autocompleteFromEntries = function (nonPartial, partial) {\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      self.entries().forEach(function (entry) {\n        if (entry.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n          result.push(nonPartial + partial + entry.catalogEntry.name.substring(partial.length));\n        }\n      });\n      return result;\n    };\n    self.tableName = null;\n    self.columnName = null;\n    self.type = null;\n    self.databaseName = self.getHierarchy()[0];\n    if (self.catalogEntry.isTableOrView()) {\n      self.tableName = self.catalogEntry.name;\n      self.columnName = null;\n      self.type = self.catalogEntry.getType();\n    } else if (self.catalogEntry.isColumn()) {\n      self.tableName = parent.catalogEntry.name;\n      self.columnName = self.catalogEntry.name;\n    }\n    self.editorText = ko.observable();\n    var setEditorText = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!self.catalogEntry.isTableOrView()) {\n                _context2.next = 8;\n                break;\n              }\n              _context2.t0 = self;\n              _context2.next = 4;\n              return self.getTableName();\n            case 4:\n              _context2.t1 = _context2.sent;\n              _context2.t0.editorText.call(_context2.t0, _context2.t1);\n              _context2.next = 23;\n              break;\n            case 8:\n              if (!self.catalogEntry.isColumn()) {\n                _context2.next = 17;\n                break;\n              }\n              _context2.t2 = self;\n              _context2.next = 12;\n              return self.getColumnName();\n            case 12:\n              _context2.t3 = _context2.sent;\n              _context2.t4 = _context2.t3 + ', ';\n              _context2.t2.editorText.call(_context2.t2, _context2.t4);\n              _context2.next = 23;\n              break;\n            case 17:\n              _context2.t5 = self;\n              _context2.next = 20;\n              return self.getComplexName();\n            case 20:\n              _context2.t6 = _context2.sent;\n              _context2.t7 = _context2.t6 + ', ';\n              _context2.t5.editorText.call(_context2.t5, _context2.t7);\n            case 23:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function setEditorText() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    setEditorText();\n  }\n  return _createClass(AssistDbEntry, [{\n    key: \"knownFacetValues\",\n    value: function knownFacetValues() {\n      var self = this;\n      var types = {};\n      if (self.parent === null) {\n        // Only find facets on the DB level\n        self.entries().forEach(function (tableEntry) {\n          if (!self.assistDbNamespace.nonSqlType) {\n            if (tableEntry.catalogEntry.isTable()) {\n              types.table = types.table ? types.table + 1 : 1;\n            } else if (tableEntry.catalogEntry.isView()) {\n              types.view = types.view ? types.view + 1 : 1;\n            }\n          }\n          if (tableEntry.open()) {\n            tableEntry.entries().forEach(function (colEntry) {\n              if (!types[colEntry.catalogEntry.getType()]) {\n                types[colEntry.catalogEntry.getType()] = 1;\n              } else {\n                types[colEntry.catalogEntry.getType()]++;\n              }\n            });\n          }\n        });\n      }\n      if (Object.keys(types).length) {\n        return {\n          type: types\n        };\n      }\n      return {};\n    }\n  }, {\n    key: \"getDatabaseName\",\n    value: function () {\n      var _getDatabaseName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return findNameInHierarchy(this, function (entry) {\n                return entry.catalogEntry.isDatabase();\n              });\n            case 2:\n              return _context3.abrupt(\"return\", _context3.sent);\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function getDatabaseName() {\n        return _getDatabaseName.apply(this, arguments);\n      }\n      return getDatabaseName;\n    }()\n  }, {\n    key: \"getTableName\",\n    value: function () {\n      var _getTableName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return findNameInHierarchy(this, function (entry) {\n                return entry.catalogEntry.isTableOrView();\n              });\n            case 2:\n              return _context4.abrupt(\"return\", _context4.sent);\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function getTableName() {\n        return _getTableName.apply(this, arguments);\n      }\n      return getTableName;\n    }()\n  }, {\n    key: \"getColumnName\",\n    value: function () {\n      var _getColumnName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return findNameInHierarchy(this, function (entry) {\n                return entry.catalogEntry.isColumn();\n              });\n            case 2:\n              return _context5.abrupt(\"return\", _context5.sent);\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function getColumnName() {\n        return _getColumnName.apply(this, arguments);\n      }\n      return getColumnName;\n    }()\n  }, {\n    key: \"getComplexName\",\n    value: function () {\n      var _getComplexName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var entry, sourceType, parts;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              entry = this;\n              sourceType = entry.sourceType;\n              parts = [];\n            case 3:\n              if (!(entry != null)) {\n                _context6.next = 19;\n                break;\n              }\n              if (!entry.catalogEntry.isTableOrView()) {\n                _context6.next = 6;\n                break;\n              }\n              return _context6.abrupt(\"break\", 19);\n            case 6:\n              if (!(entry.catalogEntry.isArray() || entry.catalogEntry.isMapValue())) {\n                _context6.next = 10;\n                break;\n              }\n              if (sourceType === 'hive') {\n                parts.push('[]');\n              }\n              _context6.next = 16;\n              break;\n            case 10:\n              _context6.t0 = parts;\n              _context6.next = 13;\n              return sqlUtils.backTickIfNeeded(entry.catalogEntry.getConnector(), entry.catalogEntry.name);\n            case 13:\n              _context6.t1 = _context6.sent;\n              _context6.t0.push.call(_context6.t0, _context6.t1);\n              parts.push('.');\n            case 16:\n              entry = entry.parent;\n              _context6.next = 3;\n              break;\n            case 19:\n              parts.reverse();\n              return _context6.abrupt(\"return\", parts.slice(1).join(''));\n            case 21:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function getComplexName() {\n        return _getComplexName.apply(this, arguments);\n      }\n      return getComplexName;\n    }()\n  }, {\n    key: \"showContextPopover\",\n    value: function showContextPopover(entry, event, positionAdjustment) {\n      var self = this;\n      var $source = $(event.target);\n      var offset = $source.offset();\n      if (positionAdjustment) {\n        offset.left += positionAdjustment.left;\n        offset.top += positionAdjustment.top;\n      }\n      self.statsVisible(true);\n      huePubSub.publish('context.popover.show', {\n        data: {\n          type: 'catalogEntry',\n          catalogEntry: self.catalogEntry\n        },\n        showInAssistEnabled: !!self.navigationSettings.rightAssist,\n        orientation: self.navigationSettings.rightAssist ? 'left' : 'right',\n        pinEnabled: self.navigationSettings.pinEnabled,\n        source: {\n          element: event.target,\n          left: offset.left,\n          top: offset.top - 3,\n          right: offset.left + $source.width() + 1,\n          bottom: offset.top + $source.height() - 3\n        }\n      });\n      huePubSub.subscribeOnce('context.popover.hidden', function () {\n        self.statsVisible(false);\n      });\n    }\n  }, {\n    key: \"triggerRefresh\",\n    value: function triggerRefresh() {\n      var self = this;\n      self.catalogEntry.clearCache({\n        cascade: true\n      });\n    }\n  }, {\n    key: \"highlightInside\",\n    value: function highlightInside(path) {\n      var self = this;\n      var searchEntry = function searchEntry() {\n        var foundEntry;\n        self.entries().forEach(function (entry) {\n          entry.highlight(false);\n          if (entry.catalogEntry.name === path[0]) {\n            foundEntry = entry;\n          }\n        });\n        if (foundEntry) {\n          if (foundEntry.expandable && !foundEntry.open()) {\n            foundEntry.open(true);\n          }\n          window.setTimeout(function () {\n            if (path.length > 1) {\n              foundEntry.highlightInside(path.slice(1));\n            } else {\n              huePubSub.subscribeOnce('assist.db.scrollToComplete', function () {\n                foundEntry.highlight(true);\n                // Timeout is for animation effect\n                window.setTimeout(function () {\n                  foundEntry.highlight(false);\n                }, 1800);\n              });\n              huePubSub.publish('assist.db.scrollTo', foundEntry);\n            }\n          }, 0);\n        }\n      };\n      if (self.entries().length === 0) {\n        if (self.loading()) {\n          var subscription = self.loading.subscribe(function (newVal) {\n            if (!newVal) {\n              subscription.dispose();\n              searchEntry();\n            }\n          });\n        } else {\n          self.loadEntries(searchEntry);\n        }\n      } else {\n        searchEntry();\n      }\n    }\n  }, {\n    key: \"loadEntries\",\n    value: function loadEntries(callback) {\n      var self = this;\n      if (!self.expandable || self.loading()) {\n        return;\n      }\n      self.loading(true);\n      var loadEntriesDeferred = $.Deferred();\n      var successCallback = function successCallback(sourceMeta) {\n        self.entries([]);\n        if (!sourceMeta.notFound) {\n          self.catalogEntry.getChildren({\n            silenceErrors: self.navigationSettings.rightAssist\n          }).then(function (catalogEntries) {\n            self.hasErrors(false);\n            self.loading(false);\n            self.loaded = true;\n            if (catalogEntries.length === 0) {\n              self.entries([]);\n              return;\n            }\n            var newEntries = [];\n            catalogEntries.forEach(function (catalogEntry) {\n              newEntries.push(self.createEntry(catalogEntry));\n            });\n            if (sourceMeta.type === 'array') {\n              self.entries(newEntries);\n              self.entries()[0].open(true);\n            } else {\n              self.entries(newEntries);\n            }\n            loadEntriesDeferred.resolve(newEntries);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          })[\"catch\"](function () {\n            self.loading(false);\n            self.loaded = true;\n            self.hasErrors(true);\n          });\n          if (!self.assistDbNamespace.nonSqlType) {\n            self.catalogEntry.loadNavigatorMetaForChildren({\n              silenceErrors: self.navigationSettings.rightAssist\n            })[\"finally\"](function () {});\n          }\n        } else {\n          self.hasErrors(true);\n          self.loading(false);\n          self.loaded = true;\n          if (typeof callback === 'function') {\n            callback();\n          }\n        }\n      };\n      var errorCallback = function errorCallback() {\n        self.hasErrors(true);\n        self.loading(false);\n        self.loaded = true;\n        loadEntriesDeferred.resolve([]);\n      };\n      if (!self.navigationSettings.rightAssist && window.HAS_SQL_ANALYZER && (self.catalogEntry.isTable() || self.catalogEntry.isDatabase()) && !self.assistDbNamespace.nonSqlType) {\n        var sqlAnalyzer = sqlAnalyzerRepository.getSqlAnalyzer(self.catalogEntry.getConnector());\n        self.catalogEntry.loadSqlAnalyzerPopularityForChildren({\n          silenceErrors: true,\n          sqlAnalyzer: sqlAnalyzer\n        }).then(function () {\n          loadEntriesDeferred.done(function () {\n            if (!self.hasErrors()) {\n              self.entries().forEach(function (entry) {\n                if (entry.catalogEntry.sqlAnalyzerPopularity) {\n                  if (entry.catalogEntry.sqlAnalyzerPopularity.popularity) {\n                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.popularity);\n                  } else if (entry.catalogEntry.sqlAnalyzerPopularity.column_count) {\n                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.column_count);\n                  } else if (entry.catalogEntry.sqlAnalyzerPopularity.selectColumn) {\n                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.selectColumn.columnCount);\n                  }\n                }\n              });\n            }\n          });\n        });\n      }\n      self.catalogEntry.getSourceMeta({\n        silenceErrors: self.navigationSettings.rightAssist\n      }).then(successCallback)[\"catch\"](errorCallback);\n    }\n\n    /**\n     * @param {DataCatalogEntry} catalogEntry\n     */\n  }, {\n    key: \"createEntry\",\n    value: function createEntry(catalogEntry) {\n      var self = this;\n      return new AssistDbEntry(catalogEntry, self, self.assistDbNamespace, self.filter, self.i18n, self.navigationSettings);\n    }\n  }, {\n    key: \"getHierarchy\",\n    value: function getHierarchy() {\n      var self = this;\n      return self.catalogEntry.path.concat();\n    }\n  }, {\n    key: \"dblClick\",\n    value: function () {\n      var _dblClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var self;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              self = this;\n              if (!self.catalogEntry.isTableOrView()) {\n                _context7.next = 13;\n                break;\n              }\n              _context7.t0 = huePubSub;\n              _context7.next = 5;\n              return self.getTableName();\n            case 5:\n              _context7.t1 = _context7.sent;\n              _context7.next = 8;\n              return self.getDatabaseName();\n            case 8:\n              _context7.t2 = _context7.sent;\n              _context7.t3 = {\n                name: _context7.t1,\n                database: _context7.t2\n              };\n              _context7.t0.publish.call(_context7.t0, 'editor.insert.table.at.cursor', _context7.t3);\n              _context7.next = 40;\n              break;\n            case 13:\n              if (!self.catalogEntry.isColumn()) {\n                _context7.next = 28;\n                break;\n              }\n              _context7.t4 = huePubSub;\n              _context7.next = 17;\n              return self.getColumnName();\n            case 17:\n              _context7.t5 = _context7.sent;\n              _context7.next = 20;\n              return self.getTableName();\n            case 20:\n              _context7.t6 = _context7.sent;\n              _context7.next = 23;\n              return self.getDatabaseName();\n            case 23:\n              _context7.t7 = _context7.sent;\n              _context7.t8 = {\n                name: _context7.t5,\n                table: _context7.t6,\n                database: _context7.t7\n              };\n              _context7.t4.publish.call(_context7.t4, 'editor.insert.column.at.cursor', _context7.t8);\n              _context7.next = 40;\n              break;\n            case 28:\n              _context7.t9 = huePubSub;\n              _context7.next = 31;\n              return self.getComplexName();\n            case 31:\n              _context7.t10 = _context7.sent;\n              _context7.next = 34;\n              return self.getTableName();\n            case 34:\n              _context7.t11 = _context7.sent;\n              _context7.next = 37;\n              return self.getDatabaseName();\n            case 37:\n              _context7.t12 = _context7.sent;\n              _context7.t13 = {\n                name: _context7.t10,\n                table: _context7.t11,\n                database: _context7.t12\n              };\n              _context7.t9.publish.call(_context7.t9, 'editor.insert.column.at.cursor', _context7.t13);\n            case 40:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function dblClick() {\n        return _dblClick.apply(this, arguments);\n      }\n      return dblClick;\n    }()\n  }, {\n    key: \"explore\",\n    value: function () {\n      var _explore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(isSolr) {\n        var self;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              self = this;\n              if (!isSolr) {\n                _context8.next = 5;\n                break;\n              }\n              huePubSub.publish('open.link', '/hue/dashboard/browse/' + self.catalogEntry.name);\n              _context8.next = 19;\n              break;\n            case 5:\n              _context8.t0 = huePubSub;\n              _context8.next = 8;\n              return self.getDatabaseName();\n            case 8:\n              _context8.t1 = _context8.sent;\n              _context8.t2 = '/hue/dashboard/browse/' + _context8.t1;\n              _context8.t3 = _context8.t2 + '.';\n              _context8.next = 13;\n              return self.getTableName();\n            case 13:\n              _context8.t4 = _context8.sent;\n              _context8.t5 = _context8.t3 + _context8.t4;\n              _context8.t6 = _context8.t5 + '?engine=';\n              _context8.t7 = self.assistDbNamespace.sourceType;\n              _context8.t8 = _context8.t6 + _context8.t7;\n              _context8.t0.publish.call(_context8.t0, 'open.link', _context8.t8);\n            case 19:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function explore(_x3) {\n        return _explore.apply(this, arguments);\n      }\n      return explore;\n    }()\n  }, {\n    key: \"openInMetastore\",\n    value: function openInMetastore() {\n      var self = this;\n      var url;\n      if (self.catalogEntry.isDatabase()) {\n        url = '/metastore/tables/' + self.catalogEntry.name + '?connector_id=' + self.catalogEntry.getConnector().id + '&namespace=' + self.catalogEntry.namespace.id;\n      } else if (self.catalogEntry.isTableOrView()) {\n        url = '/metastore/table/' + self.parent.catalogEntry.name + '/' + self.catalogEntry.name + '?connector_id=' + self.catalogEntry.getConnector().id + '&namespace=' + self.catalogEntry.namespace.id;\n      } else {\n        return;\n      }\n      huePubSub.publish('open.link', url);\n    }\n  }, {\n    key: \"openInIndexer\",\n    value: function openInIndexer() {\n      var self = this;\n      var definitionName = self.catalogEntry.name;\n      if (window.IS_NEW_INDEXER_ENABLED) {\n        huePubSub.publish('open.link', '/indexer/indexes/' + definitionName);\n      } else {\n        var hash = '#edit/' + definitionName;\n        if (window.location.pathname.startsWith('/hue/indexer') && !window.location.pathname.startsWith('/hue/indexer/importer')) {\n          window.location.hash = hash;\n        } else {\n          huePubSub.subscribeOnce('app.gained.focus', function (app) {\n            if (app === 'indexes') {\n              window.setTimeout(function () {\n                window.location.hash = hash;\n              }, 0);\n            }\n          });\n          huePubSub.publish('open.link', '/indexer');\n        }\n      }\n    }\n  }, {\n    key: \"toggleOpen\",\n    value: function toggleOpen() {\n      var self = this;\n      self.open(!self.open());\n    }\n  }, {\n    key: \"openItem\",\n    value: function openItem() {\n      var self = this;\n      if (self.catalogEntry.isTableOrView()) {\n        huePubSub.publish('assist.table.selected', self.catalogEntry);\n      } else if (self.catalogEntry.isDatabase()) {\n        huePubSub.publish('assist.database.selected', self.catalogEntry);\n      }\n    }\n  }]);\n}();\nexport default AssistDbEntry;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport sqlAnalyzerRepository from 'catalog/analyzer/sqlAnalyzerRepository';\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_ACTIVE_DB_CHANGED_EVENT } from \"./events\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport AssistDbEntry from \"./assistDbEntry\";\nimport huePubSub from 'utils/huePubSub';\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nvar AssistDbNamespace = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Object} options.i18n\n   * @param {string} options.sourceType\n   * @param {Connector} options.connector\n   * @param {ContextNamespace} options.namespace\n   * @param {boolean} options.nonSqlType - Optional, default false\n   * @param {Object} options.navigationSettings\n   * @constructor\n   */\n  function AssistDbNamespace(options) {\n    var _this = this;\n    _classCallCheck(this, AssistDbNamespace);\n    var self = this;\n    self.i18n = options.i18n;\n    self.navigationSettings = options.navigationSettings;\n    self.sourceType = options.sourceType;\n    self.connector = options.connector;\n    self.nonSqlType = options.nonSqlType;\n    self.namespace = options.namespace;\n    self.status = ko.observable(options.namespace.status);\n    // TODO: Compute selection in assist?\n    self.compute = ko.observable();\n    if (self.namespace.computes.length) {\n      self.compute(self.namespace.computes[0]);\n    }\n    self.name = options.namespace.name;\n    self.dbIndex = {};\n    self.databases = ko.observableArray();\n    self.selectedDatabase = ko.observable();\n    self.highlight = ko.observable(false);\n    self.loadedPromise = $.Deferred();\n    self.loadedDeferred = $.Deferred();\n    self.loaded = ko.observable(false);\n    self.loading = ko.observable(false);\n    self.reloading = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.loadingTables = ko.pureComputed(function () {\n      return typeof self.selectedDatabase() !== 'undefined' && self.selectedDatabase() !== null && self.selectedDatabase().loading();\n    });\n    self.filter = {\n      querySpec: ko.observable({}).extend({\n        rateLimit: 300\n      })\n    };\n    self.hasEntries = ko.pureComputed(function () {\n      return self.databases().length > 0;\n    });\n    self.filteredEntries = ko.pureComputed(function () {\n      if (!self.filter.querySpec() || typeof self.filter.querySpec().query === 'undefined' || !self.filter.querySpec().query) {\n        return self.databases();\n      }\n      return self.databases().filter(function (database) {\n        return database.catalogEntry.name.toLowerCase().indexOf(self.filter.querySpec().query.toLowerCase()) !== -1;\n      });\n    });\n    self.autocompleteFromEntries = function (nonPartial, partial) {\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      self.databases().forEach(function (db) {\n        if (db.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n          result.push(nonPartial + partial + db.catalogEntry.name.substring(partial.length));\n        }\n      });\n      return result;\n    };\n    self.selectedDatabase.subscribe(function () {\n      var db = self.selectedDatabase();\n      if (db) {\n        huePubSub.publish(ASSIST_ACTIVE_DB_CHANGED_EVENT, {\n          connector: _this.connector,\n          namespace: _this.namespace,\n          database: db.name\n        });\n      }\n      if (window.HAS_SQL_ANALYZER && db && !db.popularityIndexSet && !self.nonSqlType) {\n        var sqlAnalyzer = sqlAnalyzerRepository.getSqlAnalyzer(db.catalogEntry.getConnector());\n        db.catalogEntry.loadSqlAnalyzerPopularityForChildren({\n          silenceErrors: true,\n          sqlAnalyzer: sqlAnalyzer\n        }).then(function () {\n          var applyPopularity = function applyPopularity() {\n            db.entries().forEach(function (entry) {\n              if (entry.catalogEntry.sqlAnalyzerPopularity && entry.catalogEntry.sqlAnalyzerPopularity.popularity >= 5) {\n                entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.popularity);\n              }\n            });\n          };\n          if (db.loading()) {\n            var subscription = db.loading.subscribe(function () {\n              subscription.dispose();\n              applyPopularity();\n            });\n          } else if (db.entries().length === 0) {\n            var _subscription = db.entries.subscribe(function (newEntries) {\n              if (newEntries.length > 0) {\n                _subscription.dispose();\n                applyPopularity();\n              }\n            });\n          } else {\n            applyPopularity();\n          }\n        });\n      }\n    });\n    self.selectedDatabaseChanged = function () {\n      if (self.selectedDatabase()) {\n        if (!self.selectedDatabase().hasEntries() && !self.selectedDatabase().loading()) {\n          self.selectedDatabase().loadEntries();\n        }\n        if (!self.navigationSettings.rightAssist) {\n          var entry = self.selectedDatabase().catalogEntry;\n          setInLocalStorage('assist_' + entry.getConnector().id + '_' + entry.namespace.id + '.lastSelectedDb', entry.name);\n          huePubSub.publish('assist.database.set', entry);\n        }\n      } else {\n        setInLocalStorage('assist_' + self.connector.id + '_' + self.namespace.id + '.lastSelectedDb', null);\n      }\n    };\n    var nestedFilter = {\n      querySpec: ko.observable({}).extend({\n        rateLimit: 300\n      })\n    };\n    self.setDatabase = function (databaseName) {\n      if (databaseName && self.selectedDatabase() && databaseName === self.selectedDatabase().catalogEntry.name) {\n        return;\n      }\n      if (databaseName && self.dbIndex[databaseName]) {\n        self.selectedDatabase(self.dbIndex[databaseName]);\n        self.selectedDatabaseChanged();\n        return;\n      }\n      var lastSelectedDb = getFromLocalStorage('assist_' + self.sourceType + '_' + self.namespace.id + '.lastSelectedDb');\n      if (!lastSelectedDb && lastSelectedDb !== '') {\n        lastSelectedDb = 'default';\n      }\n      if (lastSelectedDb && self.dbIndex[lastSelectedDb]) {\n        self.selectedDatabase(self.dbIndex[lastSelectedDb]);\n        self.selectedDatabaseChanged();\n      } else if (lastSelectedDb && self.databases().length > 0) {\n        self.selectedDatabase(self.databases()[0]);\n        self.selectedDatabaseChanged();\n      }\n    };\n    self.initDatabases = function (callback) {\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      self.hasErrors(false);\n      var lastSelectedDbName = self.selectedDatabase() ? self.selectedDatabase().catalogEntry.name : null;\n      self.selectedDatabase(null);\n      self.databases([]);\n      dataCatalog.getEntry({\n        namespace: self.namespace,\n        compute: self.compute(),\n        connector: self.connector,\n        path: [],\n        definition: {\n          type: 'source'\n        }\n      }).then(function (catalogEntry) {\n        self.catalogEntry = catalogEntry;\n        self.catalogEntry.getChildren({\n          silenceErrors: self.navigationSettings.rightAssist\n        }).then(function (databaseEntries) {\n          self.dbIndex = {};\n          var hasNavMeta = false;\n          var dbs = [];\n          databaseEntries.forEach(function (catalogEntry) {\n            hasNavMeta = hasNavMeta || !!catalogEntry.navigatorMeta;\n            var database = new AssistDbEntry(catalogEntry, null, self, nestedFilter, self.i18n, self.navigationSettings);\n            self.dbIndex[catalogEntry.name] = database;\n            if (catalogEntry.name === lastSelectedDbName) {\n              self.selectedDatabase(database);\n              self.selectedDatabaseChanged();\n            }\n            dbs.push(database);\n          });\n          if (!hasNavMeta && !self.nonSqlType) {\n            try {\n              self.catalogEntry.loadNavigatorMetaForChildren({\n                silenceErrors: true\n              });\n            } catch (err) {}\n          }\n          self.databases(dbs);\n          if (typeof callback === 'function') {\n            callback();\n          }\n        })[\"catch\"](function () {\n          self.hasErrors(true);\n        })[\"finally\"](function () {\n          self.loaded(true);\n          self.loadedDeferred.resolve();\n          self.loading(false);\n          self.reloading(false);\n        });\n      });\n    };\n    self.modalItem = ko.observable();\n    if (!self.navigationSettings.rightAssist) {\n      huePubSub.subscribe('data.catalog.entry.refreshed', function (details) {\n        if (self.namespace.id !== details.entry.namespace.id || details.entry.getConnector().id !== self.sourceType) {\n          return;\n        }\n        if (self.catalogEntry === details.entry) {\n          self.initDatabases();\n        } else {\n          var targetPath = details.entry.path.join('.');\n          var findAndReloadInside = function findAndReloadInside(entries) {\n            return entries.some(function (entry) {\n              if (entry.catalogEntry.path.join('.') === targetPath) {\n                entry.catalogEntry = details.entry;\n                entry.loadEntries();\n                return true;\n              }\n              return findAndReloadInside(entry.entries());\n            });\n          };\n          findAndReloadInside(self.databases());\n        }\n      });\n    }\n  }\n  return _createClass(AssistDbNamespace, [{\n    key: \"whenLoaded\",\n    value: function whenLoaded(callback) {\n      var self = this;\n      self.loadedDeferred.done(callback);\n    }\n  }, {\n    key: \"highlightInside\",\n    value: function highlightInside(catalogEntry) {\n      var self = this;\n      var foundDb;\n      var findDatabase = function findDatabase() {\n        self.databases().forEach(function (db) {\n          db.highlight(false);\n          if (db.databaseName === catalogEntry.path[0]) {\n            foundDb = db;\n          }\n        });\n        if (foundDb) {\n          var whenLoaded = function whenLoaded() {\n            if (self.selectedDatabase() !== foundDb) {\n              self.selectedDatabase(foundDb);\n            }\n            if (!foundDb.open()) {\n              foundDb.open(true);\n            }\n            window.setTimeout(function () {\n              huePubSub.subscribeOnce('assist.db.scrollToComplete', function () {\n                foundDb.highlight(true);\n                // Timeout is for animation effect\n                window.setTimeout(function () {\n                  foundDb.highlight(false);\n                }, 1800);\n              });\n              if (catalogEntry.path.length > 1) {\n                foundDb.highlightInside(catalogEntry.path.slice(1));\n              } else {\n                huePubSub.publish('assist.db.scrollTo', foundDb);\n              }\n            }, 0);\n          };\n          if (foundDb.hasEntries()) {\n            whenLoaded();\n          } else {\n            foundDb.loadEntries(whenLoaded);\n          }\n        }\n      };\n      if (!self.loaded()) {\n        self.initDatabases(findDatabase);\n      } else {\n        findDatabase();\n      }\n    }\n  }, {\n    key: \"triggerRefresh\",\n    value: function triggerRefresh() {\n      var self = this;\n      if (self.catalogEntry) {\n        self.catalogEntry.clearCache();\n      }\n    }\n  }]);\n}();\nexport default AssistDbNamespace;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { getComputes, getNamespaces } from 'catalog/contextCatalog';\nimport { NAMESPACES_REFRESHED_TOPIC } from 'catalog/events';\nimport AssistDbNamespace from \"./assistDbNamespace\";\nimport huePubSub from 'utils/huePubSub';\nimport { getFromLocalStorage } from 'utils/storageUtils';\nvar AssistDbSource = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Object} options.i18n\n   * @param {string} options.type\n   * @param {Namespace} [options.initialNamespace] - Optional initial namespace to use\n   * @param {Compute} [options.initialCompute] - Optional initial compute to use\n   * @param {Connector} options.connector\n   * @param {string} options.name\n   * @param {boolean} options.nonSqlType - Optional, default false\n   * @param {Object} options.navigationSettings\n   * @constructor\n   */\n  function AssistDbSource(options) {\n    _classCallCheck(this, AssistDbSource);\n    var self = this;\n\n    // TODO: Get rid of sourceType\n    self.sourceType = options.type;\n    self.connector = options.connector;\n    self.name = options.name;\n    self.i18n = options.i18n;\n    self.nonSqlType = options.nonSqlType;\n    self.navigationSettings = options.navigationSettings;\n    self.initialNamespace = options.initialNamespace || getFromLocalStorage('contextSelector.lastSelectedNamespace');\n    self.initialCompute = options.initialCompute || getFromLocalStorage('contextSelector.lastSelectedCompute');\n    self.selectedNamespace = ko.observable();\n    self.namespaces = ko.observableArray();\n    self.loadedDeferred = $.Deferred();\n    self.loading = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.filter = {\n      querySpec: ko.observable({}).extend({\n        rateLimit: 300\n      })\n    };\n    self.filteredNamespaces = ko.pureComputed(function () {\n      if (!self.filter.querySpec() || typeof self.filter.querySpec().query === 'undefined' || !self.filter.querySpec().query) {\n        return self.namespaces();\n      }\n      return self.namespaces().filter(function (namespace) {\n        return namespace.name.toLowerCase().indexOf(self.filter.querySpec().query.toLowerCase()) !== -1;\n      });\n    });\n    self.autocompleteFromNamespaces = function (nonPartial, partial) {\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      self.namespaces().forEach(function (namespace) {\n        if (namespace.name.toLowerCase().indexOf(partialLower) === 0) {\n          result.push(nonPartial + partial + namespace.name.substring(partial.length));\n        }\n      });\n      return result;\n    };\n    var ensureDbSet = function ensureDbSet() {\n      if (self.nonSqlType) {\n        if (!self.selectedNamespace().selectedDatabase()) {\n          self.selectedNamespace().selectedDatabase(self.selectedNamespace().databases()[0]);\n          self.selectedNamespace().selectedDatabaseChanged();\n        }\n      }\n    };\n    self.selectedNamespace.subscribe(function (namespace) {\n      if (namespace && !namespace.loaded() && !namespace.loading()) {\n        namespace.initDatabases(ensureDbSet);\n      } else {\n        ensureDbSet();\n      }\n    });\n    self.hasNamespaces = ko.pureComputed(function () {\n      return self.namespaces().length > 0;\n    });\n    huePubSub.subscribe(NAMESPACES_REFRESHED_TOPIC, function (connectorId) {\n      if (self.connector.id !== connectorId) {\n        return;\n      }\n      self.loading(true);\n      getNamespaces({\n        connector: self.connector\n      }).then(function (context) {\n        var newNamespaces = [];\n        var existingNamespaceIndex = {};\n        self.namespaces().forEach(function (assistNamespace) {\n          existingNamespaceIndex[assistNamespace.namespace.id] = assistNamespace;\n        });\n        context.namespaces.forEach(function (newNamespace) {\n          if (existingNamespaceIndex[newNamespace.id]) {\n            existingNamespaceIndex[newNamespace.id].namespace = newNamespace;\n            existingNamespaceIndex[newNamespace.id].name = newNamespace.name;\n            existingNamespaceIndex[newNamespace.id].status(newNamespace.status);\n            newNamespaces.push(existingNamespaceIndex[newNamespace.id]);\n          } else {\n            newNamespaces.push(new AssistDbNamespace({\n              sourceType: self.sourceType,\n              connector: self.connector,\n              namespace: newNamespace,\n              i18n: self.i18n,\n              nonSqlType: self.nonSqlType,\n              navigationSettings: self.navigationSettings\n            }));\n          }\n        });\n        self.namespaces(newNamespaces);\n      })[\"catch\"]()[\"finally\"](function () {\n        self.loading(false);\n      });\n    });\n  }\n  return _createClass(AssistDbSource, [{\n    key: \"whenLoaded\",\n    value: function whenLoaded(callback) {\n      var self = this;\n      self.loadedDeferred.done(callback);\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(refresh) {\n      var self = this;\n      self.loading(true);\n      if (refresh) {\n        getComputes({\n          connector: self.connector,\n          clearCache: true\n        })[\"catch\"]();\n      }\n      return getNamespaces({\n        connector: self.connector,\n        clearCache: refresh\n      }).then(function (context) {\n        var assistNamespaces = [];\n        var activeNamespace;\n        var activeCompute;\n        context.namespaces.forEach(function (namespace) {\n          var assistNamespace = new AssistDbNamespace({\n            sourceType: self.sourceType,\n            namespace: namespace,\n            connector: self.connector,\n            i18n: self.i18n,\n            nonSqlType: self.nonSqlType,\n            navigationSettings: self.navigationSettings\n          });\n          if (self.initialNamespace && namespace.id === self.initialNamespace.id) {\n            activeNamespace = assistNamespace;\n            if (self.initialCompute) {\n              activeNamespace.namespace.computes.some(function (compute) {\n                if (compute.id === self.initialCompute.id) {\n                  activeCompute = compute;\n                }\n              });\n            }\n          }\n          assistNamespaces.push(assistNamespace);\n        });\n        self.namespaces(assistNamespaces);\n        if (!refresh) {\n          if (activeNamespace) {\n            self.selectedNamespace(activeNamespace);\n          } else if (assistNamespaces.length) {\n            self.selectedNamespace(assistNamespaces[0]);\n          }\n          if (activeCompute) {\n            self.selectedNamespace().compute(activeCompute);\n          } else if (self.selectedNamespace() && self.selectedNamespace().namespace && self.selectedNamespace().namespace.computes && self.selectedNamespace().namespace.computes.length) {\n            self.selectedNamespace().compute(self.selectedNamespace().namespace.computes[0]);\n          }\n        }\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      })[\"finally\"](function () {\n        self.loadedDeferred.resolve();\n        self.loading(false);\n      });\n    }\n  }, {\n    key: \"highlightInside\",\n    value: function highlightInside(catalogEntry) {\n      var self = this;\n      if (self.navigationSettings.rightAssist) {\n        return;\n      }\n      var whenLoaded = function whenLoaded() {\n        self.namespaces().some(function (namespace) {\n          if (namespace.namespace.id === catalogEntry.namespace.id) {\n            if (self.selectedNamespace() !== namespace) {\n              self.selectedNamespace(namespace);\n            }\n            if (self.selectedNamespace().hasEntries()) {\n              self.selectedNamespace().highlightInside(catalogEntry);\n            } else {\n              self.selectedNamespace().initDatabases(function () {\n                self.selectedNamespace().highlightInside(catalogEntry);\n              });\n            }\n            return true;\n          }\n        });\n      };\n      if (self.namespaces().length) {\n        whenLoaded();\n      } else if (self.loading()) {\n        var loadingSub = self.loading.subscribe(function () {\n          loadingSub.dispose();\n          whenLoaded();\n        });\n      } else {\n        self.loadNamespaces().then(whenLoaded);\n      }\n    }\n  }, {\n    key: \"triggerRefresh\",\n    value: function triggerRefresh() {\n      var self = this;\n      self.loadNamespaces(true);\n    }\n  }]);\n}();\nexport default AssistDbSource;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nvar AssistGitEntry = /*#__PURE__*/function () {\n  /**\n   * @param {object} options\n   * @param {object} options.definition\n   * @param {string} options.definition.name\n   * @param {string} options.definition.type (file, dir)\n   * @param {AssistGitEntry} options.parent\n   * @constructor\n   */\n  function AssistGitEntry(options) {\n    _classCallCheck(this, AssistGitEntry);\n    var self = this;\n    self.definition = options.definition;\n    self.parent = options.parent;\n    self.path = '';\n    if (self.parent !== null) {\n      self.path = self.parent.path;\n      if (self.parent.path !== '/') {\n        self.path += '/';\n      }\n    }\n    self.path += self.definition.name;\n    self.fileContent = ko.observable('');\n    self.entries = ko.observableArray([]);\n    self.loaded = false;\n    self.loading = ko.observable(false);\n    self.loadingMore = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.open = ko.observable(false);\n    self.open.subscribe(function (newValue) {\n      if (newValue && self.entries().length === 0) {\n        self.loadEntries();\n      }\n    });\n    self.hasEntries = ko.pureComputed(function () {\n      return self.entries().length > 0;\n    });\n  }\n  return _createClass(AssistGitEntry, [{\n    key: \"dblClick\",\n    value: function dblClick() {\n      var self = this;\n      if (self.definition.type !== 'file') {\n        return;\n      }\n      self.hasErrors(false);\n      apiHelper.fetchGitContents({\n        pathParts: self.getHierarchy(),\n        fileType: self.definition.type,\n        successCallback: function successCallback(data) {\n          self.fileContent(data.content);\n          huePubSub.publish('assist.dblClickGitItem', self);\n        },\n        errorCallback: function errorCallback() {\n          self.hasErrors(true);\n          self.loading(false);\n        }\n      });\n    }\n  }, {\n    key: \"loadEntries\",\n    value: function loadEntries(callback) {\n      var self = this;\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      self.hasErrors(false);\n      apiHelper.fetchGitContents({\n        pathParts: self.getHierarchy(),\n        fileType: self.definition.type,\n        successCallback: function successCallback(data) {\n          var filteredFiles = data.files.filter(function (file) {\n            return file.name !== '.' && file.name !== '..';\n          });\n          self.entries(filteredFiles.map(function (file) {\n            return new AssistGitEntry({\n              definition: file,\n              parent: self\n            });\n          }));\n          self.loaded = true;\n          self.loading(false);\n          if (callback) {\n            callback();\n          }\n        },\n        errorCallback: function errorCallback() {\n          self.hasErrors(true);\n          self.loading(false);\n          if (callback) {\n            callback();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"loadDeep\",\n    value: function loadDeep(folders, callback) {\n      var self = this;\n      if (folders.length === 0) {\n        callback(self);\n        return;\n      }\n      var findNextAndLoadDeep = function findNextAndLoadDeep() {\n        var nextName = folders.shift();\n        var foundEntry = self.entries().filter(function (entry) {\n          return entry.definition.name === nextName && entry.definition.type === 'dir';\n        });\n        if (foundEntry.length === 1) {\n          foundEntry[0].loadDeep(folders, callback);\n        } else if (!self.hasErrors()) {\n          callback(self);\n        }\n      };\n      if (!self.loaded) {\n        self.loadEntries(findNextAndLoadDeep);\n      } else {\n        findNextAndLoadDeep();\n      }\n    }\n  }, {\n    key: \"getHierarchy\",\n    value: function getHierarchy() {\n      var self = this;\n      var parts = [];\n      var entry = self;\n      while (entry != null) {\n        parts.push(entry.definition.name);\n        entry = entry.parent;\n      }\n      parts.reverse();\n      return parts;\n    }\n  }, {\n    key: \"toggleOpen\",\n    value: function toggleOpen() {\n      var self = this;\n      if (self.definition.type !== 'dir') {\n        return;\n      }\n      self.open(!self.open());\n      if (self.definition.name === '..') {\n        if (self.parent.parent) {\n          huePubSub.publish('assist.selectGitEntry', self.parent.parent);\n        }\n      } else {\n        huePubSub.publish('assist.selectGitEntry', self);\n      }\n    }\n  }]);\n}();\nexport default AssistGitEntry;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nvar AssistHBaseEntry = /*#__PURE__*/function () {\n  /**\n   * @param {object} options\n   * @param {object} options.definition\n   * @param {string} options.definition.name\n   * @constructor\n   */\n  function AssistHBaseEntry(options) {\n    _classCallCheck(this, AssistHBaseEntry);\n    var self = this;\n    self.definition = options.definition;\n    self.path = self.definition.name;\n    self.entries = ko.observableArray([]);\n    self.loaded = false;\n    self.loading = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.hasEntries = ko.pureComputed(function () {\n      return self.entries().length > 0;\n    });\n  }\n  return _createClass(AssistHBaseEntry, [{\n    key: \"loadEntries\",\n    value: function loadEntries(callback) {\n      var self = this;\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      self.hasErrors(false);\n      apiHelper.fetchHBase({\n        parent: self.definition,\n        successCallback: function successCallback(data) {\n          self.entries(data.data.map(function (obj) {\n            return new AssistHBaseEntry({\n              definition: obj\n            });\n          }));\n          self.loaded = true;\n          self.loading(false);\n          if (callback) {\n            callback();\n          }\n        },\n        errorCallback: function errorCallback() {\n          self.hasErrors(true);\n          self.loading(false);\n          if (callback) {\n            callback();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      huePubSub.publish('assist.clickHBaseItem', this);\n    }\n  }, {\n    key: \"click\",\n    value: function click() {\n      huePubSub.publish('assist.clickHBaseItem', this);\n    }\n  }, {\n    key: \"dblClick\",\n    value: function dblClick() {\n      huePubSub.publish('assist.dblClickHBaseItem', this);\n    }\n  }]);\n}();\nexport default AssistHBaseEntry;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport { withLocalStorage } from 'utils/storageUtils';\nvar AssistInnerPanel = /*#__PURE__*/_createClass(\n/**\n * @param {Object} options\n * @param {string} options.type\n * @param {number} options.minHeight\n * @param {string} options.icon\n * @param {boolean} [options.rightAlignIcon] - Default false\n * @param {boolean} [options.visible]\n * @param {Object} panelData - component data\n * @constructor\n */\nfunction AssistInnerPanel(options) {\n  _classCallCheck(this, AssistInnerPanel);\n  var self = this;\n  self.minHeight = options.minHeight;\n  self.icon = options.icon;\n  self.type = options.type;\n  self.name = options.name;\n  self.panelData = options.panelData;\n  self.rightAlignIcon = !!options.rightAlignIcon;\n  self.iconSvg = options.iconSvg;\n  self.visible = ko.observable(!!options.visible);\n  withLocalStorage('assist.showingPanel_' + self.type, self.visible, false, options.visible);\n  self.templateName = 'assist-' + (['solr', 'kafka'].indexOf(self.type) !== -1 ? 'sql' : self.type) + '-inner-panel';\n  var loadWhenVisible = function loadWhenVisible() {\n    if (!self.visible()) {\n      return;\n    }\n    if (self.type === 'documents' && !self.panelData.activeEntry().loaded()) {\n      self.panelData.activeEntry().load();\n    }\n  };\n  self.visible.subscribe(loadWhenVisible);\n  loadWhenVisible();\n});\nexport default AssistInnerPanel;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nimport { findBrowserConnector, getRootFilePath } from 'config/hueConfig';\nvar PAGE_SIZE = 100;\nvar TYPE_SPECIFICS = {\n  adls: {\n    apiHelperFetchFunction: 'fetchAdlsPath',\n    dblClickPubSubId: 'assist.dblClickAdlsItem'\n  },\n  abfs: {\n    apiHelperFetchFunction: 'fetchAbfsPath',\n    dblClickPubSubId: 'assist.dblClickAbfsItem'\n  },\n  hdfs: {\n    apiHelperFetchFunction: 'fetchHdfsPath',\n    dblClickPubSubId: 'assist.dblClickHdfsItem'\n  },\n  s3: {\n    apiHelperFetchFunction: 'fetchS3Path',\n    dblClickPubSubId: 'assist.dblClickS3Item'\n  },\n  gs: {\n    apiHelperFetchFunction: 'fetchGSPath',\n    dblClickPubSubId: 'assist.dblClickGSItem'\n  },\n  ofs: {\n    apiHelperFetchFunction: 'fetchOfsPath',\n    dblClickPubSubId: 'assist.dblClickOfsItem'\n  }\n};\nvar AssistStorageEntry = /*#__PURE__*/function () {\n  /**\n   * @param {object} options\n   * @param {object} options.definition\n   * @param {string} options.definition.name\n   * @param {string} options.definition.type (file, dir)\n   * @param {string} options.source - The storage source\n   * @param {string} [options.originalType] - The original storage type ('adl', 's3a')\n   * @param {AssistStorageEntry} options.parent\n   * @constructor\n   */\n  function AssistStorageEntry(options) {\n    _classCallCheck(this, AssistStorageEntry);\n    var self = this;\n    self.source = options.source;\n    self.originalType = options.originalType;\n    self.definition = options.definition;\n    self.parent = options.parent;\n    self.rootPath = options.rootPath || '';\n    self.path = '';\n    if (self.parent !== null) {\n      self.path = self.parent.path;\n      if (self.parent.path !== '/' && !/\\/$/.test(self.path)) {\n        self.path += '/';\n      }\n    }\n    self.path += self.definition.name;\n    self.abfsPath = (/^\\//.test(self.path) ? 'abfs:/' : 'abfs://') + self.path;\n    self.currentPage = 1;\n    self.hasMorePages = true;\n    self.preview = ko.observable();\n    self.contextPopoverVisible = ko.observable(false);\n    self.filter = ko.observable('').extend({\n      rateLimit: 400\n    });\n    self.filter.subscribe(function () {\n      self.currentPage = 1;\n      self.hasMorePages = true;\n      self.loadEntries();\n    });\n    self.entries = ko.observableArray([]);\n    self.loaded = false;\n    self.loading = ko.observable(false);\n    self.loadingMore = ko.observable(false);\n    self.errorText = ko.observable();\n    self.hasErrors = ko.observable(false);\n    self.open = ko.observable(false);\n    self.open.subscribe(function (newValue) {\n      if (newValue && self.entries().length === 0) {\n        if (self.definition.type === 'dir') {\n          self.loadEntries();\n        } else {\n          self.loadPreview();\n        }\n      }\n    });\n    self.hasEntries = ko.pureComputed(function () {\n      return self.entries().length > 0;\n    });\n  }\n  return _createClass(AssistStorageEntry, [{\n    key: \"dblClick\",\n    value: function dblClick() {\n      huePubSub.publish(TYPE_SPECIFICS[self.source.type].dblClickPubSubId, this);\n    }\n  }, {\n    key: \"loadPreview\",\n    value: function loadPreview() {\n      var self = this;\n      self.loading(true);\n      apiHelper.fetchStoragePreview({\n        path: self.getHierarchy(),\n        type: self.source.type,\n        silenceErrors: true\n      }).done(function (data) {\n        self.preview(data);\n      }).fail(function (errorText) {\n        self.hasErrors(true);\n        self.errorText(errorText);\n      }).always(function () {\n        self.loading(false);\n      });\n    }\n  }, {\n    key: \"loadEntries\",\n    value: function loadEntries(callback) {\n      var self = this;\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      self.hasErrors(false);\n      apiHelper[TYPE_SPECIFICS[self.source.type].apiHelperFetchFunction]({\n        pageSize: PAGE_SIZE,\n        page: self.currentPage,\n        filter: self.filter().trim() ? self.filter() : undefined,\n        pathParts: self.getHierarchy(),\n        rootPath: self.rootPath,\n        successCallback: function successCallback(data) {\n          self.hasMorePages = data.page.next_page_number > self.currentPage;\n          var filteredFiles = data.files.filter(function (file) {\n            return file.name !== '.' && file.name !== '..';\n          });\n          self.entries(filteredFiles.map(function (file) {\n            return new AssistStorageEntry({\n              originalType: self.originalType,\n              rootPath: self.rootPath,\n              source: self.source,\n              definition: file,\n              parent: self\n            });\n          }));\n          self.loaded = true;\n          self.loading(false);\n          self.hasErrors(!!data.s3_listing_not_allowed); // Special case where we want errors inline instead of the default popover. We don't want errorCallback handling\n          self.errorText(data.s3_listing_not_allowed);\n          if (callback) {\n            callback();\n          }\n        },\n        errorCallback: function errorCallback(errorText) {\n          self.hasErrors(true);\n          self.errorText(errorText);\n          self.loading(false);\n          if (callback) {\n            callback();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"goHome\",\n    value: function goHome() {\n      huePubSub.publish('assist.storage.go.home');\n    }\n  }, {\n    key: \"loadDeep\",\n    value: function loadDeep(folders, callback) {\n      var self = this;\n      if (folders.length === 0) {\n        callback(self);\n        return;\n      }\n      if (this.rootPath) {\n        var relativeFolders = folders.join('/').replace(new RegExp('^' + this.rootPath, ''), '');\n        folders = relativeFolders.split('/');\n      }\n      var nextName = folders.shift();\n      var loadedPages = 0;\n      var findNextAndLoadDeep = function findNextAndLoadDeep() {\n        var foundEntry = self.entries().filter(function (entry) {\n          return entry.definition.name === nextName;\n        });\n        var passedAlphabetically = self.entries().length > 0 && self.entries()[self.entries().length - 1].definition.name.localeCompare(nextName) > 0;\n        if (foundEntry.length === 1) {\n          foundEntry[0].loadDeep(folders, callback);\n        } else if (!passedAlphabetically && self.hasMorePages && loadedPages < 50) {\n          loadedPages++;\n          self.fetchMore(findNextAndLoadDeep, function () {\n            callback(self);\n          });\n        } else {\n          callback(self);\n        }\n      };\n      if (!self.loaded) {\n        self.loadEntries(findNextAndLoadDeep);\n      } else {\n        findNextAndLoadDeep();\n      }\n    }\n  }, {\n    key: \"getHierarchy\",\n    value: function getHierarchy() {\n      var self = this;\n      var parts = [];\n      var entry = self;\n      while (entry) {\n        if (!entry.parent && entry.definition.name) {\n          var rootParts = entry.definition.name.split('/').filter(Boolean);\n          rootParts.reverse();\n          parts = parts.concat(rootParts);\n        } else if (entry.definition.name) {\n          parts.push(entry.definition.name);\n        }\n        entry = entry.parent;\n      }\n      parts.reverse();\n      return parts;\n    }\n  }, {\n    key: \"toggleOpen\",\n    value: function toggleOpen(data, event) {\n      var self = this;\n      if (self.definition.type === 'file') {\n        var browserTarget = event.ctrlKey || event.metaKey || event.which === 2 ? '_blank' : undefined;\n        huePubSub.publish('open.filebrowserlink', {\n          pathPrefix: '/filebrowser/view=',\n          decodedPath: self.definition.path,\n          browserTarget: browserTarget\n        });\n        return;\n      }\n      self.open(!self.open());\n      if (self.definition.name === '..') {\n        if (self.parent.parent) {\n          huePubSub.publish('assist.selectStorageEntry', self.parent.parent);\n        }\n      } else {\n        huePubSub.publish('assist.selectStorageEntry', self);\n      }\n    }\n  }, {\n    key: \"fetchMore\",\n    value: function fetchMore(_successCallback, _errorCallback) {\n      var self = this;\n      if (!self.hasMorePages || self.loadingMore()) {\n        return;\n      }\n      self.currentPage++;\n      self.loadingMore(true);\n      self.hasErrors(false);\n      apiHelper[TYPE_SPECIFICS[self.source.type].apiHelperFetchFunction]({\n        pageSize: PAGE_SIZE,\n        page: self.currentPage,\n        filter: self.filter().trim() ? self.filter() : undefined,\n        pathParts: self.getHierarchy(),\n        successCallback: function successCallback(data) {\n          self.hasMorePages = data.page.next_page_number > self.currentPage;\n          var filteredFiles = data.files.filter(function (file) {\n            return file.name !== '.' && file.name !== '..';\n          });\n          self.entries(self.entries().concat(filteredFiles.map(function (file) {\n            return new AssistStorageEntry({\n              originalType: self.originalType,\n              rootPath: self.rootPath,\n              source: self.source,\n              definition: file,\n              parent: self\n            });\n          })));\n          self.loadingMore(false);\n          if (_successCallback) {\n            _successCallback();\n          }\n        },\n        errorCallback: function errorCallback() {\n          self.hasErrors(true);\n          if (_errorCallback) {\n            _errorCallback();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"showContextPopover\",\n    value: function showContextPopover(entry, event, positionAdjustment) {\n      var $source = $(event.target);\n      var offset = $source.offset();\n      entry.contextPopoverVisible(true);\n      if (positionAdjustment) {\n        offset.left += positionAdjustment.left;\n        offset.top += positionAdjustment.top;\n      }\n      huePubSub.publish('context.popover.show', {\n        data: {\n          type: 'storageEntry',\n          storageEntry: entry\n        },\n        pinEnabled: true,\n        orientation: 'right',\n        source: {\n          element: event.target,\n          left: offset.left,\n          top: offset.top - 3,\n          right: offset.left + $source.width() + 3,\n          bottom: offset.top + $source.height() - 3\n        }\n      });\n      huePubSub.subscribeOnce('context.popover.hidden', function () {\n        entry.contextPopoverVisible(false);\n      });\n    }\n  }, {\n    key: \"openInImporter\",\n    value: function openInImporter() {\n      huePubSub.publish('open.in.importer', this.definition.path);\n    }\n\n    /**\n     * Helper function to create an assistStorageEntry. It will load the entries starting from the root up until the\n     * path or stop when a part is not found.\n     *\n     * @param {string} path - The path, can include the type i.e. '/tmp' or 's3:/tmp'.\n     * @param {string} [type] - Optional type, if not specified here or in the path 'hdfs' will be used.\n     * @return {JQueryPromise<AssistStorageEntry>}\n     */\n  }], [{\n    key: \"getEntry\",\n    value: function getEntry(path, type) {\n      var deferred = $.Deferred();\n      var typeMatch = path.match(/^([^:]+):\\/(\\/.*)\\/?/i);\n      type = typeMatch ? typeMatch[1] : type || 'hdfs';\n      type = type.replace(/s3.*/i, 's3');\n      type = type.replace(/adl.*/i, 'adls');\n      type = type.replace(/abfs.*/i, 'abfs');\n      type = type.replace(/ofs.*/i, 'ofs');\n\n      // TODO: connector.id for browser connectors\n      var connector = findBrowserConnector(function (connector) {\n        return connector.type === type;\n      });\n      if (connector) {\n        var rootPath = getRootFilePath(connector);\n        var rootEntry = new AssistStorageEntry({\n          source: connector,\n          rootPath: rootPath,\n          originalType: typeMatch && typeMatch[1],\n          definition: {\n            name: rootPath,\n            type: 'dir'\n          },\n          parent: null,\n          apiHelper: apiHelper\n        });\n        if (type === 'abfs' || type === 'adls') {\n          // ABFS / ADLS can have domain name in path. To prevent regression with s3 which allow periods in bucket name handle separately.\n          var azureMatch = path.match(/^([^:]+):\\/(\\/((\\w+)@)?[\\w]+([\\-\\.]{1}\\w+)*\\.[\\w]*)?(\\/.*)?\\/?/i);\n          path = (azureMatch ? azureMatch[6] || '' : path).replace(/(?:^\\/)|(?:\\/$)/g, '').split('/');\n          if (azureMatch && azureMatch[4]) {\n            path.unshift(azureMatch[4]);\n          }\n        } else {\n          path = (typeMatch ? typeMatch[2] : path).replace(/(?:^\\/)|(?:\\/$)/g, '').split('/');\n        }\n        rootEntry.loadDeep(path, deferred.resolve);\n      } else {\n        deferred.reject();\n      }\n      return deferred.promise();\n    }\n  }]);\n}();\nexport default AssistStorageEntry;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport AssistDbEntry from \"./assistDbEntry\";\nimport AssistDbSource from \"./assistDbSource\";\n\n// TODO: Get rid of\nwindow.AssistDbEntry = AssistDbEntry;\nwindow.AssistDbSource = AssistDbSource;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport var SHOW_LEFT_ASSIST_EVENT = 'left.assist.show';\nexport var SHOW_RIGHT_ASSIST_EVENT = 'right.assist.show';\nexport var BOTH_ASSIST_TOGGLE_EVENT = 'both.assists.toggle';\nexport var ASSIST_IS_DB_PANEL_READY_EVENT = 'assist.is.db.panel.ready';\nexport var ASSIST_DB_PANEL_IS_READY_EVENT = 'assist.db.panel.is.ready';\nexport var ASSIST_GET_SOURCE_EVENT = 'assist.get.source';\nexport var ASSIST_SET_SOURCE_EVENT = 'assist.set.source';\nexport var ASSIST_GET_DATABASE_EVENT = 'assist.get.database';\nexport var ASSIST_SET_DATABASE_EVENT = 'assist.set.database';\nexport var ASSIST_DB_HIGHLIGHT_EVENT = 'assist.db.highlight';\nexport var ASSIST_DOC_HIGHLIGHT_EVENT = 'assist.doc.highlight';\nexport var ASSIST_ACTIVE_DB_CHANGED_EVENT = 'assist.active.db.changed.event';\nexport var ASSIST_SHOW_DOC_EVENT = 'assist.show.documents';\nexport var ASSIST_SHOW_SQL_EVENT = 'assist.show.sql';\nexport var ASSIST_SHOW_SOLR_EVENT = 'assist.show.solr';\nexport var ASSIST_LANG_REF_SHOW_TOPIC_EVENT = 'assist.lang.ref.show.topic';\nexport var ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT = 'assist.lang.ref.panel.show.topic';","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport AssistDbEntry from \"./assistDbEntry\";\nimport AssistDbSource from \"./assistDbSource\";\nimport componentUtils from \"../componentUtils\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport huePubSub from 'utils/huePubSub';\nimport { TEMPLATE, AssistantUtils } from \"./ko.assistEditorContextPanel\";\nimport { findDashboardConnector } from 'config/hueConfig';\nvar AssistDashboardPanel = /*#__PURE__*/_createClass(function AssistDashboardPanel() {\n  var _this = this;\n  _classCallCheck(this, AssistDashboardPanel);\n  this.isSolr = ko.observable(true);\n  this.showRisks = ko.observable(false);\n  this.filter = {\n    querySpec: ko.observable({\n      query: '',\n      facets: {},\n      text: []\n    }).extend({\n      rateLimit: 300\n    })\n  };\n  this.sourceType = ko.observable('solr');\n  this.activeTables = ko.observableArray();\n  this.filteredTables = AssistantUtils.getFilteredTablesPureComputed(this);\n  this.someLoading = ko.pureComputed(function () {\n    return _this.activeTables().some(function (table) {\n      return table.loading() || !table.hasEntries() && !table.hasErrors();\n    });\n  });\n  var navigationSettings = {\n    showStats: true,\n    rightAssist: true\n  };\n  var i18n = {};\n  huePubSub.subscribe('set.active.dashboard.collection', function (collection) {\n    var collectionName = collection.name();\n    if (!collectionName) {\n      return;\n    }\n    _this.sourceType = ko.observable(collection.engine());\n    var connector = findDashboardConnector(function (connector) {\n      return connector.id === collection.engine();\n    });\n    var assistDbSource = new AssistDbSource({\n      i18n: i18n,\n      initialNamespace: collection.activeNamespace,\n      initialCompute: collection.activeCompute,\n      type: collection.engine(),\n      name: collection.engine(),\n      connector: connector,\n      nonSqlType: true,\n      navigationSettings: navigationSettings\n    });\n    var fakeParentName = collectionName.indexOf('.') > -1 ? collectionName.split('.')[0] : 'default';\n    var sourceType = collection.source() === 'query' ? collection.engine() + '-query' : collection.engine();\n    dataCatalog.getEntry({\n      namespace: collection.activeNamespace,\n      compute: collection.activeCompute,\n      connector: {\n        id: sourceType\n      },\n      // TODO: Use connectors in assist dashboard panel\n      path: [fakeParentName],\n      definition: {\n        type: 'database'\n      }\n    }).then(function (fakeDbCatalogEntry) {\n      var assistFakeDb = new AssistDbEntry(fakeDbCatalogEntry, null, assistDbSource, _this.filter, i18n, navigationSettings);\n      dataCatalog.getEntry({\n        namespace: collection.activeNamespace,\n        compute: collection.activeCompute,\n        connector: {\n          id: sourceType\n        },\n        // TODO: Use connectors in assist dashboard panel\n        path: [fakeParentName, collectionName.indexOf('.') > -1 ? collectionName.split('.')[1] : collectionName],\n        definition: {\n          type: 'table'\n        }\n      }).then(function (collectionCatalogEntry) {\n        var collectionEntry = new AssistDbEntry(collectionCatalogEntry, assistFakeDb, assistDbSource, _this.filter, i18n, navigationSettings);\n        _this.activeTables([collectionEntry]);\n        if (!collectionEntry.loaded && !collectionEntry.hasErrors() && !collectionEntry.loading()) {\n          collectionEntry.loadEntries(function () {\n            collectionEntry.toggleOpen();\n          });\n        }\n      });\n    });\n    _this.autocompleteFromEntries = function (nonPartial, partial) {\n      var added = {};\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      this.activeTables().forEach(function (table) {\n        if (!added[table.catalogEntry.name] && table.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n          added[table.catalogEntry.name] = true;\n          result.push(nonPartial + partial + table.catalogEntry.name.substring(partial.length));\n        }\n        table.entries().forEach(function (col) {\n          if (!added[col.catalogEntry.name] && col.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n            added[col.catalogEntry.name] = true;\n            result.push(nonPartial + partial + col.catalogEntry.name.substring(partial.length));\n          }\n        });\n      });\n      return result;\n    };\n  });\n});\ncomponentUtils.registerStaticComponent('assist-dashboard-panel', AssistDashboardPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_DB_HIGHLIGHT_EVENT, ASSIST_DB_PANEL_IS_READY_EVENT, ASSIST_GET_DATABASE_EVENT, ASSIST_GET_SOURCE_EVENT, ASSIST_IS_DB_PANEL_READY_EVENT, ASSIST_SET_DATABASE_EVENT, ASSIST_SET_SOURCE_EVENT, ASSIST_SHOW_SOLR_EVENT, ASSIST_SHOW_SQL_EVENT, SHOW_LEFT_ASSIST_EVENT } from \"./events\";\nimport { ASSIST_KEY_COMPONENT } from \"./ko.assistKey\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport { CONFIG_REFRESHED_TOPIC } from 'config/events';\nimport { filterEditorConnectors, findBrowserConnector, findDashboardConnector, findEditorConnector } from 'config/hueConfig';\nimport AssistDbSource from \"./assistDbSource\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nvar ASSIST_TABLE_TEMPLATES = \"\\n  <script type=\\\"text/html\\\" id=\\\"assist-no-database-entries\\\">\\n    <ul class=\\\"assist-tables\\\">\\n      <li>\\n        <span class=\\\"assist-no-entries\\\">\".concat(I18n('No entries found'), \"</span>\\n      </li>\\n    </ul>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-no-table-entries\\\">\\n    <ul>\\n      <li>\\n        <span class=\\\"assist-no-entries\\\">\").concat(I18n('The table has no columns'), \"</span>\\n      </li>\\n    </ul>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"sql-context-items\\\">\\n    <!-- ko if: typeof catalogEntry !== 'undefined' -->\\n      <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function (data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\\\"><i class=\\\"fa fa-fw fa-info\\\"></i> \").concat(I18n('Show details'), \"</a></li>\\n      <!-- ko switch: sourceType -->\\n      <!-- ko case: 'solr' -->\\n        <!-- ko if: catalogEntry.isTableOrView() -->\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: openInIndexer\\\"><i class=\\\"fa fa-fw fa-table\\\"></i> \").concat(I18n('Open in Browser'), \"</a></li>\\n        <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function() { explore(true); }\\\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> \").concat(I18n('Open in Dashboard'), \"</a></li>\\n        <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko case: $default -->\\n        <!-- ko if: !catalogEntry.isDatabase() && $currentApp() === 'editor' -->\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: dblClick\\\"><i class=\\\"fa fa-fw fa-paste\\\"></i> \").concat(I18n('Insert at cursor'), \"</a></li>\\n        <!-- /ko -->\\n        <!-- ko if: catalogEntry.path.length <=2 -->\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: openInMetastore\\\"><i class=\\\"fa fa-fw fa-table\\\"></i> \").concat(I18n('Open in Browser'), \"</a></li>\\n        <!-- /ko -->\\n        <!-- ko if: catalogEntry.isTableOrView() -->\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function() { huePubSub.publish('query.and.watch', {'url': '/notebook/browse/' + databaseName + '/' + tableName + '/', sourceType: sourceType}); }\\\"><i class=\\\"fa fa-fw fa-code\\\"></i> \").concat(I18n('Open in Editor'), \"</a></li>\\n        <!-- ko if: window.HAS_SQL_DASHBOARD -->\\n        <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function() { explore(false); }\\\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> \").concat(I18n('Open in Dashboard'), \"</a></li>\\n        <!-- /ko -->\\n        <!-- /ko -->\\n        <!-- ko if: window.ENABLE_QUERY_BUILDER && catalogEntry.isColumn() && $currentApp() === 'editor' -->\\n        <li class=\\\"divider\\\"></li>\\n        <!-- ko template: { name: 'query-builder-context-items' } --><!-- /ko -->\\n        <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- /ko -->\\n    <!-- /ko -->\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"query-builder-context-items\\\">\\n    <li data-bind=\\\"contextSubMenu: '.hue-context-sub-menu'\\\">\\n      <a href=\\\"javascript:void(0);\\\"><i class=\\\"fa fa-fw fa-magic\\\"></i> \").concat(I18n('Project'), \"<i class=\\\"sub-icon fa fa-fw fa-chevron-right\\\"></i></a>\\n      <ul class=\\\"hue-context-menu hue-context-sub-menu\\\">\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Select', 'Project', '{0}', false, false); }\\\">Select</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Select distinct', 'Project', '{0}', false, false); }\\\">Select distinct</a></li>\\n      </ul>\\n    </li>\\n\\n    <li data-bind=\\\"contextSubMenu: '.hue-context-sub-menu'\\\">\\n      <a href=\\\"javascript:void(0);\\\"><i class=\\\"fa fa-fw fa-magic\\\"></i> \").concat(I18n('Aggregate'), \"<i class=\\\"sub-icon fa fa-fw fa-chevron-right\\\"></i></a>\\n      <ul class=\\\"hue-context-menu hue-context-sub-menu\\\">\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Count', 'Aggregate', 'COUNT({0}.{1}) as count_{1}', false, false); }\\\">Count</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Count distinct', 'Aggregate', 'COUNT(DISTINCT {0}.{1}) as distinct_count_{1}', false, false); }\\\">Count distinct</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Sum', 'Aggregate', 'SUM({0}.{1}) as sum_{1}', false, false); }\\\">Sum</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Minimum', 'Aggregate', 'MIN({0}.{1}) as min_{1}', false, false); }\\\">Minimum</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Maximum', 'Aggregate', 'MAX({0}.{1}) as max_{1}', false, false); }\\\">Maximum</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Average', 'Aggregate', 'AVG({0}.{1}) as avg_{1}', false, false); }\\\">Average</a></li>\\n      </ul>\\n    </li>\\n\\n    <li data-bind=\\\"contextSubMenu: '.hue-context-sub-menu'\\\">\\n      <a href=\\\"javascript:void(0);\\\"><i class=\\\"fa fa-fw fa-magic\\\"></i> \").concat(I18n('Filter'), \"<i class=\\\"sub-icon fa fa-fw fa-chevron-right\\\"></i></a>\\n      <ul class=\\\"hue-context-menu hue-context-sub-menu\\\">\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { var isNotNullRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Is not null'); if (isNotNullRule.length) { isNotNullRule.attr('rule', 'Is null'); isNotNullRule.find('.rule').text('Is null'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Is null', 'Filter', '{0}.{1} = null', false, false); } }\\\">Is null</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { var isNullRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Is null'); if (isNullRule.length) { isNullRule.attr('rule', 'Is not null'); isNullRule.find('.rule').text('Is not null'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Is not null', 'Filter', '{0}.{1} != null', false, false); } }\\\">Is not null</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Equal to', 'Filter', '{0}.{1} = {2}', true, true); }\\\">Equal to</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Not equal to', 'Filter', '{0}.{1} != {2}', true, true); }\\\">Not equal to</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Greater than', 'Filter', '{0}.{1} > {2}', true, false) }\\\">Greater than</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Less than', 'Filter', '{0}.{1} < {2}', true, false); }\\\">Less than</a></li>\\n      </ul>\\n    </li>\\n    <li data-bind=\\\"contextSubMenu: '.hue-context-sub-menu'\\\">\\n      <a href=\\\"javascript:void(0);\\\"><i class=\\\"fa fa-fw fa-magic\\\"></i> \").concat(I18n('Order'), \"<i class=\\\"sub-icon fa fa-fw fa-chevron-right\\\"></i></a>\\n      <ul class=\\\"hue-context-menu hue-context-sub-menu\\\">\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { var descendingRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Descending'); if (descendingRule.length) { descendingRule.attr('rule', 'Ascending'); descendingRule.find('.rule').text('Ascending'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Ascending', 'Order', '{0}.{1} ASC', false, false); } }\\\">Ascending</a></li>\\n        <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { var ascendingRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Ascending'); if (ascendingRule.length) { ascendingRule.attr('rule', 'Descending'); ascendingRule.find('.rule').text('Descending'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Descending', 'Order', '{0}.{1} DESC', false, false); } }\\\">Descending</a></li>\\n      </ul>\\n    </li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-table-entry\\\">\\n    <li class=\\\"assist-table\\\" data-bind=\\\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visibleOnHover: { override: statsVisible() || navigationSettings.rightAssist, selector: '.table-actions' }\\\">\\n      <div class=\\\"assist-actions table-actions\\\" data-bind=\\\"css: { 'assist-actions-left': navigationSettings.rightAssist }\\\" style=\\\"opacity: 0\\\">\\n        <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\\\"><i class=\\\"fa fa-fw fa-info\\\" title=\\\"\").concat(I18n('Show details'), \"\\\"></i></a>\\n        <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.openItem, click: openItem\\\"><i class=\\\"fa fa-long-arrow-right\\\" title=\\\"\").concat(I18n('Open'), \"\\\"></i></a>\\n      </div>\\n      <a class=\\\"assist-entry assist-table-link\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }, draggableText: { text: editorText,  meta: { connector: catalogEntry.getConnector(), type: 'sql', isView: catalogEntry.isView(), table: tableName, database: databaseName } }\\\">\\n        <i class=\\\"fa fa-fw muted valign-middle\\\" data-bind=\\\"css: iconClass\\\"></i>\\n        <span class=\\\"highlightable\\\" data-bind=\\\"text: catalogEntry.getDisplayName(navigationSettings.rightAssist), css: { 'highlight': highlight }\\\"></span>\\n      </a>\\n      <div class=\\\"center assist-spinner\\\" data-bind=\\\"visible: loading() && open()\\\"><i class=\\\"fa fa-spinner fa-spin\\\"></i></div>\\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\\n    </li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-column-entry\\\">\\n    <li data-bind=\\\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visible: ! hasErrors(), visibleOnHover: { childrenOnly: true, override: statsVisible, selector: catalogEntry.isView() ? '.table-actions' : '.column-actions' }, css: { 'assist-table': catalogEntry.isView(), 'assist-column': catalogEntry.isField() }\\\">\\n      <div class=\\\"assist-actions column-actions\\\" data-bind=\\\"css: { 'assist-actions-left': navigationSettings.rightAssist }\\\" style=\\\"opacity: 0\\\">\\n        <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\\\"><i class=\\\"fa fa-fw fa-info\\\" title=\\\"\").concat(I18n('Show details'), \"\\\"></i></a>\\n      </div>\\n      <!-- ko if: expandable -->\\n      <a class=\\\"assist-entry assist-field-link\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\\\">\\n        <span class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName }, text: catalogEntry.getDisplayName(), draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\\\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\\n      </a>\\n      <!-- /ko -->\\n      <!-- ko ifnot: expandable -->\\n      <div class=\\\"assist-entry assist-field-link default-cursor\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"event: { dblclick: dblClick }, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\\\">\\n        <span class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName}, text: catalogEntry.getDisplayName(), draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\\\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\\n      </div>\\n      <!-- /ko -->\\n      <div class=\\\"center assist-spinner\\\" data-bind=\\\"visible: loading\\\"><i class=\\\"fa fa-spinner fa-spin\\\"></i></div>\\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\\n    </li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-column-entry-assistant\\\">\\n    <li data-bind=\\\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visible: ! hasErrors(), visibleOnHover: { childrenOnly: true, override: statsVisible, selector: catalogEntry.isView() ? '.table-actions' : '.column-actions' }, css: { 'assist-table': catalogEntry.isView(), 'assist-column': catalogEntry.isField() }\\\">\\n      <div class=\\\"assist-actions column-actions assist-actions-left\\\" style=\\\"opacity: 0\\\">\\n        <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\\\"><i class=\\\"fa fa-fw fa-info\\\" title=\\\"\").concat(I18n('Show details'), \"\\\"></i></a>\\n      </div>\\n      <!-- ko if: expandable -->\\n      <a class=\\\"assist-entry assist-field-link assist-field-link-dark assist-entry-left-action assist-ellipsis\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }\\\">\\n        <span data-bind=\\\"text: catalogEntry.getType()\\\" class=\\\"muted pull-right margin-right-20\\\"></span>\\n        <span class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': highlight}, attr: { 'column': columnName, 'table': tableName, 'database': databaseName }, text: catalogEntry.name, draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\\\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\\n      </a>\\n      <!-- /ko -->\\n      <!-- ko ifnot: expandable -->\\n      <div class=\\\"assist-entry assist-field-link assist-field-link-dark default-cursor assist-ellipsis\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"event: { dblclick: dblClick }, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\\\">\\n        <span data-bind=\\\"text: catalogEntry.getType()\\\" class=\\\"muted pull-right margin-right-20\\\"></span>\\n        <span class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName}, text: catalogEntry.name, draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\\\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\\n      </div>\\n      <!-- /ko -->\\n      <div class=\\\"center assist-spinner\\\" data-bind=\\\"visible: loading\\\"><i class=\\\"fa fa-spinner fa-spin\\\"></i></div>\\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\\n    </li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-db-entries\\\">\\n    <!-- ko if: ! hasErrors() && hasEntries() && ! loading() && filteredEntries().length == 0 -->\\n    <ul class=\\\"assist-tables\\\">\\n      <li class=\\\"assist-entry assist-no-entries\\\"><!-- ko if: catalogEntry.isTableOrView() -->\").concat(I18n('No columns found'), \"<!--/ko--><!-- ko if: catalogEntry.isDatabase() -->\").concat(I18n('No tables found'), \"<!--/ko--><!-- ko if: catalogEntry.isField() -->\").concat(I18n('No results found'), \"<!--/ko--></li>\\n    </ul>\\n    <!-- /ko -->\\n    <!-- ko if: ! hasErrors() && hasEntries() && ! loading() && filteredEntries().length > 0 -->\\n    <ul class=\\\"database-tree\\\" data-bind=\\\"foreachVisible: { data: filteredEntries, minHeight: navigationSettings.rightAssist ? 22 : 23, container: '.assist-db-scrollable', skipScrollEvent: navigationSettings.rightAssist, usePreloadBackground: true }, css: { 'assist-tables': catalogEntry.isDatabase() }\\\">\\n      <!-- ko template: { if: catalogEntry.isTableOrView(), name: 'assist-table-entry' } --><!-- /ko -->\\n      <!-- ko if: navigationSettings.rightAssist -->\\n        <!-- ko template: { ifnot: catalogEntry.isTableOrView(), name: 'assist-column-entry-assistant' } --><!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko ifnot: navigationSettings.rightAssist -->\\n        <!-- ko template: { ifnot: catalogEntry.isTableOrView(), name: 'assist-column-entry' } --><!-- /ko -->\\n      <!-- /ko -->\\n    </ul>\\n    <!-- /ko -->\\n    <!-- ko template: { if: ! hasErrors() && ! hasEntries() && ! loading() && (catalogEntry.isTableOrView()), name: 'assist-no-table-entries' } --><!-- /ko -->\\n    <!-- ko template: { if: ! hasErrors() && ! hasEntries() && ! loading() && catalogEntry.isDatabase(), name: 'assist-no-database-entries' } --><!-- /ko -->\\n    <!-- ko if: hasErrors -->\\n    <ul class=\\\"assist-tables\\\">\\n      <!-- ko if: catalogEntry.isTableOrView() -->\\n      <li class=\\\"assist-errors\\\">\").concat(I18n('Error loading columns.'), \"</li>\\n      <!-- /ko -->\\n      <!-- ko if: catalogEntry.isField() -->\\n      <li class=\\\"assist-errors\\\">\").concat(I18n('Error loading fields.'), \"</li>\\n      <!-- /ko -->\\n    </ul>\\n    <!-- /ko -->\\n  </script>\\n\");\nvar TEMPLATE = ASSIST_TABLE_TEMPLATES + \"\\n  <script type=\\\"text/html\\\" id=\\\"assist-database-actions\\\">\\n    <div class=\\\"assist-actions database-actions\\\" style=\\\"opacity: 0\\\">\\n      <!-- ko if: sourceType === 'hive' || sourceType === 'impala' -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.showStats, popoverOnHover: function (data, event) { showContextPopover(data, event); }, css: { 'blue': statsVisible }\\\"><i class=\\\"fa fa-fw fa-info\\\" title=\\\"\".concat(I18n('Show details'), \"\\\"></i></a>\\n      <!-- /ko -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: navigationSettings.openItem, click: openItem\\\"><i class=\\\"fa fa-long-arrow-right\\\" title=\\\"\").concat(I18n('Open'), \"\\\"></i></a>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"collection-title-context-items\\\">\\n    <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"hueLink: '/indexer'\\\"><i class=\\\"fa fa-fw fa-table\\\"></i> \").concat(I18n('Open in Browser'), \"</a></li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-database-entry\\\">\\n    <li class=\\\"assist-table\\\" data-bind=\\\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visibleOnHover: { selector: '.database-actions' }\\\">\\n      <!-- ko template: { name: 'assist-database-actions' } --><!-- /ko -->\\n      <a class=\\\"assist-table-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.selectedDatabase($data); $parent.selectedDatabaseChanged(); }, attr: {'title': catalogEntry.getTitle(true) }, draggableText: { text: editorText,  meta: { connector: catalogEntry.getConnector(), type: 'sql', database: databaseName } }\\\"><i class=\\\"fa fa-fw fa-database muted valign-middle\\\"></i> <span class=\\\"highlightable\\\" data-bind=\\\"text: catalogEntry.name, css: { 'highlight': highlight() }\\\"></span></a>\\n    </li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-db-breadcrumb\\\">\\n    <div class=\\\"assist-flex-header assist-breadcrumb\\\">\\n      <!-- ko if: selectedSource() -->\\n      <!-- ko if: selectedSource().selectedNamespace() -->\\n      <!-- ko if: selectedSource().selectedNamespace().selectedDatabase() -->\\n      <a data-bind=\\\"click: back, appAwareTemplateContextMenu: { template: 'sql-context-items', viewModel: selectedSource().selectedNamespace().selectedDatabase() }\\\">\\n        <i class=\\\"fa fa-chevron-left assist-breadcrumb-back\\\" ></i>\\n        <i class=\\\"fa assist-breadcrumb-text\\\" data-bind=\\\"css: { 'fa-server': nonSqlType, 'fa-database': !nonSqlType }\\\"></i>\\n        <span class=\\\"assist-breadcrumb-text\\\" data-bind=\\\"text: breadcrumb, attr: {'title': breadcrumbTitle }\\\"></span>\\n      </a>\\n      <!-- /ko -->\\n      <!-- ko ifnot: selectedSource().selectedNamespace().selectedDatabase() -->\\n      <!-- ko if: window.HAS_MULTI_CLUSTER-->\\n      <a data-bind=\\\"click: back\\\">\\n        <i class=\\\"fa fa-chevron-left assist-breadcrumb-back\\\"></i>\\n        <i class=\\\"fa fa-snowflake-o assist-breadcrumb-text\\\"></i>\\n        <span class=\\\"assist-breadcrumb-text\\\" data-bind=\\\"text: breadcrumb, attr: {'title': breadcrumbTitle }\\\"></span>\\n      </a>\\n      <!-- /ko -->\\n      <!-- ko ifnot: window.HAS_MULTI_CLUSTER -->\\n      <a data-bind=\\\"click: back\\\">\\n        <i class=\\\"fa fa-chevron-left assist-breadcrumb-back\\\"></i>\\n        <i class=\\\"fa fa-server assist-breadcrumb-text\\\"></i>\\n        <span class=\\\"assist-breadcrumb-text\\\" data-bind=\\\"text: breadcrumb\\\"></span>\\n      </a>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko ifnot: selectedSource().selectedNamespace() -->\\n      <a data-bind=\\\"click: back\\\">\\n        <i class=\\\"fa fa-chevron-left assist-breadcrumb-back\\\"></i>\\n        <i class=\\\"fa fa-server assist-breadcrumb-text\\\"></i>\\n        <span class=\\\"assist-breadcrumb-text\\\" data-bind=\\\"text: breadcrumb\\\"></span>\\n      </a>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-sql-inner-panel\\\">\\n    <!-- ko template: { if: breadcrumb() !== null, name: 'assist-db-breadcrumb' } --><!-- /ko -->\\n    <!-- ko template: { ifnot: selectedSource, name: 'assist-sources-template' } --><!-- /ko -->\\n    <!-- ko with: selectedSource -->\\n      <!-- ko template: { ifnot: selectedNamespace, name: 'assist-namespaces-template' } --><!-- /ko -->\\n      <!-- ko with: selectedNamespace -->\\n        <!-- ko template: { ifnot: selectedDatabase, name: 'assist-databases-template' } --><!-- /ko -->\\n        <!-- ko with: selectedDatabase -->\\n          <!-- ko template: { name: 'assist-tables-template' } --><!-- /ko -->\\n        <!-- /ko -->\\n      <!-- /ko -->\\n    <!-- /ko -->\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"ask-for-invalidate-title\\\">\\n    &nbsp;<a class=\\\"pull-right pointer close-popover inactive-action\\\">&times;</a>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-namespace-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <!-- ko ifnot: loading -->\\n      <span class=\\\"assist-tables-counter\\\">(<span data-bind=\\\"text: filteredNamespaces().length\\\"></span>)</span>\\n      <!-- ko if: window.HAS_MULTI_CLUSTER -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: triggerRefresh\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\"></i></a>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko if: loading -->\\n      <i class=\\\"fa fa-refresh fa-spin blue\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\"></i>\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-db-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <!-- ko ifnot: loading -->\\n      <span class=\\\"assist-tables-counter\\\">(<span data-bind=\\\"text: filteredEntries().length\\\"></span>)</span>\\n      <!-- ko if: sourceType !== 'solr' && $component.showImporter() -->\\n      <!-- ko if: typeof databaseName !== 'undefined' -->\\n        <a class=\\\"inactive-action\\\" data-bind=\\\"hueLink: importer_url + databaseName + '/?sourceType=' + sourceType + '&namespace=' + assistDbNamespace.namespace.id\\\" title=\\\"\").concat(I18n('Create table'), \"\\\" href=\\\"javascript:void(0)\\\">\\n          <i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('Create table'), \"\\\"></i>\\n        </a>\\n      <!-- /ko -->\\n      <!-- ko if: typeof databases !== 'undefined' -->\\n        <a class=\\\"inactive-action\\\" data-bind=\\\"hueLink: window.HUE_URLS.IMPORTER_CREATE_DATABASE + '/?sourceType=' + sourceType + '&namespace=' + namespace.id\\\" href=\\\"javascript:void(0)\\\">\\n          <i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('Create database'), \"\\\"></i>\\n        </a>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko if: sourceType === 'solr' -->\\n      <a class=\\\"inactive-action\\\" data-bind=\\\"hueLink: '/indexer/importer/prefill/all/index/'\\\" title=\\\"\").concat(I18n('Create index'), \"\\\">\\n        <i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('Create index'), \"\\\"></i>\\n      </a>\\n      <!-- /ko -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: triggerRefresh\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\"></i></a>\\n      <!-- /ko -->\\n      <!-- ko if: loading -->\\n      <i class=\\\"fa fa-refresh fa-spin blue\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\"></i>\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-sources-template\\\">\\n    <div class=\\\"assist-flex-header\\\">\\n      <div class=\\\"assist-inner-header\\\">\\n        \").concat(I18n('Sources'), \"\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\">\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreach: sources\\\">\\n        <li class=\\\"assist-table\\\">\\n          <a class=\\\"assist-table-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.selectedSource($data); }\\\"><i class=\\\"fa fa-fw fa-server muted valign-middle\\\"></i> <span data-bind=\\\"text: name\\\"></span></a>\\n        </li>\\n      </ul>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-namespaces-template\\\">\\n    <div class=\\\"assist-flex-header\\\">\\n      <div class=\\\"assist-inner-header\\\">\\n        \").concat(I18n('Namespaces'), \"\\n        <!-- ko template: 'assist-namespace-header-actions' --><!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-search\\\" data-bind=\\\"visible: hasNamespaces() && !hasErrors()\\\">\\n      <div class=\\\"assist-filter\\\">\\n        <!-- ko component: {\\n            name: 'inline-autocomplete',\\n            params: {\\n              querySpec: filter.querySpec,\\n              facets: [],\\n              knownFacetValues: {},\\n              autocompleteFromEntries: autocompleteFromNamespaces\\n            }\\n          } --><!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-fill assist-db-scrollable\\\" data-bind=\\\"visible: !hasErrors() && !loading() && hasNamespaces(), delayedOverflow\\\">\\n      <!-- ko if: !loading() && filteredNamespaces().length == 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry no-entries\\\">\").concat(I18n('No results found'), \"</li>\\n      </ul>\\n      <!-- /ko -->\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreach: filteredNamespaces\\\">\\n        <li class=\\\"assist-table\\\">\\n          <!-- ko if: status() === 'STARTING' -->\\n          <span class=\\\"assist-table-link\\\" title=\\\"\").concat(I18n('Starting'), \"\\\" data-bind=\\\"tooltip: { placement: 'bottom' }\\\"><i class=\\\"fa fa-fw fa-spinner fa-spin muted valign-middle\\\"></i> <span data-bind=\\\"text: name\\\"></span></span>\\n          <!-- /ko -->\\n          <!-- ko if: status() !== 'STARTING' -->\\n          <!-- ko if: namespace.computes.length -->\\n          <a class=\\\"assist-table-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.selectedNamespace($data); }\\\"><i class=\\\"fa fa-fw fa-snowflake-o muted valign-middle\\\"></i> <span data-bind=\\\"text: name\\\"></span></a>\\n          <!-- /ko -->\\n          <!-- ko ifnot: namespace.computes.length -->\\n          <span class=\\\"assist-table-link\\\" title=\\\"\").concat(I18n('No related computes'), \"\\\" data-bind=\\\"tooltip: { placement: 'bottom' }\\\"><i class=\\\"fa fa-fw fa-warning muted valign-middle\\\"></i> <span data-bind=\\\"text: name\\\"></span></span>\\n          <!-- /ko -->\\n          <!-- /ko -->\\n        </li>\\n      </ul>\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: loading\\\">\\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: hasErrors() && !loading()\\\">\\n      <span class=\\\"assist-errors\\\">\").concat(I18n('Error loading namespaces.'), \"</span>\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: !hasErrors() && !loading() && !hasNamespaces()\\\">\\n      <span class=\\\"assist-errors\\\">\").concat(I18n('No namespaces found.'), \"</span>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-databases-template\\\">\\n    <div class=\\\"assist-flex-header\\\" data-bind=\\\"visibleOnHover: { selector: '.hover-actions', override: loading() }\\\">\\n      <div class=\\\"assist-inner-header\\\">\\n        <!-- ko ifnot: sourceType === 'solr' || sourceType === 'kafka' -->\\n        \").concat(I18n('Databases'), \"\\n        <!-- ko template: 'assist-db-header-actions' --><!-- /ko -->\\n        <!-- /ko -->\\n        <!-- ko if: sourceType === 'solr' || sourceType === 'kafka'-->\\n        \").concat(I18n('Sources'), \"\\n        <!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-search\\\" data-bind=\\\"visible: hasEntries() && ! hasErrors()\\\">\\n      <div class=\\\"assist-filter\\\">\\n        <!-- ko component: {\\n            name: 'inline-autocomplete',\\n            params: {\\n              querySpec: filter.querySpec,\\n              facets: [],\\n              placeHolder: sourceType === 'solr' || sourceType === 'kafka' ? '\").concat(I18n('Filter sources...'), \"' : '\").concat(I18n('Filter databases...'), \"',\\n              knownFacetValues: {},\\n              autocompleteFromEntries: autocompleteFromEntries\\n            }\\n          } --><!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-fill assist-db-scrollable\\\" data-bind=\\\"visible: ! hasErrors() && ! loading() && hasEntries(), delayedOverflow\\\">\\n      <!-- ko if: ! loading() && filteredEntries().length == 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry no-entries\\\">\").concat(I18n('No results found'), \"</li>\\n      </ul>\\n      <!-- /ko -->\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreachVisible: {data: filteredEntries, minHeight: 23, container: '.assist-db-scrollable', skipScrollEvent: navigationSettings.rightAssist }\\\">\\n        <!-- ko template: { name: 'assist-database-entry' } --><!-- /ko -->\\n      </ul>\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: loading\\\">\\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: hasErrors() && ! loading()\\\">\\n      <span class=\\\"assist-errors\\\">\").concat(I18n('Error loading databases.'), \"</span>\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: ! hasErrors() && ! loading() && ! hasEntries()\\\">\\n      <span class=\\\"assist-errors\\\">\").concat(I18n('No databases found.'), \"</span>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-tables-template\\\">\\n    <div class=\\\"assist-flex-header\\\">\\n      <div class=\\\"assist-inner-header\\\" data-bind=\\\"visible: !$parent.loading() && !$parent.hasErrors()\\\">\\n        <!-- ko ifnot: sourceType === 'solr' || sourceType === 'kafka' -->\\n          \").concat(I18n('Tables'), \"\\n        <!-- /ko -->\\n        <!-- ko if: sourceType === 'solr' -->\\n          <div data-bind=\\\"appAwareTemplateContextMenu: { template: 'collection-title-context-items', scrollContainer: '.assist-db-scrollable' }\\\">\").concat(I18n('Indexes'), \"</div>\\n        <!-- /ko -->\\n        <!-- ko if: sourceType === 'kafka' -->\\n          \").concat(I18n('Topics'), \"\\n        <!-- /ko -->\\n        <!-- ko template: 'assist-db-header-actions' --><!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-search\\\" data-bind=\\\"visible: hasEntries() && !$parent.loading() && !$parent.hasErrors()\\\">\\n      <div class=\\\"assist-filter\\\">\\n        <!-- ko component: {\\n          name: 'inline-autocomplete',\\n          params: {\\n            querySpec: filter.querySpec,\\n            facets: ['type'],\\n            knownFacetValues: knownFacetValues.bind($data),\\n            autocompleteFromEntries: autocompleteFromEntries\\n          }\\n        } --><!-- /ko -->\\n      </div>\\n    </div>\\n    <div class=\\\"assist-flex-fill assist-db-scrollable\\\" data-bind=\\\"visible: ! hasErrors() && ! loading(), delayedOverflow\\\">\\n      <!-- ko template: 'assist-db-entries' --><!-- /ko -->\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: loading() || $parent.loading()\\\">\\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    </div>\\n    <div class=\\\"assist-flex-fill\\\" data-bind=\\\"visible: hasErrors() && ! loading()\\\">\\n      <span class=\\\"assist-errors\\\">\").concat(I18n('Error loading tables.'), \"</span>\\n    </div>\\n  </script>\\n\\n  <!-- ko template: 'assist-sql-inner-panel' --><!-- /ko -->\\n\");\nvar AssistDbPanel = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Object} options.i18n\n   * @param {Object} options.navigationSettings - enable/disable the links\n   * @param {boolean} options.navigationSettings.openItem\n   * @param {boolean} options.navigationSettings.showStats\n   * @param {boolean} options.navigationSettings.pinEnabled\n   * @param {boolean} [options.isSolr] - Default false;\n   * @param {boolean} [options.isStreams] - Default false;\n   * @constructor\n   **/\n  function AssistDbPanel(options) {\n    var _this = this;\n    _classCallCheck(this, AssistDbPanel);\n    this.options = options;\n    this.i18n = options.i18n;\n    this.isStreams = options.isStreams;\n    this.isSolr = options.isSolr;\n    this.nonSqlType = this.isSolr || this.isStreams;\n    this.showImporter = ko.observable(false);\n    this.sources = ko.observableArray();\n    this.sourceIndex = {};\n    this.selectedSource = ko.observable(null);\n    this.breadcrumbTitle = ko.pureComputed(function () {\n      return \"\".concat(_this.breadcrumb(), \" (\").concat(_this.selectedSource().connector.displayName, \")\");\n    });\n    this.breadcrumb = ko.pureComputed(function () {\n      if (_this.isStreams && _this.selectedSource()) {\n        return _this.selectedSource().connector.displayName;\n      }\n      if (!_this.isSolr && _this.selectedSource()) {\n        if (_this.selectedSource().selectedNamespace()) {\n          if (_this.selectedSource().selectedNamespace().selectedDatabase()) {\n            return _this.selectedSource().selectedNamespace().selectedDatabase().catalogEntry.name;\n          }\n          if (window.HAS_MULTI_CLUSTER) {\n            return _this.selectedSource().selectedNamespace().name;\n          }\n        }\n        return _this.selectedSource().connector.displayName;\n      }\n      return null;\n    });\n    huePubSub.subscribe(ASSIST_DB_HIGHLIGHT_EVENT, function (catalogEntry) {\n      huePubSub.publish(SHOW_LEFT_ASSIST_EVENT);\n      if (catalogEntry.getDialect() === 'solr') {\n        huePubSub.publish(ASSIST_SHOW_SOLR_EVENT);\n      } else {\n        huePubSub.publish(ASSIST_SHOW_SQL_EVENT);\n      }\n      huePubSub.publish('context.popover.hide');\n      window.setTimeout(function () {\n        var foundSource;\n        _this.sources().some(function (source) {\n          if (source.sourceType === catalogEntry.getConnector().id) {\n            foundSource = source;\n            return true;\n          }\n        });\n        if (foundSource) {\n          if (_this.selectedSource() !== foundSource) {\n            _this.selectedSource(foundSource);\n          }\n          foundSource.highlightInside(catalogEntry);\n        }\n      }, 0);\n    });\n    if (this.isSolr) {\n      huePubSub.subscribe('assist.collections.refresh', function () {\n        var solrSource = _this.sourceIndex['solr'];\n        var doRefresh = function doRefresh() {\n          if (solrSource.selectedNamespace()) {\n            var assistDbNamespace = solrSource.selectedNamespace();\n            dataCatalog.getEntry({\n              namespace: assistDbNamespace.namespace,\n              compute: assistDbNamespace.compute(),\n              connector: {\n                id: 'solr'\n              },\n              path: []\n            }).then(function (entry) {\n              entry.clearCache({\n                cascade: true\n              });\n            });\n          }\n        };\n        if (!solrSource.hasNamespaces()) {\n          solrSource.loadNamespaces(true).done(doRefresh);\n        } else {\n          doRefresh();\n        }\n      });\n    } else if (!this.isSolr && !this.isStreams) {\n      huePubSub.subscribe(ASSIST_SET_DATABASE_EVENT, function (databaseDef) {\n        if (!databaseDef.connector || !_this.sourceIndex[databaseDef.connector.id]) {\n          return;\n        }\n        _this.selectedSource(_this.sourceIndex[databaseDef.connector.id]);\n        _this.setDatabaseWhenLoaded(databaseDef.namespace, databaseDef.name);\n      });\n      var getSelectedDatabase = function getSelectedDatabase(connector) {\n        var deferred = $.Deferred();\n        var assistDbSource = _this.sourceIndex[connector.id];\n        if (assistDbSource) {\n          assistDbSource.loadedDeferred.done(function () {\n            if (assistDbSource.selectedNamespace()) {\n              assistDbSource.selectedNamespace().loadedDeferred.done(function () {\n                if (assistDbSource.selectedNamespace().selectedDatabase()) {\n                  deferred.resolve(assistDbSource.selectedNamespace().selectedDatabase().catalogEntry);\n                } else {\n                  var lastSelectedDb = getFromLocalStorage('assist_' + connector.id + '_' + assistDbSource.selectedNamespace().namespace.id + '.lastSelectedDb');\n                  if (!lastSelectedDb && lastSelectedDb !== '') {\n                    lastSelectedDb = 'default';\n                  }\n                  dataCatalog.getEntry({\n                    connector: connector,\n                    namespace: assistDbSource.selectedNamespace().namespace,\n                    compute: assistDbSource.selectedNamespace().compute,\n                    path: [lastSelectedDb]\n                  }).then(deferred.resolve);\n                }\n              });\n            } else {\n              dataCatalog.getEntry({\n                connector: connector,\n                namespace: {\n                  id: 'default'\n                },\n                compute: {\n                  id: 'default'\n                },\n                path: ['default']\n              }).then(deferred.resolve);\n            }\n          });\n        } else {\n          deferred.reject();\n        }\n        return deferred;\n      };\n      huePubSub.subscribe(ASSIST_GET_DATABASE_EVENT, function (options) {\n        getSelectedDatabase(options.connector).done(options.callback);\n      });\n      huePubSub.subscribe(ASSIST_GET_SOURCE_EVENT, function (callback) {\n        callback(_this.selectedSource() ? _this.selectedSource().sourceType : undefined);\n      });\n      huePubSub.subscribe(ASSIST_SET_SOURCE_EVENT, function (source) {\n        if (_this.sourceIndex[source]) {\n          _this.selectedSource(_this.sourceIndex[source]);\n        }\n      });\n      this.selectedSource.subscribe(function (newSource) {\n        if (newSource) {\n          if (newSource.namespaces().length === 0) {\n            newSource.loadNamespaces();\n          }\n          setInLocalStorage('assist.lastSelectedSource', newSource.sourceType);\n        } else {\n          setInLocalStorage('assist.lastSelectedSource', null);\n        }\n      });\n    }\n    this.init(options.navigationSettings);\n    huePubSub.publish(ASSIST_DB_PANEL_IS_READY_EVENT);\n    huePubSub.subscribe(ASSIST_IS_DB_PANEL_READY_EVENT, function (callback) {\n      if (callback) {\n        callback();\n      }\n      huePubSub.publish(ASSIST_DB_PANEL_IS_READY_EVENT);\n    });\n  }\n  return _createClass(AssistDbPanel, [{\n    key: \"setDatabaseWhenLoaded\",\n    value: function setDatabaseWhenLoaded(namespace, databaseName) {\n      var _this2 = this;\n      this.selectedSource().whenLoaded(function () {\n        if (_this2.selectedSource().selectedNamespace() && _this2.selectedSource().selectedNamespace().namespace.id !== namespace.id) {\n          _this2.selectedSource().namespaces().some(function (otherNamespace) {\n            if (otherNamespace.namespace.id === namespace.id) {\n              _this2.selectedSource().selectedNamespace(otherNamespace);\n              return true;\n            }\n          });\n        }\n        if (_this2.selectedSource().selectedNamespace()) {\n          _this2.selectedSource().selectedNamespace().whenLoaded(function () {\n            _this2.selectedSource().selectedNamespace().setDatabase(databaseName);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"back\",\n    value: function back() {\n      if (this.isStreams) {\n        this.selectedSource(null);\n        return;\n      }\n      if (this.selectedSource()) {\n        if (this.selectedSource() && this.selectedSource().selectedNamespace()) {\n          if (this.selectedSource().selectedNamespace().selectedDatabase()) {\n            this.selectedSource().selectedNamespace().selectedDatabase(null);\n            this.selectedSource().selectedNamespace().selectedDatabaseChanged();\n          } else if (window.HAS_MULTI_CLUSTER) {\n            this.selectedSource().selectedNamespace(null);\n          } else {\n            this.selectedSource(null);\n          }\n        } else {\n          this.selectedSource(null);\n        }\n      }\n    }\n  }, {\n    key: \"setSingleSource\",\n    value: function setSingleSource(connector, navigationSettings, nonSqlType) {\n      var _this3 = this;\n      this.sourceIndex = {};\n      var source = new AssistDbSource({\n        i18n: this.i18n,\n        type: connector.id,\n        name: connector.displayName,\n        connector: connector,\n        nonSqlType: nonSqlType,\n        navigationSettings: navigationSettings\n      });\n      this.sourceIndex[connector.id] = source;\n      this.sources([source]);\n      this.selectedSource(source);\n      source.loadNamespaces().then(function () {\n        var namespace = _this3.selectedSource().selectedNamespace();\n        if (namespace) {\n          namespace.initDatabases();\n          namespace.whenLoaded(function () {\n            namespace.setDatabase('default');\n          });\n        }\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init(navigationSettings) {\n      var _this4 = this;\n      if (this.isSolr) {\n        var connector = findDashboardConnector(function (connector) {\n          return connector.id === 'solr';\n        });\n        this.setSingleSource(connector, navigationSettings, true);\n        return;\n      }\n      if (this.isStreams) {\n        var _connector = findEditorConnector(function (connector) {\n          return connector.dialect === 'ksql';\n        });\n        this.setSingleSource(_connector, navigationSettings, true);\n        return;\n      }\n      var updateFromConfig = function updateFromConfig() {\n        var sources = [];\n        _this4.showImporter(!!findBrowserConnector(function (connector) {\n          return connector.type === 'importer';\n        }));\n        var connectors = filterEditorConnectors(function (connector) {\n          return connector.is_sql;\n        });\n        connectors.forEach(function (connector) {\n          var source = _this4.sourceIndex[connector.id] || new AssistDbSource({\n            i18n: _this4.i18n,\n            type: connector.id,\n            // TODO: Remove redundant\n            name: connector.displayName,\n            // TODO: Remove redundant\n            connector: connector,\n            nonSqlType: false,\n            navigationSettings: navigationSettings\n          });\n          sources.push(source);\n        });\n        _this4.sourceIndex = {};\n        sources.forEach(function (source) {\n          _this4.sourceIndex[source.sourceType] = source;\n        });\n        if (sources.indexOf(_this4.selectedSource()) === -1) {\n          if (sources.length) {\n            var storageSourceType = getFromLocalStorage('assist.lastSelectedSource');\n            _this4.selectedSource(storageSourceType && _this4.sourceIndex[storageSourceType] || sources[0]);\n          } else {\n            _this4.selectedSource(undefined);\n          }\n        }\n        _this4.sources(sources);\n      };\n      huePubSub.subscribe(CONFIG_REFRESHED_TOPIC, updateFromConfig);\n      updateFromConfig();\n    }\n  }]);\n}();\nvar instances = {};\nvar viewModelFactory = {\n  createViewModel: function createViewModel(params) {\n    var name = params.isStreams ? 'streams' : params.isSolr ? 'solr' : 'sql';\n    if (!instances[name]) {\n      instances[name] = new AssistDbPanel(params);\n    }\n    return instances[name];\n  }\n};\ncomponentUtils.registerComponent('hue-assist-db-panel', viewModelFactory, TEMPLATE);\nexport default ASSIST_TABLE_TEMPLATES;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_DOC_HIGHLIGHT_EVENT, ASSIST_SHOW_DOC_EVENT } from \"./events\";\nimport { DOCUMENT_TYPES } from \"../../../doc/docSupport\";\nimport HueFileEntry from \"../../../doc/hueFileEntry\";\nimport componentUtils from \"../componentUtils\";\nimport { CONFIG_REFRESHED_TOPIC } from 'config/events';\nimport { getLastKnownConfig } from 'config/hueConfig';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nexport var REFRESH_DOC_ASSIST_EVENT = 'assist.document.refresh';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"document-context-items\\\">\\n    <!-- ko if: definition().type === 'directory' -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: open\\\"><i class=\\\"fa fa-fw fa-folder-open-o\\\"></i> \".concat(I18n('Open folder'), \"</a></li>\\n    <!-- /ko -->\\n    <!-- ko if: definition().type !== 'directory' -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function(data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\\\"><i class=\\\"fa fa-fw fa-info\\\"></i> \").concat(I18n('Show details'), \"</a></li>\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: open\\\"><i class=\\\"fa fa-fw fa-edit\\\"></i> \").concat(I18n('Open document'), \"</a></li>\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function() { $data.selected(true); huePubSub.publish('doc.show.delete.modal', $data.parent); }\\\"><i class=\\\"fa fa-fw fa-trash-o\\\"></i> \").concat(I18n('Delete document'), \"</a></li>\\n    <!-- /ko -->\\n    <!-- ko if: $containerContext.sharingEnabled -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"publish: { 'doc.show.share.modal': $data }\\\"><i class=\\\"fa fa-fw fa-users\\\"></i> \").concat(I18n('Share'), \"</a></li>\\n    <!-- /ko -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: contextMenuDownload\\\"><i class=\\\"fa fa-fw fa-download\\\"></i> \").concat(I18n('Download'), \"</a></li>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-document-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <!-- ko if: !loading() -->\\n      <div class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': $parent.highlightTypeFilter() }, component: { name: 'hue-drop-down', params: { fixedPosition: true, value: typeFilter, searchable: true, entries: DOCUMENT_TYPES, linkTitle: '\").concat(I18n('Document type'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n      <!-- /ko -->\\n      <span class=\\\"dropdown new-document-drop-down\\\">\\n\\n        <a class=\\\"inactive-action dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" data-bind=\\\"dropdown\\\" href=\\\"javascript:void(0);\\\">\\n          <i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('New document'), \"\\\"></i>\\n        </a>\\n        <ul class=\\\"dropdown-menu less-padding document-types\\\" style=\\\"margin-top:3px; margin-left:-140px; width: 175px;position: absolute;\\\" role=\\\"menu\\\">\\n            <!-- ko if: window.HUE_APPS.indexOf('beeswax') !== -1 -->\\n              <li>\\n                <a title=\\\"\").concat(I18n(window.ENABLE_UNIFIED_ANALYTICS ? 'Unified Analytics Query' : 'Hive Query'), \"\\\" data-bind=\\\"click: function() { huePubSub.publish('open.editor.new.query', {type: 'hive', 'directoryUuid': $data.getDirectory()}); }\\\" href=\\\"javascript:void(0);\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: window.ENABLE_UNIFIED_ANALYTICS ? 'impala' : 'hive' } } --><!-- /ko --> \").concat(I18n(window.ENABLE_UNIFIED_ANALYTICS ? 'Unified Analytics' : 'Hive'), \"\\n                </a>\\n              </li>\\n            <!-- /ko -->\\n            <!-- ko if: window.HUE_APPS.indexOf('impala') !== -1 -->\\n              <li>\\n                <a title=\\\"\").concat(I18n('Impala Query'), \"\\\" class=\\\"dropdown-item\\\" data-bind=\\\"click: function() { huePubSub.publish('open.editor.new.query', {type: 'impala', 'directoryUuid': $data.getDirectory()}); }\\\" href=\\\"javascript:void(0);\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'impala' } } --><!-- /ko --> \").concat(I18n('Impala'), \"\\n                </a>\\n            </li>\\n            <!-- /ko -->\\n            <!-- ko if: window.SHOW_NOTEBOOKS -->\\n              <li>\\n                <a title=\\\"\").concat(I18n('Notebook'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.NOTEBOOK_INDEX)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'notebook' } } --><!-- /ko --> \").concat(I18n('Notebook'), \"\\n                </a>\\n              </li>\\n            <!-- /ko -->\\n            <!-- ko if: window.HUE_APPS.indexOf('pig') !== -1 -->\\n              <li>\\n                <a title=\\\"\").concat(I18n('Pig Script'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.PIG_INDEX)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'pig' } } --><!-- /ko --> \").concat(I18n('Pig Script'), \"\\n                </a>\\n              </li>\\n            <!-- /ko -->\\n            <!-- ko if: window.HUE_APPS.indexOf('oozie') !== -1 -->\\n              <li>\\n                <a title=\\\"\").concat(I18n('Oozie Workflow'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_WORKFLOW)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-workflow' } } --><!-- /ko --> \").concat(I18n('Workflow'), \"\\n                </a>\\n              </li>\\n              <li>\\n                <a title=\\\"\").concat(I18n('Oozie Schedule'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_COORDINATOR)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-coordinator' } } --><!-- /ko --> \").concat(I18n('Schedule'), \"\\n                </a>\\n              </li>\\n              <li>\\n                <a title=\\\"\").concat(I18n('Oozie Bundle'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_BUNDLE)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-bundle' } } --><!-- /ko --> \").concat(I18n('Bundle'), \"\\n                </a>\\n              </li>\\n            <!-- /ko -->\\n            <!-- ko if: window.HUE_APPS.indexOf('search') !== -1 -->\\n              <li>\\n                <a title=\\\"\").concat(I18n('Solr Search'), \"\\\" data-bind=\\\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.SEARCH_NEW_SEARCH)\\\">\\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> \").concat(I18n('Dashboard'), \"\\n                </a>\\n              </li>\\n            <!-- /ko -->\\n            <li class=\\\"divider\\\"></li>\\n            <li data-bind=\\\"css: { 'disabled': $data.isTrash() || $data.isTrashed() || !$data.canModify() }\\\">\\n              <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { $('.new-document-drop-down').removeClass('open'); huePubSub.publish('show.create.directory.modal', $data); }\\\"><svg class=\\\"hi\\\"><use href=\\\"#hi-folder\\\"></use><use href=\\\"#hi-plus-addon\\\"></use></svg> \").concat(I18n('New folder'), \"</a>\\n            </li>\\n          </ul>\\n      </span>\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function () { huePubSub.publish('\").concat(REFRESH_DOC_ASSIST_EVENT, \"'); }\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\" title=\\\"\").concat(I18n('Manual refresh'), \"\\\"></i></a>\\n    </div>\\n  </script>\\n\\n  <!-- ko with: activeEntry -->\\n  <div class=\\\"assist-flex-header assist-breadcrumb\\\" style=\\\"overflow: visible\\\">\\n    <!-- ko ifnot: isRoot -->\\n    <a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { if (loaded()) { parent.makeActive(); } }\\\">\\n      <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n      <i class=\\\"fa fa-fw fa-folder-o\\\"></i>\\n      <span data-bind=\\\"text: definition().name, attr: {'title': definition().name }\\\"></span>\\n    </a>\\n    <!-- /ko -->\\n    <!-- ko if: isRoot -->\\n    <div>\\n      <i class=\\\"fa fa-fw fa-folder-o\\\"></i>\\n      <span>/</span>\\n    </div>\\n    <!-- /ko -->\\n    <!-- ko template: 'assist-document-header-actions' --><!-- /ko -->\\n  </div>\\n  <div class=\\\"assist-flex-search\\\">\\n    <div class=\\\"assist-filter\\\">\\n      <form autocomplete=\\\"off\\\">\\n        <input class=\\\"clearable\\\" type=\\\"text\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" placeholder=\\\"\").concat(I18n('Filter...'), \"\\\" data-bind=\\\"clearable: filter, value: filter, valueUpdate: 'afterkeydown'\\\"/>\\n      </form>\\n    </div>\\n  </div>\\n  <div class=\\\"assist-flex-fill assist-file-scrollable\\\" data-bind=\\\"delayedOverflow\\\">\\n    <div data-bind=\\\"visible: ! loading() && ! hasErrors() && entries().length > 0\\\">\\n      <!-- ko if: filteredEntries().length == 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry\\\"><span class=\\\"assist-no-entries\\\">\").concat(I18n('No documents found'), \"</span></li>\\n      </ul>\\n      <!-- /ko -->\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreachVisible: { data: filteredEntries, minHeight: 27, container: '.assist-file-scrollable' }\\\">\\n        <li class=\\\"assist-entry assist-file-entry\\\" data-bind=\\\"appAwareTemplateContextMenu: { template: 'document-context-items', containerContext: $parents[2], scrollContainer: '.assist-file-scrollable', beforeOpen: beforeContextOpen }, assistFileDroppable, assistFileDraggable, visibleOnHover: { 'selector': '.assist-file-actions' }\\\">\\n          <div class=\\\"assist-file-actions table-actions\\\">\\n            <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\\\"><i class=\\\"fa fa-fw fa-info\\\" title=\\\"\").concat(I18n('Show details'), \"\\\"></i></a>\\n          </div>\\n          <a href=\\\"javascript:void(0)\\\" class=\\\"assist-entry assist-document-link\\\" data-bind=\\\"click: open, attr: {'title': name }\\\">\\n            <!-- ko template: { name: 'document-icon-template', data: { document: $data, showShareAddon: true } } --><!-- /ko -->\\n            <span class=\\\"highlightable\\\" data-bind=\\\"css: { 'highlight': highlight }, text: definition().name\\\"></span>\\n          </a>\\n        </li>\\n      </ul>\\n    </div>\\n    <div data-bind=\\\"visible: !loading() && ! hasErrors() && entries().length === 0\\\">\\n      <span class=\\\"assist-no-entries\\\">\").concat(I18n('Empty directory'), \"</span>\\n    </div>\\n    <div class=\\\"center\\\" data-bind=\\\"visible: loading() && ! hasErrors()\\\">\\n      <i class=\\\"fa fa-spinner fa-spin\\\" style=\\\"font-size: 20px; color: #BBB\\\"></i>\\n    </div>\\n    <div class=\\\"assist-errors\\\" data-bind=\\\"visible: ! loading() && hasErrors()\\\">\\n      <span>\").concat(I18n('Error loading contents.'), \"</span>\\n    </div>\\n  </div>\\n  <!-- /ko -->\\n\");\nvar AssistDocumentsPanel = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {string} options.user\n   * @constructor\n   **/\n  function AssistDocumentsPanel(options) {\n    var _this = this;\n    _classCallCheck(this, AssistDocumentsPanel);\n    var self = this;\n    self.user = options.user;\n    self.activeEntry = ko.observable();\n    self.activeSort = ko.observable('defaultAsc');\n    self.typeFilter = ko.observable(DOCUMENT_TYPES[0]); // all is first\n    self.sharingEnabled = ko.observable(false);\n    var updateFromConfig = function updateFromConfig(hueConfig) {\n      self.sharingEnabled(hueConfig && (hueConfig.hue_config.is_admin || hueConfig.hue_config.enable_sharing));\n    };\n    updateFromConfig(getLastKnownConfig());\n    huePubSub.subscribe(CONFIG_REFRESHED_TOPIC, updateFromConfig);\n    self.highlightTypeFilter = ko.observable(false);\n    var lastOpenedUuid = getFromLocalStorage('assist.last.opened.assist.doc.uuid');\n    if (lastOpenedUuid) {\n      self.activeEntry(new HueFileEntry({\n        activeEntry: self.activeEntry,\n        trashEntry: ko.observable(),\n        app: 'documents',\n        user: self.user,\n        activeSort: self.activeSort,\n        typeFilter: self.typeFilter,\n        definition: {\n          uuid: lastOpenedUuid,\n          type: 'directory'\n        }\n      }));\n    } else {\n      self.fallbackToRoot();\n    }\n    self.activeEntry.subscribe(function (newEntry) {\n      if (!newEntry.loaded()) {\n        var loadedSub = newEntry.loaded.subscribe(function (loaded) {\n          if (loaded && !newEntry.hasErrors() && newEntry.definition() && newEntry.definition().uuid) {\n            setInLocalStorage('assist.last.opened.assist.doc.uuid', newEntry.definition().uuid);\n          }\n          loadedSub.dispose();\n        });\n      } else if (!newEntry.hasErrors() && newEntry.definition() && newEntry.definition().uuid) {\n        setInLocalStorage('assist.last.opened.assist.doc.uuid', newEntry.definition().uuid);\n      }\n    });\n    self.reload = function () {\n      self.activeEntry().load(function () {}, function () {\n        self.fallbackToRoot();\n      });\n    };\n    huePubSub.subscribe(REFRESH_DOC_ASSIST_EVENT, function () {\n      huePubSub.publish('assist.clear.document.cache');\n      self.reload();\n    });\n    huePubSub.subscribe(ASSIST_DOC_HIGHLIGHT_EVENT, function (details) {\n      huePubSub.publish(ASSIST_SHOW_DOC_EVENT);\n      huePubSub.publish('context.popover.hide');\n      var whenLoaded = $.Deferred().done(function () {\n        self.activeEntry().highlightInside(details.docUuid);\n      });\n      if (self.activeEntry() && self.activeEntry().definition() && self.activeEntry().definition().uuid === details.parentUuid) {\n        if (self.activeEntry().loaded() && !self.activeEntry().hasErrors()) {\n          whenLoaded.resolve();\n        } else {\n          var loadedSub = self.activeEntry().loaded.subscribe(function (newVal) {\n            if (newVal) {\n              if (!self.activeEntry().hasErrors()) {\n                whenLoaded.resolve();\n              }\n              whenLoaded.reject();\n              loadedSub.remove();\n            }\n          });\n        }\n        self.activeEntry().highlight(details.docUuid);\n      } else {\n        self.activeEntry(new HueFileEntry({\n          activeEntry: self.activeEntry,\n          trashEntry: ko.observable(),\n          app: 'documents',\n          user: self.user,\n          activeSort: self.activeSort,\n          typeFilter: self.typeFilter,\n          definition: {\n            uuid: details.parentUuid,\n            type: 'directory'\n          }\n        }));\n        self.activeEntry().load(function () {\n          whenLoaded.resolve();\n        }, function () {\n          whenLoaded.reject();\n          self.fallbackToRoot();\n        });\n      }\n    });\n    huePubSub.subscribe('assist.documents.set.type.filter', function (docType) {\n      if (docType) {\n        _this.setTypeFilter(docType);\n      }\n    });\n    self.init();\n  }\n  return _createClass(AssistDocumentsPanel, [{\n    key: \"setTypeFilter\",\n    value: function setTypeFilter(newType) {\n      var self = this;\n      DOCUMENT_TYPES.some(function (docType) {\n        if (docType.type === newType) {\n          self.typeFilter(docType);\n          return true;\n        }\n      });\n      self.highlightTypeFilter(true);\n      window.setTimeout(function () {\n        self.highlightTypeFilter(false);\n      }, 600);\n    }\n  }, {\n    key: \"fallbackToRoot\",\n    value: function fallbackToRoot() {\n      var self = this;\n      if (!self.activeEntry() || self.activeEntry().definition() && (self.activeEntry().definition().path !== '/' || self.activeEntry().definition().uuid)) {\n        setInLocalStorage('assist.last.opened.assist.doc.uuid', null);\n        self.activeEntry(new HueFileEntry({\n          activeEntry: self.activeEntry,\n          trashEntry: ko.observable(),\n          app: 'documents',\n          user: self.user,\n          activeSort: self.activeSort,\n          typeFilter: self.typeFilter,\n          definition: {\n            name: '/',\n            type: 'directory'\n          }\n        }));\n        self.activeEntry().load();\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var self = this;\n      if (!self.activeEntry().loaded()) {\n        self.activeEntry().load(function () {}, function () {\n          self.fallbackToRoot();\n        }, true);\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('hue-assist-documents-panel', AssistDocumentsPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport ASSIST_TABLE_TEMPLATES from \"./ko.assistDbPanel\";\nimport AssistDbEntry from \"./assistDbEntry\";\nimport AssistDbSource from \"./assistDbSource\";\nimport componentUtils from \"../componentUtils\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport DataCatalogEntry from 'catalog/DataCatalogEntry';\nvar TEMPLATE = ASSIST_TABLE_TEMPLATES + \"\\n  <div class=\\\"assist-inner-panel assist-assistant-panel\\\">\\n    <div class=\\\"assist-flex-panel\\\">\\n      <div class=\\\"assist-flex-header\\\">\\n        <div class=\\\"assist-inner-header\\\">\\n          <!-- ko if: isSolr -->\\n          \".concat(I18n('Indexes'), \"\\n          <!-- /ko -->\\n          <!-- ko ifnot: isSolr -->\\n          \").concat(I18n('Tables'), \"\\n          <!-- ko if: statementCount() > 1 -->\\n          <div class=\\\"statement-count\\\">\").concat(I18n('Statement'), \" <span data-bind=\\\"text: activeStatementIndex() + '/' + statementCount()\\\"></span></div>\\n          <!-- /ko -->\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n      <div class=\\\"assist-flex-search\\\" data-bind=\\\"visible: activeTables().length > 0\\\">\\n        <div class=\\\"assist-filter\\\">\\n          <!-- ko component: {\\n            name: 'inline-autocomplete',\\n            params: {\\n              querySpec: filter.querySpec,\\n              facets: ['type'],\\n              knownFacetValues: isSolr() ? SOLR_ASSIST_KNOWN_FACET_VALUES : SQL_ASSIST_KNOWN_FACET_VALUES,\\n              autocompleteFromEntries: $component.autocompleteFromEntries\\n            }\\n          } --><!-- /ko -->\\n        </div>\\n      </div>\\n      <div class=\\\"assist-flex-fill assist-db-scrollable\\\" data-bind=\\\"delayedOverflow\\\">\\n        <!-- ko if: filteredTables().length === 0 && (!filter.querySpec() || filter.querySpec().query === '') -->\\n        <div class=\\\"assist-no-entries\\\">\\n          <!-- ko if: isSolr -->\\n          \").concat(I18n('No indexes selected.'), \"\\n          <!-- /ko -->\\n          <!-- ko ifnot: isSolr  -->\\n          \").concat(I18n('No tables identified.'), \"\\n          <!-- /ko -->\\n        </div>\\n        <!-- /ko -->\\n        <!-- ko if: filteredTables().length === 0 && filter.querySpec() && filter.querySpec().query !== '' && !someLoading() -->\\n        <div class=\\\"assist-no-entries\\\">\").concat(I18n('No entries found'), \"</div>\\n        <!-- /ko -->\\n        <!-- ko if: filteredTables().length > 0 -->\\n        <ul class=\\\"database-tree assist-tables\\\" data-bind=\\\"foreachVisible: { data: filteredTables, minHeight: 22, container: '.assist-db-scrollable', skipScrollEvent: true }\\\">\\n          <!-- ko if: hasErrors -->\\n          <li class=\\\"assist-table hue-warning\\\" data-bind=\\\"attr: { 'title': $parent.isSolr() ? '\").concat(I18n('Error loading index details.'), \"' : '\").concat(I18n('Error loading table details.'), \"'}\\\">\\n            <span class=\\\"assist-entry\\\">\\n              <i class=\\\"hue-warning fa fa-fw muted valign-middle fa-warning\\\"></i>\\n              <!-- ko with: catalogEntry -->\\n              <!-- ko if: typeof reload !== 'undefined' -->\\n              <span data-bind=\\\"text: getDisplayName(true)\\\"></span> <a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: reload\\\"><i class=\\\"fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin': reloading }\\\"></i></a>\\n              <!-- /ko -->\\n              <!-- /ko -->\\n            </span>\\n          </li>\\n          <!-- /ko -->\\n          <!-- ko ifnot: hasErrors -->\\n          <!-- ko template: { if: catalogEntry.isTableOrView(), name: 'assist-table-entry' } --><!-- /ko -->\\n          <!-- ko template: { if: catalogEntry.isField(), name: 'assist-column-entry-assistant' } --><!-- /ko -->\\n          <!-- /ko -->\\n        </ul>\\n        <!-- /ko -->\\n        <!-- ko hueSpinner: { spin: filter.querySpec() && filter.querySpec().query !== '' && someLoading(), inline: true,  center: true} --><!-- /ko -->\\n      </div>\\n\\n      <!-- ko if: showRisks -->\\n      <div class=\\\"assist-flex-header assist-divider\\\"><div class=\\\"assist-inner-header\\\">\").concat(I18n('Query Analysis'), \"</div></div>\\n      <div class=\\\"assist-flex-third\\\">\\n        <!-- ko if: ! activeRisks().hints -->\\n        <div class=\\\"assist-no-entries\\\">\").concat(I18n('Select a query or start typing to get optimization hints.'), \"</div>\\n        <!-- /ko -->\\n        <!-- ko if: activeRisks().hints && activeRisks().hints.length === 0 -->\\n        <div class=\\\"assist-no-entries\\\">\").concat(I18n('No optimizations identified.'), \"</div>\\n        <!-- /ko -->\\n        <!-- ko if: activeRisks().hints && activeRisks().hints.length > 0 -->\\n        <ul class=\\\"risk-list\\\" data-bind=\\\"foreach: activeRisks().hints\\\">\\n          <li>\\n            <div class=\\\"risk-list-title\\\" data-bind=\\\"css: { 'risk-list-high' : risk === 'high', 'risk-list-normal':  risk !== 'high' }, tooltip: { title: risk + ' ' + riskTables }\\\"><span data-bind=\\\"text: riskAnalysis\\\"></span></div>\\n            <div class=\\\"risk-list-description\\\" data-bind=\\\"text: riskRecommendation\\\"></div>\\n            <div class=\\\"risk-quickfix\\\" data-bind=\\\"visible: (riskId === 17 || riskId === 18 || riskId === 22) && $parent.activeEditor() && $parent.activeLocations()\\\" style=\\\"display:none;\\\">\\n              <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { $parent.addFilter(riskId); hueAnalytics.convert('sqlAnalyzer', 'addFilter/' + riskId); }\\\">\").concat(I18n('Fix me'), \"</a>\\n            </div>\\n          </li>\\n        </ul>\\n        <!-- /ko -->\\n        <!-- ko if: hasMissingRisks() -->\\n        <div class=\\\"margin-top-20\\\">\\n          <!-- ko hueSpinner: { spin: uploadingTableStats, inline: true} --><!-- /ko -->\\n          <!-- ko ifnot: uploadingTableStats -->\\n          <a href=\\\"javascript:void(0)\\\" data-bind=\\\"visible: activeTables().length > 0, click: function() { uploadTableStats(true) }, attr: { 'title': ('\").concat(I18n('Add table'), \" '  + (isMissingDDL() ? 'DDL' : '') + (isMissingDDL() && isMissingStats() ? ' \").concat(I18n('and'), \" ' : '') + (isMissingStats() ? 'stats' : '')) }\\\">\\n            <i class=\\\"fa fa-fw fa-plus-circle\\\"></i> \").concat(I18n('Improve Analysis'), \"\\n          </a>\\n          <!-- /ko -->\\n        </div>\\n        <!-- /ko -->\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n\");\nvar AssistantUtils = /*#__PURE__*/function () {\n  function AssistantUtils() {\n    _classCallCheck(this, AssistantUtils);\n  }\n  return _createClass(AssistantUtils, null, [{\n    key: \"getFilteredTablesPureComputed\",\n    value: function getFilteredTablesPureComputed(vm) {\n      var openedByFilter = [];\n      return ko.pureComputed(function () {\n        if (!vm.filter || !vm.filter.querySpec() || (!vm.filter.querySpec().facets || Object.keys(vm.filter.querySpec().facets).length === 0) && (!vm.filter.querySpec().text || vm.filter.querySpec().text.length === 0)) {\n          while (openedByFilter.length) {\n            openedByFilter.pop().open(false);\n          }\n          return vm.activeTables();\n        }\n        var facets = vm.filter.querySpec().facets;\n        var result = [];\n        vm.activeTables().forEach(function (entry) {\n          var facetMatch = !facets || !facets['type'] || !facets['type']['table'] && !facets['type']['view'];\n          if (!facetMatch && facets['type']['table']) {\n            facetMatch = entry.catalogEntry.isTable();\n          }\n          if (!facetMatch && facets['type']['view']) {\n            facetMatch = entry.catalogEntry.isView();\n          }\n          var textMatch = !vm.filter.querySpec().text || vm.filter.querySpec().text.length === 0;\n          if (!textMatch) {\n            var nameLower = entry.catalogEntry.name.toLowerCase();\n            textMatch = vm.filter.querySpec().text.every(function (text) {\n              return nameLower.indexOf(text.toLowerCase()) !== -1;\n            });\n          }\n          entry.filterColumnNames(!textMatch);\n          if (facetMatch && textMatch || entry.filteredEntries().length > 0) {\n            if (!entry.open()) {\n              entry.open(true);\n              openedByFilter.push(entry);\n            }\n            result.push(entry);\n          }\n        });\n        return result;\n      });\n    }\n  }]);\n}();\nvar AssistEditorContextPanel = /*#__PURE__*/function () {\n  function AssistEditorContextPanel(params) {\n    var _this = this;\n    _classCallCheck(this, AssistEditorContextPanel);\n    this.isSolr = ko.observable(false);\n    this.activeTab = params.activeTab;\n    this.connector = params.connector;\n    this.showRisks = ko.pureComputed(function () {\n      if (!window.HAS_SQL_ANALYZER || _this.isSolr()) {\n        return false;\n      }\n      if (_this.connector().dialect_properties) {\n        // TODO: dialect_properties only for when ENABLE_CONNECTORS is enabled\n        return _this.connector().dialect_properties.has_optimizer_risks;\n      } else {\n        return _this.connector().dialect === 'impala' || _this.connector().dialect === 'hive';\n      }\n    });\n    this.uploadingTableStats = ko.observable(false);\n    this.activeStatement = ko.observable();\n    this.activeTables = ko.observableArray();\n    this.activeRisks = ko.observable({});\n    this.activeEditor = ko.observable();\n    this.activeRisks.subscribe(function () {\n      if (_this.isMissingDDL()) {\n        _this.uploadTableStats(false);\n      }\n    });\n    this.activeLocations = ko.observable();\n    this.statementCount = ko.observable(0);\n    this.activeStatementIndex = ko.observable(0);\n    this.hasActiveRisks = ko.pureComputed(function () {\n      return _this.activeRisks().hints && _this.activeRisks().hints.length > 0;\n    });\n    this.hasMissingRisks = ko.pureComputed(function () {\n      return _this.isMissingDDL() || _this.isMissingStats();\n    });\n    this.isMissingDDL = ko.pureComputed(function () {\n      return _this.activeRisks().noDDL && _this.activeRisks().noDDL.length > 0;\n    });\n    this.isMissingStats = ko.pureComputed(function () {\n      return window.AUTO_UPLOAD_SQL_ANALYZER_STATS && _this.activeRisks().noStats && _this.activeRisks().noStats.length > 0;\n    });\n    this.someLoading = ko.pureComputed(function () {\n      return _this.activeTables().some(function (table) {\n        return table.loading() || !table.hasEntries() && !table.hasErrors();\n      });\n    });\n    var createQualifiedIdentifier = function createQualifiedIdentifier(identifierChain, defaultDatabase) {\n      if (identifierChain.length === 1) {\n        return defaultDatabase + '.' + identifierChain[0].name;\n      }\n      return identifierChain.map(function (identifier) {\n        return identifier.name;\n      }).join('.').toLowerCase();\n    };\n    this.filter = {\n      querySpec: ko.observable({\n        query: '',\n        facets: {},\n        text: []\n      }).extend({\n        rateLimit: 300\n      })\n    };\n    this.filteredTables = AssistantUtils.getFilteredTablesPureComputed(this);\n    var navigationSettings = {\n      showStats: true,\n      rightAssist: true\n    };\n    var i18n = {};\n    var sources = {};\n    var loadEntriesTimeout = -1;\n    // This fetches the columns for each table synchronously with 2 second in between.\n    var loadEntries = function loadEntries(currentCount) {\n      var count = currentCount || 0;\n      count++;\n      if (count > 10) {\n        return;\n      }\n      window.clearTimeout(loadEntriesTimeout);\n      if (_this.activeTables().length === 1) {\n        var singleTable = _this.activeTables()[0];\n        if (!singleTable.hasErrors()) {\n          singleTable.open(true);\n        }\n      } else {\n        loadEntriesTimeout = window.setTimeout(function () {\n          _this.activeTables().every(function (table) {\n            if (!table.loaded && !table.hasErrors() && !table.loading()) {\n              table.loadEntries(function () {\n                loadEntries(count);\n              });\n              return false;\n            }\n            return !table.loading();\n          });\n        }, 2000);\n      }\n    };\n    this.autocompleteFromEntries = function (nonPartial, partial) {\n      var added = {};\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      _this.filteredTables().forEach(function (table) {\n        if (!added[table.catalogEntry.name] && table.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n          added[table.catalogEntry.name] = true;\n          result.push(nonPartial + partial + table.catalogEntry.name.substring(partial.length));\n        }\n        table.entries().forEach(function (col) {\n          if (!added[col.catalogEntry.name] && col.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {\n            added[col.catalogEntry.name] = true;\n            result.push(nonPartial + partial + col.catalogEntry.name.substring(partial.length));\n          }\n        });\n      });\n      return result;\n    };\n    this.activeTables.subscribe(loadEntries);\n    var updateOnVisible = false;\n    var runningPromises = [];\n    var handleLocationUpdate = function handleLocationUpdate(activeLocations) {\n      while (runningPromises.length) {\n        var promise = runningPromises.pop();\n        if (promise.cancel) {\n          promise.cancel();\n        }\n      }\n      updateOnVisible = false;\n      if (!sources[activeLocations.connector.id]) {\n        sources[activeLocations.connector.id] = {\n          assistDbSource: new AssistDbSource({\n            i18n: i18n,\n            initialNamespace: activeLocations.namespace,\n            connector: activeLocations.connector,\n            type: activeLocations.connector.id,\n            name: activeLocations.connector.displayName,\n            navigationSettings: navigationSettings\n          }),\n          databaseIndex: {},\n          activeTableIndex: {}\n        };\n      }\n      var assistDbSource = sources[activeLocations.connector.id].assistDbSource;\n      var databaseIndex = sources[activeLocations.connector.id].databaseIndex;\n      var activeTableIndex = sources[activeLocations.connector.id].activeTableIndex;\n      if (!activeLocations) {\n        _this.activeLocations(undefined);\n        return;\n      }\n      _this.activeLocations(activeLocations);\n      _this.statementCount(activeLocations.totalStatementCount);\n      _this.activeStatementIndex(activeLocations.activeStatementIndex);\n      if (activeLocations.activeStatementLocations) {\n        var updateTables = false;\n        var tableQidIndex = {};\n        var ctes = {};\n        activeLocations.activeStatementLocations.forEach(function (location) {\n          if (location.type === 'alias' && location.source === 'cte') {\n            ctes[location.alias.toLowerCase()] = true;\n          }\n        });\n        activeLocations.activeStatementLocations.forEach(function (location) {\n          if (location.type === 'table' && (location.identifierChain.length !== 1 || !ctes[location.identifierChain[0].name.toLowerCase()])) {\n            var tableDeferred = $.Deferred();\n            var dbDeferred = $.Deferred();\n            runningPromises.push(tableDeferred);\n            runningPromises.push(dbDeferred);\n            var qid = createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase);\n            if (activeTableIndex[qid]) {\n              tableQidIndex[qid] = true;\n              tableDeferred.resolve(activeTableIndex[qid]);\n              dbDeferred.resolve(activeTableIndex[qid].parent);\n            } else {\n              var database = location.identifierChain.length === 2 ? location.identifierChain[0].name : activeLocations.defaultDatabase;\n              database = database.toLowerCase();\n              if (databaseIndex[database]) {\n                dbDeferred.resolve(databaseIndex[database]);\n              } else {\n                dataCatalog.getEntry({\n                  namespace: activeLocations.namespace,\n                  compute: activeLocations.compute,\n                  connector: activeLocations.connector,\n                  path: [database],\n                  definition: {\n                    type: 'database'\n                  }\n                }).then(function (catalogEntry) {\n                  databaseIndex[database] = new AssistDbEntry(catalogEntry, null, assistDbSource, _this.filter, i18n, navigationSettings);\n                  updateTables = true;\n                  dbDeferred.resolve(databaseIndex[database]);\n                })[\"catch\"](function () {\n                  dbDeferred.reject();\n                });\n              }\n              dbDeferred.done(function (dbEntry) {\n                dbEntry.catalogEntry.getChildren({\n                  silenceErrors: true\n                }).then(function (tableEntries) {\n                  var tableName = location.identifierChain[location.identifierChain.length - 1].name;\n                  var found = tableEntries.some(function (tableEntry) {\n                    if (tableEntry.name.toLowerCase() === tableName.toLowerCase()) {\n                      var assistTableEntry = new AssistDbEntry(tableEntry, dbEntry, assistDbSource, _this.filter, i18n, navigationSettings);\n                      activeTableIndex[createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase)] = assistTableEntry;\n                      tableQidIndex[qid] = true;\n                      updateTables = true;\n                      tableDeferred.resolve(assistTableEntry);\n                      return true;\n                    }\n                  });\n                  if (!found) {\n                    var catalogEntry = new DataCatalogEntry({\n                      path: [dbEntry.catalogEntry.name, tableName],\n                      dataCatalog: dbEntry.catalogEntry.dataCatalog,\n                      namespace: dbEntry.catalogEntry.namespace,\n                      compute: dbEntry.catalogEntry.namespace\n                    });\n                    catalogEntry.reloading = ko.observable(false);\n                    catalogEntry.reload = function () {\n                      var self = this;\n                      if (self.reloading()) {\n                        return;\n                      }\n                      self.reloading(true);\n                      huePubSub.subscribeOnce('data.catalog.entry.refreshed', function (data) {\n                        data.entry.getSourceMeta({\n                          silenceErrors: true\n                        })[\"finally\"](function () {\n                          self.reloading(false);\n                        });\n                      });\n                      dataCatalog.getEntry({\n                        namespace: activeLocations.namespace,\n                        compute: activeLocations.compute,\n                        connector: activeLocations.connector,\n                        path: []\n                      }).then(function (sourceEntry) {\n                        sourceEntry.getChildren().then(function (dbEntries) {\n                          var clearPromise;\n                          // Clear the database first if it exists without cascade\n                          var hasDb = dbEntries.some(function (dbEntry) {\n                            if (dbEntry.name.toLowerCase() === self.path[0].toLowerCase()) {\n                              clearPromise = dbEntry.clearCache({\n                                invalidate: 'invalidate',\n                                cascade: false\n                              });\n                              return true;\n                            }\n                          });\n                          if (!hasDb) {\n                            // If the database is missing clear the source without cascade\n                            clearPromise = sourceEntry.clearCache({\n                              invalidate: 'invalidate',\n                              cascade: false\n                            });\n                          }\n                          clearPromise[\"catch\"](function () {\n                            self.reloading(false);\n                          });\n                        })[\"catch\"](function () {\n                          self.reloading(false);\n                        });\n                      })[\"catch\"](function () {\n                        self.reloading(false);\n                      });\n                    };\n                    var missingEntry = new AssistDbEntry(catalogEntry, dbEntry, assistDbSource, _this.filter, i18n, navigationSettings);\n                    activeTableIndex[createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase)] = missingEntry;\n                    tableQidIndex[qid] = true;\n                    updateTables = true;\n                    missingEntry.hasErrors(true);\n                    tableDeferred.resolve(missingEntry);\n                  }\n                })[\"catch\"](tableDeferred.reject);\n              })[\"catch\"](tableDeferred.reject);\n            }\n          }\n        });\n        $.when.apply($, runningPromises).always(function () {\n          runningPromises.length = 0;\n          Object.keys(activeTableIndex).forEach(function (key) {\n            if (!tableQidIndex[key]) {\n              delete activeTableIndex[key];\n              updateTables = true;\n            }\n          });\n          if (updateTables) {\n            var tables = [];\n            Object.keys(activeTableIndex).forEach(function (key) {\n              tables.push(activeTableIndex[key]);\n            });\n            tables.sort(function (a, b) {\n              return a.catalogEntry.name.localeCompare(b.catalogEntry.name);\n            });\n            _this.activeTables(tables);\n          }\n        });\n      }\n    };\n    huePubSub.subscribe('data.catalog.entry.refreshed', function (details) {\n      var connectorId = details.entry.getConnector().id;\n      if (sources[connectorId]) {\n        var completeRefresh = false;\n        if (details.entry.isSource()) {\n          sources[connectorId].databaseIndex = {};\n          sources[connectorId].activeTableIndex = {};\n          completeRefresh = true;\n        } else if (details.entry.isDatabase() && sources[connectorId].databaseIndex[details.entry.name]) {\n          var dbEntry = sources[connectorId].databaseIndex[details.entry.name];\n          var activeTableIndex = sources[connectorId].activeTableIndex;\n          Object.keys(activeTableIndex).forEach(function (tableKey) {\n            var tableEntry = activeTableIndex[tableKey];\n            if (tableEntry.parent === dbEntry) {\n              delete activeTableIndex[tableKey];\n              completeRefresh = true;\n            }\n          });\n        } else if (details.entry.isTableOrView()) {\n          var _activeTableIndex = sources[connectorId].activeTableIndex;\n          if (_activeTableIndex[details.entry.getQualifiedPath()]) {\n            delete _activeTableIndex[details.entry.getQualifiedPath()];\n            completeRefresh = true;\n          }\n        }\n        if (completeRefresh) {\n          handleLocationUpdate(_this.activeLocations());\n        }\n      }\n    });\n    if (this.activeTab() === 'editorAssistant') {\n      huePubSub.publish('get.active.editor.locations', handleLocationUpdate);\n    } else {\n      updateOnVisible = true;\n    }\n    this.activeTab.subscribe(function (activeTab) {\n      if (activeTab === 'editorAssistant' && updateOnVisible) {\n        huePubSub.publish('get.active.editor.locations', handleLocationUpdate);\n      }\n    });\n    huePubSub.subscribe('editor.active.locations', function (activeLocations) {\n      if (_this.activeTab() === 'editorAssistant') {\n        handleLocationUpdate(activeLocations);\n      } else {\n        updateOnVisible = true;\n      }\n    });\n    huePubSub.subscribe('editor.active.risks', function (details) {\n      if (details.risks !== _this.activeRisks()) {\n        _this.activeRisks(details.risks);\n        _this.activeEditor(details.editor);\n      }\n    });\n    huePubSub.publish('editor.get.active.risks', function (details) {\n      _this.activeRisks(details.risks);\n      _this.activeEditor(details.editor);\n    });\n  }\n  return _createClass(AssistEditorContextPanel, [{\n    key: \"addFilter\",\n    value: function addFilter(riskId) {\n      var _this2 = this;\n      if (this.activeLocations() && this.activeEditor()) {\n        this.activeLocations().activeStatementLocations.every(function (location) {\n          var isLowerCase = false;\n          if (_this2.activeLocations().activeStatementLocations && _this2.activeLocations().activeStatementLocations.length > 0) {\n            var firstToken = _this2.activeLocations().activeStatementLocations[0].firstToken;\n            isLowerCase = firstToken === firstToken.toLowerCase();\n          }\n          if (riskId === 22 && location.type === 'whereClause' && !location.subquery && location.missing) {\n            _this2.activeEditor().moveCursorToPosition({\n              row: location.location.last_line - 1,\n              column: location.location.last_column - 1\n            });\n            _this2.activeEditor().clearSelection();\n            if (/\\S$/.test(_this2.activeEditor().getTextBeforeCursor())) {\n              _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), ' ');\n            }\n            var operation = location.missing ? 'WHERE ' : 'AND ';\n            _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), isLowerCase ? operation.toLowerCase() : operation);\n            _this2.activeEditor().focus();\n            if (riskId === 22) {\n              huePubSub.publish('editor.autocomplete.temporary.sort.override', {\n                partitionColumnsFirst: true\n              });\n            }\n            window.setTimeout(function () {\n              _this2.activeEditor().execCommand('startAutocomplete');\n            }, 1);\n            return false;\n          }\n          if (riskId === 17 && location.type === 'limitClause' && !location.subquery && location.missing) {\n            _this2.activeEditor().moveCursorToPosition({\n              row: location.location.last_line - 1,\n              column: location.location.last_column - 1\n            });\n            _this2.activeEditor().clearSelection();\n            if (/\\S$/.test(_this2.activeEditor().getTextBeforeCursor())) {\n              _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), ' ');\n            }\n            var _operation = 'LIMIT';\n            _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), isLowerCase ? _operation.toLowerCase() : _operation);\n            _this2.activeEditor().focus();\n            window.setTimeout(function () {\n              _this2.activeEditor().execCommand('startAutocomplete');\n            }, 1);\n            return false;\n          }\n          if (riskId === 18 && location.type === 'asterisk' && !location.subquery) {\n            _this2.activeEditor().moveCursorToPosition({\n              row: location.location.last_line - 1,\n              column: location.location.last_column - 1\n            });\n            _this2.activeEditor().clearSelection();\n            _this2.activeEditor().removeTextBeforeCursor(1);\n            _this2.activeEditor().focus();\n            window.setTimeout(function () {\n              _this2.activeEditor().execCommand('startAutocomplete');\n            }, 1);\n            return false;\n          }\n          return true;\n        });\n      }\n    }\n  }, {\n    key: \"uploadTableStats\",\n    value: function uploadTableStats(showProgress) {\n      var _this3 = this;\n      if (this.uploadingTableStats()) {\n        return;\n      }\n      this.uploadingTableStats(true);\n      huePubSub.publish('editor.upload.table.stats', {\n        activeTables: this.activeTables(),\n        showProgress: showProgress,\n        callback: function callback() {\n          _this3.uploadingTableStats(false);\n        }\n      });\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('assist-editor-context-panel', AssistEditorContextPanel, TEMPLATE);\nexport { TEMPLATE, AssistantUtils };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport { CONFIG_REFRESHED_TOPIC } from 'config/events';\nimport { filterEditorConnectors } from 'config/hueConfig';\nimport componentUtils from \"../componentUtils\";\nimport { HUE_DROP_DOWN_COMPONENT } from \"../ko.dropDown\";\nimport sqlReferenceRepository from 'sql/reference/sqlReferenceRepository';\nimport { CLEAR_UDF_CACHE_EVENT, DESCRIBE_UDF_EVENT, getUdfCategories, UDF_DESCRIBED_EVENT } from 'sql/reference/sqlUdfRepository';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nexport var NAME = 'assist-functions-panel';\n// prettier-ignore\nvar TEMPLATE = \"\\n  <div class=\\\"assist-inner-panel\\\">\\n    <div class=\\\"assist-flex-panel\\\">\\n      <div class=\\\"assist-flex-header\\\">\\n        <div class=\\\"assist-inner-header\\\">\\n          <div class=\\\"function-dialect-dropdown\\\" style=\\\"display: inline-block\\\" data-bind=\\\"\\n              component: {\\n                name: '\".concat(HUE_DROP_DOWN_COMPONENT, \"',\\n                params: {\\n                  fixedPosition: true,\\n                  value: activeConnectorUdfs,\\n                  entries: availableConnectorUdfs,\\n                  linkTitle: '\").concat(I18n('Selected type'), \"'\\n                 }\\n              }\\n            \\\"></div>\\n            <div class=\\\"pull-right\\\" style=\\\"margin-right: 15px;\\\" data-bind=\\\"with: activeConnectorUdfs\\\">\\n               <!-- ko ifnot: loading -->\\n                 <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: refresh\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\">\\n                   <i class=\\\"pointer fa fa-refresh\\\"></i>\\n                 </a>\\n               <!-- /ko -->\\n               <!-- ko if: loading -->\\n                 <i class=\\\"fa fa-refresh fa-spin blue\\\"></i>\\n               <!-- /ko -->\\n            </div>\\n        </div>\\n      </div>\\n      <!-- ko with: activeConnectorUdfs -->\\n        <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n        <!-- ko ifnot: loading -->\\n          <div class=\\\"assist-flex-search\\\">\\n            <div class=\\\"assist-filter\\\">\\n              <form autocomplete=\\\"off\\\">\\n                <input class=\\\"clearable\\\" type=\\\"text\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" placeholder=\\\"Filter...\\\" data-bind=\\\"clearable: query, value: query, valueUpdate: 'afterkeydown'\\\">\\n              </form>\\n            </div>\\n          </div>\\n          <div data-bind=\\\"css: { 'assist-flex-fill': !selectedFunction(), 'assist-flex-half': selectedFunction() }\\\">\\n            <!-- ko ifnot: query -->\\n              <ul class=\\\"assist-function-categories\\\" data-bind=\\\"foreach: categories\\\">\\n                <li>\\n                  <a class=\\\"black-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"toggle: open\\\"><i class=\\\"fa fa-fw\\\" data-bind=\\\"css: { 'fa-chevron-right': !open(), 'fa-chevron-down': open }\\\"></i> <span data-bind=\\\"text: name\\\"></span></a>\\n                  <ul class=\\\"assist-functions\\\" data-bind=\\\"slideVisible: open, foreach: functions\\\">\\n                    <li data-bind=\\\"tooltip: { title: description, placement: 'left', delay: 1000 }\\\">\\n                      <a class=\\\"assist-field-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"draggableText: { text: draggable, meta: { type: 'function' } }, css: { 'blue': $parents[1].selectedFunction() === $data }, multiClick: { click: function () { $parents[1].selectedFunction($data); }, dblClick: function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }, text: signature\\\"></a>\\n                    </li>\\n                  </ul>\\n                </li>\\n              </ul>\\n            <!-- /ko -->\\n            <!-- ko if: query -->\\n              <!-- ko if: filteredFunctions().length > 0 -->\\n              <ul class=\\\"assist-functions\\\" data-bind=\\\"foreach: filteredFunctions\\\">\\n                <li data-bind=\\\"tooltip: { title: description, placement: 'left', delay: 1000 }\\\">\\n                  <a class=\\\"assist-field-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"draggableText: { text: draggable, meta: { type: 'function' } }, css: { 'blue': $parent.selectedFunction() === $data }, multiClick: { click: function () { $parent.selectedFunction($data); }, dblClick: function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }, html: signatureMatch\\\"></a>\\n                </li>\\n              </ul>\\n              <!-- /ko -->\\n              <!-- ko if: filteredFunctions().length === 0 -->\\n              <ul class=\\\"assist-functions\\\">\\n                <li class=\\\"assist-no-entries\\\">\").concat(I18n('No results found.'), \"</li>\\n              </ul>\\n              <!-- /ko -->\\n            <!-- /ko -->\\n          </div>\\n          <!-- ko if: selectedFunction -->\\n            <div class=\\\"assist-flex-half assist-function-details\\\" data-bind=\\\"with: selectedFunction\\\">\\n              <!-- ko hueSpinner: { spin: !loaded(), center: true, size: 'large' } --><!-- /ko -->\\n              <!-- ko if: loaded -->\\n              <div class=\\\"assist-panel-close\\\"><button class=\\\"close\\\" data-bind=\\\"click: function() { $parent.selectedFunction(null); }\\\">&times;</button></div>\\n              <div class=\\\"assist-function-signature blue\\\" data-bind=\\\"draggableText: { text: draggable, meta: { type: 'function' } }, text: signature, event: { 'dblclick': function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }\\\"></div>\\n              <!-- ko if: description -->\\n              <div data-bind=\\\"html: descriptionMatch\\\"></div>\\n              <!-- /ko -->\\n              <!-- /ko -->\\n            </div>\\n          <!-- /ko -->\\n        <!-- /ko -->\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n\");\nvar ConnectorUdfCategories = /*#__PURE__*/function () {\n  function ConnectorUdfCategories(connector) {\n    var _this = this;\n    _classCallCheck(this, ConnectorUdfCategories);\n    this.connector = connector;\n    this.loading = ko.observable(true);\n    this.initialized = false;\n    this.label = this.connector.displayName;\n    this.categories = ko.observableArray([]);\n    this.query = ko.observable().extend({\n      rateLimit: 400\n    });\n    this.selectedFunction = ko.observable();\n    this.selectedFunction.subscribe(function (selectedUdf) {\n      if (selectedUdf) {\n        if (!selectedUdf.category.open()) {\n          selectedUdf.category.open(true);\n        }\n        if (!selectedUdf.loaded()) {\n          huePubSub.publish(DESCRIBE_UDF_EVENT, {\n            connector: _this.connector,\n            udfName: selectedUdf.name\n          });\n        }\n      }\n    });\n    huePubSub.subscribe(UDF_DESCRIBED_EVENT, function (details) {\n      // TODO: Show UDFs from databases in the assist functions panel\n      if (!details.database && details.connector.id === _this.connector.id) {\n        _this.categories().some(function (category) {\n          return category.functions.some(function (udf) {\n            if (udf.name === details.udf.name) {\n              udf.loaded(details.udf.described);\n              udf.signature(details.udf.signature);\n              udf.signatureMatch(details.udf.signature);\n              udf.description(details.udf.description);\n              udf.descriptionMatch(details.udf.description);\n              udf.loaded(details.udf.described);\n              return true;\n            }\n          });\n        });\n      }\n    });\n    this.filteredFunctions = ko.pureComputed(function () {\n      var result = [];\n      if (_this.loading()) {\n        return result;\n      }\n      var lowerCaseQuery = _this.query().toLowerCase();\n      var replaceRegexp = new RegExp('(' + lowerCaseQuery + ')', 'i');\n      _this.categories().forEach(function (category) {\n        category.functions.forEach(function (fn) {\n          if (fn.signature().toLowerCase().indexOf(lowerCaseQuery) === 0) {\n            fn.weight = 2;\n            fn.signatureMatch(fn.signature().replace(replaceRegexp, '<b>$1</b>'));\n            fn.descriptionMatch(fn.description());\n            result.push(fn);\n          } else if (fn.signature().toLowerCase().indexOf(lowerCaseQuery) !== -1) {\n            fn.weight = 1;\n            fn.signatureMatch(fn.signature().replace(replaceRegexp, '<b>$1</b>'));\n            fn.descriptionMatch(fn.description());\n            result.push(fn);\n          } else if (fn.description() && fn.description().toLowerCase().indexOf(lowerCaseQuery) !== -1) {\n            fn.signatureMatch(fn.signature());\n            fn.descriptionMatch(fn.description().replace(replaceRegexp, '<b>$1</b>'));\n            fn.weight = 0;\n            result.push(fn);\n          } else {\n            if (fn.signatureMatch() !== fn.signature()) {\n              fn.signatureMatch(fn.signature());\n            }\n            if (fn.descriptionMatch() !== fn.description()) {\n              fn.descriptionMatch(fn.description());\n            }\n          }\n        });\n      });\n      result.sort(function (a, b) {\n        if (a.weight !== b.weight) {\n          return b.weight - a.weight;\n        }\n        return a.signature().localeCompare(b.signature());\n      });\n      return result;\n    });\n  }\n  return _createClass(ConnectorUdfCategories, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!this.initialized) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.next = 4;\n              return this.getUdfs();\n            case 4:\n              this.initialized = true;\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"refresh\",\n    value: function () {\n      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              this.loading(true);\n              huePubSub.publish(CLEAR_UDF_CACHE_EVENT, {\n                connector: this.connector,\n                callback: this.getUdfs.bind(this)\n              });\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function refresh() {\n        return _refresh.apply(this, arguments);\n      }\n      return refresh;\n    }()\n  }, {\n    key: \"getUdfs\",\n    value: function () {\n      var _getUdfs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var categories, functions;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              this.loading(true);\n              categories = [];\n              _context3.next = 4;\n              return getUdfCategories(sqlReferenceRepository, this.connector);\n            case 4:\n              functions = _context3.sent;\n              functions.forEach(function (category) {\n                var koCategory = {\n                  name: category.name,\n                  open: ko.observable(false),\n                  functions: Object.keys(category.functions).map(function (key) {\n                    var fn = category.functions[key];\n                    return {\n                      name: fn.name,\n                      draggable: fn.draggable,\n                      signature: ko.observable(fn.signature),\n                      signatureMatch: ko.observable(fn.signature),\n                      description: ko.observable(fn.description),\n                      descriptionMatch: ko.observable(fn.description),\n                      loaded: ko.observable(fn.described)\n                    };\n                  })\n                };\n                koCategory.functions.forEach(function (fn) {\n                  fn.category = koCategory;\n                });\n                categories.push(koCategory);\n              });\n              this.categories(categories);\n              this.loading(false);\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function getUdfs() {\n        return _getUdfs.apply(this, arguments);\n      }\n      return getUdfs;\n    }()\n  }]);\n}();\nvar AssistFunctionsPanel = /*#__PURE__*/_createClass(function AssistFunctionsPanel(params) {\n  var _this2 = this;\n  _classCallCheck(this, AssistFunctionsPanel);\n  this.categories = {};\n  this.activeConnector = params.activeConnector;\n  this.availableConnectorUdfs = ko.observableArray();\n  this.activeConnectorUdfs = ko.observable();\n  this.activeConnectorUdfs.subscribe( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(activeConnectorUdfs) {\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return activeConnectorUdfs.init();\n          case 2:\n            setInLocalStorage('assist.function.panel.active.connector.type', activeConnectorUdfs.connector.type);\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n  var setCategoriesFromConnector = function setCategoriesFromConnector(connector) {\n    _this2.availableConnectorUdfs().some(function (availableConnectorUdfs) {\n      if (availableConnectorUdfs.connector.type === connector.type) {\n        _this2.activeConnectorUdfs(availableConnectorUdfs);\n        return true;\n      }\n    });\n  };\n  this.activeConnector.subscribe(function (connector) {\n    if (connector) {\n      setCategoriesFromConnector(connector);\n    }\n  });\n  var configUpdated = function configUpdated() {\n    var lastActiveConnectorType = _this2.activeConnector() && _this2.activeConnector().type || getFromLocalStorage('assist.function.panel.active.connector.type');\n    var availableConnectorUdfs = filterEditorConnectors(function (connector) {\n      return connector.dialect && sqlReferenceRepository.hasUdfCategories(connector.dialect);\n    }).map(function (connector) {\n      return new ConnectorUdfCategories(connector);\n    });\n    availableConnectorUdfs.sort(function (a, b) {\n      return a.connector.displayName.localeCompare(b.connector.displayName);\n    });\n    _this2.availableConnectorUdfs(availableConnectorUdfs);\n    var activeConnectorUdfs;\n    if (lastActiveConnectorType) {\n      activeConnectorUdfs = _this2.availableConnectorUdfs().find(function (connectorUdf) {\n        return connectorUdf.connector.type === lastActiveConnectorType;\n      });\n    }\n    if (!activeConnectorUdfs && _this2.availableConnectorUdfs().length) {\n      activeConnectorUdfs = _this2.availableConnectorUdfs()[0];\n    }\n    _this2.activeConnectorUdfs(activeConnectorUdfs);\n    setCategoriesFromConnector(_this2.activeConnector());\n  };\n  configUpdated();\n  huePubSub.subscribe(CONFIG_REFRESHED_TOPIC, configUpdated);\n});\ncomponentUtils.registerStaticComponent(NAME, AssistFunctionsPanel, TEMPLATE);\nexport default AssistFunctionsPanel;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport AssistGitEntry from \"./assistGitEntry\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"git-details-title\\\">\\n    <span data-bind=\\\"text: definition.name\\\"></span>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-git-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function () { huePubSub.publish('assist.git.refresh'); }\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\" title=\\\"\".concat(I18n('Manual refresh'), \"\\\"></i></a>\\n    </div>\\n  </script>\\n\\n  <!-- ko with: selectedGitEntry -->\\n  <div class=\\\"assist-flex-header assist-breadcrumb\\\" >\\n    <!-- ko if: parent !== null -->\\n    <a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { huePubSub.publish('assist.selectGitEntry', parent); }\\\">\\n      <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n      <i class=\\\"fa fa-fw fa-folder-o\\\"></i>\\n      <span data-bind=\\\"text: path, attr: {'title': path }\\\"></span>\\n    </a>\\n    <!-- /ko -->\\n    <!-- ko if: parent === null -->\\n    <div>\\n      <i class=\\\"fa fa-fw fa-folder-o\\\"></i>\\n      <span data-bind=\\\"text: path\\\"></span>\\n    </div>\\n    <!-- /ko -->\\n    <!-- ko template: 'assist-git-header-actions' --><!-- /ko -->\\n  </div>\\n  <div class=\\\"assist-flex-fill assist-git-scrollable\\\" data-bind=\\\"delayedOverflow\\\">\\n    <div data-bind=\\\"visible: ! loading() && ! hasErrors()\\\" style=\\\"position: relative;\\\">\\n      <!-- ko hueSpinner: { spin: loadingMore, overlay: true } --><!-- /ko -->\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-git-scrollable' }\\\">\\n        <li class=\\\"assist-entry assist-table-link\\\" style=\\\"position: relative;\\\" data-bind=\\\"visibleOnHover: { 'selector': '.assist-actions' }\\\">\\n\\n          <a href=\\\"javascript:void(0)\\\" class=\\\"assist-entry assist-table-link\\\" data-bind=\\\"multiClick: { click: toggleOpen, dblClick: dblClick }, attr: {'title': definition.name }\\\">\\n            <!-- ko if: definition.type === 'dir' -->\\n            <i class=\\\"fa fa-fw fa-folder-o muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <!-- ko ifnot: definition.type === 'dir' -->\\n            <i class=\\\"fa fa-fw fa-file-o muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <span draggable=\\\"true\\\" data-bind=\\\"text: definition.name, draggableText: { text: '\\\\'' + path + '\\\\'', meta: {'type': 'git', 'definition': definition} }\\\"></span>\\n          </a>\\n        </li>\\n      </ul>\\n      <!-- ko if: !loading() && entries().length === 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry\\\"><span class=\\\"assist-no-entries\\\">\").concat(I18n('Empty directory'), \"</span></li>\\n      </ul>\\n      <!-- /ko -->\\n    </div>\\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    <div class=\\\"assist-errors\\\" data-bind=\\\"visible: ! loading() && hasErrors()\\\">\\n      <span>\").concat(I18n('Error loading contents.'), \"</span>\\n    </div>\\n  </div>\\n  <!-- /ko -->\\n\");\nvar AssistGitPanel = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @constructor\n   **/\n  function AssistGitPanel(options) {\n    _classCallCheck(this, AssistGitPanel);\n    var self = this;\n    self.selectedGitEntry = ko.observable();\n    self.reload = function () {\n      var lastKnownPath = getFromLocalStorage('assist.currentGitPath', window.USER_HOME_DIR);\n      var parts = lastKnownPath.split('/');\n      parts.shift();\n      var currentEntry = new AssistGitEntry({\n        definition: {\n          name: '/',\n          type: 'dir'\n        },\n        parent: null\n      });\n      currentEntry.loadDeep(parts, function (entry) {\n        self.selectedGitEntry(entry);\n        entry.open(true);\n      });\n    };\n    huePubSub.subscribe('assist.selectGitEntry', function (entry) {\n      self.selectedGitEntry(entry);\n      setInLocalStorage('assist.currentGitPath', entry.path);\n    });\n    huePubSub.subscribe('assist.git.refresh', function () {\n      huePubSub.publish('assist.clear.git.cache');\n      self.reload();\n    });\n    self.init();\n  }\n  return _createClass(AssistGitPanel, [{\n    key: \"init\",\n    value: function init() {\n      this.reload();\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('hue-assist-git-panel', AssistGitPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport AssistHBaseEntry from \"./assistHBaseEntry\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"hbase-context-items\\\">\\n    <!-- ko if: definition.host -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: open\\\"><i class=\\\"fa fa-fw fa-folder-open-o\\\"></i> \".concat(I18n('Open cluster'), \"</a></li>\\n    <!-- /ko -->\\n    <!-- ko ifnot: definition.host -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: open\\\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'hbase' } } --><!-- /ko --> \").concat(I18n('Open in HBase'), \"</a></li>\\n    <!-- /ko -->\\n  </script>\\n  \\n  <script type=\\\"text/html\\\" id=\\\"assist-hbase-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function () { huePubSub.publish('assist.hbase.refresh'); }\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\" title=\\\"\").concat(I18n('Manual refresh'), \"\\\"></i></a>\\n    </div>\\n  </script>\\n\\n  <!-- ko with: selectedHBaseEntry -->\\n  <div class=\\\"assist-inner-header assist-breadcrumb\\\" >\\n    <!-- ko if: definition.host !== '' -->\\n    <a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { huePubSub.publish('assist.clickHBaseRootItem'); }\\\">\\n      <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n      <i class=\\\"fa fa-fw fa-th-large\\\"></i>\\n      <span data-bind=\\\"text: definition.name\\\"></span>\\n    </a>\\n    <!-- /ko -->\\n    <!-- ko if: definition.host === '' -->\\n    \").concat(I18n('Clusters'), \"\\n    <!-- /ko -->\\n    <!-- ko template: 'assist-hbase-header-actions' --><!-- /ko -->\\n  </div>\\n  <div class=\\\"assist-flex-fill assist-hbase-scrollable\\\" data-bind=\\\"delayedOverflow\\\">\\n    <div data-bind=\\\"visible: ! loading() && ! hasErrors()\\\" style=\\\"position: relative;\\\">\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-hbase-scrollable' }\\\">\\n        <li class=\\\"assist-entry assist-table-link\\\" style=\\\"position: relative;\\\" data-bind=\\\"appAwareTemplateContextMenu: { template: 'hbase-context-items', scrollContainer: '.assist-hbase-scrollable' }, visibleOnHover: { 'selector': '.assist-actions' }\\\">\\n          <a href=\\\"javascript:void(0)\\\" class=\\\"assist-entry assist-table-link\\\" data-bind=\\\"multiClick: { click: click, dblClick: dblClick }, attr: {'title': definition.name }\\\">\\n            <!-- ko if: definition.host -->\\n            <i class=\\\"fa fa-fw fa-th-large muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <!-- ko ifnot: definition.host -->\\n            <i class=\\\"fa fa-fw fa-th muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <span draggable=\\\"true\\\" data-bind=\\\"text: definition.name, draggableText: { text: '\\\\'' + definition.name + '\\\\'', meta: {'type': 'collection', 'definition': definition} }\\\"></span>\\n          </a>\\n        </li>\\n      </ul>\\n      <!-- ko if: !loading() && entries().length === 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry\\\">\\n          <span class=\\\"assist-no-entries\\\">\\n          <!-- ko if: definition.host === '' -->\\n          \").concat(I18n('No clusters available.'), \"\\n          <!-- /ko -->\\n          <!-- ko if: definition.host !== '' -->\\n          \").concat(I18n('No tables available.'), \"\\n          <!-- /ko -->\\n          </span>\\n        </li>\\n      </ul>\\n      <!-- /ko -->\\n    </div>\\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    <div class=\\\"assist-errors\\\" data-bind=\\\"visible: ! loading() && hasErrors()\\\">\\n      <span>\").concat(I18n('Error loading contents.'), \"</span>\\n    </div>\\n  </div>\\n  <!-- /ko -->\\n\");\nvar AssistHBasePanel = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @constructor\n   **/\n  function AssistHBasePanel(options) {\n    _classCallCheck(this, AssistHBasePanel);\n    var self = this;\n    self.initialized = false;\n    var root = new AssistHBaseEntry({\n      definition: {\n        host: '',\n        name: '',\n        port: 0\n      }\n    });\n    self.selectedHBaseEntry = ko.observable();\n    self.reload = function () {\n      self.selectedHBaseEntry(root);\n      root.loadEntries(function () {\n        var lastOpenendPath = getFromLocalStorage('assist.last.opened.hbase.entry');\n        if (lastOpenendPath) {\n          root.entries().every(function (entry) {\n            if (entry.path === lastOpenendPath) {\n              entry.open();\n              return false;\n            }\n            return true;\n          });\n        }\n      });\n    };\n    self.selectedHBaseEntry.subscribe(function (newEntry) {\n      if (newEntry !== root || newEntry === root && newEntry.loaded) {\n        setInLocalStorage('assist.last.opened.hbase.entry', newEntry.path);\n      }\n    });\n    huePubSub.subscribe('assist.clickHBaseItem', function (entry) {\n      if (entry.definition.host) {\n        entry.loadEntries();\n        self.selectedHBaseEntry(entry);\n      } else {\n        huePubSub.publish('assist.dblClickHBaseItem', entry);\n      }\n    });\n    huePubSub.subscribe('assist.clickHBaseRootItem', function () {\n      self.reload();\n    });\n    var delayChangeHash = function delayChangeHash(hash) {\n      window.setTimeout(function () {\n        window.location.hash = hash;\n      }, 0);\n    };\n    self.lastClickeHBaseEntry = null;\n    self.HBaseLoaded = false;\n    huePubSub.subscribeOnce('hbase.app.loaded', function () {\n      if (self.selectedHBaseEntry() && self.lastClickeHBaseEntry) {\n        delayChangeHash(self.selectedHBaseEntry().definition.name + '/' + self.lastClickeHBaseEntry.definition.name);\n      }\n      self.HBaseLoaded = true;\n    });\n    huePubSub.subscribe('assist.dblClickHBaseItem', function (entry) {\n      var hash = self.selectedHBaseEntry().definition.name + '/' + entry.definition.name;\n      if (window.location.pathname.startsWith('/hue/hbase')) {\n        window.location.hash = hash;\n      } else {\n        self.lastClickeHBaseEntry = entry;\n        huePubSub.subscribeOnce('app.gained.focus', function (app) {\n          if (app === 'hbase' && self.HBaseLoaded) {\n            delayChangeHash(hash);\n          }\n        });\n        huePubSub.publish('open.link', '/hbase');\n      }\n    });\n    huePubSub.subscribe('assist.hbase.refresh', function () {\n      huePubSub.publish('assist.clear.hbase.cache');\n      self.reload();\n    });\n    self.init();\n  }\n  return _createClass(AssistHBasePanel, [{\n    key: \"init\",\n    value: function init() {\n      var self = this;\n      if (self.initialized) {\n        return;\n      }\n      self.reload();\n      self.initialized = true;\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('hue-assist-hbase-panel', AssistHBasePanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport ko from 'knockout';\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { ASSIST_DB_HIGHLIGHT_EVENT } from \"./events\";\nimport \"../../bindings/ko.tooltip\";\nexport var ASSIST_KEY_COMPONENT = 'hue-assist-key';\nvar TEMPLATE = \"\\n  <!-- ko if: entry.isForeignKey() -->\\n    <!-- ko if: entry.definition.foreignKey.to -->\\n      <a class=\\\"assist-field-link\\\" style=\\\"padding: 0 2px;\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"\\n          tooltip: {\\n            title: foreignKeyTooltipHtml,\\n            html: true,\\n            placement: 'bottom'\\n          },\\n          click: foreignKeyClick,\\n          clickbubble: false\\n        \\\"><i class=\\\"fa fa-key\\\"></i></a>\\n    <!-- /ko -->\\n    <!-- ko ifnot: entry.definition.foreignKey.to -->\\n      <i class=\\\"fa fa-key\\\" style=\\\"padding: 0 2px;\\\" data-bind=\\\"\\n          tooltip: {\\n            title: '\".concat(I18n('Foreign Key'), \"',\\n            placement: 'bottom'\\n          }\\n        \\\"></i>\\n    <!-- /ko -->\\n  <!-- /ko -->\\n  <!-- ko if: entry.isPrimaryKey() || entry.isPartitionKey() -->\\n    <i class=\\\"fa fa-key\\\" style=\\\"padding: 0 2px;\\\" data-bind=\\\"\\n        tooltip: {\\n          title: entry.isPrimaryKey() ? '\").concat(I18n('Primary Key'), \"' : '\").concat(I18n('Partition Key'), \"',\\n          placement: 'bottom'\\n        }\\n      \\\"></i>\\n  <!-- /ko -->\\n  <!-- ko ifnot: entry.isForeignKey() || entry.isPrimaryKey() || entry.isPartitionKey() -->\\n    <i class=\\\"fa fa-key\\\"></i>\\n  <!-- /ko -->\\n\");\nvar AssistKey = /*#__PURE__*/function () {\n  function AssistKey(params) {\n    var _this = this;\n    _classCallCheck(this, AssistKey);\n    this.entry = ko.unwrap(params.entry);\n    this.onForeignKeyClick = params.onForeignKeyClick;\n    this.foreignKeyTooltipHtml = ko.pureComputed(function () {\n      return \"<i style=\\\"margin-right: 4px\\\" class=\\\"fa fa-arrow-right\\\"></i>\\n    \".concat(_this.entry.definition.foreignKey && _this.entry.definition.foreignKey.to);\n    });\n  }\n  return _createClass(AssistKey, [{\n    key: \"foreignKeyClick\",\n    value: function foreignKeyClick() {\n      var _this2 = this;\n      this.entry.dataCatalog.getEntry({\n        path: this.entry.definition.foreignKey.to,\n        namespace: this.entry.namespace,\n        compute: this.entry.compute\n      }).then(function (entry) {\n        if (_this2.onForeignKeyClick) {\n          // Ensure definition is loaded\n          if (!entry.definition) {\n            entry.getParent().then(function (parentEntry) {\n              parentEntry.getChildren().then(function () {\n                _this2.onForeignKeyClick(entry);\n              });\n            })[\"catch\"](function () {});\n          } else {\n            _this2.onForeignKeyClick(entry);\n          }\n        } else {\n          huePubSub.publish(ASSIST_DB_HIGHLIGHT_EVENT, entry);\n        }\n      });\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(ASSIST_KEY_COMPONENT, AssistKey, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT } from \"./events\";\nimport { simpleGet } from \"../../../api/apiUtils\";\nimport { CONFIG_REFRESHED_TOPIC } from 'config/events';\nimport { filterEditorConnectors } from 'config/hueConfig';\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nexport var NAME = 'assist-language-reference-panel';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"language-reference-topic-tree\\\">\\n    <!-- ko if: $data.length -->\\n    <ul class=\\\"assist-docs-topic-tree \\\" data-bind=\\\"foreach: $data\\\">\\n      <li>\\n        <a class=\\\"black-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $component.selectedTopic($data); }, toggle: open\\\">\\n          <i class=\\\"fa fa-fw\\\" style=\\\"font-size: 12px;\\\" data-bind=\\\"css: { 'fa-chevron-right': children.length && !open(), 'fa-chevron-down': children.length && open() }\\\"></i>\\n          <span class=\\\"assist-field-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"css: { 'blue': $component.selectedTopic() === $data }, text: title\\\"></span>\\n        </a>\\n        <!-- ko if: open -->\\n        <!-- ko template: { name: 'language-reference-topic-tree', data: children } --><!-- /ko -->\\n        <!-- /ko -->\\n      </li>\\n    </ul>\\n    <!-- /ko -->\\n  </script>\\n\\n  <div class=\\\"assist-inner-panel\\\">\\n    <div class=\\\"assist-flex-panel\\\">\\n      <div class=\\\"assist-flex-header\\\">\\n        <div class=\\\"assist-inner-header\\\">\\n          <div class=\\\"function-dialect-dropdown\\\" data-bind=\\\"component: { name: 'hue-drop-down', params: { fixedPosition: true, value: activeDialect, entries: availableDialects, linkTitle: '\".concat(I18n('Selected dialect'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n        </div>\\n      </div>\\n      <div class=\\\"assist-flex-search\\\">\\n        <div class=\\\"assist-filter\\\">\\n          <form autocomplete=\\\"off\\\">\\n            <input class=\\\"clearable\\\" type=\\\"text\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" placeholder=\\\"Filter...\\\" data-bind=\\\"clearable: query, value: query, valueUpdate: 'afterkeydown'\\\">\\n          </form>\\n        </div>\\n      </div>\\n      <div class=\\\"assist-docs-topics\\\" data-bind=\\\"css: { 'assist-flex-fill': !selectedTopic(), 'assist-flex-40': selectedTopic() }\\\">\\n        <!-- ko ifnot: query -->\\n        <!-- ko template: { name: 'language-reference-topic-tree', data: topics } --><!-- /ko -->\\n        <!-- /ko -->\\n        <!-- ko if: query -->\\n        <!-- ko if: filteredTopics().length > 0 -->\\n        <ul class=\\\"assist-docs-topic-tree\\\" data-bind=\\\"foreach: filteredTopics\\\">\\n          <li>\\n            <a class=\\\"assist-field-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"css: { 'blue': $component.selectedTopic() === $data }, click: function () { $component.selectedTopic($data); }, html: titleMatch() || title\\\"></a>\\n          </li>\\n        </ul>\\n        <!-- /ko -->\\n        <!-- ko if: filteredTopics().length === 0 -->\\n        <ul class=\\\"assist-docs-topic-tree\\\">\\n          <li class=\\\"assist-no-entries\\\">\").concat(I18n('No results found.'), \"</li>\\n        </ul>\\n        <!-- /ko -->\\n        <!-- /ko -->\\n      </div>\\n      <!-- ko if: selectedTopic -->\\n      <div class=\\\"assist-flex-60 assist-docs-details\\\" data-bind=\\\"with: selectedTopic\\\">\\n        <div class=\\\"assist-panel-close\\\"><button class=\\\"close\\\" data-bind=\\\"click: function() { $component.selectedTopic(undefined); }\\\">&times;</button></div>\\n        <div data-bind=\\\"htmlUnsecure: bodyMatch() || body()\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n\");\nvar LanguageReferenceTopic = /*#__PURE__*/function () {\n  function LanguageReferenceTopic(entry, index) {\n    var _this = this;\n    _classCallCheck(this, LanguageReferenceTopic);\n    this.ref = entry.ref;\n    this.title = entry.title;\n    this.index = index;\n    this.weight = 1;\n    this.children = [];\n    entry.children.forEach(function (child) {\n      _this.children.push(new LanguageReferenceTopic(child, _this.index));\n    });\n    this.loadDeferred = $.Deferred();\n    this.loading = ko.observable(false);\n    this.body = ko.observable();\n    this.bodyMatch = ko.observable();\n    this.open = ko.observable(false);\n    this.titleMatch = ko.observable();\n  }\n  return _createClass(LanguageReferenceTopic, [{\n    key: \"load\",\n    value: function load() {\n      var _this2 = this;\n      if (this.body() || this.loading()) {\n        return this.loadDeferred.promise();\n      }\n      this.loading(true);\n      simpleGet(this.index[this.ref]).done(function (doc) {\n        _this2.body(doc.body);\n      }).always(function () {\n        _this2.loading(false);\n        _this2.loadDeferred.resolve(_this2);\n      });\n      return this.loadDeferred.promise();\n    }\n  }]);\n}();\nvar AssistLangRefPanel = /*#__PURE__*/_createClass(function AssistLangRefPanel(params, element) {\n  var _this3 = this;\n  _classCallCheck(this, AssistLangRefPanel);\n  this.connector = params.connector;\n  this.availableDialects = ko.observableArray();\n  this.activeDialect = ko.observable();\n  this.allTopics = {\n    impala: [],\n    hive: []\n  };\n  window.IMPALA_DOC_TOP_LEVEL.forEach(function (topLevelItem) {\n    _this3.allTopics.impala.push(new LanguageReferenceTopic(topLevelItem, window.IMPALA_DOC_INDEX));\n  });\n  window.HIVE_DOC_TOP_LEVEL.forEach(function (topLevelItem) {\n    _this3.allTopics.hive.push(new LanguageReferenceTopic(topLevelItem, window.HIVE_DOC_INDEX));\n  });\n  var updateDialect = function updateDialect(dialect) {\n    if (_this3.availableDialects().indexOf(dialect) !== -1) {\n      _this3.activeDialect(dialect);\n    }\n  };\n  this.connector.subscribe(function (connector) {\n    if (connector) {\n      updateDialect(connector.dialect);\n    }\n  });\n  var configUpdated = function configUpdated() {\n    var lastActiveDialect = _this3.activeDialect();\n    var configuredDialects = filterEditorConnectors(function (connector) {\n      return connector.dialect === 'hive' || connector.dialect === 'impala';\n    }).map(function (connector) {\n      return connector.dialect;\n    });\n    configuredDialects.sort();\n    _this3.availableDialects(configuredDialects);\n    if (lastActiveDialect && _this3.availableDialects().find(function (dialect) {\n      return dialect === lastActiveDialect;\n    })) {\n      _this3.activeDialect(lastActiveDialect);\n    } else {\n      _this3.activeDialect(_this3.availableDialects().length ? _this3.availableDialects()[0] : undefined);\n    }\n  };\n  configUpdated();\n  huePubSub.subscribe(CONFIG_REFRESHED_TOPIC, configUpdated);\n  if (this.connector()) {\n    updateDialect(this.connector().dialect);\n  }\n  this.topics = ko.pureComputed(function () {\n    return _this3.activeDialect() ? _this3.allTopics[_this3.activeDialect()] : [];\n  });\n  this.selectedTopic = ko.observable();\n  this.selectedTopic.subscribe(function (newTopic) {\n    if (newTopic) {\n      newTopic.load();\n    }\n  });\n  this.query = ko.observable().extend({\n    throttle: 200\n  });\n  this.filteredTopics = ko.observableArray();\n  var sortFilteredTopics = function sortFilteredTopics() {\n    _this3.filteredTopics.sort(function (a, b) {\n      if (a.weight !== b.weight) {\n        return b.weight - a.weight;\n      }\n      return a.title.localeCompare(b.title);\n    });\n  };\n  this.query.subscribe(function (newVal) {\n    if (!newVal) {\n      return;\n    }\n    var lowerCaseQuery = _this3.query().toLowerCase();\n    var replaceRegexp = new RegExp('(' + lowerCaseQuery + ')', 'i');\n    _this3.filteredTopics([]);\n    var sortTimeout = -1;\n    var findInside = function findInside(topic) {\n      topic.load().done(function (loadedTopic) {\n        var match = false;\n        var titleIndex = loadedTopic.title.toLowerCase().indexOf(lowerCaseQuery);\n        if (titleIndex !== -1) {\n          loadedTopic.weight = titleIndex === 0 ? 2 : 1;\n          loadedTopic.titleMatch(loadedTopic.title.replace(new RegExp('(' + lowerCaseQuery + ')', 'i'), '<b>$1</b>'));\n          loadedTopic.bodyMatch(undefined);\n          _this3.filteredTopics.push(loadedTopic);\n          match = true;\n        } else if (loadedTopic.body() && loadedTopic.body().toLowerCase().indexOf(lowerCaseQuery) !== -1) {\n          loadedTopic.weight = 0;\n          loadedTopic.titleMatch(undefined);\n          loadedTopic.bodyMatch(loadedTopic.body().replace(replaceRegexp, '<b>$1</b>'));\n          _this3.filteredTopics.push(loadedTopic);\n          match = true;\n        } else {\n          loadedTopic.titleMatch(undefined);\n          loadedTopic.bodyMatch(undefined);\n        }\n        if (match) {\n          window.clearTimeout(sortTimeout);\n          sortTimeout = window.setTimeout(sortFilteredTopics, 100);\n        }\n      });\n      topic.children.forEach(findInside);\n    };\n    _this3.topics().forEach(findInside);\n    window.setTimeout(function () {\n      // Initial sort deferred for promises to complete\n      sortFilteredTopics();\n    }, 0);\n  });\n  this.selectedTopic.subscribe(function () {\n    $(element).find('.assist-docs-details').scrollTop(0);\n  });\n  this.query.subscribe(function () {\n    $(element).find('.assist-docs-topics').scrollTop(0);\n  });\n  var scrollToSelectedTopic = function scrollToSelectedTopic() {\n    var topics = $(element).find('.assist-docs-topics');\n    if (topics.find('.blue').length) {\n      topics.scrollTop(Math.min(topics.scrollTop() + topics.find('.blue').position().top - 20, topics.find('> ul').height() - topics.height()));\n    }\n  };\n  var scrollToAnchor = function scrollToAnchor(anchorId) {\n    if (!anchorId) {\n      return;\n    }\n    var detailsPanel = $(element).find('.assist-docs-details');\n    var found = detailsPanel.find('#' + anchorId.split('/').join(' #'));\n    if (found.length) {\n      detailsPanel.scrollTop(found.position().top - 10);\n    }\n  };\n  huePubSub.subscribe('scroll.test', scrollToSelectedTopic);\n  huePubSub.subscribe(ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, function (targetTopic) {\n    var topicStack = [];\n    var findTopic = function findTopic(topics) {\n      topics.some(function (topic) {\n        topicStack.push(topic);\n        if (topic.ref === targetTopic.ref) {\n          while (topicStack.length) {\n            topicStack.pop().open(true);\n          }\n          _this3.query('');\n          _this3.selectedTopic(topic);\n          window.setTimeout(function () {\n            scrollToAnchor(targetTopic.anchorId);\n            scrollToSelectedTopic();\n          }, 0);\n          return true;\n        } else if (topic.children.length) {\n          var inChild = findTopic(topic.children);\n          if (inChild) {\n            return true;\n          }\n        }\n        topicStack.pop();\n      });\n    };\n    findTopic(_this3.topics());\n  });\n  $(element).on('click.langref', function (event) {\n    if (event.target.className === 'hue-doc-internal-link') {\n      huePubSub.publish(ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, {\n        ref: $(event.target).data('doc-ref'),\n        anchorId: $(event.target).data('doc-anchor-id')\n      });\n    }\n  });\n});\ncomponentUtils.registerStaticComponent(NAME, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new AssistLangRefPanel(params, componentInfo.element);\n  }\n}, TEMPLATE);\nexport default AssistLangRefPanel;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_SHOW_DOC_EVENT, ASSIST_SHOW_SOLR_EVENT, ASSIST_SHOW_SQL_EVENT, SHOW_LEFT_ASSIST_EVENT } from \"./events\";\nimport { GET_KNOWN_CONFIG_TOPIC } from 'config/events';\nimport AssistInnerPanel from \"./assistInnerPanel\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport hueAnalytics from 'utils/hueAnalytics';\nimport I18n from \"../../../utils/i18n\";\nimport { withLocalStorage } from 'utils/storageUtils';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"assist-panel-inner-header\\\">\\n    <div class=\\\"assist-header assist-fixed-height\\\" data-bind=\\\"visibleOnHover: { selector: '.assist-header-actions' }, css: { 'assist-resizer': $index() > 0 }\\\" style=\\\"display:none;\\\">\\n      <span data-bind=\\\"text: $parent.name\\\"></span>\\n      <div class=\\\"assist-header-actions\\\">\\n        <div class=\\\"inactive-action\\\" data-bind=\\\"click: function () { $parent.visible(false) }\\\"><i class=\\\"fa fa-times\\\"></i></div>\\n      </div>\\n    </div>\\n  </script>\\n  \\n  <div class=\\\"assist-panel\\\" data-bind=\\\"dropzone: { url: '/indexer/api/indexer/upload_local_file_drag_and_drop', clickable: false, paramName: 'file', onComplete: function(path){ huePubSub.publish('assist.dropzone.complete', path); }, disabled: !window.SHOW_UPLOAD_BUTTON }\\\">\\n    <!-- ko if: availablePanels().length > 1 -->\\n    <div class=\\\"assist-panel-switches\\\">\\n      <!-- ko foreach: availablePanels -->\\n      <div class=\\\"inactive-action assist-type-switch\\\" data-bind=\\\"click: function () { $parent.visiblePanel($data); }, css: { 'blue': $parent.visiblePanel() === $data }, style: { 'float': rightAlignIcon ? 'right' : 'left' },  attr: { 'title': name }\\\">\\n        <!-- ko if: iconSvg --><span style=\\\"font-size:22px;\\\"><svg class=\\\"hi\\\"><use data-bind=\\\"attr: {'href': iconSvg }\\\" href=''></use></svg></span><!-- /ko -->\\n        <!-- ko if: !iconSvg --><i class=\\\"fa fa-fw valign-middle\\\" data-bind=\\\"css: icon\\\"></i><!-- /ko -->\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n    <!-- /ko -->\\n    <!-- ko with: visiblePanel -->\\n    <div class=\\\"assist-panel-contents\\\" data-bind=\\\"style: { 'padding-top': $parent.availablePanels().length > 1 ? '10px' : '5px' }\\\">\\n      <div class=\\\"assist-inner-panel\\\">\\n        <div class=\\\"assist-flex-panel\\\">\\n          <!-- ko component: panelData --><!-- /ko -->\\n        </div>\\n      </div>\\n    </div>\\n    <!-- /ko -->\\n  </div>\\n\";\nvar AssistPanel = /*#__PURE__*/_createClass(\n/**\n * @param {Object} params\n * @param {string} params.user\n * @param {boolean} params.onlySql - For the old query editors\n * @param {string[]} params.visibleAssistPanels - Panels that will initially be shown regardless of localStorage\n * @param {Object} params.sql\n * @param {Object} params.sql.navigationSettings - enable/disable the links\n * @param {boolean} params.sql.navigationSettings.openItem - Example: true\n * @param {boolean} params.sql.navigationSettings.showStats - Example: true\n * @constructor\n */\nfunction AssistPanel(params) {\n  _classCallCheck(this, AssistPanel);\n  var self = this;\n  var i18n = {\n    errorLoadingDatabases: I18n('There was a problem loading the databases'),\n    errorLoadingTablePreview: I18n('There was a problem loading the table preview')\n  };\n  var i18nCollections = {\n    errorLoadingDatabases: I18n('There was a problem loading the indexes'),\n    errorLoadingTablePreview: I18n('There was a problem loading the index preview')\n  };\n  self.availablePanels = ko.observableArray();\n  self.visiblePanel = ko.observable();\n  self.lastOpenPanelType = ko.observable();\n  withLocalStorage('assist.last.open.panel', self.lastOpenPanelType);\n\n  // TODO: Support dynamic config changes\n  huePubSub.publish(GET_KNOWN_CONFIG_TOPIC, function (clusterConfig) {\n    if (clusterConfig && clusterConfig['app_config']) {\n      var panels = [];\n      var appConfig = clusterConfig['app_config'];\n      if (appConfig['editor']) {\n        var sqlPanel = new AssistInnerPanel({\n          panelData: {\n            name: 'hue-assist-db-panel',\n            params: $.extend({\n              i18n: i18n\n            }, params.sql)\n          },\n          name: I18n('SQL'),\n          type: 'sql',\n          icon: 'fa-database',\n          minHeight: 75\n        });\n        panels.push(sqlPanel);\n        huePubSub.subscribe(ASSIST_SHOW_SQL_EVENT, function () {\n          if (self.visiblePanel() !== sqlPanel) {\n            self.visiblePanel(sqlPanel);\n          }\n        });\n      }\n      if (appConfig.browser && appConfig.browser.interpreters) {\n        var storageBrowsers = appConfig.browser.interpreters.filter(function (interpreter) {\n          return interpreter.type === 'adls' || interpreter.type === 'hdfs' || interpreter.type === 's3' || interpreter.type === 'gs' || interpreter.type === 'abfs' || interpreter.type === 'ofs';\n        });\n        if (storageBrowsers.length) {\n          panels.push(new AssistInnerPanel({\n            panelData: {\n              name: 'hue-assist-storage-panel',\n              params: {\n                sources: storageBrowsers\n              }\n            },\n            name: I18n('Files'),\n            type: 'files',\n            icon: 'fa-files-o',\n            minHeight: 50\n          }));\n        }\n        if (appConfig.browser.interpreter_names.indexOf('indexes') !== -1) {\n          var solrPanel = new AssistInnerPanel({\n            panelData: {\n              name: 'hue-assist-db-panel',\n              params: $.extend({\n                i18n: i18nCollections,\n                isSolr: true\n              }, params.sql)\n            },\n            name: I18n('Indexes'),\n            type: 'solr',\n            icon: 'fa-search-plus',\n            minHeight: 75\n          });\n          panels.push(solrPanel);\n          huePubSub.subscribe(ASSIST_SHOW_SOLR_EVENT, function () {\n            if (self.visiblePanel() !== solrPanel) {\n              self.visiblePanel(solrPanel);\n            }\n          });\n        }\n        if (appConfig.browser.interpreter_names.indexOf('kafka') !== -1) {\n          var streamsPanel = new AssistInnerPanel({\n            panelData: {\n              name: 'hue-assist-db-panel',\n              params: $.extend({\n                i18n: i18nCollections,\n                isStreams: true\n              }, params.sql)\n            },\n            name: I18n('Streams'),\n            type: 'kafka',\n            icon: 'fa-sitemap',\n            minHeight: 75\n          });\n          panels.push(streamsPanel);\n        }\n        if (appConfig.browser.interpreter_names.indexOf('hbase') !== -1) {\n          panels.push(new AssistInnerPanel({\n            panelData: {\n              name: 'hue-assist-hbase-panel',\n              params: {}\n            },\n            name: I18n('HBase'),\n            type: 'hbase',\n            icon: 'fa-th-large',\n            minHeight: 50\n          }));\n        }\n      }\n      var documentsPanel = new AssistInnerPanel({\n        panelData: {\n          name: 'hue-assist-documents-panel',\n          params: {\n            user: params.user\n          }\n        },\n        name: I18n('Documents'),\n        type: 'documents',\n        icon: 'fa-files-o',\n        iconSvg: '#hi-documents',\n        minHeight: 50,\n        rightAlignIcon: true,\n        visible: params.visibleAssistPanels && params.visibleAssistPanels.indexOf('documents') !== -1\n      });\n      panels.push(documentsPanel);\n      huePubSub.subscribe(ASSIST_SHOW_DOC_EVENT, function (docType) {\n        huePubSub.publish(SHOW_LEFT_ASSIST_EVENT);\n        if (self.visiblePanel() !== documentsPanel) {\n          self.visiblePanel(documentsPanel);\n        }\n        huePubSub.publish('assist.documents.set.type.filter', docType);\n      });\n      if (window.HAS_GIT) {\n        panels.push(new AssistInnerPanel({\n          panelData: {\n            name: 'hue-assist-git-panel',\n            params: {}\n          },\n          name: I18n('Git'),\n          type: 'git',\n          icon: 'fa-github',\n          minHeight: 50,\n          rightAlignIcon: true\n        }));\n      }\n      self.availablePanels(panels);\n    } else {\n      self.availablePanels([new AssistInnerPanel({\n        panelData: {\n          name: 'hue-assist-db-panel',\n          params: $.extend({\n            i18n: i18n\n          }, params.sql)\n        },\n        name: I18n('SQL'),\n        type: 'sql',\n        icon: 'fa-database',\n        minHeight: 75\n      })]);\n    }\n    if (!self.lastOpenPanelType()) {\n      self.lastOpenPanelType(self.availablePanels()[0].type);\n    }\n    var lastFoundPanel = self.availablePanels().filter(function (panel) {\n      return panel.type === self.lastOpenPanelType();\n    });\n    self.visiblePanel.subscribe(function (newValue) {\n      if (self.lastOpenPanelType() !== (newValue === null || newValue === void 0 ? void 0 : newValue.type)) {\n        hueAnalytics.log('left-assist-panel', 'panel-selection/' + (newValue === null || newValue === void 0 ? void 0 : newValue.type));\n      }\n      self.lastOpenPanelType(newValue.type);\n    });\n    self.visiblePanel(lastFoundPanel.length === 1 ? lastFoundPanel[0] : self.availablePanels()[0]);\n  });\n});\ncomponentUtils.registerStaticComponent('assist-panel', AssistPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nvar TEMPLATE = \"\\n  <div class=\\\"assist-inner-panel\\\">\\n    <div class=\\\"assist-flex-panel\\\">\\n      <!-- ko if: selectedNotebook() && selectedNotebook().isBatchable() -->\\n      <!-- ko with: selectedNotebook() -->\\n      <div class=\\\"tab-pane\\\" id=\\\"scheduleTab\\\">\\n        <!-- ko ifnot: isSaved() && ! isHistory() -->\\n        \".concat(I18n('Query needs to be saved.'), \"\\n        <!-- /ko -->\\n        <!-- ko if: isSaved() && ! isHistory() -->\\n          <!-- ko if: schedulerViewModelIsLoaded() && schedulerViewModel.coordinator.isDirty() -->\\n          <a data-bind=\\\"click: saveScheduler\\\" href=\\\"javascript: void(0);\\\">\").concat(I18n('Save changes'), \"</a>\\n          <!-- /ko -->\\n          <!-- ko if: schedulerViewModelIsLoaded() && ! schedulerViewModel.coordinator.isDirty() && (! viewSchedulerId() || isSchedulerJobRunning() == false )-->\\n          <a data-bind=\\\"click: showSubmitPopup\\\" href=\\\"javascript: void(0);\\\">\").concat(I18n('Start'), \"</a>\\n          <!-- /ko -->\\n          <!-- ko if: schedulerViewModelIsLoaded() && viewSchedulerId()-->\\n          <a data-bind=\\\"click: function() { huePubSub.publish('show.jobs.panel', {id: viewSchedulerId(), interface: 'schedules'}) }, clickBubble: false\\\" href=\\\"javascript: void(0);\\\">\\n            \").concat(I18n('View'), \"\\n          </a>\\n          <!-- ko if: isSchedulerJobRunning() -->\\n            \").concat(I18n('Running'), \"\\n          <!-- /ko -->\\n          <!-- ko if: isSchedulerJobRunning() == false -->\\n            \").concat(I18n('Stopped'), \"\\n          <!-- /ko -->\\n        <!-- /ko -->\\n        <!-- /ko -->\\n        <br>\\n        <br>\\n        <div id=\\\"schedulerEditor\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n\");\nvar AssistSchedulePanel = /*#__PURE__*/_createClass(function AssistSchedulePanel() {\n  var _this = this;\n  _classCallCheck(this, AssistSchedulePanel);\n  this.selectedNotebook = ko.observable();\n\n  // TODO: Move all the scheduler logic out of the notebook to here.\n\n  this.selectedNotebook.subscribe(function (notebook) {\n    // Happening 4 times for each notebook loaded\n    if (notebook && notebook.schedulerViewModel == null && notebook.isSaved() && !notebook.isHistory()) {\n      notebook.loadScheduler();\n      if (notebook.viewSchedulerId()) {\n        huePubSub.publish('check.schedules.browser');\n      }\n    }\n  });\n  huePubSub.subscribe('jobbrowser.schedule.data', function (jobs) {\n    if (_this.selectedNotebook() && _this.selectedNotebook().viewSchedulerId()) {\n      var job = jobs.filter(function (job) {\n        return _this.selectedNotebook().viewSchedulerId() === job.id;\n      });\n      _this.selectedNotebook().isSchedulerJobRunning(job.length > 0 && job[0].apiStatus === 'RUNNING');\n    }\n  });\n\n  // Hue 3\n  huePubSub.subscribe('set.selected.notebook', this.selectedNotebook);\n  huePubSub.subscribe('selected.notebook.changed', this.selectedNotebook);\n  huePubSub.publish('get.selected.notebook');\n\n  // Hue 4\n  huePubSub.subscribe('set.current.app.view.model', function (viewModel) {\n    if (viewModel.selectedNotebook) {\n      if (viewModel.selectedNotebook()) {\n        _this.selectedNotebook(viewModel.selectedNotebook());\n      } else {\n        var subscription = viewModel.selectedNotebook.subscribe(function (notebook) {\n          _this.selectedNotebook(notebook);\n          subscription.dispose();\n        });\n      }\n    } else {\n      _this.selectedNotebook(null);\n    }\n  });\n});\ncomponentUtils.registerStaticComponent('assist-schedule-panel', AssistSchedulePanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport AssistStorageEntry from \"./assistStorageEntry\";\nimport apiHelper from \"../../../api/apiHelper\";\nimport componentUtils from \"../componentUtils\";\nimport { getRootFilePath } from 'config/hueConfig';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"storage-context-items\\\">\\n    <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function (data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\\\"><i class=\\\"fa fa-fw fa-info\\\"></i> \".concat(I18n('Show details'), \"</a></li>\\n    <li>\\n      <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: ()=> {huePubSub.publish('open.filebrowserlink', { pathPrefix: '/filebrowser/view=', decodedPath: definition.path });}\\\">\\n        <i class=\\\"fa fa-fw\\\" data-bind=\\\"css: {'fa-folder-open-o': definition.type === 'dir', 'fa-file-text-o': definition.type === 'file'}\\\"></i> \\n        \").concat(I18n('Open in Browser'), \"\\n      </a>\\n    </li>\\n    <!-- ko if: definition.type === 'file' -->\\n    <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: openInImporter\\\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'importer' } } --><!-- /ko --> \").concat(I18n('Open in Importer'), \"</a></li>\\n    <!-- /ko -->\\n    <!-- ko if: $currentApp() === 'editor' -->\\n    <li><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: dblClick\\\"><i class=\\\"fa fa-fw fa-paste\\\"></i> \").concat(I18n('Insert at cursor'), \"</a></li>\\n    <!-- /ko -->\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"assist-storage-header-actions\\\">\\n    <div class=\\\"assist-db-header-actions\\\">\\n      <!-- ko if: source.type !== 's3' && source.type !== 'abfs' -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: goHome, attr: { title: I18n('Go to ' + window.USER_HOME_DIR) }\\\"><i class=\\\"pointer fa fa-home\\\"></i></a>\\n      <!-- ko if: window.SHOW_UPLOAD_BUTTON -->\\n      <a class=\\\"inactive-action\\\" data-bind=\\\"dropzone: {\\n            url: '/filebrowser/upload/file?dest=' + (source.type === 'adls' ? 'adl:' : '') + path,\\n            params: { dest: path },\\n            paramName: 'hdfs_file',\\n            onError: function(x, e){\\n              huePubSub.publish('hue.global.error', { message: e });\\n            },\\n            onComplete: function () { huePubSub.publish('assist.storage.refresh'); } }\\\" title=\\\"\").concat(I18n('Upload file'), \"\\\" href=\\\"javascript:void(0)\\\">\\n        <div class=\\\"dz-message inline\\\" data-dz-message><i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('Upload file'), \"\\\"></i></div>\\n      </a>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko if: source.type === 'abfs' && path !== '/' && window.SHOW_UPLOAD_BUTTON -->\\n      <a class=\\\"inactive-action\\\" data-bind=\\\"dropzone: {\\n            url: '/filebrowser/upload/file?dest=' + abfsPath,\\n            params: { dest: abfsPath },\\n            paramName: 'hdfs_file',\\n            onError: function(x, e){ huePubSub.publish('hue.global.error', { message: e }); },\\n            onComplete: function () { huePubSub.publish('assist.storage.refresh'); } }\\\" title=\\\"\").concat(I18n('Upload file'), \"\\\" href=\\\"javascript:void(0)\\\">\\n        <div class=\\\"dz-message inline\\\" data-dz-message><i class=\\\"pointer fa fa-plus\\\" title=\\\"\").concat(I18n('Upload file'), \"\\\"></i></div>\\n      </a>\\n      <!-- /ko -->\\n      <a class=\\\"inactive-action\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"click: function () { huePubSub.publish('assist.storage.refresh'); }\\\" title=\\\"\").concat(I18n('Manual refresh'), \"\\\"><i class=\\\"pointer fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin blue' : loading }\\\"></i></a>\\n    </div>\\n  </script>\\n\\n  <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n\\n  <!-- ko ifnot: activeSource -->\\n  <div class=\\\"assist-flex-header\\\">\\n    <div class=\\\"assist-inner-header\\\">\\n      \").concat(I18n('Sources'), \"\\n    </div>\\n  </div>\\n  <div class=\\\"assist-flex-fill\\\">\\n    <ul class=\\\"assist-tables\\\" data-bind=\\\"foreach: sources\\\">\\n      <li class=\\\"assist-table\\\">\\n        <a class=\\\"assist-table-link\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.activeSource($data); }\\\"><i class=\\\"fa fa-fw fa-server muted valign-middle\\\"></i> <span data-bind=\\\"text: $data.displayName\\\"></span></a>\\n      </li>\\n    </ul>\\n  </div>\\n  <!-- /ko -->\\n\\n  <!-- ko if: activeSource -->\\n  <!-- ko with: selectedStorageEntry -->\\n  <div class=\\\"assist-flex-header assist-breadcrumb\\\" >\\n    <!-- ko if: parent !== null -->\\n    <a href=\\\"javascript: void(0);\\\" data-bind=\\\"appAwareTemplateContextMenu: {\\n      template: 'storage-context-items',\\n      scrollContainer: '.assist-files-scrollable'\\n    }, click: function () {\\n      huePubSub.publish('assist.selectStorageEntry', parent);\\n    }\\\">\\n      <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n      <i class=\\\"fa fa-fw fa-folder-o\\\"></i>\\n      <span data-bind=\\\"text: definition.name, tooltip: {'title': path, 'placement': 'top' }\\\"></span>\\n    </a>\\n    <!-- /ko -->\\n    <!-- ko if: parent === null -->\\n    <a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.activeSource(undefined) }\\\">\\n      <i class=\\\"fa fa-fw fa-chevron-left\\\"></i>\\n      <i class=\\\"fa fa-fw fa-server\\\"></i>\\n      <span data-bind=\\\"text: $parent.activeSource().displayName\\\"></span>\\n    </a>\\n    <!-- /ko -->\\n    <!-- ko template: 'assist-storage-header-actions' --><!-- /ko -->\\n  </div>\\n  <div class=\\\"assist-flex-search\\\">\\n    <div class=\\\"assist-filter\\\">\\n      <form autocomplete=\\\"off\\\">\\n        <input class=\\\"clearable\\\" type=\\\"text\\\" placeholder=\\\"\").concat(I18n('Filter...'), \"\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \"\\n        data-bind=\\\"clearable: filter, value: filter, valueUpdate: 'afterkeydown'\\\"/>\\n      </form>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"assist-flex-fill assist-storage-scrollable\\\" data-bind=\\\"delayedOverflow\\\">\\n    <div data-bind=\\\"visible: ! loading() && ! hasErrors()\\\" style=\\\"position: relative;\\\">\\n      <!-- ko hueSpinner: { spin: loadingMore, overlay: true } --><!-- /ko -->\\n      <ul class=\\\"assist-tables\\\" data-bind=\\\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-storage-scrollable', fetchMore: $data.fetchMore.bind($data) }\\\">\\n        <li class=\\\"assist-entry assist-table-link\\\" style=\\\"position: relative;\\\" data-bind=\\\"appAwareTemplateContextMenu: { template: 'storage-context-items', scrollContainer: '.assist-storage-scrollable' }, visibleOnHover: { override: contextPopoverVisible, 'selector': '.assist-actions' }\\\">\\n          <div class=\\\"assist-actions table-actions\\\" style=\\\"opacity: 0;\\\" >\\n            <a style=\\\"padding: 0 3px;\\\" class=\\\"inactive-action\\\" href=\\\"javascript:void(0);\\\" data-bind=\\\"popoverOnHover: showContextPopover, css: { 'blue': contextPopoverVisible }\\\">\\n              <i class='fa fa-info' title=\\\"\").concat(I18n('Details'), \"\\\"></i>\\n            </a>\\n          </div>\\n\\n          <a href=\\\"javascript:void(0)\\\" class=\\\"assist-entry assist-table-link\\\" data-bind=\\\"multiClick: { click: toggleOpen, dblClick: dblClick }, attr: {'title': definition.name }\\\">\\n            <!-- ko if: definition.type === 'dir' -->\\n            <i class=\\\"fa fa-fw fa-folder-o muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <!-- ko if: definition.type === 'file' -->\\n            <i class=\\\"fa fa-fw fa-file-o muted valign-middle\\\"></i>\\n            <!-- /ko -->\\n            <span draggable=\\\"true\\\" data-bind=\\\"text: definition.name, draggableText: { text: '\\\\'' + path + '\\\\'', meta: {'type': source.type, 'definition': definition} }\\\"></span>\\n          </a>\\n        </li>\\n      </ul>\\n      <!-- ko if: !loading() && entries().length === 0 -->\\n      <ul class=\\\"assist-tables\\\">\\n        <li class=\\\"assist-entry\\\"><span class=\\\"assist-no-entries\\\"><!-- ko if: filter() -->\").concat(I18n('No results found'), \"<!-- /ko --><!-- ko ifnot: filter() -->\").concat(I18n('Empty directory'), \"<!-- /ko --></span></li>\\n      </ul>\\n      <!-- /ko -->\\n    </div>\\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\\n    <span class=\\\"assist-errors\\\" data-bind=\\\"visible: ! loading() && hasErrors(), text: errorText() || '\").concat(I18n('Error loading contents.'), \"'\\\">\\n    </span>\\n  </div>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n\");\nvar AssistStoragePanel = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Interpreter[]} options.sources\n   * @constructor\n   **/\n  function AssistStoragePanel(options) {\n    var _this = this;\n    _classCallCheck(this, AssistStoragePanel);\n    this.sources = ko.observableArray(options.sources);\n    var lastSourceType = getFromLocalStorage('assist.lastStorageSource', 'hdfs');\n    var foundLastSource = this.sources().find(function (source) {\n      return source.type === lastSourceType;\n    });\n    if (!foundLastSource && this.sources().length) {\n      foundLastSource = this.sources().find(function (source) {\n        return source.type === 'hdfs';\n      }) || this.sources()[0];\n    }\n    this.activeSource = ko.observable(foundLastSource);\n    this.loading = ko.observable();\n    this.initialized = false;\n    this.rootPath = getRootFilePath(this.activeSource());\n    this.selectedStorageEntry = ko.observable();\n    this.activeSource.subscribe(function (newValue) {\n      if (newValue) {\n        _this.rootPath = getRootFilePath(_this.activeSource());\n        setInLocalStorage('assist.lastStorageSource', newValue.type);\n        _this.selectedStorageEntry(undefined);\n        _this.reload();\n      }\n    });\n    huePubSub.subscribe('assist.selectStorageEntry', function (entry) {\n      _this.selectedStorageEntry(entry);\n      setInLocalStorage('assist.currentStoragePath_' + entry.source.type, entry.path);\n    });\n    huePubSub.subscribe('assist.storage.refresh', function () {\n      apiHelper.clearStorageCache(_this.activeSource().type);\n      _this.reload();\n    });\n    huePubSub.subscribe('assist.storage.go.home', function () {\n      var path = _this.activeSource().type === 's3' || _this.activeSource().type === 'gs' || _this.activeSource().type === 'abfs' || _this.activeSource().type === 'ofs' ? '/' : window.USER_HOME_DIR;\n      _this.loadPath(path);\n      setInLocalStorage('assist.currentStoragePath_' + _this.activeSource().type, path);\n    });\n    this.init();\n  }\n  return _createClass(AssistStoragePanel, [{\n    key: \"loadPath\",\n    value: function loadPath(path) {\n      var _this2 = this;\n      this.loading(true);\n      var relativePath = path;\n      if (this.rootPath) {\n        relativePath = relativePath.replace(this.rootPath, '/');\n      }\n      var parts = relativePath.split('/');\n      parts.shift();\n      var currentEntry = new AssistStorageEntry({\n        source: this.activeSource(),\n        rootPath: this.rootPath,\n        definition: {\n          name: this.rootPath,\n          type: 'dir'\n        },\n        parent: null\n      });\n      currentEntry.loadDeep(parts, function (entry) {\n        _this2.selectedStorageEntry(entry);\n        entry.open(true);\n        _this2.loading(false);\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      this.loadPath(getFromLocalStorage('assist.currentStoragePath_' + this.activeSource().type, this.activeSource().type === 'hdfs' ? window.USER_HOME_DIR : '/'));\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this.initialized) {\n        return;\n      }\n      this.reload();\n      this.initialized = true;\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('hue-assist-storage-panel', AssistStoragePanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport { ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, ASSIST_LANG_REF_SHOW_TOPIC_EVENT, SHOW_RIGHT_ASSIST_EVENT } from \"./events\";\nimport { ACTIVE_SNIPPET_CONNECTOR_CHANGED_EVENT } from \"../../../apps/editor/events\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport hueAnalytics from 'utils/hueAnalytics';\nimport I18n from \"../../../utils/i18n\";\nimport { withLocalStorage } from 'utils/storageUtils';\nvar EDITOR_ASSISTANT_TAB = 'editorAssistant';\nvar DASHBOARD_ASSISTANT_TAB = 'dashboardAssistant';\nvar FUNCTIONS_TAB = 'functions';\nvar SCHEDULES_TAB = 'schedules';\nvar LANG_REF_TAB = 'langRef';\nvar TEMPLATE = \"\\n  <div class=\\\"right-assist-tabs\\\" data-bind=\\\"splitFlexDraggable : {\\n      containerSelector: '.content-wrapper',\\n      sidePanelSelector: '.right-panel',\\n      sidePanelVisible: visible,\\n      orientation: 'right',\\n      onPosition: function() { huePubSub.publish('split.draggable.position') }\\n    }\\\">\\n    <div class=\\\"right-assist-tab\\\" data-bind=\\\"visible: editorAssistantTabAvailable\\\" style=\\\"display:none;\\\"><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" title=\\\"\".concat(I18n('Assistant'), \"\\\" data-bind=\\\"css: { 'blue' : activeTab() === 'editorAssistant' }, tooltip: { placement: 'left' }, click: editorAssistantTabClick\\\"><i class=\\\"fa fa-fw fa-compass\\\"></i></a></div>\\n    <div class=\\\"right-assist-tab\\\" data-bind=\\\"visible: dashboardAssistantTabAvailable\\\" style=\\\"display:none;\\\"><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Assistant'), \"\\\" data-bind=\\\"css: { 'blue' : activeTab() === 'dashboardAssistant' }, tooltip: { placement: 'left' }, click: dashboardAssistantTabClick\\\"><i class=\\\"fa fa-fw fa-compass\\\"></i></a></div>\\n    <div class=\\\"right-assist-tab\\\" data-bind=\\\"visible: functionsTabAvailable\\\" style=\\\"display:none;\\\"><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Functions'), \"\\\" data-bind=\\\"css: { 'blue' : activeTab() === 'functions' }, tooltip: { placement: 'left' }, click: functionsTabClick\\\"><i class=\\\"fa fa-fw fa-superscript\\\"></i></a></div>\\n    <div class=\\\"right-assist-tab\\\" data-bind=\\\"visible: langRefTabAvailable\\\" style=\\\"display:none;\\\"><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Language Reference'), \"\\\" data-bind=\\\"css: { 'blue' : activeTab() === 'langRef' }, tooltip: { placement: 'left' }, click: langRefTabClick\\\"><i class=\\\"fa fa-fw fa-book\\\"></i></a></div>\\n    <div class=\\\"right-assist-tab\\\" data-bind=\\\"visible: schedulesTabAvailable\\\" style=\\\"display:none;\\\"><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Schedule'), \"\\\" data-bind=\\\"css: { 'blue' : activeTab() === 'schedules' }, tooltip: { placement: 'left' }, click: schedulesTabClick\\\"><i class=\\\"fa fa-fw fa-calendar\\\"></i></a></div>\\n  </div>\\n\\n  <!-- ko if: visible -->\\n  <div class=\\\"right-assist-contents\\\">\\n    <!-- ko if: editorAssistantTabAvailable-->\\n    <div data-bind=\\\"\\n        component: { \\n          name: 'assist-editor-context-panel', \\n          params: { \\n            activeTab: activeTab, \\n            connector: connector \\n          }\\n        },\\n        visible: activeTab() === 'editorAssistant'\\n      \\\"></div>\\n    <!-- /ko -->\\n\\n    <!-- ko if: functionsTabAvailable -->\\n    <div data-bind=\\\"\\n        component: {\\n          name: 'assist-functions-panel',\\n          params: {\\n            activeConnector: connector\\n          }\\n        },\\n        visible: activeTab() === 'functions'\\n      \\\"></div>\\n    <!-- /ko -->\\n\\n    <!-- ko if: langRefTabAvailable -->\\n    <div data-bind=\\\"\\n        component: {\\n          name: 'assist-language-reference-panel',\\n          params: {\\n            connector: connector\\n          }\\n        },\\n        visible: activeTab() === 'langRef'\\n      \\\"></div>\\n    <!-- /ko -->\\n\\n    <!-- ko if: dashboardAssistantTabAvailable -->\\n    <div data-bind=\\\"component: { name: 'assist-dashboard-panel' }, visible: activeTab() === 'dashboardAssistant'\\\"></div>\\n    <!-- /ko -->\\n\\n    <div data-bind=\\\"component: { name: 'assist-schedule-panel' }, visible: activeTab() === 'schedules'\\\" style=\\\"display:none;\\\"></div>\\n  </div>\\n  <!-- /ko -->\\n\");\nvar RightAssistPanel = /*#__PURE__*/function () {\n  function RightAssistPanel(params) {\n    var _this = this;\n    _classCallCheck(this, RightAssistPanel);\n    this.activeTab = ko.observable();\n    this.visible = params.visible;\n    this.connector = ko.observable();\n    this.editorAssistantTabAvailable = ko.pureComputed(function () {\n      return _this.connector() && _this.connector().is_sql;\n    });\n    this.dashboardAssistantTabAvailable = ko.pureComputed(function () {\n      return _this.connector() && _this.connector().id === 'dashboard';\n    });\n    this.functionsTabAvailable = ko.pureComputed(function () {\n      return _this.connector() && (_this.connector().dialect === 'flink' || _this.connector().dialect === 'hive' || _this.connector().dialect === 'impala' || _this.connector().dialect === 'pig' || _this.connector().dialect === 'sparksql');\n    });\n    this.langRefTabAvailable = ko.pureComputed(function () {\n      return _this.connector() && (_this.connector().dialect === 'hive' || _this.connector().dialect === 'impala');\n    });\n    this.schedulesTabAvailable = ko.observable(false);\n    this.lastActiveTabEditor = ko.observable();\n    withLocalStorage('assist.last.open.right.panel', this.lastActiveTabEditor, EDITOR_ASSISTANT_TAB);\n    this.lastActiveTabDashboard = ko.observable();\n    withLocalStorage('assist.last.open.right.panel.dashboard', this.lastActiveTabDashboard, DASHBOARD_ASSISTANT_TAB);\n    huePubSub.subscribe('assist.highlight.risk.suggestions', function () {\n      if (_this.editorAssistantTabAvailable() && _this.activeTab() !== EDITOR_ASSISTANT_TAB) {\n        _this.activeTab(EDITOR_ASSISTANT_TAB);\n      }\n    });\n    huePubSub.subscribe(ASSIST_LANG_REF_SHOW_TOPIC_EVENT, function (targetTopic) {\n      huePubSub.publish(SHOW_RIGHT_ASSIST_EVENT);\n      if (_this.langRefTabAvailable() && _this.activeTab() !== LANG_REF_TAB) {\n        _this.activeTab(LANG_REF_TAB);\n      }\n      huePubSub.publish(ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, targetTopic);\n    });\n    var updateTabs = function updateTabs() {\n      if (!_this.visible()) {\n        _this.activeTab(undefined);\n        return;\n      }\n      if (_this.lastActiveTabEditor() === FUNCTIONS_TAB && _this.functionsTabAvailable()) {\n        _this.activeTab(FUNCTIONS_TAB);\n      } else if (_this.lastActiveTabEditor() === SCHEDULES_TAB && _this.schedulesTabAvailable()) {\n        _this.activeTab(SCHEDULES_TAB);\n      } else if (_this.lastActiveTabEditor() === LANG_REF_TAB && _this.langRefTabAvailable()) {\n        _this.activeTab(LANG_REF_TAB);\n      } else if (_this.editorAssistantTabAvailable()) {\n        _this.activeTab(EDITOR_ASSISTANT_TAB);\n      } else if (_this.functionsTabAvailable()) {\n        _this.activeTab(FUNCTIONS_TAB);\n      } else if (_this.schedulesTabAvailable()) {\n        _this.activeTab(SCHEDULES_TAB);\n      } else if (_this.dashboardAssistantTabAvailable()) {\n        _this.activeTab(DASHBOARD_ASSISTANT_TAB);\n      } else {\n        _this.activeTab(undefined);\n      }\n    };\n    var updateContentsForConnector = function updateContentsForConnector(connector) {\n      _this.connector(connector);\n      _this.schedulesTabAvailable(false);\n      if (connector && connector.id !== 'dashboard') {\n        if (window.ENABLE_QUERY_SCHEDULING) {\n          huePubSub.subscribeOnce('set.current.app.view.model', function (viewModel) {\n            // Async\n            _this.schedulesTabAvailable(!!viewModel.selectedNotebook);\n            updateTabs();\n          });\n          huePubSub.publish('get.current.app.view.model');\n        } else {\n          _this.schedulesTabAvailable(false);\n        }\n      }\n      updateTabs();\n    };\n    huePubSub.subscribe(ACTIVE_SNIPPET_CONNECTOR_CHANGED_EVENT, updateContentsForConnector);\n    var onAppChange = function onAppChange(appName) {\n      if (appName === 'dashboard') {\n        updateContentsForConnector({\n          id: appName,\n          is_sql: false\n        });\n      }\n    };\n    huePubSub.publish('get.current.app.name', onAppChange);\n    huePubSub.subscribe('set.current.app.name', onAppChange);\n    updateTabs();\n  }\n  return _createClass(RightAssistPanel, [{\n    key: \"switchTab\",\n    value: function switchTab(tabName) {\n      hueAnalytics.log('right-assist-panel', 'tab-click/' + tabName);\n      if (this.activeTab() === tabName) {\n        this.visible(false);\n        this.activeTab(undefined);\n      } else {\n        this.activeTab(tabName);\n        if (!this.visible()) {\n          this.visible(true);\n        }\n      }\n    }\n  }, {\n    key: \"editorAssistantTabClick\",\n    value: function editorAssistantTabClick() {\n      this.lastActiveTabEditor(EDITOR_ASSISTANT_TAB);\n      this.switchTab(EDITOR_ASSISTANT_TAB);\n    }\n  }, {\n    key: \"dashboardAssistantTabClick\",\n    value: function dashboardAssistantTabClick() {\n      this.lastActiveTabDashboard(DASHBOARD_ASSISTANT_TAB);\n      this.switchTab(DASHBOARD_ASSISTANT_TAB);\n    }\n  }, {\n    key: \"functionsTabClick\",\n    value: function functionsTabClick() {\n      this.lastActiveTabEditor(FUNCTIONS_TAB);\n      this.switchTab(FUNCTIONS_TAB);\n    }\n  }, {\n    key: \"langRefTabClick\",\n    value: function langRefTabClick() {\n      this.lastActiveTabEditor(LANG_REF_TAB);\n      this.switchTab(LANG_REF_TAB);\n    }\n  }, {\n    key: \"schedulesTabClick\",\n    value: function schedulesTabClick() {\n      this.lastActiveTabEditor(SCHEDULES_TAB);\n      this.switchTab(SCHEDULES_TAB);\n    }\n  }]);\n}();\ncomponentUtils.registerStaticComponent('right-assist-panel', RightAssistPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nvar instances = {};\nvar componentUtils = /*#__PURE__*/function () {\n  function componentUtils() {\n    _classCallCheck(this, componentUtils);\n  }\n  return _createClass(componentUtils, null, [{\n    key: \"registerComponent\",\n    value: function () {\n      var _registerComponent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name, model, template) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                if (!ko.components.isRegistered(name)) {\n                  var componentInfo = {\n                    template: template\n                  };\n                  if (model) {\n                    componentInfo['viewModel'] = model;\n                  }\n                  ko.components.register(name, componentInfo);\n                  resolve();\n                } else {\n                  reject();\n                }\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function registerComponent(_x, _x2, _x3) {\n        return _registerComponent.apply(this, arguments);\n      }\n      return registerComponent;\n    }()\n  }, {\n    key: \"registerStaticComponent\",\n    value: function () {\n      var _registerStaticComponent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name, model, template) {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", componentUtils.registerComponent(name, {\n                createViewModel: function createViewModel(params, componentInfo) {\n                  if (!instances[name]) {\n                    if (model && model.createViewModel) {\n                      instances[name] = model.createViewModel(params, componentInfo);\n                    } else if (model) {\n                      instances[name] = new model(params);\n                    }\n                  }\n                  if (instances[name] && instances[name].dispose) {\n                    console.warn('\"dispose\" function present on static component ' + name);\n                  }\n                  return instances[name];\n                }\n              }, template));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      function registerStaticComponent(_x4, _x5, _x6) {\n        return _registerStaticComponent.apply(this, arguments);\n      }\n      return registerStaticComponent;\n    }()\n  }]);\n}();\nexport default componentUtils;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport dataCatalog from 'catalog/dataCatalog';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport sqlUtils from 'sql/sqlUtils';\nvar AsteriskData = /*#__PURE__*/_createClass(function AsteriskData(data, connector, namespace, compute, defaultDatabase) {\n  _classCallCheck(this, AsteriskData);\n  var self = this;\n  self.loading = ko.observable(true);\n  self.hasErrors = ko.observable(false);\n  self.columns = [];\n  self.selectedColumns = ko.pureComputed(function () {\n    return !self.loading() && self.columns.filter(function (column) {\n      return column.selected();\n    }) || [];\n  });\n  self.expand = function () {\n    var colsToExpand = self.selectedColumns().length === 0 ? self.columns : self.selectedColumns();\n    var colIndex = {};\n    var colsTableMap = {};\n    self.columns.forEach(function (col) {\n      if (colsTableMap[col.name]) {\n        colsTableMap[col.name].push(col.table);\n      } else {\n        colsTableMap[col.name] = [col.table];\n      }\n    });\n    colsToExpand.forEach(function (col) {\n      if (colIndex[col.name]) {\n        colIndex[col.name]++;\n      } else {\n        colIndex[col.name] = 1;\n      }\n    });\n    Object.keys(colIndex).forEach(function (name) {\n      if (colIndex[name] === 1 && colsTableMap[name].length === 1) {\n        delete colIndex[name];\n      }\n    });\n    Promise.all(colsToExpand.map( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(column) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!column.tableAlias) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 3;\n              return sqlUtils.backTickIfNeeded(connector, column.tableAlias);\n            case 3:\n              _context.t0 = _context.sent;\n              _context.t1 = _context.t0 + '.';\n              _context.next = 7;\n              return sqlUtils.backTickIfNeeded(connector, column.name);\n            case 7:\n              _context.t2 = _context.sent;\n              return _context.abrupt(\"return\", _context.t1 + _context.t2);\n            case 9:\n              if (!colIndex[column.name]) {\n                _context.next = 18;\n                break;\n              }\n              _context.next = 12;\n              return sqlUtils.backTickIfNeeded(connector, column.table);\n            case 12:\n              _context.t3 = _context.sent;\n              _context.t4 = _context.t3 + '.';\n              _context.next = 16;\n              return sqlUtils.backTickIfNeeded(connector, column.name);\n            case 16:\n              _context.t5 = _context.sent;\n              return _context.abrupt(\"return\", _context.t4 + _context.t5);\n            case 18:\n              _context.next = 20;\n              return sqlUtils.backTickIfNeeded(connector, column.name);\n            case 20:\n              return _context.abrupt(\"return\", _context.sent);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }())).then(function (backtickedCols) {\n      huePubSub.publish('ace.replace', {\n        location: data.location,\n        text: backtickedCols.join(', ')\n      });\n    });\n    huePubSub.publish('context.popover.hide');\n  };\n  var deferrals = [];\n  data.tables.forEach(function (table) {\n    if (table.identifierChain) {\n      var fetchDeferred = $.Deferred();\n      deferrals.push(fetchDeferred);\n      var path = $.map(table.identifierChain, function (identifier) {\n        return identifier.name;\n      });\n      if (path.length === 1) {\n        path.unshift(defaultDatabase);\n      }\n      dataCatalog.getEntry({\n        namespace: namespace,\n        compute: compute,\n        connector: connector,\n        path: path\n      }).then(function (entry) {\n        entry.getSourceMeta({\n          silenceErrors: true\n        }).then(function (sourceMeta) {\n          if (typeof sourceMeta.extended_columns !== 'undefined') {\n            var newColumns = [];\n            sourceMeta.extended_columns.forEach(function (column) {\n              var clonedColumn = $.extend({}, column);\n              clonedColumn.extendedType = clonedColumn.type.replace(/</g, '&lt;').replace(/>/g, '&lt;');\n              if (clonedColumn.type.indexOf('<') !== -1) {\n                clonedColumn.type = clonedColumn.type.substring(0, clonedColumn.type.indexOf('<'));\n              }\n              clonedColumn.selected = ko.observable(false);\n              clonedColumn.table = table.identifierChain[table.identifierChain.length - 1].name;\n              if (table.alias) {\n                clonedColumn.tableAlias = table.alias;\n              }\n              newColumns.push(clonedColumn);\n            });\n            self.columns = self.columns.concat(newColumns);\n          }\n          fetchDeferred.resolve();\n        })[\"catch\"](fetchDeferred.reject);\n      })[\"catch\"](fetchDeferred.reject);\n    }\n  });\n  if (deferrals.length === 0) {\n    self.loading(false);\n  }\n  $.when.apply($, deferrals).done(function () {\n    self.loading(false);\n  }, function () {\n    if (self.columns.length === 0) {\n      self.hasErrors(true);\n    }\n  });\n});\nvar AsteriskContextTabs = /*#__PURE__*/_createClass(function AsteriskContextTabs(data, connector, namespace, compute, defaultDatabase) {\n  _classCallCheck(this, AsteriskContextTabs);\n  var self = this;\n  self.data = new AsteriskData(data, connector, namespace, compute, defaultDatabase);\n  self.tabs = [{\n    id: 'details',\n    label: I18n('Details'),\n    template: 'context-popover-asterisk-details',\n    templateData: self.data\n  }];\n  self.activeTab = ko.observable('details');\n});\nexport default AsteriskContextTabs;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { ASSIST_DB_HIGHLIGHT_EVENT } from \"../assist/events\";\nvar CollectionContextTabs = /*#__PURE__*/function () {\n  function CollectionContextTabs(data) {\n    _classCallCheck(this, CollectionContextTabs);\n    var self = this;\n    self.disposals = [];\n    self.catalogEntry = data.catalogEntry;\n    self.data = ko.observable({\n      details: data,\n      loading: ko.observable(false),\n      hasErrors: ko.observable(false),\n      selectedPath: ko.observable(data.path),\n      loadingTerms: ko.observable(false),\n      loadingStats: ko.observable(false),\n      statsSupported: ko.observable(true),\n      terms: ko.mapping.fromJS({\n        prefix: '',\n        data: []\n      }),\n      stats: ko.mapping.fromJS({\n        facet: '',\n        data: []\n      })\n    });\n    self.data().terms.prefix.subscribe(function () {\n      self.loadTerms();\n    });\n    self.data().terms.prefix.extend({\n      rateLimit: {\n        timeout: 500,\n        method: 'notifyWhenChangesStop'\n      }\n    });\n    self.loadTerms();\n    self.loadStats();\n    self.tabs = [{\n      id: 'terms',\n      label: I18n('Terms'),\n      template: 'context-popover-collection-terms-details',\n      templateData: self.data\n    }, {\n      id: 'stats',\n      label: I18n('Stats'),\n      template: 'context-popover-collection-stats-details',\n      templateData: self.data\n    }];\n    self.activeTab = ko.observable('terms');\n    var showInAssistPubSub = huePubSub.subscribe('context.popover.show.in.assist', function () {\n      huePubSub.publish(ASSIST_DB_HIGHLIGHT_EVENT, self.catalogEntry);\n    });\n    self.disposals.push(function () {\n      showInAssistPubSub.remove();\n    });\n  }\n  return _createClass(CollectionContextTabs, [{\n    key: \"loadTerms\",\n    value: function loadTerms() {\n      var self = this;\n      self.data().terms.data.removeAll();\n      self.data().loadingTerms(true);\n      apiHelper.fetchDashboardTerms({\n        collectionName: self.catalogEntry.path[1],\n        fieldName: self.catalogEntry.path[2],\n        prefix: self.data().terms.prefix(),\n        engine: 'solr',\n        successCallback: function successCallback(data) {\n          if (data.terms != null) {\n            $.each(data.terms, function (key, val) {\n              self.data().terms.data.push({\n                key: key,\n                val: val\n              });\n            });\n          }\n        },\n        alwaysCallback: function alwaysCallback() {\n          self.data().loadingTerms(false);\n        }\n      });\n    }\n  }, {\n    key: \"loadStats\",\n    value: function loadStats() {\n      var self = this;\n      self.data().terms.data.removeAll();\n      self.data().loadingStats(true);\n      self.data().statsSupported(true);\n      var fieldName = self.catalogEntry.path[2];\n      apiHelper.fetchDashboardStats({\n        collectionName: self.catalogEntry.path[1],\n        fieldName: fieldName,\n        engine: 'solr',\n        successCallback: function successCallback(data) {\n          if (data.stats.stats.stats_fields[fieldName] != null) {\n            $.each(data.stats.stats.stats_fields[fieldName], function (key, val) {\n              self.data().stats.data.push({\n                key: key,\n                val: val\n              });\n            });\n          }\n        },\n        notSupportedCallback: function notSupportedCallback() {\n          self.data().statsSupported(false);\n        },\n        alwaysCallback: function alwaysCallback() {\n          self.data().loadingStats(false);\n        }\n      });\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }]);\n}();\nexport default CollectionContextTabs;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nimport { ASSIST_DB_HIGHLIGHT_EVENT } from \"../assist/events\";\nvar DataCatalogContext = /*#__PURE__*/function () {\n  function DataCatalogContext(options) {\n    _classCallCheck(this, DataCatalogContext);\n    var self = this;\n    self.popover = options.popover;\n    self.catalogEntry = ko.observable(options.catalogEntry);\n    self.parentIsView = ko.observable(false);\n    var checkIfParentIsView = function checkIfParentIsView(catalogEntry) {\n      if (!catalogEntry) {\n        self.parentIsView(false);\n        return;\n      }\n      catalogEntry.getParent().then(function (parentEntry) {\n        self.parentIsView(parentEntry.isView());\n      })[\"catch\"](function () {\n        self.parentIsView(false);\n      });\n    };\n    checkIfParentIsView(self.catalogEntry());\n    self.catalogEntry.subscribe(checkIfParentIsView);\n    self.loading = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.activePromises = [];\n    self.errorText = ko.observable();\n    self.onSampleClick = options.popover.onSampleClick;\n    self.analysis = ko.observable();\n    self.comment = ko.observable();\n    self.commentExpanded = ko.observable(false);\n    self.viewSql = ko.observable();\n    self.viewSqlVisible = ko.observable(false);\n    self.openActionsEnabled = ko.pureComputed(function () {\n      return self.catalogEntry() && self.catalogEntry().path.length <= 2;\n    });\n    self.catalogEntry.subscribe(self.load.bind(self));\n    self.breadCrumbs = ko.pureComputed(function () {\n      var result = [];\n      var catalogEntry = self.catalogEntry();\n      if (catalogEntry) {\n        var _loop = function _loop() {\n          var path = catalogEntry.path.slice(0, i + 1);\n          result.push({\n            name: catalogEntry.path[i],\n            isActive: i === catalogEntry.path.length - 1,\n            path: path,\n            catalogEntry: self.catalogEntry,\n            makeActive: function makeActive() {\n              self.catalogEntry().dataCatalog.getEntry({\n                namespace: self.catalogEntry().namespace,\n                compute: self.catalogEntry().compute,\n                connector: self.catalogEntry().connector,\n                path: path,\n                temporaryOnly: self.catalogEntry().isTemporary\n              }).then(self.catalogEntry)[\"catch\"](function (err) {\n                console.warn(err);\n              });\n            }\n          });\n        };\n        for (var i = 0; i < catalogEntry.path.length; i++) {\n          _loop();\n        }\n      }\n      return result;\n    });\n    self.originalCatalogEntry = options.catalogEntry;\n    self.load();\n  }\n  return _createClass(DataCatalogContext, [{\n    key: \"setEntry\",\n    value: function setEntry(entry) {\n      this.catalogEntry(entry);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var self = this;\n      self.catalogEntry().clearCache({\n        cascade: true\n      })[\"finally\"](self.load.bind(self));\n    }\n  }, {\n    key: \"load\",\n    value: function load() {\n      var self = this;\n      self.loading(true);\n      self.hasErrors(false);\n      self.cancelActivePromises();\n      var viewSqlDeferred = $.Deferred().done(self.viewSql);\n      self.activePromises.push(viewSqlDeferred.promise());\n      self.activePromises.push(self.catalogEntry().getSourceMeta({\n        cancellable: true\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      }));\n\n      // TODO: Use connector attributes in dataCatalogContext\n      if (self.catalogEntry().getDialect() === 'impala' || self.catalogEntry().getDialect() === 'hive') {\n        self.activePromises.push(self.catalogEntry().getAnalysis({\n          silenceErrors: true,\n          cancellable: true\n        }).then(function (analysis) {\n          var found = analysis.properties && analysis.properties.some(function (property) {\n            if (property.col_name.toLowerCase() === 'view original text:') {\n              apiHelper.formatSql({\n                statements: property.data_type\n              }).then(function (formatResponse) {\n                if (formatResponse.status === 0) {\n                  viewSqlDeferred.resolve(formatResponse.formatted_statements);\n                } else {\n                  viewSqlDeferred.resolve(property.data_type);\n                }\n              })[\"catch\"](function () {\n                viewSqlDeferred.resolve(property.data_type);\n              });\n              return true;\n            }\n          });\n          if (!found) {\n            viewSqlDeferred.resolve();\n          }\n          self.analysis(analysis);\n        })[\"catch\"](viewSqlDeferred.reject));\n      } else {\n        viewSqlDeferred.reject();\n      }\n      self.activePromises.push(self.catalogEntry().getComment({\n        silenceErrors: true,\n        cancellable: true\n      }).then(self.comment));\n      $.when.apply($, self.activePromises).always(function () {\n        self.loading(false);\n        self.activePromises.length = 0;\n      });\n    }\n  }, {\n    key: \"cancelActivePromises\",\n    value: function cancelActivePromises() {\n      var self = this;\n      while (self.activePromises.length) {\n        var promise = self.activePromises.pop();\n        if (promise.cancel) {\n          promise.cancel();\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      self.cancelActivePromises();\n    }\n  }, {\n    key: \"showInAssist\",\n    value: function showInAssist() {\n      var self = this;\n      huePubSub.publish(ASSIST_DB_HIGHLIGHT_EVENT, self.catalogEntry());\n      huePubSub.publish('global.search.close');\n    }\n  }, {\n    key: \"openInDashboard\",\n    value: function openInDashboard() {\n      var self = this;\n      huePubSub.publish('open.link', '/hue/dashboard/browse/' + self.catalogEntry().path.join('.') + '?engine=' + self.catalogEntry().getConnector().id);\n      huePubSub.publish('context.popover.hide');\n      huePubSub.publish('global.search.close');\n    }\n  }, {\n    key: \"openInTableBrowser\",\n    value: function openInTableBrowser() {\n      var self = this;\n      huePubSub.publish('open.link', '/metastore/table' + (self.catalogEntry().isTableOrView() ? '/' : 's/') + self.catalogEntry().path.join('/') + '?connector_id=' + self.catalogEntry().getConnector().id + '&namespace=' + self.catalogEntry().namespace.id);\n      huePubSub.publish('context.popover.hide');\n      huePubSub.publish('global.search.close');\n    }\n  }]);\n}();\nexport default DataCatalogContext;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nimport { ASSIST_DOC_HIGHLIGHT_EVENT } from \"../assist/events\";\nvar TEMPLATE_NAME = 'context-document-details';\n\n// prettier-ignore\nexport var DOCUMENT_CONTEXT_TEMPLATE = \"\\n<script type=\\\"text/html\\\" id=\\\"\".concat(TEMPLATE_NAME, \"\\\">\\n  <div class=\\\"context-popover-flex-fill\\\" style=\\\"overflow: auto;\\\">\\n    <div class=\\\"context-popover-inner-content\\\">\\n      <div style=\\\"position: absolute; right: 6px; top: 8px;\\\">\\n        <a class=\\\"pointer inactive-action\\\" data-bind=\\\"visible: !$parent.closeDisabled, click: function () { $parent.close() }\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n      <!-- ko if: typeof documentContents() !== 'undefined' && typeof documentContents().snippets !== 'undefined' -->\\n      <!-- ko with: details -->\\n      <div class=\\\"context-popover-doc-header-link\\\" ><a href=\\\"javascript:void(0)\\\" data-bind=\\\"hueLink: link, click: function () { $parents[1].close(); }\\\"><!-- ko template: { name: 'document-icon-template', data: { document: $data, showShareAddon: false } } --><!-- /ko --> <span data-bind=\\\"text:name\\\"></span></a></div>\\n      <!-- ko if: description -->\\n      <div class=\\\"context-popover-doc-description\\\" data-bind=\\\"toggleOverflow: { height: 60 }\\\"><div data-bind=\\\"text: description\\\"></div></div>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko with: documentContents -->\\n      <!-- ko foreach: snippets -->\\n      <div class=\\\"context-popover-doc-contents\\\" data-bind=\\\"highlight: { value: statement_raw, formatted: true, dialect: type }\\\"></div>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko if: typeof documentContents() === 'undefined' || typeof documentContents().snippets === 'undefined' -->\\n      <div style=\\\"width: 100%;\\\" data-bind=\\\"template: { name: 'generic-document-context-template', data: details }\\\"></div>\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n</script>\\n\\n<script type=\\\"text/html\\\" id=\\\"generic-document-context-template\\\">\\n  <div style=\\\"width:100%; text-align: center; margin-top: 40px; font-size: 100px; color: #787878;\\\" data-bind=\\\"template: { name: 'document-icon-template', data: { document: { isDirectory: type === 'directory', definition: function() { return $data } } } }\\\"></div>\\n  <div style=\\\"width: 100%; margin-top: 20px; text-align:center\\\">\\n    <!-- ko if: type === 'directory' -->\\n    <a style=\\\"font-size: 20px;\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"text: name, publish: 'context.popover.show.in.assist'\\\"></a>\\n    <!-- /ko -->\\n    <!-- ko if: type !== 'directory' -->\\n    <a style=\\\"font-size: 20px;\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"text: name, hueLink: link, click: function () { $parents[1].close(); }\\\"></a>\\n    <!-- /ko -->\\n    <br/>\\n    <span data-bind=\\\"text: window.DOCUMENT_TYPE_I18n[type] || type\\\"></span>\\n    <!-- ko if: description -->\\n    <div class=\\\"context-popover-doc-description\\\" data-bind=\\\"text: description\\\"></div>\\n    <!-- /ko -->\\n  </div>\\n</script>\\n\");\nvar DocumentContext = /*#__PURE__*/function () {\n  function DocumentContext(data) {\n    _classCallCheck(this, DocumentContext);\n    var self = this;\n    self.disposals = [];\n\n    // Adapt some details to a common format, the global search endpoint has different structure than the docs one\n    self.details = {\n      type: data.doc_type || data.type,\n      name: data.originalName || data.name || data.hue_name,\n      link: data.absoluteUrl || data.link,\n      description: data.description || data.hue_description,\n      isDirectory: data.doc_type === 'directory' || data.type === 'directory',\n      definition: ko.observable({\n        type: data.doc_type || data.type\n      })\n    };\n    self.data = data;\n    self.loading = ko.observable(true);\n    self.hasErrors = ko.observable(false);\n    self.errorText = ko.observable();\n    self.template = TEMPLATE_NAME;\n    self.documentId = ko.observable();\n    self.documentContents = ko.observable();\n    self.loadDocument();\n    var showInAssistPubSub = huePubSub.subscribe('context.popover.show.in.assist', function () {\n      huePubSub.publish(ASSIST_DOC_HIGHLIGHT_EVENT, {\n        parentUuid: self.data.parentUuid,\n        docUuid: self.data.uuid\n      });\n    });\n    self.disposals.push(function () {\n      showInAssistPubSub.remove();\n    });\n  }\n  return _createClass(DocumentContext, [{\n    key: \"download\",\n    value: function download() {\n      if (this.documentId()) {\n        window.location.href = \"\".concat(window.HUE_BASE_URL, \"/desktop/api2/doc/export?documents=[\").concat(this.documentId(), \"]\");\n      }\n    }\n  }, {\n    key: \"open\",\n    value: function open(entry) {\n      huePubSub.publish('open.link', entry.details.link);\n      huePubSub.publish('context.popover.hide');\n      huePubSub.publish('global.search.close');\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }, {\n    key: \"loadDocument\",\n    value: function loadDocument() {\n      var _this = this;\n      var self = this;\n      self.hasErrors(false);\n      self.loading(true);\n      apiHelper.fetchDocument({\n        uuid: self.data.uuid,\n        fetchContents: true,\n        silenceErrors: true\n      }).done(function (response) {\n        var _response$document;\n        _this.documentId((_response$document = response.document) === null || _response$document === void 0 ? void 0 : _response$document.id);\n        self.documentContents(response.data);\n        self.loading(false);\n      }).fail(function () {\n        self.loading(false);\n        self.hasErrors(false); // Allows us to revert to a generic document panel in case it can't fetch it.\n      });\n    }\n  }]);\n}();\nexport default DocumentContext;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport I18n from \"../../../utils/i18n\";\nimport { findUdf } from 'sql/reference/sqlUdfRepository';\nimport sqlReferenceRepository from 'sql/reference/sqlReferenceRepository';\nvar TEMPLATE_NAME = 'context-popover-function-details';\n\n// prettier-ignore\nexport var FUNCTION_CONTEXT_TEMPLATE = \"\\n<script type=\\\"text/html\\\" id=\\\"context-popover-function-details\\\">\\n  <!-- ko ifnot: details -->\\n  <div class=\\\"context-popover-flex-fill\\\">\\n    <div class=\\\"alert\\\">\".concat(I18n('Could not find details for the function'), \" <span data-bind=\\\"text: $parents[2].title\\\"></span>()</div>\\n  </div>\\n  <!-- /ko -->\\n  <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"with: details\\\">\\n    <div style=\\\"padding: 8px\\\">\\n      <p style=\\\"margin: 10px 10px 18px 10px;\\\"><span style=\\\"white-space: pre;\\\" class=\\\"monospace\\\" data-bind=\\\"text: signature\\\"></span></p>\\n      <p><span data-bind=\\\"text: description\\\"></span></p>\\n    </div>\\n  </div>\\n</script>\\n\");\nvar FunctionContextTabs = /*#__PURE__*/_createClass(function FunctionContextTabs(data, connector) {\n  var _this = this;\n  _classCallCheck(this, FunctionContextTabs);\n  this.details = ko.observable();\n  this.loading = ko.observable(true);\n  this.hasErrors = ko.observable(false);\n  findUdf(sqlReferenceRepository, connector, data[\"function\"]).then(function (udfs) {\n    // TODO: Support showing multiple UDFs with the same name but different category in the context popover.\n    // For instance, trunc appears both for dates with one description and for numbers with another description.\n    _this.details = udfs.length ? udfs[0] : undefined;\n  })[\"catch\"](function () {\n    _this.hasErrors(true);\n  })[\"finally\"](function () {\n    _this.loading(false);\n  });\n  this.tabs = [{\n    id: 'details',\n    label: I18n('Details'),\n    template: TEMPLATE_NAME,\n    templateData: this\n  }];\n  this.activeTab = ko.observable('details');\n});\nexport default FunctionContextTabs;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { CancellablePromise } from \"../../../api/cancellablePromise\";\nimport AsteriskContextTabs from \"./asteriskContextTabs\";\nimport CollectionContextTabs from \"./collectionContextTabs\";\nimport DataCatalogContext from \"./dataCatalogContext\";\nimport DocumentContext, { DOCUMENT_CONTEXT_TEMPLATE } from \"./documentContext\";\nimport FunctionContextTabs, { FUNCTION_CONTEXT_TEMPLATE } from \"./functionContext\";\nimport { DOCUMENT_CONTEXT_FOOTER } from \"./ko.documentContextFooter\";\nimport LangRefContext from \"./langRefContext\";\nimport PartitionContext, { PARTITION_CONTEXT_TEMPLATE } from \"./partitionContext\";\nimport ResizeHelper from \"./resizeHelper\";\nimport StorageContext from \"./storageContext\";\nimport { getNamespaces } from 'catalog/contextCatalog';\nimport dataCatalog from 'catalog/dataCatalog';\nimport { GET_KNOWN_CONFIG_TOPIC } from 'config/events';\nimport { findEditorConnector } from 'config/hueConfig';\nimport { ASSIST_KEY_COMPONENT } from \"../assist/ko.assistKey\";\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport { getFromLocalStorage } from 'utils/storageUtils';\nexport var CONTEXT_POPOVER_CLASS = 'hue-popover';\nexport var HIDE_CONTEXT_POPOVER_EVENT = 'context.popover.hide';\nexport var CONTEXT_POPOVER_HIDDEN_EVENT = 'context.popover.hidden';\nexport var SHOW_CONTEXT_POPOVER_EVENT = 'context.popover.show';\nexport var NAME = 'context-popover';\n\n// prettier-ignore\nvar SUPPORT_TEMPLATES = \"\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-footer\\\">\\n    <div class=\\\"context-popover-flex-bottom-links\\\">\\n      <div class=\\\"context-popover-link-row\\\">\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"inactive-action\\\" data-bind=\\\"visible: showInAssistEnabled, publish: 'context.popover.show.in.assist'\\\">\\n          <i style=\\\"font-size: 11px;\\\" title=\\\"\".concat(I18n('Show in Assist...'), \"\\\" class=\\\"fa fa-search\\\"></i> \").concat(I18n('Assist'), \"\\n        </a>\\n        <!-- ko if: isDocument -->\\n        <!-- ko with: contents -->\\n        <!-- ko if: documentId -->\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"inactive-action\\\" data-bind=\\\"click: download\\\">\\n          <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Download'), \"\\\" class=\\\"fa fa-download\\\"></i> \").concat(I18n('Download'), \"\\n        </a>\\n        <!-- /ko -->\\n        <a href=\\\"javascript: void(0);\\\" class=\\\"inactive-action\\\" data-bind=\\\"click: open\\\">\\n          <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Open'), \"\\\" class=\\\"fa fa-file-o\\\"></i> \").concat(I18n('Open'), \"\\n        </a>\\n        <!-- /ko -->\\n        <!-- /ko -->\\n        <!-- ko if: expandColumnsEnabled -->\\n        <!-- ko with: contents.data -->\\n        <!-- ko if: selectedColumns().length > 0 -->\\n        <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: expand\\\">\").concat(I18n('Expand to selected columns'), \"</a>\\n        <!-- /ko -->\\n        <!-- ko if: selectedColumns().length === 0 -->\\n        <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: expand\\\">\").concat(I18n('Expand to all columns'), \"</a>\\n        <!-- /ko -->\\n        <!-- /ko -->\\n        <!-- /ko -->\\n      </div>\\n      <!-- ko if: isDocument -->\\n        <div class=\\\"context-popover-bottom-attributes\\\">\\n        <!-- ko with: contents -->\\n          <!-- ko component: { name: '\").concat(DOCUMENT_CONTEXT_FOOTER, \"', params: { popoverData: $data } } --><!-- /ko -->\\n        <!-- /ko -->\\n        </div>\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-collection-stats-details\\\">\\n    <div class=\\\"context-popover-flex-fill\\\">\\n      <div style=\\\"padding: 8px\\\">\\n        <div data-bind=\\\"with: stats\\\">\\n        <!-- ko hueSpinner: { spin:  $parent.loadingStats, center: true, size: 'large' } --><!-- /ko -->\\n        <div class=\\\"alert\\\" data-bind=\\\"visible: !$parent.loadingStats() && !$parent.statsSupported()\\\">\").concat(I18n('This field does not support stats'), \"</div>\\n        <div class=\\\"alert\\\" data-bind=\\\"visible: !$parent.loadingStats() && $parent.statsSupported() && $data.data().length == 0\\\">\").concat(I18n('There are no stats to be shown'), \"</div>\\n        <table style=\\\"width: 100%\\\" data-bind=\\\"visible: !$parent.loadingStats() && $data.data().length > 0\\\" class=\\\"table table-condensed\\\">\\n          <tbody data-bind=\\\"foreach: $data.data\\\">\\n          <tr>\\n            <td style=\\\"vertical-align: top\\\"><strong data-bind=\\\"text: key\\\"></strong></td>\\n            <!-- ko if: key == 'facets' -->\\n            <td>\\n              <!-- ko if: val[Object.keys(val)[0]] != null -->\\n              <table>\\n                <tbody data-bind=\\\"foreach: Object.keys(val[Object.keys(val)[0]])\\\">\\n                  <tr>\\n                    <td style=\\\"vertical-align: top; padding-left: 4px; padding-right: 4px\\\"><strong data-bind=\\\"text: $data\\\"></strong></td>\\n                    <td data-bind=\\\"template: 'context-popover-collection-stats-facets'\\\"></td>\\n                  </tr>\\n                </tbody>\\n              </table>\\n              <!-- /ko -->\\n              <!-- ko ifnot: val[Object.keys(val)[0]] != null -->\\n              \").concat(I18n('Not available'), \"\\n              <!-- /ko -->\\n            </td>\\n            <!-- /ko -->\\n            <!-- ko ifnot: key == 'facets' -->\\n            <td data-bind=\\\"text: val\\\"></td>\\n            <!-- /ko -->\\n          </tr>\\n          </tbody>\\n        </table>\\n        </div>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-collection-stats-facets\\\">\\n    <table style=\\\"width: 100%\\\">\\n      <tbody data-bind=\\\"foreach: Object.keys($parent.val[Object.keys($parent.val)[0]][$data])\\\">\\n        <tr>\\n          <td style=\\\"vertical-align: top; padding-left: 4px; padding-right: 4px\\\"><strong data-bind=\\\"text: $data\\\"></strong></td>\\n          <!-- ko ifnot: $data == 'facets' -->\\n          <td style=\\\"vertical-align: top\\\" data-bind=\\\"text: $parents[1].val[Object.keys($parents[1].val)[0]][$parent][$data]\\\"></td>\\n          <!-- /ko -->\\n        </tr>\\n      </tbody>\\n    </table>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-collection-terms-details\\\">\\n    <div class=\\\"context-popover-flex-fill\\\">\\n      <input type=\\\"text\\\" data-bind=\\\"value: terms.prefix, clearable: terms.prefix, valueUpdate:'afterkeydown'\\\" placeholder=\\\"\").concat(I18n('Filter...'), \"\\\" class=\\\"pull-right\\\">\\n      <div data-bind=\\\"with: terms\\\">\\n        <!-- ko hueSpinner: { spin:  $parent.loadingTerms, center: true, size: 'large' } --><!-- /ko -->\\n        <div class=\\\"clearfix\\\"></div>\\n        <div class=\\\"alert\\\" data-bind=\\\"visible: !$parent.loadingTerms() && $data.data().length == 0\\\">\").concat(I18n('There are no terms to be shown'), \"</div>\\n        <table style=\\\"width: 100%\\\" data-bind=\\\"visible: !$parent.loadingTerms() && $data.data().length > 0\\\" class=\\\"table table-condensed\\\">\\n          <tbody data-bind=\\\"foreach: $data.data\\\">\\n          <tr>\\n            <td data-bind=\\\"text: val.value\\\"></td>\\n            <td style=\\\"width: 40px\\\">\\n              <div class=\\\"progress\\\">\\n                <div class=\\\"bar-label\\\" data-bind=\\\"text:val.count\\\"></div>\\n                <div class=\\\"bar bar-info\\\" style=\\\"margin-top:-20px;\\\" data-bind=\\\"style: {'width': ((val.count / $parent.data()[0].val.count) * 100) + '%'}\\\"></div>\\n              </div>\\n            </td>\\n          </tr>\\n          </tbody>\\n        </table>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-asterisk-details\\\">\\n    <div class=\\\"context-popover-flex-fill\\\">\\n      <!-- ko component: { name: 'sql-columns-table', params: { columns: columns, scrollToColumns: false } } --><!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-hue-app-details\\\">\\n    <div class=\\\"context-popover-flex-fill\\\" style=\\\"overflow: auto;\\\" data-bind=\\\"with: data\\\">\\n      <div style=\\\"padding: 8px\\\">\\n        <div style=\\\"width:100%; text-align: center; margin-top: 30px; font-size: 100px; color: #787878;\\\" data-bind=\\\"template: { name: 'app-icon-template', data: { icon: interpreter.type } }\\\"></div>\\n          <div style=\\\"width: 100%; margin-top: 20px; text-align:center\\\">\\n            <a style=\\\"font-size: 20px;\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"text: interpreter.displayName, hueLink: interpreter.page, click: function () { $parents[1].close(); }, attr: { 'title': interpreter.tooltip }\\\"></a>\\n          </div>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-popover-contents\\\">\\n    <div class=\\\"context-popover-content\\\">\\n      <!-- ko with: contents -->\\n      <!-- ko if: typeof tabs !== 'undefined' -->\\n      <ul class=\\\"nav nav-tabs context-popover-tabs\\\" data-bind=\\\"foreach: tabs\\\">\\n        <li data-bind=\\\"click: function () { $parent.activeTab(id); }, css: { 'active' : $parent.activeTab() === id }\\\">\\n          <a class=\\\"context-popover-tab\\\" data-toggle=\\\"tab\\\" data-bind=\\\"text: label, attr: { href: '#' + id }\\\"></a>\\n        </li>\\n      </ul>\\n      <div class=\\\"context-popover-tab-container\\\" data-bind=\\\"foreach: tabs\\\">\\n        <div class=\\\"context-popover-tab-pane tab-pane\\\" data-bind=\\\"visible : $parent.activeTab() === id, attr: { id: id }, css: { 'active' : $parent.activeTab() === id }\\\">\\n          <div class=\\\"context-popover-flex\\\">\\n            <!-- ko with: templateData -->\\n            <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"visible: loading\\\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko --></div>\\n            <!-- ko if: ! loading() && hasErrors() -->\\n            <div class=\\\"context-popover-flex-fill\\\">\\n                <div class=\\\"alert\\\">\\n                <span data-bind=\\\"text: $parent.errorText\\\"></span>\\n                <!-- ko if: $parent.enableSampleError && $parents[1].activeTab() === 'sample' -->\\n                <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function(){ huePubSub.publish('sample.error.insert.click', $data); huePubSub.publish('context.popover.hide');}\\\">\").concat(I18n('Insert '), \"<span data-bind=\\\"text:$parent.title\\\"></span> \").concat(I18n('sample query'), \"</a> \").concat(I18n('at cursor'), \"\\n                <!-- /ko -->\\n                </div>\\n            </div>\\n            <!-- /ko -->\\n            <!-- ko if: ! loading() && ! hasErrors() -->\\n            <!-- ko template: { name: $parent.template } --><!-- /ko -->\\n            <!-- /ko -->\\n            <!-- /ko -->\\n            <!-- ko template: { name: 'context-popover-footer', data: $parents[1] } --><!-- /ko -->\\n          </div>\\n        </div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: typeof tabs === 'undefined' -->\\n      <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"visible: loading\\\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko --></div>\\n      <!-- ko if: !loading() && hasErrors() -->\\n      <div class=\\\"context-popover-flex-fill\\\">\\n        <div class=\\\"alert\\\" data-bind=\\\"text: errorText\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: !loading() && !hasErrors() -->\\n      <!-- ko template: { name: template } --><!-- /ko -->\\n      <!-- /ko -->\\n      <!-- ko template: { name: 'context-popover-footer', data: $parent } --><!-- /ko -->\\n      <!-- /ko -->\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-catalog-doc-title\\\">\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-lang-ref-title\\\">\\n    <div class=\\\"hue-popover-title\\\" style=\\\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 20px;\\\">\\n      <i class=\\\"fa fa-book muted\\\" style=\\\"margin-top: 3px\\\"></i> <span class=\\\"blue\\\" style=\\\"padding-left: 4px;\\\" data-bind=\\\"text: title\\\"></span>\\n      <div class=\\\"hue-popover-title-actions\\\">\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Pin'), \"\\\" data-bind=\\\"visible: popover.pinEnabled, click: popover.pin\\\"><i class=\\\"fa fa-fw fa-thumb-tack\\\"></i></a>\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Close'), \"\\\" data-bind=\\\"visible: !popover.closeDisabled, click: popover.close\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-lang-ref-contents\\\">\\n    <div class=\\\"context-popover-content\\\">\\n      <div class=\\\"context-popover-flex-fill context-popover-docs-details\\\" data-bind=\\\"htmlUnsecure: body\\\"></div>\\n      <div class=\\\"context-popover-flex-bottom-links\\\">\\n        <div class=\\\"context-popover-link-row\\\">\\n          <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: openInRightAssist\\\">\\n            <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Show in Assist...'), \"\\\" class=\\\"fa fa-search\\\"></i> \").concat(I18n('Assist'), \"\\n          </a>\\n        </div>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-catalog-entry-title\\\">\\n    <div class=\\\"hue-popover-title\\\">\\n      <!-- ko if: catalogEntry().isTable() -->\\n        <span class=\\\"hue-popover-title-secondary-icon-container\\\">\\n          <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\\n          <!-- ko ifnot: loading -->  \\n            <!-- ko if:catalogEntry().isIcebergTable() -->  \\n              <i class=\\\"hue-popover-title-icon fa muted fa-snowflake-o\\\"  title=\\\"\").concat(I18n('Iceberg table'), \"\\\"></i>\\n            <!-- /ko -->\\n            <!-- ko ifnot:catalogEntry().isIcebergTable() -->  \\n              <i class=\\\"hue-popover-title-icon fa muted fa-table\\\"></i>\\n            <!-- /ko -->            \\n          <!-- /ko -->\\n        </span>\\n      <!-- /ko -->\\n      <!-- ko ifnot: catalogEntry().isTable() -->\\n        <i class=\\\"hue-popover-title-icon fa muted\\\" data-bind=\\\"css: \\n        catalogEntry() && (catalogEntry().isView() || parentIsView()) \\n        ? 'fa-eye' \\n        : (catalogEntry().isDatabase() \\n        ? 'fa-database' \\n        : (catalogEntry().isModel() \\n        ? 'fa-puzzle-piece' \\n        : 'fa-table'))\\\"></i>      \\n      <!-- /ko -->\\n      <span class=\\\"hue-popover-title-text\\\" data-bind=\\\"foreach: breadCrumbs\\\">\\n        <!-- ko ifnot: isActive --><div><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: makeActive, text: name\\\"></a>.</div><!-- /ko -->\\n        <!-- ko if: isActive -->\\n        <div>\\n          <span data-bind=\\\"text: name\\\"></span>\\n          <!-- ko with: catalogEntry -->\\n          <!-- ko if: isField() -->\\n          (<span data-bind=\\\"text: getType()\\\"></span>)\\n          <!-- ko if: isKey() -->\\n            <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: $data, onForeignKeyClick: $parents[1].setEntry.bind($parents[1]) } } --><!-- /ko -->\\n          <!-- /ko -->\\n          <!-- /ko -->\\n          <!-- /ko -->\\n        </div>\\n        <!-- /ko -->\\n      </span>\\n      <div class=\\\"hue-popover-title-actions\\\">\\n        <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Refresh'), \"\\\" data-bind=\\\"visible: !loading() && catalogEntry() && !catalogEntry().isTemporary, click: refresh\\\"><i class=\\\"fa fa-fw fa-refresh\\\"></i></a>\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Pin'), \"\\\" data-bind=\\\"visible: popover.pinEnabled && catalogEntry() && !catalogEntry().isTemporary, click: popover.pin\\\"><i class=\\\"fa fa-fw fa-thumb-tack\\\"></i></a>\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Close'), \"\\\" data-bind=\\\"visible: !popover.closeDisabled, click: popover.close\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-catalog-entry-contents\\\">\\n    <div class=\\\"context-popover-content\\\">\\n      <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"visible: loading\\\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko --></div>\\n      <!-- ko if: !loading() && hasErrors() -->\\n      <div class=\\\"context-popover-flex-fill\\\">\\n        <div class=\\\"alert\\\" data-bind=\\\"text: errorText\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: !loading() && !hasErrors() && typeof catalogEntry() !== 'undefined'-->\\n      <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"with: catalogEntry\\\">\\n        <div class=\\\"context-popover-inner-content\\\">\\n          <!-- ko if: $parent.comment() && !isTemporary  -->\\n          <div class=\\\"context-popover-comment\\\" data-bind=\\\"attr: { 'title': $parent.comment }, multiLineEllipsis: { expanded: $parent.commentExpanded, expandable: true, expandClass: 'context-popover-comment-expanded' }, text: $parent.comment\\\"></div>\\n          <!-- /ko -->\\n\\n          <!-- ko ifnot: $parent.commentExpanded -->\\n              <!-- ko if: window.HAS_CATALOG && !isTemporary && (getDialect() === 'hive' || getDialect() === 'impala') -->\\n              <div data-bind=\\\"component: { name: 'nav-tags', params: { catalogEntry: $data, overflowEllipsis: true } }\\\"></div>\\n              <!-- /ko -->\\n\\n            <!-- ko if: isView() && $parent.viewSql() -->\\n            <a href=\\\"javascript:void(0);\\\" style=\\\"text-align: right; margin-bottom: 5px;\\\" data-bind=\\\"toggle: $parent.viewSqlVisible, text: $parent.viewSqlVisible() ? '\").concat(I18n('Show columns'), \"' : '\").concat(I18n('Show view SQL'), \"'\\\"></a>\\n            <!-- /ko -->\\n\\n            <!-- ko if: $parent.viewSqlVisible -->\\n            <div class=\\\"context-popover-sql\\\" data-bind=\\\"highlight: { value: $parent.viewSql, enableOverflow: true, formatted: true, dialect: getDialect() }\\\"></div>\\n            <!-- /ko -->\\n            <!-- ko ifnot: $parent.viewSqlVisible -->\\n            <!-- ko component: { name: 'catalog-entries-list', params: { catalogEntry: $data, onClick: $parent.catalogEntry, onSampleClick: $parent.onSampleClick } } --><!-- /ko -->\\n            <!-- /ko -->\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n\\n      <div class=\\\"context-popover-flex-bottom-links\\\">\\n        <div class=\\\"context-popover-link-row\\\">\\n          <!-- ko if: catalogEntry -->\\n          <a class=\\\"inactive-action pointer\\\" data-bind=\\\"visible: popover.showInAssistEnabled || catalogEntry() !== originalCatalogEntry, click: showInAssist\\\">\\n            <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Show in Assist...'), \"\\\" class=\\\"fa fa-search\\\"></i> \").concat(I18n('Assist'), \"\\n          </a>\\n          <!-- ko if: window.HAS_SQL_DASHBOARD -->\\n            <a class=\\\"inactive-action pointer\\\" data-bind=\\\"visible: openActionsEnabled, click: openInDashboard\\\">\\n              <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Open in Dashboard...'), \"\\\" class=\\\"fa fa-external-link\\\"></i> \").concat(I18n('Dashboard'), \"\\n            </a>\\n          <!-- /ko -->\\n          <!-- ko if: catalogEntry().getDialect() !== 'solr' && openActionsEnabled() -->\\n          <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: openInTableBrowser\\\">\\n            <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Open in Table Browser...'), \"\\\" class=\\\"fa fa-external-link\\\"></i> \").concat(I18n('Table Browser'), \"\\n          </a>\\n          <!-- /ko -->\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-storage-entry-title\\\">\\n    <div class=\\\"hue-popover-title\\\">\\n      <i class=\\\"hue-popover-title-icon fa muted\\\" data-bind=\\\"css: storageEntry() && storageEntry().definition.type === 'dir' ? 'fa-folder-o' : 'fa-file-o'\\\"></i>\\n      <span class=\\\"hue-popover-title-text\\\" data-bind=\\\"foreach: breadCrumbs\\\">\\n        <!-- ko ifnot: isActive --><div><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: makeActive, text: name\\\"></a><!-- ko if: $index() > 0 -->/<!-- /ko --></div><!-- /ko -->\\n        <!-- ko if: isActive -->\\n        <div>\\n          <span data-bind=\\\"text: name\\\"></span>\\n        </div>\\n        <!-- /ko -->\\n      </span>\\n      <div class=\\\"hue-popover-title-actions\\\">\\n        <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Go Home'), \"\\\" data-bind=\\\"visible: !loading(), click: goHome\\\"><i class=\\\"fa fa-fw fa-home\\\"></i></a>\\n        <a class=\\\"pointer inactive-action\\\" title=\\\"\").concat(I18n('Close'), \"\\\" data-bind=\\\"visible: !popover.closeDisabled, click: popover.close\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"context-storage-entry-contents\\\">\\n    <div class=\\\"context-popover-content\\\" data-bind=\\\"with: storageEntry\\\">\\n      <!-- ko if: !loading() && hasErrors() -->\\n      <div class=\\\"context-popover-flex-fill\\\">\\n        <div class=\\\"alert\\\" data-bind=\\\"text: errorText\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n\\n      <div class=\\\"context-popover-flex-fill\\\" data-bind=\\\"visible: loading\\\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko --></div>\\n\\n      <!-- ko if: !loading() && !hasErrors() -->\\n      <!-- ko with: definition -->\\n      <div class=\\\"context-popover-flex-attributes\\\">\\n          <!-- ko if: typeof humansize !== 'undefined' -->\\n          <div class=\\\"context-popover-attribute\\\"><div>\").concat(I18n('Size'), \"</div><div data-bind=\\\"text: humansize\\\"></div></div>\\n          <!-- /ko -->\\n          <!-- ko if: typeof stats !== 'undefined' -->\\n          <!-- ko with: stats -->\\n          <!-- ko if: user -->\\n          <div class=\\\"context-popover-attribute\\\"><div>\").concat(I18n('Owner'), \"</div><div data-bind=\\\"text: user\\\"></div></div>\\n          <!-- /ko -->\\n          <!-- /ko -->\\n          <!-- /ko -->\\n          <!-- ko if: typeof rwx !== 'undefined' -->\\n          <div class=\\\"context-popover-attribute\\\"><div>\").concat(I18n('Permissions'), \"</div><div data-bind=\\\"text: rwx\\\"></div></div>\\n          <!-- /ko -->\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: definition.type === 'dir' -->\\n      <div class=\\\"context-popover-flex-fill storage-entry-container\\\" data-bind=\\\"fetchMore: { fetchMore: fetchMore.bind($data), hasMore: hasMorePages, loadingMore: loadingMore.bind($data) }\\\">\\n        <table class=\\\"table table-condensed table-nowrap\\\">\\n          <thead>\\n            <tr>\\n              <th width=\\\"1%\\\"></th>\\n              <th>\").concat(I18n('Name'), \"</th>\\n              <th>\").concat(I18n('Size'), \"</th>\\n              <th>\").concat(I18n('Permissions'), \"</th>\\n            </tr>\\n          </thead>\\n          <tbody>\\n            <!-- ko if: $parent.storageEntry().parent -->\\n            <tr>\\n              <td><i class=\\\"fa fa-folder-o\\\"></i></td>\\n              <td><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parent.storageEntry($parent.storageEntry().parent) }\\\">..</a></td>\\n              <td data-bind=\\\"text: $parent.storageEntry().definition.humansize\\\"></td>\\n              <td data-bind=\\\"text: $parent.storageEntry().definition.rwx\\\"></td>\\n            </tr>\\n            <!-- /ko -->\\n            <!-- ko foreach: entries -->\\n            <tr>\\n              <td><i class=\\\"fa\\\" data-bind=\\\"css: definition.type === 'dir' ? 'fa-folder-o' : 'fa-file-o'\\\"></i></td>\\n              <td><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: function () { $parents[1].storageEntry($data) }, text: definition.name\\\"></a></td>\\n              <td data-bind=\\\"text: definition.humansize\\\"></td>\\n              <td data-bind=\\\"text: definition.rwx\\\"></td>\\n            </tr>\\n            <!-- /ko -->\\n          </tbody>\\n        </table>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: definition.type !== 'dir' -->\\n      <div class=\\\"context-popover-flex-header\\\"><div class=\\\"context-popover-header\\\">\").concat(I18n('Preview'), \"</div></div>\\n      <div class=\\\"context-popover-flex-fill storage-entry-container\\\">\\n        <div data-bind=\\\"with: preview\\\">\\n          <!-- ko if: view && view.contents -->\\n          <pre data-bind=\\\"text: view.contents\\\"></pre>\\n          <!-- /ko -->\\n          <!-- ko if: view && !view.contents -->\\n          <div class=\\\"empty-file-contents\\\">\").concat(I18n('Empty file...'), \"</div>\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n\\n      <div class=\\\"context-popover-flex-bottom-links\\\">\\n        <div class=\\\"context-popover-link-row\\\">\\n          <!-- ko ifnot: loading -->\\n          <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: $parent.openInFileBrowser\\\">\\n            <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Open in File Browser...'), \"\\\" class=\\\"fa fa-external-link\\\"></i> \").concat(I18n('File Browser'), \"\\n          </a>\\n          <!-- ko if: typeof $parent.editorLocation !== 'undefined' -->\\n          <a class=\\\"inactive-action pointer\\\" data-bind=\\\"click: function () { $parent.replaceInEditor($data, $parent) }\\\">\\n            <i style=\\\"font-size: 11px;\\\" title=\\\"\").concat(I18n('Replace the editor content...'), \"\\\" class=\\\"fa fa-pencil\\\"></i> \").concat(I18n('Insert in the editor'), \"\\n          </a>\\n          <!-- /ko -->\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n    </div>\\n  </script>\\n\");\n\n// prettier-ignore\nvar CONTEXT_POPOVER_TEMPLATE = \"\\n  <div class=\\\"\".concat(CONTEXT_POPOVER_CLASS, \"\\\" data-bind=\\\"css: orientationClass, style: { 'left': left() + 'px', 'top': top() + 'px', 'width': width() + 'px', height: height() + 'px' }, resizable: { containment: 'document', handles: resizeHelper.resizableHandles, start: resizeHelper.resizeStart, stop: resizeHelper.resizeStop, resize: resizeHelper.resize }\\\">\\n    <div class=\\\"hue-popover-arrow\\\" data-bind=\\\"style: { 'margin-left': leftAdjust() + 'px',  'margin-top': topAdjust() + 'px' }\\\"></div>\\n    <!-- ko if: typeof titleTemplate !== 'undefined' -->\\n    <!-- ko template: { name: titleTemplate, data: contents } --><!-- /ko -->\\n    <!-- /ko -->\\n    <!-- ko if: typeof titleTemplate === 'undefined' -->\\n    <div class=\\\"hue-popover-title\\\" style=\\\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 30px;\\\">\\n      <i class=\\\"fa muted\\\" data-bind=\\\"css: iconClass\\\" style=\\\"margin-top: 3px\\\"></i> <span style=\\\"padding-left: 4px;\\\" data-bind=\\\"text: title\\\"></span>\\n      <!-- ko if: typeof subtitle !== 'undefined' && subtitle -->\\n      <span class=\\\"muted\\\" style=\\\"padding-left: 4px;\\\" data-bind=\\\"html: subtitle\\\"></span>\\n      <!-- /ko -->\\n      <div style=\\\"position: absolute; right: 6px; top: 8px;\\\">\\n        <a class=\\\"pointer inactive-action\\\" data-bind=\\\"visible: pinEnabled, click: pin\\\"><i class=\\\"fa fa-fw fa-thumb-tack\\\"></i></a>\\n        <a class=\\\"pointer inactive-action\\\" data-bind=\\\"click: close\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n    </div>\\n    <!-- /ko -->\\n    <!-- ko if: typeof contentsComponent !== 'undefined' -->\\n    <!-- ko component: { name: contentsComponent, params: data } --><!-- /ko -->\\n    <!-- /ko -->\\n    <!-- ko if: typeof contentsTemplate !== 'undefined' -->\\n    <!-- ko template: { name: contentsTemplate, data: contents } --><!-- /ko -->\\n    <!-- /ko -->\\n    <!-- ko if: typeof contentsTemplate === 'undefined' && typeof contentsComponent === 'undefined' -->\\n    <!-- ko template: 'context-popover-contents' --><!-- /ko -->\\n    <!-- /ko -->\\n  </div>\\n\");\n\n// prettier-ignore\nvar GLOBAL_SEARCH_TEMPLATE = \"\\n  <!-- ko if: isCatalogEntry -->\\n  <!-- ko with: contents -->\\n  <div class=\\\"global-search-catalog-entry\\\">\\n    <!-- ko template: 'context-catalog-entry-title' --><!-- /ko -->\\n    <!-- ko template: 'context-catalog-entry-contents' --><!-- /ko -->\\n  </div>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n  <!-- ko ifnot: isCatalogEntry -->\\n  <!-- ko template: 'context-popover-contents' --><!-- /ko -->\\n  <!-- /ko -->\\n\";\nvar HALF_ARROW = 6;\nvar preventHide = false;\nvar hidePopover = function hidePopover() {\n  if (!preventHide) {\n    var $contextPopover = $('#contextPopover');\n    if ($contextPopover.length > 0) {\n      ko.cleanNode($contextPopover[0]);\n      $contextPopover.remove();\n      $(document).off('click.context');\n      huePubSub.publish(CONTEXT_POPOVER_HIDDEN_EVENT);\n    }\n  }\n};\nvar ContextPopoverViewModel = /*#__PURE__*/function () {\n  function ContextPopoverViewModel(params) {\n    _classCallCheck(this, ContextPopoverViewModel);\n    var self = this;\n    self.disposals = [];\n    self.left = ko.observable(0);\n    self.top = ko.observable(0);\n    var popoverSize = getFromLocalStorage('assist.popover.size', {\n      width: 450,\n      height: 400\n    });\n    self.width = ko.observable(popoverSize.width);\n    self.height = ko.observable(popoverSize.height);\n    self.leftAdjust = ko.observable(0);\n    self.topAdjust = ko.observable(0);\n    self.data = params.data;\n    self.connector = params.connector;\n    self.sourceType = params.sourceType;\n    self.namespace = params.namespace;\n    self.compute = params.compute;\n    self.defaultDatabase = params.defaultDatabase;\n    self.close = hidePopover;\n    self.onSampleClick = params.onSampleClick;\n    var orientation = params.orientation || 'bottom';\n    self.contents = null;\n    self.resizeHelper = new ResizeHelper(orientation, self.leftAdjust, self.topAdjust, function (noHide) {\n      preventHide = noHide;\n    });\n    if (typeof params.source.element !== 'undefined') {\n      // Track the source element and close the popover if moved\n      var $source = $(params.source.element);\n      var originalSourceOffset = $source.offset();\n      var currentSourceOffset;\n      var detectMoveInterval = window.setInterval(function () {\n        currentSourceOffset = $source.offset();\n        if (currentSourceOffset.top !== originalSourceOffset.top) {\n          hidePopover();\n        }\n      }, 200);\n      self.disposals.push(function () {\n        window.clearInterval(detectMoveInterval);\n      });\n    }\n    var windowWidth = $(window).width();\n    var fitHorizontally = function fitHorizontally() {\n      var left = params.source.left + Math.round((params.source.right - params.source.left) / 2) - self.width() / 2;\n      if (left + self.width() > windowWidth - 10) {\n        self.leftAdjust(left + self.width() - windowWidth + 5);\n        left = windowWidth - self.width() - 10;\n      } else if (left < 10) {\n        self.leftAdjust(left - 10 - HALF_ARROW);\n        left = 10;\n      } else {\n        self.leftAdjust(-HALF_ARROW);\n      }\n      self.left(left);\n    };\n    var windowHeight = $(window).height();\n    var fitVertically = function fitVertically() {\n      var top = params.source.top + Math.round((params.source.bottom - params.source.top) / 2) - self.height() / 2;\n      if (top + self.height() > windowHeight - 10) {\n        self.topAdjust(top + self.height() - windowHeight + 5);\n        top = windowHeight - self.height() - 10;\n      } else if (top < 10) {\n        self.topAdjust(top - 10 - HALF_ARROW);\n        top = 10;\n      } else {\n        self.topAdjust(-HALF_ARROW);\n      }\n      self.top(top);\n    };\n    switch (orientation) {\n      case 'top':\n        fitHorizontally();\n        self.top(params.source.top - self.height());\n        break;\n      case 'right':\n        fitVertically();\n        self.left(params.source.right);\n        break;\n      case 'bottom':\n        fitHorizontally();\n        self.top(params.source.bottom);\n        break;\n      case 'left':\n        fitVertically();\n        self.left(params.source.left - self.width());\n    }\n    self.isSolr = params.sourceType === 'solr';\n    self.isComplex = params.data.type === 'complex';\n    self.isFunction = params.data.type === 'function';\n    self.isStorageEntry = params.data.type === 'storageEntry';\n    self.isAsterisk = params.data.type === 'asterisk';\n    self.isDocument = params.data.type.toLowerCase() === 'hue';\n    self.isCollection = params.data.type === 'collection';\n    self.isCatalogEntry = !!params.data.catalogEntry;\n    self.isLangRef = params.data.type === 'statementType';\n    if (self.isCatalogEntry && params.data.catalogEntry.getDialect() === 'solr' && params.data.catalogEntry.isField()) {\n      self.isCollection = true;\n      self.isCatalogEntry = false;\n      self.namespace = params.data.catalogEntry.namespace;\n      self.compute = params.data.catalogEntry.compute;\n    }\n    self.showInAssistEnabled = (typeof params.showInAssistEnabled !== 'undefined' ? params.showInAssistEnabled : true) && (self.isDocument || self.isCollection || self.isCatalogEntry);\n    self.openInDashboardEnabled = self.isCatalogEntry && params.data.catalogEntry.path.length <= 2;\n    self.openInTableBrowserEnabled = self.isCatalogEntry && params.data.catalogEntry.path.length <= 2;\n    self.expandColumnsEnabled = self.isAsterisk;\n    self.pinEnabled = params.pinEnabled && !self.isFunction && !self.isAsterisk && !self.isStorageEntry && !self.isCatalogEntry;\n    if (params.data.type === 'quickQuery') {\n      self.contentsComponent = 'quick-query-context';\n      self.title = I18n('Quick Query');\n      self.iconClass = 'fa-play';\n      self.pinEnabled = false;\n    } else if (self.isCatalogEntry) {\n      self.contents = new DataCatalogContext({\n        popover: self,\n        catalogEntry: params.data.catalogEntry\n      });\n      self.titleTemplate = 'context-catalog-entry-title';\n      self.contentsTemplate = 'context-catalog-entry-contents';\n    } else if (self.isFunction) {\n      self.contents = new FunctionContextTabs(self.data, self.connector);\n      self.title = self.data[\"function\"];\n      self.iconClass = 'fa-superscript';\n    } else if (self.isStorageEntry) {\n      self.contents = new StorageContext({\n        popover: self,\n        storageEntry: params.data.storageEntry,\n        editorLocation: params.data.editorLocation\n      });\n      self.titleTemplate = 'context-storage-entry-title';\n      self.contentsTemplate = 'context-storage-entry-contents';\n    } else if (self.isAsterisk) {\n      self.contents = new AsteriskContextTabs(self.data, self.connector, self.namespace, self.compute, self.defaultDatabase);\n      self.title = '*';\n      self.iconClass = 'fa-table';\n    } else if (self.isDocument) {\n      self.contents = new DocumentContext(self.data.definition);\n      self.titleTemplate = 'context-catalog-doc-title';\n    } else if (self.isCollection) {\n      self.contents = new CollectionContextTabs(self.data);\n      self.title = self.data.catalogEntry.path.slice(1).join('.');\n      self.iconClass = 'fa-search';\n    } else if (self.isLangRef) {\n      self.contents = new LangRefContext({\n        popover: self,\n        data: params.data\n      });\n      self.titleTemplate = 'context-lang-ref-title';\n      self.contentsTemplate = 'context-lang-ref-contents';\n    } else {\n      self.title = '';\n      self.iconClass = 'fa-info';\n    }\n    self.orientationClass = 'hue-popover-' + orientation;\n    if (params.delayedHide) {\n      var hideTimeout = -1;\n      var onLeave = function onLeave() {\n        hideTimeout = window.setTimeout(function () {\n          $('.hue-popover').fadeOut(200, function () {\n            hidePopover();\n          });\n        }, 1000);\n      };\n      var onEnter = function onEnter() {\n        window.clearTimeout(hideTimeout);\n      };\n      $(params.delayedHide).add($('.hue-popover')).on('mouseleave', onLeave).on('mouseenter', onEnter);\n      var keepPopoverOpenOnClick = function keepPopoverOpenOnClick() {\n        window.clearTimeout(hideTimeout);\n        $(params.delayedHide).add($('.hue-popover')).off('mouseleave', onLeave).off('mouseenter', onEnter);\n      };\n      $('.hue-popover').on('click', keepPopoverOpenOnClick);\n      self.disposals.push(function () {\n        $(params.delayedHide).add($('.hue-popover')).off('mouseleave', onLeave).off('mouseenter', onEnter);\n        $('.hue-popover').off('click', keepPopoverOpenOnClick);\n      });\n    }\n    var closeOnEsc = function closeOnEsc(e) {\n      if (e.keyCode === 27) {\n        hidePopover();\n      }\n    };\n    $(document).on('keyup', closeOnEsc);\n    self.disposals.push(function () {\n      $(document).off('keyup', closeOnEsc);\n    });\n    window.setTimeout(function () {\n      $(document).off('click.context');\n      $(document).on('click.context', function (event) {\n        if ($.contains(document, event.target) && !$.contains($('#contextPopover')[0], event.target) && ($('.modal')[0].length === 0 || !$.contains($('.modal')[0], event.target))) {\n          hidePopover();\n        }\n      });\n    }, 0);\n    self.disposals.push(function () {\n      $(document).off('click.context');\n    });\n  }\n  return _createClass(ContextPopoverViewModel, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n      if (self.contents && self.contents.dispose) {\n        self.contents.dispose();\n      }\n      huePubSub.publish('context.popover.dispose');\n    }\n  }, {\n    key: \"pin\",\n    value: function pin() {\n      var self = this;\n      hidePopover();\n      if (self.contents && typeof self.contents.sample !== 'undefined') {\n        self.contents.sample.fetchedData(undefined);\n      }\n      huePubSub.publish('sql.context.pin', self);\n      if (self.contents && self.contents.activeTab() === 'sample') {\n        self.contents.refetchSamples();\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, ContextPopoverViewModel, SUPPORT_TEMPLATES + DOCUMENT_CONTEXT_TEMPLATE + FUNCTION_CONTEXT_TEMPLATE + PARTITION_CONTEXT_TEMPLATE + CONTEXT_POPOVER_TEMPLATE).then(function () {\n  huePubSub.subscribe(HIDE_CONTEXT_POPOVER_EVENT, hidePopover);\n  huePubSub.subscribe(SHOW_CONTEXT_POPOVER_EVENT, function (details) {\n    hidePopover();\n    var $contextPopover = $('<div id=\"contextPopover\" data-bind=\"component: { name: \\'context-popover\\', params: $data }\" ></div>');\n    $('body').append($contextPopover);\n    ko.applyBindings(details, $contextPopover[0]);\n    huePubSub.publish('context.popover.shown');\n  });\n});\nvar SqlContextContentsGlobalSearch = /*#__PURE__*/function () {\n  function SqlContextContentsGlobalSearch(params) {\n    _classCallCheck(this, SqlContextContentsGlobalSearch);\n    var self = this;\n    self.contents = ko.observable();\n    self.disposals = [];\n    self.isCatalogEntry = params.data.type === 'catalogEntry' || params.data.type.toLowerCase() === 'database' || params.data.type.toLowerCase() === 'table' || params.data.type.toLowerCase() === 'field' || params.data.type.toLowerCase() === 'view';\n    self.isDocument = params.data.type.toLowerCase() === 'hue';\n    self.isPartition = params.data.type.toLowerCase() === 'partition';\n    self.close = params.globalSearch.close.bind(params.globalSearch);\n\n    // These are currently not in the global search results\n    self.isStorageEntry = false;\n    self.isAsterisk = false;\n    self.isComplex = false;\n    self.isFunction = false;\n    self.showInAssistEnabled = !self.isHueApp;\n    self.openInDashboardEnabled = false;\n    self.openInTableBrowserEnabled = false;\n    self.expandColumnsEnabled = self.isAsterisk;\n    self.closeDisabled = true; // Global search has it's own close\n\n    var adaptedData = {\n      identifierChain: []\n    };\n    var path = params.data.originalName.split('.');\n    path.forEach(function (part) {\n      adaptedData.identifierChain.push({\n        name: part\n      });\n    });\n    var connectorId = params.data.sourceType && params.data.sourceType.toLowerCase();\n    if (!connectorId || connectorId === 'hive') {\n      huePubSub.publish(GET_KNOWN_CONFIG_TOPIC, function (clusterConfig) {\n        if (clusterConfig) {\n          var defaultEditor = clusterConfig['default_sql_interpreter'];\n          if (!connectorId || connectorId === 'hive' && defaultEditor === 'impala') {\n            connectorId = defaultEditor;\n          }\n        }\n      });\n    }\n    if (self.isCatalogEntry) {\n      // TODO: Connector, Namespace and compute selection for global search results?\n      var connector = findEditorConnector(function (connector) {\n        return connector.id === connectorId;\n      });\n      if (!connector) {\n        // TODO: Global search results are referring to dialect and not type\n        connector = findEditorConnector(function (connector) {\n          return connector.dialect === connectorId;\n        });\n      }\n      getNamespaces({\n        connector: connector\n      }).then(function (context) {\n        dataCatalog.getEntry({\n          namespace: context.namespaces[0],\n          compute: context.namespaces[0].computes[0],\n          connector: connector,\n          path: path,\n          definition: {\n            type: params.data.type.toLowerCase()\n          }\n        }).then(function (catalogEntry) {\n          catalogEntry.navigatorMeta = params.data;\n          catalogEntry.navigatorMetaPromise = CancellablePromise.resolve(catalogEntry.navigatorMeta);\n          catalogEntry.saveLater();\n          self.contents(new DataCatalogContext({\n            popover: self,\n            catalogEntry: catalogEntry\n          }));\n        });\n      })[\"catch\"]();\n    } else if (self.isDocument) {\n      self.contents(new DocumentContext(params.data));\n    } else if (self.isPartition) {\n      self.contents(new PartitionContext(params.data));\n    }\n  }\n  return _createClass(SqlContextContentsGlobalSearch, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n      if (self.contents && self.contents.dispose) {\n        self.contents.dispose();\n      }\n      huePubSub.publish('context.popover.dispose');\n    }\n  }]);\n}();\ncomponentUtils.registerComponent('context-popover-contents-global-search', SqlContextContentsGlobalSearch, SUPPORT_TEMPLATES + DOCUMENT_CONTEXT_TEMPLATE + FUNCTION_CONTEXT_TEMPLATE + PARTITION_CONTEXT_TEMPLATE + GLOBAL_SEARCH_TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport componentUtils from \"../componentUtils\";\nimport I18n from \"../../../utils/i18n\";\nexport var DOCUMENT_CONTEXT_FOOTER = 'document-context-footer';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n<!-- ko if: doc -->\\n  <!-- ko if: doc.last_modified -->\\n    <div><span>\".concat(I18n('Modified'), \"</span> <span data-bind=\\\"momentFromNow: { data: doc.last_modified, titleFormat: 'LLL Z' }\\\"></span></div>\\n  <!-- /ko -->\\n  <!-- ko ifnot: ownedByMe -->\\n    <div><span>\").concat(I18n('Owner'), \"</span> <span data-bind=\\\"text: doc.owner\\\"></span></div>\\n  <!-- /ko -->\\n  <!-- ko if: readOnly -->\\n    <div>\").concat(I18n('Read-only'), \"</div>\\n  <!-- /ko -->\\n<!-- /ko -->\\n\");\nvar DocumentContextFooter = /*#__PURE__*/_createClass(function DocumentContextFooter(params) {\n  var _this = this;\n  _classCallCheck(this, DocumentContextFooter);\n  this.doc = params.popoverData.data;\n  this.ownedByMe = this.doc && this.doc.owner && this.doc.owner === window.LOGGED_USERNAME;\n  this.readOnly = ko.pureComputed(function () {\n    if (window.USER_IS_ADMIN || _this.ownedByMe) {\n      return false;\n    }\n    var contents = ko.unwrap(params.popoverData.documentContents);\n    return contents && !contents.canSave;\n  });\n});\ncomponentUtils.registerComponent(DOCUMENT_CONTEXT_FOOTER, DocumentContextFooter, TEMPLATE);","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { CONTEXT_POPOVER_CLASS, CONTEXT_POPOVER_HIDDEN_EVENT } from \"./ko.contextPopover\";\nimport huePubSub from 'utils/huePubSub';\nimport { HIDE_CONTEXT_POPOVER_EVENT } from \"./ko.contextPopover\";\nvar DEFAULT_DELAY = 700;\nexport var NAME = 'popoverOnHover';\nko.bindingHandlers[NAME] = {\n  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {\n    var options = valueAccessor();\n    var $element = $(element);\n    var popoverSelector = '.' + CONTEXT_POPOVER_CLASS;\n    if (typeof options === 'function') {\n      options = {\n        onHover: options,\n        delay: DEFAULT_DELAY\n      };\n    }\n    var visible = false;\n    var clickedOpen = false;\n    var showTimeout = -1;\n    var hideTimeout = -1;\n    var clearTimeouts = function clearTimeouts() {\n      window.clearTimeout(showTimeout);\n      window.clearTimeout(hideTimeout);\n    };\n    var hide = function hide() {\n      clearTimeouts();\n      hideTimeout = window.setTimeout(function () {\n        visible = false;\n        $(popoverSelector).off('.onHover');\n        huePubSub.publish(HIDE_CONTEXT_POPOVER_EVENT);\n      }, options.delay);\n    };\n    var show = function show(event) {\n      clearTimeouts();\n      if (visible) {\n        return;\n      }\n      showTimeout = window.setTimeout(function () {\n        visible = true;\n        huePubSub.publish(HIDE_CONTEXT_POPOVER_EVENT);\n        options.onHover.bind(bindingContext.$data)(bindingContext.$data, event, options.positionAdjustments);\n      }, options.delay);\n    };\n    $element.on('click.onHover', function (event) {\n      clearTimeouts();\n      clickedOpen = true;\n      visible = true;\n      options.onHover.bind(bindingContext.$data)(bindingContext.$data, event, options.positionAdjustments);\n    });\n    $element.on('mouseenter.onHover', show);\n    $element.on('mouseleave.onHover', function () {\n      if (clickedOpen) {\n        return;\n      }\n      clearTimeouts();\n      // Keep open if mouse moves to the context popover\n      if (visible) {\n        var $popoverSelector = $(popoverSelector);\n        $popoverSelector.on('mouseenter.onHover', function () {\n          clearTimeouts();\n        });\n        $popoverSelector.on('mouseleave.onHover', function () {\n          hide();\n        });\n        hide();\n      }\n    });\n    var hiddenSub = huePubSub.subscribe(CONTEXT_POPOVER_HIDDEN_EVENT, function () {\n      visible = false;\n      clickedOpen = false;\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      $element.off('.onHover');\n      $(popoverSelector).off('.onHover');\n      clearTimeouts();\n      hiddenSub.remove();\n      if (visible) {\n        huePubSub.publish(HIDE_CONTEXT_POPOVER_EVENT);\n      }\n    });\n  }\n};","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport { MULTI_NAME as SIMPLE_ACE_MULTI } from \"../simpleAceEditor/ko.simpleAceEditor\";\nimport { CONTEXT_SELECTOR_COMPONENT } from \"../ko.contextSelector\";\nimport { HUE_DROP_DOWN_COMPONENT } from \"../ko.dropDown\";\nimport { SIMPLE_RESULT_GRID_COMPONENT } from \"../../../apps/editor/components/resultGrid/ko.simpleResultGrid\";\nimport \"../../../apps/editor/components/ExecutableActionsKoBridge.vue\";\nimport Executor from 'apps/editor/execution/executor';\nimport SqlExecutable from 'apps/editor/execution/sqlExecutable';\nimport { CONFIG_REFRESHED_TOPIC } from 'config/events';\nimport { filterEditorConnectors } from 'config/hueConfig';\nimport componentUtils from \"../componentUtils\";\nimport DisposableComponent from \"../DisposableComponent\";\nimport { getStatementsParser } from 'parse/utils';\nexport var NAME = 'quick-query-context';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n<div class=\\\"context-popover-flex-fill\\\" style=\\\"overflow: auto;\\\">\\n  <div style=\\\"display: inline-block\\\" data-bind=\\\"\\n    component: {\\n      name: '\".concat(HUE_DROP_DOWN_COMPONENT, \"',\\n      params: {\\n        value: connector,\\n        labelAttribute: 'displayName',\\n        entries: availableConnectors,\\n        linkTitle: 'Active connector'\\n      }\\n    }\\n  \\\"></div>\\n  <!-- ko if: connector() -->\\n    <div class=\\\"margin-left-10\\\" style=\\\"display: inline-block\\\" data-bind=\\\"\\n      component: {\\n        name: '\").concat(CONTEXT_SELECTOR_COMPONENT, \"',\\n        params: {\\n          connector: connector,\\n          compute: compute,\\n          namespace: namespace,\\n          availableDatabases: availableDatabases,\\n          database: database,\\n          hideLabels: true\\n        }\\n      }\\n    \\\"></div>\\n  <!-- /ko -->\\n  <!-- ko ifnot: loadingContext -->\\n    <!-- ko with: connector -->\\n      <div style=\\\"margin: 10px;\\\" data-bind=\\\"\\n        component: {\\n          name: '\").concat(SIMPLE_ACE_MULTI, \"',\\n          params: {\\n            autocomplete: $parent.autocomplete,\\n            value: $parent.statement,\\n            lines: 3,\\n            aceOptions: {\\n              minLines: 3,\\n              maxLines: 5\\n            },\\n            mode: dialect,\\n            database: $parent.database,\\n            availableDatabases: $parent.availableDatabases,\\n            namespace: $parent.namespace,\\n            compute: $parent.compute,\\n            executor: $parent.executor,\\n            activeExecutable: $parent.activeExecutable\\n          }\\n        }\\n      \\\"></div>\\n      <executable-actions-ko-bridge data-bind=\\\"vueKoProps: {\\n          'executable-observable': $parent.activeExecutable\\n        }\\\"></executable-actions-ko-bridge>\\n      <div data-bind=\\\"\\n        component: {\\n          name: '\").concat(SIMPLE_RESULT_GRID_COMPONENT, \"',\\n          params: { activeExecutable: $parent.activeExecutable }\\n        }\\n      \\\"></div>\\n    <!-- /ko -->\\n  <!-- /ko -->\\n</div>\\n\");\nvar QuickQueryContext = /*#__PURE__*/function (_DisposableComponent) {\n  function QuickQueryContext(params) {\n    var _this;\n    _classCallCheck(this, QuickQueryContext);\n    _this = _callSuper(this, QuickQueryContext, [params]);\n    _this.availableConnectors = ko.observableArray();\n    _this.connector = ko.observable();\n    _this.availableDatabases = ko.observableArray();\n    _this.database = ko.observable();\n    _this.activeExecutable = ko.observable();\n\n    // TODO: Switch over to connector in ko.simpleAceEditor\n    _this.namespace = ko.observable();\n    _this.compute = ko.observable();\n    _this.statement = ko.observable();\n    _this.loadingContext = ko.pureComputed(function () {\n      return !_this.namespace() || !_this.compute() || !_this.database();\n    });\n    _this.dialect = ko.pureComputed(function () {\n      return _this.connector() && _this.connector().dialect;\n    });\n    _this.type = ko.pureComputed(function () {\n      return _this.connector() && _this.connector().id;\n    });\n    _this.defaultLimit = ko.observable(10);\n    _this.executor = new Executor({\n      sourceType: _this.type,\n      namespace: _this.namespace,\n      compute: _this.compute,\n      connector: _this.connector,\n      defaultLimit: _this.defaultLimit\n    });\n    _this.autocomplete = ko.pureComputed(function () {\n      return _this.connector() && {\n        type: _this.connector().dialect,\n        connector: _this.connector\n      };\n    });\n    _this.updateFromConfig();\n    _this.subscribe(CONFIG_REFRESHED_TOPIC, _this.updateFromConfig.bind(_this));\n    var refreshExecutableThrottle = -1;\n    var refreshExecutable = function refreshExecutable() {\n      window.clearTimeout(refreshExecutableThrottle);\n      refreshExecutableThrottle = window.setTimeout(function () {\n        var parsedStatement = getStatementsParser(_this.connector()).parse(_this.statement() || '')[0];\n        var executable = new SqlExecutable({\n          executor: _this.executor,\n          parsedStatement: parsedStatement,\n          database: _this.database()\n        });\n        _this.activeExecutable(executable);\n        _this.executor.setExecutables([executable]);\n      }, 200);\n    };\n    _this.subscribe(_this.statement, refreshExecutable);\n    _this.subscribe(_this.database, refreshExecutable);\n    return _this;\n  }\n  _inherits(QuickQueryContext, _DisposableComponent);\n  return _createClass(QuickQueryContext, [{\n    key: \"updateFromConfig\",\n    value: function updateFromConfig() {\n      var _this2 = this;\n      var configuredSqlConnectors = filterEditorConnectors(function (connector) {\n        return connector.is_sql;\n      });\n      this.availableConnectors(configuredSqlConnectors);\n      var found = this.connector() && this.availableConnectors().some(function (connector) {\n        if (connector.id === _this2.connector().id) {\n          _this2.connector(connector);\n          return true;\n        }\n      });\n      if (!found) {\n        this.connector(this.availableConnectors().length ? this.availableConnectors()[0] : undefined);\n      }\n    }\n  }]);\n}(DisposableComponent);\ncomponentUtils.registerComponent(NAME, QuickQueryContext, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport huePubSub from 'utils/huePubSub';\nimport { ASSIST_LANG_REF_SHOW_TOPIC_EVENT } from \"../assist/events\";\nvar LangRefContext = /*#__PURE__*/function () {\n  function LangRefContext(options) {\n    _classCallCheck(this, LangRefContext);\n    var self = this;\n    self.popover = options.popover;\n    self.title = ko.observable();\n    self.body = ko.observable();\n    self.topicId = 'topics/impala_' + options.data.identifier.toLowerCase().replace(/ /g, '_') + '.xml';\n    $.get(window.IMPALA_DOC_INDEX[self.topicId]).done(function (topic) {\n      self.title(topic.title);\n      self.body(topic.body);\n    });\n    $('.hue-popover').on('click.contextLangRef', function (event) {\n      if (event.target.className === 'hue-doc-internal-link') {\n        huePubSub.publish(ASSIST_LANG_REF_SHOW_TOPIC_EVENT, {\n          ref: $(event.target).data('doc-ref'),\n          anchorId: $(event.target).data('doc-anchor-id')\n        });\n      }\n    });\n  }\n  return _createClass(LangRefContext, [{\n    key: \"dispose\",\n    value: function dispose() {\n      $('.hue-popover').off('click.contextLangRef');\n    }\n  }, {\n    key: \"openInRightAssist\",\n    value: function openInRightAssist() {\n      var self = this;\n      huePubSub.publish(ASSIST_LANG_REF_SHOW_TOPIC_EVENT, {\n        ref: self.topicId\n      });\n      huePubSub.publish('context.popover.hide');\n    }\n  }]);\n}();\nexport default LangRefContext;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport I18n from \"../../../utils/i18n\";\nvar TEMPLATE_NAME = 'context-partition-details';\n\n// prettier-ignore\nexport var PARTITION_CONTEXT_TEMPLATE = \"\\n<script type=\\\"text/html\\\" id=\\\"\".concat(TEMPLATE_NAME, \"\\\">\\n  <div class=\\\"context-popover-flex-fill\\\" style=\\\"overflow: auto;\\\">\\n    <div class=\\\"context-popover-inner-content\\\">\\n      <div style=\\\"position: absolute; right: 6px; top: 8px;\\\">\\n        <a class=\\\"pointer inactive-action\\\" data-bind=\\\"visible: !$parent.closeDisabled, click: function () { $parent.close() }\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n      </div>\\n      <!-- ko with: data -->\\n      <div class=\\\"context-popover-flex-header blue\\\"><span data-bind=\\\"text: originalName\\\"></span></div>\\n      <div class=\\\"context-popover-flex-attributes\\\">\\n        <div class=\\\"context-popover-attribute\\\"><div>\").concat(I18n('Created'), \"</div><div data-bind=\\\"text: created\\\"></div></div>\\n      </div>\\n      <!-- ko if: description -->\\n      <div class=\\\"context-popover-doc-description\\\" data-bind=\\\"text: description\\\"></div>\\n      <!-- /ko -->\\n      <div class=\\\"context-popover-flex-fill\\\">\\n        <table id=\\\"partitionsTable\\\" class=\\\"table table-condensed table-nowrap\\\">\\n          <thead>\\n          <tr>\\n            <th>\").concat(I18n('Values'), \"</th>\\n          </tr>\\n          </thead>\\n          <tbody data-bind=\\\"foreach: colValues\\\">\\n            <tr>\\n              <td data-bind=\\\"text: $data\\\"></td>\\n            </tr>\\n          </tbody>\\n        </table>\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n</script>\\n\");\nvar PartitionContext = /*#__PURE__*/function () {\n  function PartitionContext(data) {\n    _classCallCheck(this, PartitionContext);\n    var self = this;\n    self.disposals = [];\n    self.data = data;\n    self.loading = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.errorText = ko.observable();\n    self.template = TEMPLATE_NAME;\n  }\n  return _createClass(PartitionContext, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }]);\n}();\nexport default PartitionContext;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport huePubSub from 'utils/huePubSub';\nimport { setInLocalStorage } from 'utils/storageUtils';\nvar HALF_SIZE_LIMIT_X = 130;\nvar HALF_SIZE_LIMIT_Y = 100;\nvar ResizeHelper = /*#__PURE__*/_createClass(function ResizeHelper(orientation, leftAdjust, topAdjust, preventHideCallback) {\n  _classCallCheck(this, ResizeHelper);\n  var self = this;\n  var originalMidX, originalWidth, originalRightX, originalLeftX, originalMidY, originalHeight, originalTopY, originalBottomY;\n  var rightX, leftX, leftDiff, rightDiff, topY, bottomY, topDiff, bottomDiff;\n  var redrawHeaders = false;\n  var initOriginalValues = function initOriginalValues(attempt) {\n    if (attempt > 20) {\n      return;\n    }\n    window.setTimeout(function () {\n      var offset = $('.hue-popover').offset();\n      if (!offset) {\n        // Popover isn't visible yet, wait a bit and try again\n        attempt++;\n        initOriginalValues(attempt);\n        return;\n      }\n      if (orientation === 'right') {\n        offset.left -= 5;\n      } else if (orientation === 'bottom') {\n        offset.top -= 5;\n      }\n      originalHeight = $('.hue-popover').height();\n      originalWidth = $('.hue-popover').width();\n      originalMidX = offset.left + originalWidth / 2;\n      originalMidY = offset.top + originalHeight / 2;\n      originalLeftX = offset.left;\n      originalRightX = offset.left + originalWidth;\n      originalTopY = offset.top;\n      originalBottomY = offset.top + originalHeight;\n    }, attempt * 20);\n  };\n  initOriginalValues(0);\n  self.saveSize = function () {\n    setInLocalStorage('assist.popover.size', {\n      width: $('.hue-popover').width(),\n      height: $('.hue-popover').height()\n    });\n  };\n  self.resizeStart = function (event, ui) {\n    preventHideCallback(true);\n  };\n  self.resizeStop = function (event, ui) {\n    if (redrawHeaders) {\n      huePubSub.publish('table.extender.redraw', 'sampleTab');\n      redrawHeaders = false;\n    }\n    huePubSub.publish('context.popover.resized');\n\n    // Delay or it will close the popover when releasing at the window borders\n    window.setTimeout(function () {\n      preventHideCallback(false);\n    }, 300);\n    self.saveSize();\n  };\n  var resizeTopBottomHorizontal = function resizeTopBottomHorizontal(event, ui) {\n    leftX = ui.position.left;\n    rightX = ui.position.left + ui.size.width;\n    if (rightX < originalMidX + HALF_SIZE_LIMIT_X) {\n      ui.size.width = originalMidX + HALF_SIZE_LIMIT_X - ui.position.left;\n      rightX = ui.position.left + ui.size.width;\n      $('.hue-popover').css('width', ui.size.width + 'px');\n    }\n    if (leftX > originalMidX - HALF_SIZE_LIMIT_X) {\n      ui.position.left = originalMidX - HALF_SIZE_LIMIT_X;\n      ui.size.width = ui.originalSize.width - (ui.position.left - ui.originalPosition.left);\n      leftX = ui.position.left;\n      rightX = ui.position.left + ui.size.width;\n      $('.hue-popover').css('left', ui.position.left + 'px');\n      $('.hue-popover').css('width', ui.size.width + 'px');\n    }\n    leftDiff = originalLeftX - leftX;\n    rightDiff = originalRightX - rightX;\n    $('.hue-popover-arrow').css('margin-left', (leftDiff + rightDiff) / 2 + leftAdjust() + 'px');\n  };\n  var resizeLeftRightVertical = function resizeLeftRightVertical(event, ui) {\n    if (!redrawHeaders && ui.originalPosition.top !== ui.position.top) {\n      redrawHeaders = true;\n      huePubSub.publish('table.extender.hide', 'sampleTab');\n    }\n    topY = ui.position.top;\n    bottomY = ui.position.top + ui.size.height;\n    if (bottomY < originalMidY + HALF_SIZE_LIMIT_Y) {\n      ui.size.height = originalMidY + HALF_SIZE_LIMIT_Y - ui.position.top;\n      bottomY = ui.position.top + ui.size.height;\n      $('.hue-popover').css('height', ui.size.height + 'px');\n    }\n    if (topY > originalMidY - HALF_SIZE_LIMIT_Y) {\n      ui.position.top = originalMidY - HALF_SIZE_LIMIT_Y;\n      ui.size.height = ui.originalSize.height - (ui.position.top - ui.originalPosition.top);\n      topY = ui.position.top;\n      bottomY = ui.position.top + ui.size.height;\n      $('.hue-popover').css('top', ui.position.top + 'px');\n      $('.hue-popover').css('height', ui.size.height + 'px');\n    }\n    topDiff = originalTopY - topY;\n    bottomDiff = originalBottomY - bottomY;\n    $('.hue-popover-arrow').css('margin-top', (topDiff + bottomDiff) / 2 + topAdjust() + 'px');\n  };\n  switch (orientation) {\n    case 'top':\n      self.resizableHandles = 'w, nw, n, ne, e';\n      self.resize = function (event, ui) {\n        resizeTopBottomHorizontal(event, ui);\n        // TODO: Implement resize height limits when popover is above\n      };\n      break;\n    case 'right':\n      self.resizableHandles = 'n, ne, e, se, s';\n      self.resize = function (event, ui) {\n        resizeLeftRightVertical(event, ui);\n        if (ui.size.width < 350) {\n          ui.size.width = 350;\n          $('.hue-popover').css('width', 350 + 'px');\n        }\n      };\n      break;\n    case 'bottom':\n      self.resizableHandles = 'e, se, s, sw, w';\n      self.resize = function (event, ui) {\n        resizeTopBottomHorizontal(event, ui);\n        if (ui.size.height < 200) {\n          ui.size.height = 200;\n          $('.hue-popover').css('height', 200 + 'px');\n        }\n      };\n      break;\n    case 'left':\n      self.resizableHandles = 's, sw, w, nw, n';\n      self.resize = function (event, ui) {\n        resizeLeftRightVertical(event, ui);\n        // TODO: Implement resize width limits when popover is on the left\n      };\n      break;\n  }\n});\nexport default ResizeHelper;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport AssistStorageEntry from \"../assist/assistStorageEntry\";\nimport huePubSub from 'utils/huePubSub';\nvar StorageContext = /*#__PURE__*/function () {\n  function StorageContext(options) {\n    _classCallCheck(this, StorageContext);\n    var self = this;\n    self.popover = options.popover;\n    self.storageEntry = ko.observable();\n    self.editorLocation = options.editorLocation;\n    self.loading = ko.pureComputed(function () {\n      return self.storageEntry() && self.storageEntry().loading();\n    });\n    self.storageEntry.subscribe(function (newVal) {\n      if (!newVal.loaded && !newVal.loading()) {\n        if (newVal.definition.type === 'dir') {\n          newVal.open(true);\n        } else {\n          newVal.loadPreview();\n        }\n      }\n    });\n    self.storageEntry(options.storageEntry);\n    self.breadCrumbs = ko.pureComputed(function () {\n      var result = [];\n      var currentEntry = self.storageEntry();\n      do {\n        result.unshift({\n          name: currentEntry.definition.name,\n          originalType: currentEntry.originalType,\n          isActive: currentEntry === self.storageEntry(),\n          storageEntry: currentEntry,\n          makeActive: function makeActive() {\n            self.storageEntry(this.storageEntry);\n          }\n        });\n        currentEntry = currentEntry.parent;\n      } while (currentEntry);\n      return result;\n    });\n  }\n  return _createClass(StorageContext, [{\n    key: \"openInFileBrowser\",\n    value: function openInFileBrowser(entry) {\n      huePubSub.publish('open.link', entry.definition.url);\n      huePubSub.publish('context.popover.hide');\n      huePubSub.publish('global.search.close');\n    }\n  }, {\n    key: \"replaceInEditor\",\n    value: function replaceInEditor(entry, storageContext) {\n      var text = entry.originalType ? entry.originalType + ':/' + entry.path : entry.path;\n      huePubSub.publish('ace.replace', {\n        location: storageContext.editorLocation,\n        text: text\n      });\n      huePubSub.publish('context.popover.hide');\n    }\n  }, {\n    key: \"goHome\",\n    value: function goHome() {\n      var self = this;\n      AssistStorageEntry.getEntry(window.USER_HOME_DIR, self.storageEntry().type).then(self.storageEntry);\n    }\n  }]);\n}();\nexport default StorageContext;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport ApiHelper, { LINK_SHARING_PERMS } from \"../../../api/apiHelper\";\nimport componentUtils from \"../componentUtils\";\nimport I18n from \"../../../utils/i18n\";\nimport DisposableComponent from \"../DisposableComponent\";\nimport { DOCUMENT_UPDATED_EVENT } from \"../../../doc/hueDocument\";\nimport huePubSub from 'utils/huePubSub';\nimport { HUE_DROP_DOWN_COMPONENT } from \"../ko.dropDown\";\nexport var NAME = 'link-sharing';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <!-- ko if: window.HAS_LINK_SHARING && perms() -->\\n  <div class=\\\"hue-link-sharing\\\">\\n    <div style=\\\"float: right\\\">\\n      <!-- ko ifnot: perms().link_sharing_on -->\\n      <a href=\\\"javascript:void(0);\\\" data-test=\\\"activate\\\" data-bind=\\\"click: createReadLink\\\" title=\\\"\".concat(I18n('Share the query via a link'), \"\\\" >\\n        <i class=\\\"fa fa-wf fa-link\\\"></i> \").concat(I18n('Get link'), \"\\n      </a>\\n      <!-- /ko -->\\n      <!-- ko if: perms().link_sharing_on -->\\n      <a href=\\\"javascript:void(0)\\\" data-test=\\\"deactivate\\\" data-bind=\\\"click: deactivateLink\\\" title=\\\"\").concat(I18n('Deactivate the link sharing'), \"\\\">\\n        <i class=\\\"fa fa-wf fa-link\\\"></i> \").concat(I18n('Deactivate link'), \"\\n      </a>\\n      <!-- /ko -->\\n    </div>\\n    <!-- ko if: perms().link_sharing_on -->\\n    <div>\\n      \").concat(I18n('Any logged in user with the link can'), \"\\n      <div class=\\\"perm-selector\\\" data-bind=\\\"component: {\\n          name: '\").concat(HUE_DROP_DOWN_COMPONENT, \"',\\n          params: {\\n            value: selectedPerm,\\n            entries: availablePerms,\\n            onSelect: changePerm.bind($data)\\n          }\\n        }\\n      \\\"></div>\\n    </div>\\n    <div class=\\\"input-append\\\">\\n      <form autocomplete=\\\"off\\\">\\n        <input id=\\\"sharedLinkInput\\\" style=\\\"width: 520px\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" onfocus=\\\"this.select()\\\" data-bind=\\\"value: link\\\" type=\\\"text\\\" readonly=\\\"readonly\\\"/>\\n        <button class=\\\"btn\\\" type=\\\"button\\\" data-clipboard-target=\\\"#sharedLinkInput\\\" data-bind=\\\"clipboard\\\"><i class=\\\"fa fa-clipboard\\\"></i></button>\\n      </form>\\n    </div>\\n    <!-- /ko -->\\n  </div>\\n  <!-- /ko -->\\n\");\nvar OFF_OPTION = {\n  value: LINK_SHARING_PERMS.OFF\n};\nvar READ_OPTION = {\n  label: I18n('read'),\n  value: LINK_SHARING_PERMS.READ\n};\nvar WRITE_OPTION = {\n  label: I18n('write'),\n  value: LINK_SHARING_PERMS.WRITE\n};\nvar AVAILABLE_PERMS = [READ_OPTION, WRITE_OPTION];\nvar LinkSharing = /*#__PURE__*/function (_DisposableComponent) {\n  function LinkSharing(params) {\n    var _this;\n    _classCallCheck(this, LinkSharing);\n    _this = _callSuper(this, LinkSharing);\n    _this.document = params.document;\n    _this.docDefinition = params.docDefinition;\n    _this.perms = ko.observable(_this.docDefinition.perms);\n    _this.selectedPerm = ko.observable(_this.perms().link_write ? WRITE_OPTION : READ_OPTION);\n    _this.link = location.origin + window.HUE_BASE_URL + '/hue' + _this.docDefinition.absoluteUrl;\n    _this.availablePerms = AVAILABLE_PERMS;\n    _get((_this, _getPrototypeOf(LinkSharing.prototype)), \"subscribe\", _this).call(_this, _this.perms, function (perms) {\n      return _this.selectedPerm(perms.link_write ? WRITE_OPTION : READ_OPTION);\n    });\n    return _this;\n  }\n  _inherits(LinkSharing, _DisposableComponent);\n  return _createClass(LinkSharing, [{\n    key: \"createReadLink\",\n    value: function () {\n      var _createReadLink = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.changePerm(READ_OPTION);\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function createReadLink() {\n        return _createReadLink.apply(this, arguments);\n      }\n      return createReadLink;\n    }()\n  }, {\n    key: \"deactivateLink\",\n    value: function () {\n      var _deactivateLink = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.changePerm(OFF_OPTION);\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function deactivateLink() {\n        return _deactivateLink.apply(this, arguments);\n      }\n      return deactivateLink;\n    }()\n  }, {\n    key: \"changePerm\",\n    value: function () {\n      var _changePerm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(permOption) {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return ApiHelper.setLinkSharingPermsAsync({\n                perm: permOption.value,\n                uuid: this.docDefinition.uuid\n              });\n            case 2:\n              response = _context3.sent;\n              this.perms(response.document.perms);\n              huePubSub.publish(DOCUMENT_UPDATED_EVENT, response.document);\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function changePerm(_x) {\n        return _changePerm.apply(this, arguments);\n      }\n      return changePerm;\n    }()\n  }]);\n}(DisposableComponent);\ncomponentUtils.registerComponent(NAME, LinkSharing, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"../componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport HueFileEntry from \"../../../doc/hueFileEntry\";\nimport DisposableComponent from \"../DisposableComponent\";\nimport \"./ko.linkSharing\";\nimport { REFRESH_DOC_ASSIST_EVENT } from \"../assist/ko.assistDocumentsPanel\";\nexport var SHOW_EVENT = 'doc.show.share.modal';\nexport var SHOWN_EVENT = 'doc.share.modal.shown';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n    <div class=\\\"modal-header\\\">\\n      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n      <h2 class=\\\"modal-title\\\">\").concat(I18n('Sharing'), \" - <span data-bind=\\\"text: documentName\\\"></span></h2>\\n    </div>\\n    <div class=\\\"modal-body\\\" style=\\\"overflow: visible;\\\">\\n      <!-- ko with: document -->\\n        <!-- ko with: definition -->\\n          <!-- ko component: {\\n            name: 'link-sharing',\\n            params: {\\n              document: $parent,\\n              docDefinition: $data\\n            }\\n          } --><!-- /ko -->\\n          <div class=\\\"row-fluid\\\" data-bind=\\\"visible: !$parent.hasErrors()\\\"  id=\\\"scrolldiv\\\">\\n            <div class=\\\"span6\\\">\\n              <h4 class=\\\"muted\\\" style=\\\"margin-top: 0\\\">\").concat(I18n('Read'), \"</h4>\\n              <div data-bind=\\\"visible: (perms.read.users.length == 0 && perms.read.groups.length == 0)\\\">\").concat(I18n('The document is not shared for read.'), \"</div>\\n              <ul class=\\\"unstyled airy\\\" style=\\\"max-height: 20vh; overflow-x:auto;\\\" data-bind=\\\"foreach: perms.read.users\\\">\\n                <li>\\n                  <span class=\\\"badge badge-info\\\" data-bind=\\\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\\\"><i class=\\\"fa fa-user\\\"></i> <span data-bind=\\\"text: $parents[1].prettifyUsernameById(id), attr:{'data-id': id}\\\"></span></span><span class=\\\"badge badge-right trash-share\\\" data-bind=\\\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeUserReadShare($data) }\\\"> <i class=\\\"fa fa-times\\\"></i></span>\\n                </li>\\n              </ul>\\n              <ul class=\\\"unstyled airy\\\" style=\\\"max-height: 20vh; overflow-x:auto;\\\" data-bind=\\\"foreach: perms.read.groups\\\">\\n                <li>\\n                  <span class=\\\"badge badge-info\\\" data-bind=\\\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\\\"><i class=\\\"fa fa-users\\\"></i> \").concat(I18n('Group'), \" &quot;<span data-bind=\\\"text: name\\\"></span>&quot;</span><span class=\\\"badge badge-right trash-share\\\" data-bind=\\\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeGroupReadShare($data) }\\\"> <i class=\\\"fa fa-times\\\"></i></span>\\n                </li>\\n              </ul>\\n            </div>\\n\\n            <div class=\\\"span6\\\">\\n              <h4 class=\\\"muted\\\" style=\\\"margin-top: 0\\\">\").concat(I18n('Modify'), \"</h4>\\n              <div data-bind=\\\"visible: (perms.write.users.length == 0 && perms.write.groups.length == 0)\\\">\").concat(I18n('The document is not shared for modify.'), \"</div>\\n              <ul class=\\\"unstyled airy\\\" style=\\\"max-height: 20vh; overflow-x:auto;\\\" data-bind=\\\"foreach: perms.write.users\\\">\\n                <li>\\n                  <span class=\\\"badge badge-info badge-left\\\" data-bind=\\\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\\\">\\n                    <i class=\\\"fa fa-user\\\">\\n                    </i>\\n                    <span data-bind=\\\"text: $parents[1].prettifyUsernameById(id), attr:{'data-id': id}\\\">\\n                    </span>\\n                  </span>\\n                  <span class=\\\"badge badge-right trash-share\\\" data-bind=\\\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeUserWriteShare($data) }\\\">\\n                    <i class=\\\"fa fa-times\\\"></i>\\n                  </span>\\n                </li>\\n              </ul>\\n              <ul class=\\\"unstyled airy\\\" style=\\\"max-height: 20vh; overflow-x:auto;\\\" data-bind=\\\"foreach: perms.write.groups\\\">\\n                <li>\\n                  <span class=\\\"badge badge-info badge-left\\\" data-bind=\\\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\\\">\\n                    <i class=\\\"fa fa-users\\\"></i> \").concat(I18n('Group'), \" &quot;\\n                    <span data-bind=\\\"text: name\\\"></span>&quot;</span>\\n                    <span class=\\\"badge badge-right trash-share\\\" data-bind=\\\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeGroupWriteShare($data) }\\\">\\n                    <i class=\\\"fa fa-times\\\"></i>\\n                  </span>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n        <!-- /ko -->\\n        <div class=\\\"doc-browser-empty animated\\\" style=\\\"display: none;\\\" data-bind=\\\"visible: loading\\\">\\n          <i class=\\\"fa fa-spinner fa-spin fa-2x\\\" style=\\\"color: #999;\\\"></i>\\n        </div>\\n        <div class=\\\"doc-browser-empty animated\\\" style=\\\"display: none;\\\" data-bind=\\\"visible: hasErrors() && ! loading()\\\">\\n          \").concat(I18n('There was an error loading the document.'), \"\\n        </div>\\n        <div style=\\\"margin-top: 20px\\\" data-bind=\\\"visible: fileEntry.canModify() && ! hasErrors() && ! loading()\\\">\\n          <div id=\\\"shareDocAutocompleteMenu\\\"></div>\\n          <div class=\\\"input-append\\\" style=\\\"font-size: inherit\\\">\\n            <input id=\\\"shareDocUserInput\\\" placeholder=\\\"\").concat(I18n('Type a username or a group name'), \"\\\" type=\\\"text\\\" data-bind=\\\"\\n                autocomplete: {\\n                  source: shareAutocompleteUserSource.bind($data),\\n                  select: function(event,ui) { onShareAutocompleteSelectEnter(event,ui);},\\n                  itemTemplate: 'user-search-autocomp-item',\\n                  noMatchTemplate: 'user-search-autocomp-no-match',\\n                  valueObservable: searchInput,\\n                  showSpinner: true,\\n                  classPrefix: 'hue-',\\n                  onEnter: onShareAutocompleteUserEnter.bind($data),\\n                  appendTo: '#shareDocAutocompleteMenu'\\n                },\\n                clearable: {\\n                  value: searchInput,\\n                  textInput: searchInput\\n                }\\n              \\\" class=\\\"ui-autocomplete-input\\\" autocomplete=\\\"off\\\" style=\\\"width: 476px\\\">\\n            <div class=\\\"btn-group\\\" style=\\\"overflow:visible; margin-left: -4px;\\\">\\n              <a id=\\\"documentShareAddBtn\\\" class=\\\"btn\\\" style=\\\"border-radius: 0\\\" data-bind=\\\"click: function () {  onShareAutocompleteUserEnter() }\\\">\\n                <span data-bind=\\\"text: selectedPerm() == 'read' ? '\").concat(I18n('Read'), \"' : '\").concat(I18n('Modify'), \"'\\\">\\n                </span>\\n              </a>\\n              <a id=\\\"documentShareCaret\\\" class=\\\"btn dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\n               <span class=\\\"caret\\\"></span>\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li>\\n                  <a data-bind=\\\"click: function () { selectedPerm('read'); onShareAutocompleteUserEnter() }\\\" href=\\\"javascript:void(0)\\\">\\n                    <i class=\\\"fa fa-plus\\\"></i> \").concat(I18n('Read'), \"\\n                  </a>\\n                </li>\\n                <li>\\n                  <a data-bind=\\\"click: function () { selectedPerm('write'); onShareAutocompleteUserEnter() }\\\" href=\\\"javascript:void(0)\\\">\\n                    <i class=\\\"fa fa-plus\\\"></i> \").concat(I18n('Modify'), \"\\n                  </a>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n        </div>\\n      <!-- /ko -->\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <a href=\\\"#\\\" data-dismiss=\\\"modal\\\" class=\\\"btn disable-feedback disable-enter\\\">\").concat(I18n('Close'), \"</a>\\n    </div>\\n\");\nvar ShareDocModal = /*#__PURE__*/function (_DisposableComponent) {\n  function ShareDocModal(params) {\n    var _this;\n    _classCallCheck(this, ShareDocModal);\n    _this = _callSuper(this, ShareDocModal);\n    _this.document = ko.observable();\n    _this.perms = ko.observable();\n    _this.uuid = ko.observable();\n    _this.wasSharedBefore = undefined;\n    _this.documentName = ko.pureComputed(function () {\n      return _this.document() && _this.document().definition().name;\n    });\n    _this.showLinkSharing = ko.pureComputed(function () {\n      return window.HAS_LINK_SHARING && _this.perms() && _this.perms().link_sharing_on;\n    });\n    _this.initDocument(params);\n    return _this;\n  }\n  _inherits(ShareDocModal, _DisposableComponent);\n  return _createClass(ShareDocModal, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.wasSharedBefore !== this.document().isShared()) {\n        huePubSub.publish(REFRESH_DOC_ASSIST_EVENT);\n      }\n    }\n  }, {\n    key: \"initDocument\",\n    value: function () {\n      var _initDocument = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(params) {\n        var document;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return getDocument(params);\n            case 3:\n              document = _context.sent;\n              this.wasSharedBefore = document.isShared();\n              this.document(document);\n              this.perms(document.definition().perms);\n              this.uuid(document.definition().uuid);\n              _context.next = 14;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.warn('Failed loading document.');\n              console.error(_context.t0);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n      function initDocument(_x) {\n        return _initDocument.apply(this, arguments);\n      }\n      return initDocument;\n    }()\n  }]);\n}(DisposableComponent);\nvar getDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(params) {\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          return _context5.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(resolve, reject) {\n              var ensureLoaded, entry;\n              return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                while (1) switch (_context4.prev = _context4.next) {\n                  case 0:\n                    ensureLoaded = /*#__PURE__*/function () {\n                      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(entry) {\n                        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                          while (1) switch (_context2.prev = _context2.next) {\n                            case 0:\n                              _context2.t0 = entry.document();\n                              if (_context2.t0) {\n                                _context2.next = 5;\n                                break;\n                              }\n                              _context2.next = 4;\n                              return entry.loadDocument();\n                            case 4:\n                              _context2.t0 = _context2.sent;\n                            case 5:\n                              return _context2.abrupt(\"return\", _context2.t0);\n                            case 6:\n                            case \"end\":\n                              return _context2.stop();\n                          }\n                        }, _callee2);\n                      }));\n                      return function ensureLoaded(_x5) {\n                        return _ref3.apply(this, arguments);\n                      };\n                    }();\n                    if (!(typeof params === 'string')) {\n                      _context4.next = 6;\n                      break;\n                    }\n                    entry = new HueFileEntry({\n                      activeEntry: ko.observable(),\n                      trashEntry: ko.observable(),\n                      app: 'documents',\n                      activeSort: ko.observable(),\n                      user: window.LOGGED_USERNAME,\n                      definition: {\n                        uuid: params\n                      }\n                    });\n                    entry.load( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n                      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                        while (1) switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.t0 = resolve;\n                            _context3.next = 3;\n                            return ensureLoaded(entry);\n                          case 3:\n                            _context3.t1 = _context3.sent;\n                            (0, _context3.t0)(_context3.t1);\n                          case 5:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }, _callee3);\n                    })), reject);\n                    _context4.next = 11;\n                    break;\n                  case 6:\n                    _context4.t0 = resolve;\n                    _context4.next = 9;\n                    return ensureLoaded(params);\n                  case 9:\n                    _context4.t1 = _context4.sent;\n                    (0, _context4.t0)(_context4.t1);\n                  case 11:\n                  case \"end\":\n                    return _context4.stop();\n                }\n              }, _callee4);\n            }));\n            return function (_x3, _x4) {\n              return _ref2.apply(this, arguments);\n            };\n          }()));\n        case 1:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return function getDocument(_x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\ncomponentUtils.registerComponent('share-doc-modal', ShareDocModal, TEMPLATE).then(function () {\n  huePubSub.subscribe(SHOW_EVENT, /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(params) {\n      var $shareDocMocal, data;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            $shareDocMocal = $('#shareDocModal');\n            if ($shareDocMocal.length) {\n              ko.cleanNode($shareDocMocal[0]);\n              $shareDocMocal.remove();\n            }\n            $shareDocMocal = $('<div id=\"shareDocModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'share-doc-modal\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade\" tabindex=\"-1\"></div>');\n            $('body').append($shareDocMocal);\n            data = {\n              params: params,\n              descendantsComplete: function descendantsComplete() {\n                huePubSub.publish(SHOWN_EVENT);\n              }\n            };\n            ko.applyBindings(data, $shareDocMocal[0]);\n            $shareDocMocal.modal('show');\n            $shareDocMocal.on('hide', function () {\n              ko.cleanNode($shareDocMocal[0]);\n              $shareDocMocal.remove();\n            });\n          case 8:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6);\n    }));\n    return function (_x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }());\n});","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport sqlAnalyzerRepository from 'catalog/analyzer/sqlAnalyzerRepository';\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_KEY_COMPONENT } from \"./assist/ko.assistKey\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport noop from 'utils/timing/noop';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'catalog-entries-list';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"entries-table-td-description\\\">\\n    <td data-bind=\\\"attr: { 'title': comment }\\\">\\n    <!-- ko if: $parent.editableDescriptions && !window.HAS_READ_ONLY_CATALOG -->\\n      <div class=\\\"hue-catalog-entries-table-desc\\\" data-bind=\\\"visibleOnHover: { selector: '.editable-inline-action' }\\\">\\n        <div data-bind=\\\"editable: comment, editableOptions: {\\n          mode: 'inline',\\n          enabled: true,\\n          type: 'textarea',\\n          showbuttons: 'bottom',\\n          inputclass: 'hue-table-browser-desc-input',\\n          toggle: 'manual',\\n          toggleElement: '.toggle-editable',\\n          placeholder: '\".concat(I18n('Add a description...'), \"',\\n          emptytext: '\").concat(I18n('Add a description...'), \"',\\n          inputclass: 'hue-catalog-entries-table-desc-input',\\n          rows: 6,\\n          save: saveComment,\\n          inlineEditAction: { editClass: 'toggle-editable editable-inline-action' },\\n          multiLineEllipsis: { overflowHeight: '40px', expandable: true, expandActionClass: 'editable-inline-action' }\\n        }\\\">\").concat(I18n('Add a description...'), \"</div>\\n      </div>\\n    <!-- /ko -->\\n    <!-- ko if: !$parent.editableDescriptions || window.HAS_READ_ONLY_CATALOG -->\\n      <div class=\\\"entries-table-description\\\" data-bind=\\\"text: comment, multiLineEllipsis\\\"></div>\\n    <!-- /ko -->\\n    </td>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"entries-table-tbody-no-entries\\\">\\n    <tbody>\\n      <tr>\\n        <td style=\\\"font-style: italic;\\\" data-bind=\\\"attr: { 'colspan': colCount + (typeof $component.selectedEntries !== 'undefined' ? 1 : 0) + ($component.contextPopoverEnabled ? 1 : 0) }\\\">\\n          <!-- ko ifnot: hasErrors -->\\n          \").concat(I18n('No entries found'), \"\\n          <!-- /ko -->\\n          <!-- ko if: hasErrors -->\\n          \").concat(I18n('Error loading entries'), \"\\n          <!-- /ko -->\\n        </td>\\n      </tr>\\n    </tbody>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"entries-table-shared-headers\\\">\\n    <!-- ko if: typeof selectedEntries !== 'undefined' -->\\n    <th width=\\\"1%\\\" class=\\\"select-column\\\"><div class=\\\"hue-checkbox fa\\\" data-bind=\\\"hueCheckAll: { allValues: filteredEntries, selectedValues: selectedEntries }\\\"></div></th>\\n    <!-- /ko -->\\n    <!-- ko if: contextPopoverEnabled -->\\n    <th width=\\\"1%\\\">&nbsp;</th>\\n    <!-- /ko -->\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"entries-table-shared-columns\\\">\\n    <!-- ko if: typeof $parent.selectedEntries !== 'undefined' -->\\n    <td width=\\\"1%\\\" class=\\\"select-column\\\"><div class=\\\"hue-checkbox fa\\\" data-bind=\\\"multiCheck: '#entryTable', value: $data, hueChecked: $parent.selectedEntries\\\"></div></td>\\n    <!-- /ko -->\\n    <!-- ko if: $parent.contextPopoverEnabled -->\\n    <td width=\\\"1%\\\"><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: showContextPopover\\\"><i class=\\\"fa fa-info\\\"></i></a></td>\\n    <!-- /ko -->\\n  </script>\\n\\n  <!-- ko if: !loading() && (!catalogEntry().isField() || catalogEntry().isComplex())-->\\n  <div class=\\\"context-popover-inline-autocomplete\\\">\\n    <div class=\\\"context-popover-sample-filter\\\">\\n      <!-- ko component: {\\n        name: 'inline-autocomplete',\\n        params: {\\n          querySpec: querySpec,\\n          facets: facets,\\n          knownFacetValues: knownFacetValues,\\n          autocompleteFromEntries: autocompleteFromEntries\\n        }\\n      } --><!-- /ko -->\\n    </div>\\n  </div>\\n  <!-- /ko -->\\n\\n  <div class=\\\"catalog-entries-list-container\\\">\\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko -->\\n    <!-- ko if: !loading() && catalogEntry().isSource() -->\\n    <table id=\\\"entryTable\\\" class=\\\"table table-condensed table-nowrap\\\">\\n      <thead>\\n        <tr>\\n          <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\\n          <th>\").concat(I18n('Database'), \"</th>\\n          <th>\").concat(I18n('Description'), \" <!-- ko if: loadingNav --><i class=\\\"fa fa-spinner fa-spin\\\"></i><!-- /ko --></th>\\n        </tr>\\n      </thead>\\n      <!-- ko if: filteredEntries().length -->\\n      <tbody data-bind=\\\"foreach: filteredEntries\\\">\\n        <tr data-bind=\\\"click: onRowClick\\\">\\n          <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\\n          <td data-bind=\\\"click: onClick\\\"><a href=\\\"javascript: void(0);\\\" data-bind=\\\"text: catalogEntry().name, click: onClick, attr: { 'title': catalogEntry().getTitle() }\\\"></a></td>\\n          <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\\n        </tr>\\n      </tbody>\\n      <!-- /ko -->\\n      <!-- ko if: filteredEntries().length === 0 -->\\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 2, hasErrors: hasErrors } } --><!-- /ko -->\\n      <!-- /ko -->\\n    </table>\\n    <!-- /ko -->\\n\\n    <!-- ko if: !loading() && catalogEntry().isDatabase() -->\\n    <table id=\\\"entryTable\\\" class=\\\"table table-condensed table-nowrap\\\">\\n      <thead>\\n      <tr>\\n        <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\\n        <th data-bind=\\\"text: catalogEntry().getDialect() !== 'solr' ? '\").concat(I18n('Table'), \"' : '\").concat(I18n('Collection'), \"'\\\"></th>\\n        <th>\").concat(I18n('Description'), \" <!-- ko if: loadingNav --><i class=\\\"fa fa-spinner fa-spin\\\"></i><!-- /ko --></th>\\n      </tr>\\n      </thead>\\n      <!-- ko if: filteredEntries().length -->\\n      <tbody data-bind=\\\"foreach: filteredEntries\\\">\\n      <tr data-bind=\\\"click: onRowClick\\\">\\n        <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\\n        <td data-bind=\\\"click: onClick\\\"><a href=\\\"javascript: void(0);\\\" data-bind=\\\"text: catalogEntry().name, click: onClick, attr: { 'title': catalogEntry().getTitle() }\\\"></a></td>\\n        <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\\n      </tr>\\n      </tbody>\\n      <!-- /ko -->\\n      <!-- ko if: filteredEntries().length === 0 -->\\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 2, hasErrors: hasErrors } } --><!-- /ko -->\\n      <!-- /ko -->\\n    </table>\\n    <!-- /ko -->\\n\\n    <!-- ko if: !loading() && (catalogEntry().isTableOrView() || catalogEntry().isComplex()) -->\\n    <table class=\\\"table table-condensed table-nowrap\\\">\\n      <thead>\\n      <tr>\\n        <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\\n        <th><span data-bind=\\\"text: catalogEntry().getDialect() !== 'solr' ? '\").concat(I18n('Column'), \"' : '\").concat(I18n('Field'), \"'\\\"></span> (<span data-bind=\\\"text: filteredEntries().length\\\"></span>)</th>\\n        <th>\").concat(I18n('Type'), \"</th>\\n        <th with=\\\"25%\\\">\").concat(I18n('Description'), \" <!-- ko if: loadingNav --><i class=\\\"fa fa-spinner fa-spin\\\"></i><!-- /ko --></th>\\n        <th colspan=\\\"2\\\">\").concat(I18n('Sample'), \" <!-- ko if: loadingSamples() || sampleRefreshEnabled() --><i class=\\\"fa fa-spinner fa-spin\\\"></i><!-- /ko --> <!-- ko if: sampleRefreshEnabled --><a class=\\\"inactive-action\\\" href=\\\"javascript: void(0);\\\" data-bind=\\\"toggle: sampleRefreshEnabled\\\"><i class=\\\"fa fa-stop\\\"></i></a><!-- /ko --></th>\\n      </tr>\\n      </thead>\\n      <!-- ko if: filteredEntries().length -->\\n      <tbody data-bind=\\\"foreach: filteredEntries\\\">\\n      <tr data-bind=\\\"click: onRowClick\\\">\\n        <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\\n        <td class=\\\"name-column\\\" data-bind=\\\"attr: { 'title': catalogEntry().name + ' - \").concat(I18n('Click for more details'), \"' }\\\">\\n          <a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: onClick\\\">\\n            <span data-bind=\\\"text: catalogEntry().name\\\"></span>\\n            <!-- ko if: isKey -->\\n              <!-- ko component: { name: '\").concat(ASSIST_KEY_COMPONENT, \"', params: { entry: catalogEntry } } --><!-- /ko -->\\n            <!-- /ko -->\\n            <!-- ko if: popularity && popularity() >= 5 -->\\n            &nbsp;<i data-bind=\\\"tooltip: { title: '\").concat(I18n('Popularity'), \": ' + popularity() + '%' }\\\" class=\\\"fa fa-star-o\\\"></i>\\n            <!-- /ko -->\\n          </a>\\n        </td>\\n        <td class=\\\"type-column\\\" data-bind=\\\"text: catalogEntry().getType(), attr: { 'title': catalogEntry().getRawType() }\\\"></td>\\n        <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\\n        <td class=\\\"sample-column\\\" data-bind=\\\"html: firstSample, attr: { 'title': hueUtils.html2text(firstSample()) }\\\"></td>\\n        <td class=\\\"sample-column\\\" data-bind=\\\"html: secondSample, attr: { 'title': hueUtils.html2text(secondSample()) }\\\"></td>\\n      </tr>\\n      </tbody>\\n      <!-- /ko -->\\n      <!-- ko if: filteredEntries().length === 0 -->\\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 5, hasErrors: hasErrors } } --><!-- /ko -->\\n      <!-- /ko -->\\n    </table>\\n    <!-- /ko -->\\n\\n    <!-- ko if: !loading() && catalogEntry().isField() && !catalogEntry().isComplex() -->\\n    <!-- ko component: { name: 'field-samples', params: {\\n        catalogEntry: catalogEntry,\\n        onSampleClick: onSampleClick,\\n        refreshSampleInterval: refreshSampleInterval\\n      }} --><!-- /ko -->\\n    <!-- /ko -->\\n  </div>\\n\");\nvar SampleEnrichedEntry = /*#__PURE__*/function () {\n  function SampleEnrichedEntry(index, catalogEntry, onClick, onRowClick) {\n    _classCallCheck(this, SampleEnrichedEntry);\n    var self = this;\n    self.index = index;\n    self.catalogEntry = ko.isObservable(catalogEntry) ? catalogEntry : ko.observable(catalogEntry);\n    self.popularity = ko.observable(0);\n    self.firstSample = ko.observable();\n    self.secondSample = ko.observable();\n    self.onClick = onClick;\n    self.onRowClick = onRowClick;\n    self.comment = self.catalogEntry().getCommentObservable();\n    self.joinColumns = ko.observableArray();\n    self.isKey = ko.pureComputed(function () {\n      return self.catalogEntry().isPrimaryKey() || self.catalogEntry().isPartitionKey() || self.catalogEntry().isForeignKey() || self.joinColumns().length;\n    });\n    self.keyText = ko.pureComputed(function () {\n      var keys = [];\n      if (self.catalogEntry().isPrimaryKey()) {\n        keys.push(I18n('Primary key'));\n      }\n      if (self.catalogEntry().isPartitionKey()) {\n        keys.push(I18n('Partition key'));\n      }\n      if (self.catalogEntry().isForeignKey()) {\n        keys.push(I18n('Foreign key'));\n      }\n      if (self.joinColumns().length) {\n        var key = I18n(self.joinColumns().length > 1 ? 'Foreign keys' : 'Foreign key') + ':';\n        self.joinColumns().forEach(function (joinCol) {\n          key += '<br/>' + joinCol;\n        });\n        keys.push(key);\n      }\n      return keys.join('<br/>');\n    });\n  }\n  return _createClass(SampleEnrichedEntry, [{\n    key: \"showContextPopover\",\n    value: function showContextPopover(entry, event) {\n      var $source = $(event.currentTarget || event.target);\n      var offset = $source.offset();\n      huePubSub.publish('context.popover.show', {\n        data: {\n          type: 'catalogEntry',\n          catalogEntry: entry.catalogEntry()\n        },\n        orientation: 'right',\n        source: {\n          element: event.target,\n          left: offset.left,\n          top: offset.top - 2,\n          right: offset.left + $source.width() + 1,\n          bottom: offset.top + $source.height() - 2\n        }\n      });\n    }\n  }, {\n    key: \"saveComment\",\n    value: function saveComment() {\n      var self = this;\n      if (self.comment() !== self.catalogEntry().getResolvedComment()) {\n        self.catalogEntry().setComment(self.comment()).then(self.comment)[\"catch\"](function () {\n          self.comment(self.catalogEntry().getResolvedComment());\n        });\n      }\n    }\n  }]);\n}();\nvar CatalogEntriesList = /*#__PURE__*/function () {\n  function CatalogEntriesList(params) {\n    _classCallCheck(this, CatalogEntriesList);\n    var self = this;\n    self.catalogEntry = ko.isObservable(params.catalogEntry) ? params.catalogEntry : ko.observable(params.catalogEntry);\n    self.selectedEntries = params.selectedEntries;\n    self.entries = ko.observableArray();\n    self.editableDescriptions = !!params.editableDescriptions;\n    self.contextPopoverEnabled = !!params.contextPopoverEnabled;\n    self.onSampleClick = params.onSampleClick;\n    self.querySpec = ko.observable();\n    self.cancellablePromises = [];\n    self.lastSamplePromise = undefined;\n    self.fetchSampleTimeout = -1;\n    self.loading = ko.observable(false);\n    self.loadingNav = ko.observable(false);\n    self.loadingSamples = ko.observable(false);\n    self.hasErrors = ko.observable(false);\n    self.refreshSampleInterval = params.refreshSampleInterval;\n    self.sampleRefreshEnabled = ko.observable(!!params.refreshSampleInterval);\n    self.sampleRefreshEnabled.subscribe(function (newVal) {\n      if (!newVal) {\n        window.clearTimeout(self.fetchSampleTimeout);\n        if (self.lastSamplePromise && self.lastSamplePromise.cancel) {\n          self.lastSamplePromise.cancel();\n        }\n      }\n    });\n\n    // TODO: Can be computed based on contents (instead of always suggesting all col types etc.)\n    self.knownFacetValues = ko.pureComputed(function () {\n      if (self.catalogEntry().isDatabase()) {\n        return {\n          type: {\n            table: -1,\n            view: -1\n          }\n        };\n      } else if (self.catalogEntry().isTableOrView()) {\n        var typeIndex = {\n          type: {}\n        };\n\n        // Issue with filteredEntries is that it's not updated in time when typing,\n        // i.e. type:| doesn't automatically open the suggestion list.\n        self.entries().forEach(function (entry) {\n          var type = entry.catalogEntry().getType().toLowerCase();\n          if (!typeIndex['type'][type]) {\n            typeIndex['type'][type] = 1;\n          } else {\n            typeIndex['type'][type]++;\n          }\n        });\n        return typeIndex;\n      }\n    });\n    self.facets = self.catalogEntry().isField() && !self.catalogEntry().isComplex() ? [] : ['type'];\n    self.filteredEntries = ko.pureComputed(function () {\n      if (!self.querySpec() || self.querySpec().query === '') {\n        return self.entries();\n      }\n      var facets = self.querySpec().facets;\n      var isFacetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL\n      var isTextMatch = !self.querySpec().text || self.querySpec().text.length === 0;\n      return self.entries().filter(function (entry) {\n        var match = true;\n        if (!isFacetMatch) {\n          if (entry.catalogEntry().isField()) {\n            match = !!facets['type'][entry.catalogEntry().getType().toLowerCase()];\n          } else if (entry.catalogEntry().isTableOrView()) {\n            match = facets['type']['table'] && entry.catalogEntry().isTable() || facets['type']['view'] && entry.catalogEntry().isView();\n          }\n        }\n        if (match && !isTextMatch) {\n          match = self.querySpec().text.every(function (text) {\n            var textLower = text.toLowerCase();\n            return entry.catalogEntry().name.toLowerCase().indexOf(textLower) !== -1 || entry.catalogEntry().getResolvedComment().toLowerCase().indexOf(textLower) !== -1;\n          });\n        }\n        return match;\n      });\n    });\n    self.autocompleteFromEntries = function (nonPartial, partial) {\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      self.entries().forEach(function (entry) {\n        if (entry.catalogEntry().name.toLowerCase().indexOf(partialLower) === 0) {\n          result.push(nonPartial + partial + entry.catalogEntry().name.substring(partial.length));\n        }\n      });\n      return result;\n    };\n    var entrySort = function entrySort(a, b) {\n      var aIsKey = a.catalogEntry().isPrimaryKey() || a.catalogEntry().isPartitionKey() || a.catalogEntry().isForeignKey();\n      var bIsKey = b.catalogEntry().isPrimaryKey() || b.catalogEntry().isPartitionKey() || b.catalogEntry().isForeignKey();\n      if (aIsKey && !bIsKey) {\n        return -1;\n      }\n      if (bIsKey && !aIsKey) {\n        return 1;\n      }\n      return b.popularity() - a.popularity() || a.index - b.index;\n    };\n    var onClick = function onClick(sampleEnrichedEntry, event) {\n      if (params.onClick) {\n        params.onClick(sampleEnrichedEntry.catalogEntry(), event);\n      } else if (self.contextPopoverEnabled) {\n        sampleEnrichedEntry.showContextPopover(sampleEnrichedEntry, event);\n      } else {\n        self.catalogEntry(sampleEnrichedEntry.catalogEntry());\n      }\n    };\n    var onRowClick = function onRowClick(sampleEnrichedEntry, event) {\n      if (self.selectedEntries && $(event.target).is('td')) {\n        $(event.currentTarget).find('.hue-checkbox').trigger('click');\n      }\n      return true;\n    };\n    var loadEntries = function loadEntries() {\n      self.loading(true);\n      var entriesAddedDeferred = $.Deferred();\n      var childPromise = self.catalogEntry().getChildren({\n        silenceErrors: true,\n        cancellable: true\n      });\n      childPromise.then(function (childEntries) {\n        var entries = $.map(childEntries, function (entry, index) {\n          return new SampleEnrichedEntry(index, entry, onClick, onRowClick);\n        });\n        entries.sort(entrySort);\n        self.entries(entries);\n        entriesAddedDeferred.resolve(entries);\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n        entriesAddedDeferred.reject();\n      })[\"finally\"](function () {\n        self.loading(false);\n      });\n      var sqlAnalyzer = sqlAnalyzerRepository.getSqlAnalyzer(self.catalogEntry().getConnector());\n      if (self.catalogEntry().isTableOrView()) {\n        var joinsPromise = self.catalogEntry().getTopJoins({\n          cancellable: true,\n          silenceErrors: true,\n          sqlAnalyzer: sqlAnalyzer\n        });\n        joinsPromise.then(function (topJoins) {\n          if (topJoins && topJoins.values && topJoins.values.length) {\n            entriesAddedDeferred.then(function (entries) {\n              var entriesIndex = {};\n              entries.forEach(function (entry) {\n                entriesIndex[entry.catalogEntry().path.join('.').toLowerCase()] = {\n                  joinColumnIndex: {},\n                  entry: entry\n                };\n              });\n              topJoins.values.forEach(function (topJoin) {\n                topJoin.joinCols.forEach(function (topJoinCols) {\n                  if (topJoinCols.columns.length === 2) {\n                    if (entriesIndex[topJoinCols.columns[0].toLowerCase()]) {\n                      entriesIndex[topJoinCols.columns[0].toLowerCase()].joinColumnIndex[topJoinCols.columns[1].toLowerCase()] = topJoinCols.columns[1];\n                    } else if (entriesIndex[topJoinCols.columns[1].toLowerCase()]) {\n                      entriesIndex[topJoinCols.columns[1].toLowerCase()].joinColumnIndex[topJoinCols.columns[0].toLowerCase()] = topJoinCols.columns[0];\n                    }\n                  }\n                });\n              });\n              Object.keys(entriesIndex).forEach(function (key) {\n                if (Object.keys(entriesIndex[key].joinColumnIndex).length) {\n                  entriesIndex[key].entry.joinColumns(Object.keys(entriesIndex[key].joinColumnIndex));\n                }\n              });\n            });\n          }\n        })[\"catch\"](noop);\n        self.cancellablePromises.push(joinsPromise);\n      }\n      var navMetaPromise = self.catalogEntry().loadNavigatorMetaForChildren({\n        silenceErrors: true,\n        cancellable: true\n      })[\"finally\"](function () {\n        self.loadingNav(false);\n      });\n      self.cancellablePromises.push(navMetaPromise);\n      self.cancellablePromises.push(childPromise);\n      self.cancellablePromises.push(self.catalogEntry().loadSqlAnalyzerPopularityForChildren({\n        cancellable: true,\n        silenceErrors: true,\n        sqlAnalyzer: sqlAnalyzer\n      }).then(function (popularEntries) {\n        if (popularEntries.length) {\n          childPromise.then(function () {\n            var entryIndex = {};\n            self.entries().forEach(function (entry) {\n              entryIndex[entry.catalogEntry().name] = entry;\n            });\n            var totalCount = 0;\n            var popularityToApply = [];\n            popularEntries.forEach(function (popularEntry) {\n              if (entryIndex[popularEntry.name] && popularEntry.sqlAnalyzerPopularity && popularEntry.sqlAnalyzerPopularity.selectColumn && popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount > 0) {\n                totalCount += popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount;\n                popularityToApply.push(function () {\n                  entryIndex[popularEntry.name].popularity(Math.round(100 * popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount / totalCount));\n                });\n              }\n            });\n            var foundPopularEntries = popularityToApply.length !== 0;\n            while (popularityToApply.length) {\n              popularityToApply.pop()();\n            }\n            if (foundPopularEntries) {\n              self.entries().sort(entrySort);\n            }\n          })[\"catch\"](noop);\n        }\n      })[\"catch\"](noop));\n      if (self.catalogEntry().isTableOrView() || self.catalogEntry().isComplex()) {\n        self.loadingSamples(true);\n        var firstSampleFetch = true;\n        var fetchSamples = function fetchSamples() {\n          window.clearInterval(self.fetchSampleTimeout);\n          self.lastSamplePromise = self.catalogEntry().getSample({\n            silenceErrors: true,\n            cancellable: true,\n            refreshCache: !firstSampleFetch\n          });\n          self.lastSamplePromise.then(function (sample) {\n            childPromise.then(function () {\n              if (sample.meta && sample.meta.length && sample.data && sample.data.length) {\n                var entryIndex = {};\n                self.entries().forEach(function (entry) {\n                  entryIndex[entry.catalogEntry().name] = entry;\n                });\n                for (var i = 0; i < sample.meta.length; i++) {\n                  var name = sample.meta[i].name;\n                  if (name.toLowerCase().indexOf(self.catalogEntry().name.toLowerCase() + '.') === 0) {\n                    name = name.substring(self.catalogEntry().name.length + 1);\n                  }\n                  var sampleEntry = entryIndex[name];\n                  if (sampleEntry) {\n                    sampleEntry.firstSample(sample.data[0][i]);\n                    if (sample.data.length > 1) {\n                      sampleEntry.secondSample(sample.data[1][i]);\n                    }\n                  }\n                }\n              }\n            })[\"catch\"](noop)[\"finally\"](function () {\n              self.loadingSamples(false);\n              firstSampleFetch = false;\n              if (self.refreshSampleInterval && self.sampleRefreshEnabled()) {\n                self.fetchSampleTimeout = window.setTimeout(fetchSamples, self.refreshSampleInterval);\n              }\n            });\n          })[\"catch\"](function () {\n            self.loadingSamples(false);\n          });\n        };\n        fetchSamples();\n      }\n    };\n    window.setTimeout(loadEntries, 100);\n  }\n  return _createClass(CatalogEntriesList, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      window.clearTimeout(self.fetchSampleTimeout);\n      if (self.lastSamplePromise && self.lastSamplePromise.cancel) {\n        self.lastSamplePromise.cancel();\n      }\n      while (self.cancellablePromises.length) {\n        var promise = self.cancellablePromises.pop();\n        if (promise.cancel) {\n          promise.cancel();\n        }\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, CatalogEntriesList, TEMPLATE);","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport { ASSIST_IS_DB_PANEL_READY_EVENT, ASSIST_SET_DATABASE_EVENT } from \"./assist/events\";\nimport componentUtils from \"./componentUtils\";\nimport contextCatalog from 'catalog/contextCatalog';\nimport dataCatalog from 'catalog/dataCatalog';\nimport { CONTEXT_CATALOG_REFRESHED_TOPIC, NAMESPACES_REFRESHED_TOPIC } from 'catalog/events';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport { getFromLocalStorage, setInLocalStorage } from 'utils/storageUtils';\nexport var CONTEXT_SELECTOR_COMPONENT = 'hue-context-selector';\nvar TEMPLATE = \"\\n  <!-- ko if: loadingContext -->\\n  <i class=\\\"fa fa-spinner fa-spin muted\\\"></i>\\n  <!-- /ko -->\\n\\n  <div class=\\\"inline-block\\\" style=\\\"display: none;\\\" data-bind=\\\"visible: !loadingContext()\\\">\\n    <!-- ko if: window.HAS_MULTI_CLUSTER -->\\n    <!-- ko if: availableClusters().length > 0 && !hideClusters -->\\n    <!-- ko ifnot: hideLabels --><span class=\\\"editor-header-title\\\">\".concat(I18n('Cluster'), \"</span><!-- /ko -->\\n    <div data-bind=\\\"component: { name: 'hue-drop-down', params: { value: cluster, onSelect: onClusterSelect, entries: availableClusters, labelAttribute: 'name', searchable: true, linkTitle: '\").concat(I18n('Active cluster'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n    <!-- /ko -->\\n    <!-- ko if: availableClusters().length === 0 && !hideClusters -->\\n    <span class=\\\"editor-header-title\\\"><i class=\\\"fa fa-warning\\\"></i> \").concat(I18n('No clusters found'), \"</span>\\n    <!-- /ko -->\\n\\n    <!-- ko if: availableComputes().length > 0 && !hideComputes -->\\n    <!-- ko ifnot: hideLabels --><span class=\\\"editor-header-title\\\">\").concat(I18n('Compute'), \"</span><!-- /ko -->\\n    <div data-bind=\\\"component: { name: 'hue-drop-down', params: { value: compute, onSelect: onComputeSelect, entries: availableComputes, labelAttribute: 'name', searchable: true, linkTitle: '\").concat(I18n('Active compute'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n    <!-- /ko -->\\n    <!-- ko if: availableComputes().length === 0 && !hideComputes -->\\n    <span class=\\\"editor-header-title\\\"><i class=\\\"fa fa-warning\\\"></i> \").concat(I18n('No computes found'), \"</span>\\n    <!-- /ko -->\\n\\n    <!-- ko if: availableNamespaces().length > 1 && !hideNamespaces && !window.getLastKnownConfig().has_computes -->\\n    <!-- ko ifnot: hideLabels --><span class=\\\"editor-header-title\\\">\").concat(I18n('Namespace'), \"</span><!-- /ko -->\\n    <div data-bind=\\\"component: { name: 'hue-drop-down', params: { value: namespace, onSelect: onNamespaceSelect, entries: availableNamespaces, labelAttribute: 'name', searchable: true, linkTitle: '\").concat(I18n('Active namespace'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n    <!-- /ko -->\\n    <!-- ko if: availableNamespaces().length === 0 && !hideNamespaces -->\\n    <span class=\\\"editor-header-title\\\"><i class=\\\"fa fa-warning\\\"></i> \").concat(I18n('No namespaces found'), \"</span>\\n    <!-- /ko -->\\n    <!-- /ko -->\\n\\n    <!-- ko if: availableDatabases().length > 0 && !hideDatabases-->\\n    <!-- ko if: window.getLastKnownConfig().has_computes && !hideLabels --><span class=\\\"editor-header-title\\\">\").concat(I18n('Active database'), \"</span><!-- /ko -->\\n    <div data-bind=\\\"component: { name: 'hue-drop-down', params: { titleName: 'Database', value: database, entries: availableDatabases, foreachVisible: true, searchable: true, linkTitle: '\").concat(I18n('Active database'), \"' } }\\\" style=\\\"display: inline-block\\\"></div>\\n    <!-- /ko -->\\n    <!-- ko if: availableDatabases().length === 0  && !hideDatabases -->\\n    <span class=\\\"editor-header-title\\\"><i class=\\\"fa fa-warning\\\"></i> \").concat(I18n('No databases found'), \"</span>\\n    <!-- /ko -->\\n  </div>\\n\");\nvar TYPES_INDEX = {\n  cluster: {\n    name: 'cluster',\n    loading: 'loadingClusters',\n    available: 'availableClusters',\n    hide: 'hideClusters',\n    lastPromise: 'lastClustersPromise',\n    contextCatalogFn: 'getClusters',\n    localStorageId: 'lastSelectedCluster',\n    onSelect: 'onClusterSelect'\n  },\n  compute: {\n    name: 'compute',\n    loading: 'loadingComputes',\n    available: 'availableComputes',\n    hide: 'hideComputes',\n    lastPromise: 'lastComputesPromise',\n    contextCatalogFn: 'getComputes',\n    localStorageId: 'lastSelectedCompute',\n    onSelect: 'onComputeSelect'\n  },\n  namespace: {\n    name: 'namespace',\n    loading: 'loadingNamespaces',\n    available: 'availableNamespaces',\n    hide: 'hideNamespaces',\n    lastPromise: 'lastNamespacesPromise',\n    contextCatalogFn: 'getNamespaces',\n    localStorageId: 'lastSelectedNamespace',\n    onSelect: 'onNamespaceSelect'\n  }\n};\nvar TYPES = Object.keys(TYPES_INDEX).map(function (key) {\n  return TYPES_INDEX[key];\n});\n\n/**\n * This is a component for compute, namespace and database selection. All parameters are optional except the\n * connector, if for instance no database and namespace observables are provided it will only show compute\n * selection.\n *\n * If it's desired to just show namespaces for a given compute you can force hide the compute selection by\n * setting hideComputes to true and the value of the compute observable will be used.\n *\n * Example:\n *\n *   <!-- ko component: {\n *     name: 'hue-context-selector',\n *     params: {\n *       connector: myConnectorObservable,\n *       compute: myComputeObservable,\n *       namespace: myNamespaceObservable,\n *     }\n *   } --><!-- /ko -->\n *\n * @param {Object} params\n * @param {ko.observable} [params.cluster]\n * @param {ko.observable} [params.compute]\n * @param {ko.observable} [params.namespace]\n * @param {ko.observable} [params.connector]\n * @param {ko.observable} [params.database]\n * @param {ko.observableArray} [params.availableDatabases]\n * @param {boolean} [params.hideClusters] - Can be used to force hide cluster selection even if a cluster\n *                                          observable is provided.\n * @param {boolean} [params.hideComputes] - Can be used to force hide compute selection even if a compute\n *                                          observable is provided.\n * @param {boolean} [params.hideNamespaces] - Can be used to force hide namespace selection even if a namespace\n *                                            observable is provided.\n * @param {boolean} [params.hideDatabases] - Can be used to force hide database selection even if a database\n *                                           observable is provided.\n * @param {function} [params.onComputeSelect] - Callback when a new compute is selected (after initial set)\n * @param {function} [params.onClusterSelect] - Callback when a new cluster is selected (after initial set)\n * @param {function} [params.onNamespaceSelect] - Callback when a new namespace is selected (after initial set)\n * @constructor\n */\nvar HueContextSelector = function HueContextSelector(params) {\n  var self = this;\n  if (!params.connector || !ko.unwrap(params.connector)) {\n    throw new Error('No connector with type provided');\n  }\n  self.disposals = [];\n  self.connector = params.connector;\n  self.hideLabels = params.hideLabels;\n  TYPES.forEach(function (type) {\n    self[type.name] = params[type.name];\n    self[type.loading] = ko.observable(false);\n    self[type.available] = ko.observableArray();\n    self[type.hide] = params[type.hide] || !self[type.name];\n    self[type.lastPromise] = undefined;\n    self[type.onSelect] = function (selectedVal, previousVal) {\n      if (params[type.onSelect]) {\n        params[type.onSelect](selectedVal, previousVal);\n      }\n      setInLocalStorage('contextSelector.' + type.localStorageId, selectedVal);\n      if (selectedVal && type === TYPES_INDEX.compute) {\n        self.setMatchingNamespace(selectedVal);\n      } else if (selectedVal && type === TYPES_INDEX.namespace) {\n        self.setMatchingCompute(selectedVal);\n      }\n    };\n    if (self[type.name]) {\n      huePubSub.subscribe('context.selector.set.' + type.name, function (id) {\n        self[type.available]().some(function (instance) {\n          if (instance.id === id) {\n            self[type.name](instance);\n            return true;\n          }\n        });\n      });\n    }\n    self.reload(type);\n  });\n  var refreshThrottle = -1;\n  var refresh = function refresh(connectorId) {\n    if (!connectorId || ko.unwrap(self.connector).id === connectorId) {\n      window.clearTimeout(refreshThrottle);\n      refreshThrottle = window.setTimeout(function () {\n        TYPES.forEach(self.reload.bind(self));\n      }, 100);\n    }\n  };\n  var namespaceRefreshSub = huePubSub.subscribe(NAMESPACES_REFRESHED_TOPIC, refresh);\n  var contextCatalogRefreshSub = huePubSub.subscribe(CONTEXT_CATALOG_REFRESHED_TOPIC, refresh);\n  self.disposals.push(function () {\n    window.clearTimeout(refreshThrottle);\n    namespaceRefreshSub.remove();\n    contextCatalogRefreshSub.remove();\n  });\n  self.loadingDatabases = ko.observable(false);\n  self.availableDatabases = params.availableDatabases || ko.observableArray();\n  self.database = params.database;\n  self.hideDatabases = params.hideDatabases || !self.database;\n  self.reloadDatabaseThrottle = -1;\n  self.reloadDatabases();\n  if (self.database) {\n    huePubSub.subscribe('data.catalog.entry.refreshed', function (details) {\n      if (details.entry.isSource()) {\n        if (ko.unwrap(self.connector).id === details.entry.getConnector().id) {\n          self.reloadDatabases();\n        }\n      }\n    });\n  }\n  self.loadingContext = ko.pureComputed(function () {\n    return self[TYPES_INDEX.cluster.loading]() || self[TYPES_INDEX.namespace.loading]() || self[TYPES_INDEX.compute.loading]() || self.loadingDatabases();\n  });\n};\nHueContextSelector.prototype.setMatchingNamespace = function (compute) {\n  var self = this;\n  if (self[TYPES_INDEX.namespace.name]) {\n    // Select the first corresponding namespace when a compute is selected (unless selected)\n    try {\n      self[TYPES_INDEX.namespace.lastPromise].done(function () {\n        if (!self[TYPES_INDEX.namespace.name]() || self[TYPES_INDEX.namespace.name]().id !== compute.namespace) {\n          var found = self[TYPES_INDEX.namespace.available]().some(function (namespace) {\n            if (compute.namespace === namespace.id) {\n              self[TYPES_INDEX.namespace.name](namespace);\n              setInLocalStorage('contextSelector.' + TYPES_INDEX.namespace.localStorageId, namespace);\n              return true;\n            }\n          });\n          if (!found) {\n            // This can happen when a compute refers to a namespace that isn't returned by the namespaces call\n            // TODO: What should we do?\n            self[TYPES_INDEX.namespace.name](undefined);\n          }\n        }\n      });\n    } catch (e) {}\n  }\n};\nHueContextSelector.prototype.setMatchingCompute = function (namespace) {\n  var self = this;\n  if (self[TYPES_INDEX.compute.name]) {\n    // Select the first corresponding compute when a namespace is selected (unless selected)\n    try {\n      self[TYPES_INDEX.compute.lastPromise].done(function () {\n        if (!self[TYPES_INDEX.compute.name]() || self[TYPES_INDEX.compute.name]().namespace && self[TYPES_INDEX.compute.name]().namespace !== namespace.id) {\n          var found = self[TYPES_INDEX.compute.available]().some(function (compute) {\n            if (namespace.id === compute.namespace) {\n              self[TYPES_INDEX.compute.name](compute);\n              setInLocalStorage('contextSelector.' + TYPES_INDEX.compute.localStorageId, namespace);\n              return true;\n            }\n          });\n          if (!found) {\n            // This can happen when a namespace refers to a compute that isn't returned by the computes call\n            // TODO: What should we do?\n            self[TYPES_INDEX.compute.name](undefined);\n          }\n        }\n      });\n    } catch (e) {}\n  }\n};\nHueContextSelector.prototype.reload = function (type) {\n  var self = this;\n  if (self[type.name]) {\n    self[type.loading](true);\n    self[type.lastPromise] = contextCatalog[type.contextCatalogFn]({\n      connector: ko.unwrap(self.connector)\n    }).then(function (available) {\n      // Namespaces response differs slightly from the others\n      if (type === TYPES_INDEX.namespace) {\n        available = available.namespaces;\n      }\n      self[type.available](available);\n\n      // If we only get one and hue is not configured for multi-cluster we always fallback to the returned\n      // compute or namespace from the backend. This also guarantees a compute and namespace is always set.\n      if (available.length === 1 && !window.HAS_MULTI_CLUSTER) {\n        if (!self[type.name]() || self[type.name]().id !== available[0].id) {\n          self[type.name](available[0]);\n        }\n        return;\n      }\n\n      // In some cases we could have a namespace or compute without the name attribute, or the name might have changed.\n      if (self[type.name]() && !self[type.name]().name) {\n        available.some(function (other) {\n          if (other !== self[type.name]() && other.id === self[type.name]().id) {\n            self[type.name](other);\n            return true;\n          }\n        });\n      }\n      if (!self[type.name]() && getFromLocalStorage('contextSelector.' + type.localStorageId)) {\n        var lastSelected = getFromLocalStorage('contextSelector.' + type.localStorageId);\n        var found = available.some(function (other) {\n          if (other.id === lastSelected.id) {\n            self[type.name](other);\n            return true;\n          }\n        });\n\n        // If we can't find the last selected cluster or compute we try to find by type\n        if (!found && lastSelected && (type === TYPES_INDEX.cluster || type === TYPES_INDEX.compute)) {\n          available.some(function (other) {\n            if (lastSelected && other.type === lastSelected.type) {\n              self[type.name](other);\n              return true;\n            }\n          });\n        }\n      }\n      if (!self[type.name]() && available.length) {\n        self[type.name](available[0]);\n      }\n\n      // Namespace is leading, update compute to match once/if available\n      if (self[type.name]() && type === TYPES_INDEX.namespace) {\n        self.setMatchingCompute(self[type.name]());\n      }\n    })[\"catch\"]()[\"finally\"](function () {\n      self[type.loading](false);\n    });\n  } else {\n    self[type.lastPromise] = $.Deferred().resolve().promise();\n  }\n};\nHueContextSelector.prototype.reloadDatabases = function () {\n  var self = this;\n  if (self.database && !self.hideDatabases) {\n    self.loadingDatabases(true);\n    $.when(self[TYPES_INDEX.namespace.lastPromise], self[TYPES_INDEX.compute.lastPromise]).done(function () {\n      window.clearTimeout(self.reloadDatabaseThrottle);\n      self.reloadDatabaseThrottle = window.setTimeout(function () {\n        var connector = ko.unwrap(self.connector);\n        if (!self[TYPES_INDEX.namespace.name]()) {\n          self.availableDatabases([]);\n          self.loadingDatabases(false);\n          return;\n        }\n        dataCatalog.getEntry({\n          namespace: self[TYPES_INDEX.namespace.name](),\n          compute: self[TYPES_INDEX.compute.name](),\n          connector: connector,\n          path: [],\n          definition: {\n            type: 'source'\n          }\n        }).then(function (sourceEntry) {\n          sourceEntry.getChildren({\n            silenceErrors: true\n          }).then(function (databaseEntries) {\n            var databaseNames = [];\n            databaseEntries.forEach(function (databaseEntry) {\n              databaseNames.push(databaseEntry.name);\n            });\n            self.availableDatabases(databaseNames);\n            if (!self.database() && databaseNames.length) {\n              /* The code below takes care of a corner case when the editor is loaded and the assist DB panel\n                 isn't open in which case an active DB might not be set.\n                  There's quite some related logic in the editor code (snippet.js) for when the assist DB panel is\n                 open on load. Ideally we should move all that logic here, however it's not trivial to untangle as\n                 it contains some editor specific integration. Perhaps it's cleaner to deal with if in Editor V2.\n              */\n              // TODO: Move the logic for setting active DB from assist panel here.\n              var dbPanelReady = false;\n              huePubSub.publish(ASSIST_IS_DB_PANEL_READY_EVENT, function () {\n                dbPanelReady = true;\n              });\n              if (!dbPanelReady) {\n                if (databaseNames.some(function (name) {\n                  return name === 'default';\n                })) {\n                  self.database('default');\n                } else {\n                  self.database(databaseNames[0]);\n                }\n              }\n            }\n          })[\"catch\"](function () {\n            self.availableDatabases([]);\n          })[\"finally\"](function () {\n            self.loadingDatabases(false);\n          });\n        });\n      }, 10);\n    });\n  } else if (self.database) {\n    self.availableDatabases([]);\n    self.database(undefined);\n  }\n};\nHueContextSelector.prototype.dispose = function () {\n  var self = this;\n  while (self.disposals.length) {\n    self.disposals.pop()();\n  }\n};\ncomponentUtils.registerComponent(CONTEXT_SELECTOR_COMPONENT, HueContextSelector, TEMPLATE);","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var SHOW_EVENT = 'show.create.directory.modal';\nexport var SHOWN_EVENT = 'create.directory.modal.shown';\nvar TEMPLATE = \"\\n  <!-- ko with: activeEntry -->\\n  <form class=\\\"form-horizontal\\\">\\n    <div class=\\\"modal-header\\\">\\n      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n      <h2 class=\\\"modal-title\\\">\").concat(I18n('Create Directory'), \"</h2>\\n    </div>\\n    <div class=\\\"modal-body \\\">\\n      <input id=\\\"newDirectoryName\\\" class=\\\"input large-as-modal\\\" type=\\\"text\\\" placeholder=\\\"\").concat(I18n('Directory name'), \"\\\" />\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <input type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" data-bind=\\\"click: function () { $('#newDirectoryName').val(null) }\\\" value=\\\"\").concat(I18n('Cancel'), \"\\\">\\n      <input type=\\\"submit\\\" class=\\\"btn btn-primary disable-feedback\\\" value=\\\"\").concat(I18n('Create'), \"\\\" data-bind=\\\"click: function () { if ($('#newDirectoryName').val()) { $data.createDirectory($('#newDirectoryName').val()); $('#createDirectoryModal').modal('hide'); } }\\\"/>\\n    </div>\\n  </form>\\n  <!-- /ko -->\\n\");\ncomponentUtils.registerComponent('create-directory', undefined, TEMPLATE).then(function () {\n  huePubSub.subscribe(SHOW_EVENT, function (docViewModel) {\n    if (docViewModel.isTrash() || docViewModel.isTrashed() || !docViewModel.canModify()) {\n      return;\n    }\n    var $createDirectoryModal = $('#createDirectoryModal');\n    if ($createDirectoryModal.length > 0) {\n      ko.cleanNode($createDirectoryModal[0]);\n      $createDirectoryModal.remove();\n    }\n    var data = {\n      params: docViewModel,\n      descendantsComplete: function descendantsComplete() {\n        huePubSub.publish(SHOWN_EVENT);\n      }\n    };\n    $createDirectoryModal = $('<div id=\"createDirectoryModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'create-directory\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade\" tabindex=\"-1\"></div>');\n    $('body').append($createDirectoryModal);\n    ko.applyBindings(data, $createDirectoryModal[0]);\n    $createDirectoryModal.modal('show');\n  });\n});","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var HIDE_DELETE_DOC_MODAL_EVENT = 'doc.hide.delete.modal';\nexport var SHOW_DELETE_DOC_MODAL_EVENT = 'doc.show.delete.modal';\nexport var DELETE_DOC_MODAL_SHOWN_EVENT = 'doc.delete.modal.shown';\nvar TEMPLATE = \"\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <!-- ko if: entriesToDelete().length === 0 -->\\n    <h2 class=\\\"modal-title\\\">\").concat(I18n('The trash is empty'), \"</h2>\\n    <!-- /ko -->\\n    <!-- ko if: entriesToDelete().length > 0 -->\\n    <h2 class=\\\"modal-title\\\"> \").concat(I18n('Do you really want to delete the following document(s)?'), \" </h2>\\n    <!-- /ko -->\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"doc-browser-empty animated\\\" style=\\\"display: none;\\\" data-bind=\\\"visible: entriesToDelete().length > 0 && selectedDocsWithDependents().length === 0\\\">\\n      <i class=\\\"fa fa-spinner fa-spin fa-2x\\\"></i>\\n    </div>\\n    <ul data-bind=\\\"foreach: selectedDocsWithDependents()\\\">\\n      <li>\\n        <span data-bind=\\\"text: $data.name\\\"></span>\\n        <!-- ko if: $data.dependents.length > 0 -->\\n          (\").concat(I18n('used by'), \"\\n          <a class=\\\"pointer\\\" data-bind=\\\"hueLink: $data.dependents[0].absoluteUrl, text: $data.dependents[0].name\\\"></a>\\n          <!-- ko if: $data.dependents.length > 1 -->\\n          \").concat(I18n('and'), \" <a class=\\\"pointer\\\" data-bind=\\\"hueLink: $data.dependents[1].absoluteUrl, text: $data.dependents[1].name\\\"></a>\\n            <!-- ko if: $data.dependents.length > 2 -->\\n              \").concat(I18n('and'), \" <span data-bind=\\\"text: $data.dependents.length - 2\\\"></span> \").concat(I18n('other'), \"\\n            <!-- /ko -->\\n          <!-- /ko -->\\n          )\\n        <!-- /ko -->\\n      </li>\\n    </ul>\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <!-- ko if: entriesToDelete().length === 0 -->\\n    <input type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" value=\\\"\").concat(I18n('Close'), \"\\\">\\n    <!-- /ko -->\\n    <!-- ko if: entriesToDelete().length > 0 -->\\n    <input type=\\\"button\\\" class=\\\"btn\\\" data-dismiss=\\\"modal\\\" value=\\\"\").concat(I18n('Cancel'), \"\\\">\\n    <input type=\\\"submit\\\" data-bind=\\\"click: function() { if (isTrash() || isTrashed()) { removeDocuments(true) } else { moveToTrash() } }, disable: deletingEntries\\\" class=\\\"btn btn-danger disable-feedback\\\" value=\\\"\").concat(I18n('Yes'), \"\\\"/>\\n    <!-- /ko -->\\n  </div>\\n\");\ncomponentUtils.registerComponent('delete-entry', undefined, TEMPLATE).then(function () {\n  var removeDeleteDocModal = function removeDeleteDocModal() {\n    var $deleteEntriesModal = $('#deleteEntriesModal');\n    if ($deleteEntriesModal.length > 0) {\n      ko.cleanNode($deleteEntriesModal[0]);\n      $deleteEntriesModal.remove();\n    }\n  };\n  huePubSub.subscribe(SHOW_DELETE_DOC_MODAL_EVENT, function (docViewModel) {\n    removeDeleteDocModal();\n    if (!docViewModel.entriesToDelete().length && docViewModel.selectedEntries().length) {\n      docViewModel.entriesToDelete(docViewModel.selectedEntries());\n    }\n    if (docViewModel.entriesToDelete().length === 0 || docViewModel.sharedWithMeSelected() && !docViewModel.superuser) {\n      return;\n    }\n    docViewModel.getSelectedDocsWithDependents();\n    var data = {\n      params: docViewModel,\n      descendantsComplete: function descendantsComplete() {\n        huePubSub.publish(DELETE_DOC_MODAL_SHOWN_EVENT);\n      }\n    };\n    var $deleteEntriesModal = $('<div id=\"deleteEntriesModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'delete-entry\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade\" tabindex=\"-1\"></div>');\n    $('body').append($deleteEntriesModal);\n    ko.applyBindings(data, $deleteEntriesModal[0]);\n    $deleteEntriesModal.modal('show');\n  });\n  huePubSub.subscribe(HIDE_DELETE_DOC_MODAL_EVENT, removeDeleteDocModal);\n});","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport I18n from \"../../utils/i18n\";\nexport var HUE_DROP_DOWN_COMPONENT = 'hue-drop-down';\nvar TEMPLATE = \"\\n  <!-- ko if: !menuOnly && (!dropDownVisible() || !searchable) -->\\n  <a class=\\\"inactive-action hue-drop-down-active\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"toggle: dropDownVisible, css: { 'blue': dropDownVisible }\\\">\\n    <!-- ko if: icon --><i class=\\\"fa\\\" data-bind=\\\"css: icon\\\"></i><!-- /ko -->\\n    <!-- ko if: !noLabel && value -->\\n    <span class=\\\"hue-drop-down-selected\\\" data-bind=\\\"text: value() && typeof value()[labelAttribute] !== 'undefined' ? value()[labelAttribute] : value(), visible: ! dropDownVisible() || !searchable, attr: { 'title': titleTooltip }\\\" ></span>\\n    <!-- /ko -->\\n    <i class=\\\"fa fa-caret-down\\\"></i>\\n  </a>\\n  <!-- /ko -->\\n  <!-- ko if: !menuOnly && (dropDownVisible() && searchable) -->\\n  <input class=\\\"hue-drop-down-input\\\" type=\\\"text\\\" data-bind=\\\"textInput: filter, attr: { 'placeHolder': inputPlaceHolder }, visible: dropDownVisible, style: { color: filterEdited() ? '#000' : '#AAA', 'min-height': '22px', 'margin-left': '10px' }\\\"/>\\n  <i class=\\\"fa fa-caret-down\\\"></i>\\n  <!-- /ko -->\\n  <div class=\\\"hue-drop-down-container\\\" data-bind=\\\"css: { 'open' : dropDownVisible, 'hue-drop-down-fixed': fixedPosition, 'hue-drop-down-container-searchable': searchable }, dropDownKeyUp: { onEsc: onEsc, onEnter: onEnter, dropDownVisible: dropDownVisible }\\\">\\n    <div style=\\\"overflow-y: auto;\\\" class=\\\"dropdown-menu\\\" data-bind=\\\"visible: filteredEntries().length > 0\\\">\\n      <!-- ko if: foreachVisible -->\\n      <ul class=\\\"hue-inner-drop-down\\\" data-bind=\\\"foreachVisible: { data: filteredEntries, minHeight: 34, container: '.dropdown-menu' }\\\">\\n        <!-- ko if: typeof $data.divider !== 'undefined' && $data.divider -->\\n        <li class=\\\"divider\\\"></li>\\n        <!-- /ko -->\\n        <!-- ko if: typeof $data.divider === 'undefined' || !$data.divider -->\\n        <li><a href=\\\"javascript:void(0)\\\" data-bind=\\\"text: $data && typeof $data[$parent.labelAttribute] !== 'undefined' ? $data[$parent.labelAttribute] : $data, click: function () { let previous = $parent.value(); $parent.value($data); $parent.onSelect($data, previous); }\\\"></a></li>\\n        <!-- /ko -->\\n      </ul>\\n      <!-- /ko -->\\n      <!-- ko ifnot: foreachVisible -->\\n      <ul class=\\\"hue-inner-drop-down\\\" data-bind=\\\"foreach: filteredEntries\\\">\\n        <!-- ko if: typeof $data.divider !== 'undefined' && $data.divider -->\\n        <li class=\\\"divider\\\"></li>\\n        <!-- /ko -->\\n        <!-- ko if: typeof $data.divider === 'undefined' || !$data.divider -->\\n        <li><a href=\\\"javascript:void(0)\\\" data-bind=\\\"text: $data && typeof $data[$parent.labelAttribute] !== 'undefined' ? $data[$parent.labelAttribute] : $data, click: function () { let previous = $parent.value(); $parent.value($data); $parent.onSelect($data, previous); }\\\"></a></li>\\n        <!-- /ko -->\\n      </ul>\\n      <!-- /ko -->\\n    </div>\\n  </div>\\n\";\nko.bindingHandlers.dropDownKeyUp = {\n  init: function init(element, valueAccessor) {\n    var options = valueAccessor();\n    var onEsc = options.onEsc;\n    var onEnter = options.onEnter;\n    var onSelected = options.onSelected;\n    var dropDownVisible = options.dropDownVisible;\n    var keyUpTarget = options.keyUpTarget || window;\n    var keyUp = function keyUp(e) {\n      var $element = $(element);\n      var $dropDownMenu = $element.find('.dropdown-menu');\n      var $currentActive = $element.find('.hue-inner-drop-down > .active');\n      var activeTop = $currentActive.length !== 0 ? $currentActive.position().top : 0;\n      var activeHeight = $currentActive.length !== 0 ? $currentActive.outerHeight(true) : $element.find('.hue-inner-drop-down li:first-child').outerHeight(true);\n      var containerHeight = $dropDownMenu.innerHeight();\n      var containerScrollTop = $dropDownMenu.scrollTop();\n      $currentActive.removeClass('active');\n      if (e.keyCode === 27 && onEsc) {\n        onEsc();\n      } else if (e.keyCode === 38) {\n        // up\n        var $nextActive;\n        if ($currentActive.length !== 0 && $currentActive.prev().length !== 0) {\n          if (activeTop < containerScrollTop + activeHeight) {\n            $dropDownMenu.scrollTop(activeTop - containerHeight / 2);\n          }\n          $nextActive = $currentActive.prev().addClass('active');\n        }\n        if (onSelected) {\n          onSelected($nextActive && $nextActive.length ? ko.dataFor($nextActive[0]) : undefined);\n        }\n      } else if (e.keyCode === 40) {\n        // down\n        var _$nextActive;\n        if ($currentActive.length === 0) {\n          _$nextActive = $element.find('.hue-inner-drop-down li:first-child').addClass('active');\n        } else if ($currentActive.next().length !== 0) {\n          if (activeTop + activeHeight * 3 > containerHeight - containerScrollTop) {\n            $dropDownMenu.scrollTop(activeTop - containerHeight / 2);\n          }\n          _$nextActive = $currentActive.next().addClass('active');\n        } else {\n          _$nextActive = $currentActive.addClass('active');\n        }\n        if (onSelected) {\n          onSelected(_$nextActive && _$nextActive.length ? ko.dataFor(_$nextActive[0]) : undefined);\n        }\n      } else if (e.keyCode === 13) {\n        // enter\n        if ($currentActive.length > 0) {\n          $dropDownMenu.scrollTop(0);\n        }\n        if (onEnter) {\n          onEnter($currentActive.length ? ko.dataFor($currentActive[0]) : undefined);\n        }\n      } else {\n        $dropDownMenu.scrollTop(0);\n      }\n    };\n    var visibleSub = dropDownVisible.subscribe(function (newValue) {\n      if (newValue) {\n        $(keyUpTarget).on('keyup.hueDropDown', keyUp);\n        $(keyUpTarget).on('keydown.hueDropDown', function (e) {\n          // This prevents the cursor from moving left or right on up and down\n          if (e.keyCode === 38 || e.keyCode === 40) {\n            e.preventDefault();\n          }\n        });\n      } else {\n        $(keyUpTarget).off('keyup.hueDropDown');\n        $(keyUpTarget).off('keydown.hueDropDown');\n      }\n    });\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      visibleSub.dispose();\n      $(keyUpTarget).off('keyup.hueDropDown');\n    });\n  }\n};\nvar HueDropDown = /*#__PURE__*/_createClass(function HueDropDown(params, element) {\n  _classCallCheck(this, HueDropDown);\n  var self = this;\n  self.dropDownVisible = ko.observable(!!params.showOnInit);\n  self.menuOnly = !!params.menuOnly;\n  self.noLabel = !!params.noLabel;\n  self.labelAttribute = params.labelAttribute || 'label';\n  self.icon = params.icon;\n  self.value = params.value;\n  self.titleName = params.titleName;\n  self.entries = params.entries;\n  self.searchable = params.searchable || false;\n  self.foreachVisible = params.foreachVisible || false;\n  self.linkTitle = params.linkTitle || I18n('Selected entry');\n  self.fixedPosition = !!params.fixedPosition;\n  self.onSelect = params.onSelect || function () {};\n  self.inputPlaceHolder = ko.pureComputed(function () {\n    return self.value() && _typeof(self.value()) === 'object' ? self.value()[self.labelAttribute] : self.value();\n  });\n  self.titleTooltip = ko.pureComputed(function () {\n    var title = self.value() && typeof self.value()[self.labelAttribute] !== 'undefined' ? self.value()[self.labelAttribute] : self.value();\n    if (typeof self.titleName == 'undefined') {\n      return title;\n    }\n    return self.titleName + ' ' + title;\n  });\n  var closeOnOutsideClick = function closeOnOutsideClick(e) {\n    var $input = $(element).find('.hue-drop-down-input');\n    if (!$input.is($(e.target))) {\n      self.dropDownVisible(false);\n    }\n  };\n  self.onEsc = function () {\n    self.dropDownVisible(false);\n  };\n  self.onEnter = function (value) {\n    var previous = self.value();\n    self.value(value);\n    self.onSelect(value, previous);\n    self.dropDownVisible(false);\n  };\n  self.filter = ko.observable('');\n  self.value.subscribe(function () {\n    self.dropDownVisible(false);\n  });\n  self.filterEdited = ko.observable(false);\n  self.filter.subscribe(function () {\n    self.filterEdited(true);\n    $(element).find('.hue-inner-drop-down > .active').removeClass('.active');\n  });\n  self.dropDownVisible.subscribe(function (newValue) {\n    self.filterEdited(false);\n    if (newValue) {\n      window.setTimeout(function () {\n        self.filter('');\n        $(window).on('click', closeOnOutsideClick);\n        $(element).find('.hue-drop-down-input').focus();\n      }, 0);\n\n      // Right align the dropdown when outside the right edge\n      if (!self.fixedPosition) {\n        var $element = $(element);\n        var $dropDownMenu = $element.find('.dropdown-menu').parent();\n        var $offsetParent = $element.offsetParent();\n        var rightLimit = $offsetParent.offset().left + $offsetParent.width();\n        if ($dropDownMenu.offset().left + 160 > rightLimit) {\n          var $caret = $element.find('.fa-caret-down');\n          var caretRight = $caret.offset().left + $caret.width();\n          var diff = -$dropDownMenu.offset().left - 160 + caretRight;\n          $element.find('.hue-drop-down-container').css({\n            'margin-left': diff + 'px'\n          });\n        }\n      }\n    } else {\n      $(element).find('.hue-inner-drop-down > .active').removeClass('.active');\n      $(window).off('click', closeOnOutsideClick);\n    }\n  });\n  self.filteredEntries = ko.pureComputed(function () {\n    if (self.filter() === '' || !self.filterEdited()) {\n      return ko.unwrap(self.entries);\n    } else {\n      var lowerFilter = self.filter().toLowerCase();\n      return ko.unwrap(self.entries).filter(function (entry) {\n        if (_typeof(entry) === 'object') {\n          return entry[self.labelAttribute].toLowerCase().indexOf(lowerFilter) !== -1;\n        }\n        return entry.toLowerCase().indexOf(lowerFilter) !== -1;\n      });\n    }\n  });\n});\ncomponentUtils.registerComponent(HUE_DROP_DOWN_COMPONENT, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new HueDropDown(params, componentInfo.element);\n  }\n}, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport sqlUtils from 'sql/sqlUtils';\nimport DisposableComponent from \"./DisposableComponent\";\nimport { DRAGGABLE_TEXT_META_EVENT } from \"../bindings/ko.draggableText\";\nimport { INSERT_AT_CURSOR_EVENT } from \"../bindings/ace/ko.aceEditor\";\nimport sleep from 'utils/timing/sleep';\nexport var NAME = 'hue-editor-droppable-menu';\nvar TYPES = {\n  VALUE: 'value',\n  SELECT: 'select',\n  INSERT: 'insert',\n  UPDATE: 'update',\n  DROP: 'drop'\n};\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <ul class=\\\"table-drop-menu hue-context-menu\\\">\\n    <!-- ko if: meta -->\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: insertValue.bind($data, '\".concat(TYPES.VALUE, \"')\\\">\\\"<span data-bind=\\\"text: identifier\\\"></span>\\\"</a></li>\\n    <li class=\\\"divider\\\"></li>\\n    <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: insertValue.bind($data, '\").concat(TYPES.SELECT, \"')\\\">SELECT FROM <span data-bind=\\\"text: identifier\\\"></span>...</a></li>\\n    <!-- ko ifnot: meta().isView -->\\n      <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: insertValue.bind($data, '\").concat(TYPES.INSERT, \"')\\\">INSERT INTO <span data-bind=\\\"text: identifier\\\"></span>...</a></li>\\n      <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: insertValue.bind($data, '\").concat(TYPES.UPDATE, \"')\\\">UPDATE <span data-bind=\\\"text: identifier\\\"></span>...</a></li>\\n      <li><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: insertValue.bind($data, '\").concat(TYPES.DROP, \"')\\\">DROP TABLE <span data-bind=\\\"text: identifier\\\"></span>...</a></li>\\n    <!-- /ko -->\\n    <!-- ko if: meta().isView -->\\n      <li><a href=\\\"javascript: void(0);\\\"data-bind=\\\"click: insertValue.bind($data, '\").concat(TYPES.DROP, \"')\\\">DROP VIEW <span data-bind=\\\"text: identifier\\\"></span>...</a></li>\\n    <!-- /ko -->\\n    <!-- /ko -->\\n  </ul>\\n\");\nvar EditorDroppableMenu = /*#__PURE__*/function (_DisposableComponent) {\n  function EditorDroppableMenu(params, element) {\n    var _this;\n    _classCallCheck(this, EditorDroppableMenu);\n    _this = _callSuper(this, EditorDroppableMenu);\n    _this.editor = params.editor;\n    var $parentDropTarget = $(params.parentDropTarget);\n    var $tableDropMenu = $(element).parent().find('.table-drop-menu');\n    _this.meta = ko.observable();\n    _this.identifier = ko.observable('');\n    _this.meta.subscribe( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(meta) {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!(meta && (meta.connector.dialect === 'phoenix' && meta.database === '' || meta.database) && meta.table)) {\n                _context.next = 13;\n                break;\n              }\n              _context.t0 = _this;\n              _context.next = 4;\n              return sqlUtils.backTickIfNeeded(meta.connector, meta.database);\n            case 4:\n              _context.t1 = _context.sent;\n              _context.t2 = _context.t1 + '.';\n              _context.next = 8;\n              return sqlUtils.backTickIfNeeded(meta.connector, meta.table);\n            case 8:\n              _context.t3 = _context.sent;\n              _context.t4 = _context.t2 + _context.t3;\n              _context.t0.identifier.call(_context.t0, _context.t4);\n              _context.next = 14;\n              break;\n            case 13:\n              _this.identifier('');\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    _get((_this, _getPrototypeOf(EditorDroppableMenu.prototype)), \"subscribe\", _this).call(_this, DRAGGABLE_TEXT_META_EVENT, _this.meta);\n    _this.menu = ko.bindingHandlers.contextMenu.initContextMenu($tableDropMenu, $('.content-panel'), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return sleep(0);\n          case 2:\n            $(document).on('click.' + NAME, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    if (!_this.menu) {\n                      _context2.next = 5;\n                      break;\n                    }\n                    $tableDropMenu.css('opacity', 0);\n                    _context2.next = 4;\n                    return sleep(300);\n                  case 4:\n                    _this.menu.hide();\n                  case 5:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            })));\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    })), function () {\n      $(document).off('click.' + NAME);\n    });\n    $parentDropTarget.droppable({\n      accept: '.draggableText',\n      drop: function drop(e, ui) {\n        var editor = _this.editor();\n        var meta = _this.meta();\n        if (!meta || !editor) {\n          return;\n        }\n        var position = editor.renderer.screenToTextCoordinates(e.clientX, e.clientY);\n        var text = ui.helper.text();\n        if (meta.type === 's3' || meta.type === 'gs' || meta.type === 'hdfs' || meta.type === 'adls' || meta.type === 'abfs' || meta.type === 'ofs') {\n          text = \"'\" + meta.definition.path + \"'\";\n        }\n        editor.moveCursorToPosition(position);\n        var before = editor.getTextBeforeCursor();\n        if ((meta.connector.dialect === 'phoenix' && meta.database === '' || meta.database) && meta.table && !meta.column && /.*;|^\\s*$/.test(before)) {\n          _this.menu.show(e);\n        } else {\n          if (/\\S+$/.test(before) && before.charAt(before.length - 1) !== '.') {\n            text = ' ' + text;\n          }\n          var after = editor.getTextAfterCursor();\n          if (after.length > 0 && after.charAt(0) !== ' ' && text.charAt(text.length - 1) !== ' ') {\n            text += ' ';\n          }\n          editor.session.insert(position, text);\n          position.column += text.length;\n          editor.clearSelection();\n        }\n      }\n    });\n    return _this;\n  }\n  _inherits(EditorDroppableMenu, _DisposableComponent);\n  return _createClass(EditorDroppableMenu, [{\n    key: \"insertValue\",\n    value: function insertValue(type) {\n      var textToInsert = '';\n      var cursorEndAdjust = 0;\n      switch (type) {\n        case TYPES.UPDATE:\n          textToInsert = 'UPDATE ' + this.identifier() + '\\nSET ';\n          cursorEndAdjust = -1;\n          break;\n        case TYPES.DROP:\n          textToInsert = (this.meta().isView ? 'DROP VIEW ' : 'DROP TABLE ') + this.identifier() + ';';\n          cursorEndAdjust = -2;\n          break;\n        case TYPES.INSERT:\n          textToInsert = 'INSERT INTO ' + this.identifier() + '\\nVALUES ();';\n          cursorEndAdjust = -3;\n          break;\n        case TYPES.SELECT:\n          textToInsert = 'SELECT *\\nFROM ' + this.identifier() + '\\nLIMIT 100\\n;';\n          cursorEndAdjust = -2;\n          break;\n        default:\n          textToInsert = this.identifier();\n          break;\n      }\n      huePubSub.publish(INSERT_AT_CURSOR_EVENT, {\n        text: textToInsert,\n        targetEditor: this.editor(),\n        cursorEndAdjust: cursorEndAdjust\n      });\n      this.menu.hide();\n    }\n  }]);\n}(DisposableComponent);\ncomponentUtils.registerComponent(NAME, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new EditorDroppableMenu(params, componentInfo.element);\n  }\n}, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport d3v3 from 'd3v3';\nimport \"../../ext/d3-tip.min\";\nimport * as ko from 'knockout';\nimport komapping from 'knockout.mapping';\nimport apiHelper from \"../../api/apiHelper\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'hue-execution-analysis';\nvar TEMPLATE = \"\\n  <div class=\\\"hue-execution-analysis\\\">\\n    <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\\n    <!-- ko ifnot: loading -->\\n      <!-- ko if: analysisPossible() && !analysis() -->\\n      <div class=\\\"no-analysis\\\">\".concat(I18n('Execute a query to get query execution analysis.'), \"</div>\\n      <!-- /ko -->\\n      <!-- ko ifnot: analysisPossible -->\\n      <div class=\\\"no-analysis\\\">\").concat(I18n('Analysis was not possible for the executed query.'), \"</div>\\n      <!-- /ko -->\\n      <!-- ko with: analysis -->\\n      <div>\\n        <h4>\").concat(I18n('Heatmap'), \"</h4>\\n        <div>\\n            <select data-bind=\\\"options: heatmapMetrics, event: { change: $parent.heatmapMetricChanged.bind($parent) }\\\"></select>\\n            <svg class=\\\"heatmap\\\"></svg>\\n        </div>\\n      </div>\\n      <div>\\n        <h4>\").concat(I18n('Summary'), \"</h4>\\n        <ul class=\\\"risk-list\\\" data-bind=\\\"foreach: summary\\\" style=\\\"margin-bottom: 10px\\\">\\n          <li>\\n            <span data-bind=\\\"text: key\\\"></span>: <strong><span data-bind=\\\"numberFormat: { value: value, unit: unit }\\\"></strong></span>\\n          </li>\\n        </ul>\\n      </div>\\n      <div>\\n        <h4>\").concat(I18n('Top down analysis'), \"</h4>\\n        <ul class=\\\"risk-list\\\" data-bind=\\\"foreach: $parent.healthChecks\\\">\\n          <li>\\n            <div><a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: $parents[1].handleNodePress.bind($parents[1], $data)\\\"><span data-bind=\\\"text: contribution_factor_str\\\"></span></a> - <strong><span data-bind=\\\"duration: wall_clock_time\\\"></strong></div>\\n            <ol data-bind=\\\"foreach: reason\\\">\\n              <li>\\n                <span data-bind=\\\"text: message, css: { striked: fix.fixed }\\\"></span><strong> - <span data-bind=\\\"numberFormat: { value: impact, unit: unit }\\\"></span></strong><span data-bind=\\\"visible: fix.fixable && !fix.fixed\\\"> - <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: $parents[2].handleFix.bind($parents[2], $data.fix)\\\">\").concat(I18n('Fix'), \"</a></span>\\n              </li>\\n            </ol>\\n          </li>\\n        </ul>\\n      </div>\\n      <!-- /ko -->\\n    <!-- /ko -->\\n  </div>\\n\");\nvar ExecutionAnalysis = /*#__PURE__*/function () {\n  function ExecutionAnalysis() {\n    _classCallCheck(this, ExecutionAnalysis);\n    var self = this;\n    self.disposals = [];\n    self.loading = ko.observable(false);\n    self.analysis = ko.observable();\n    self.details = ko.observable();\n    var analysisSub = self.analysis.subscribe(function (analysis) {\n      $('[href*=executionAnalysis] span:eq(1)').text(self.analysisCount());\n      setTimeout(function () {\n        // Wait for analysis to render\n        if (analysis.heatmap) {\n          self.updateHeatMap(analysis.heatmap[analysis.heatmapMetrics[0]], analysis.heatmapMetrics[0]);\n        } else {\n          d3v3.select('.heatmap').remove();\n        }\n      }, 0);\n    });\n    self.healthChecks = ko.pureComputed(function () {\n      var analysis = self.analysis();\n      if (!analysis) {\n        return [];\n      }\n      return analysis.healthChecks.filter(function (check) {\n        return check.reason.length;\n      });\n    });\n    self.analysisPossible = ko.observable(true);\n    self.analysisCount = ko.pureComputed(function () {\n      if (self.healthChecks().length) {\n        return '(' + self.healthChecks().length + ')';\n      }\n      return '';\n    });\n    self.lastAnalysisPromise = undefined;\n    var clearAnalysisSub = huePubSub.subscribe('editor.clear.execution.analysis', function () {\n      if (!window.HAS_WORKLOAD_ANALYTICS) {\n        return;\n      }\n      if (self.lastAnalysisPromise) {\n        self.lastAnalysisPromise.cancel();\n      }\n      self.analysis(undefined);\n    });\n    var executionAnalysisSub = huePubSub.subscribe('editor.update.execution.analysis', function (details) {\n      if (!window.HAS_WORKLOAD_ANALYTICS) {\n        return;\n      }\n      if (details.analysisPossible) {\n        self.analysisPossible(true);\n        self.details(details);\n        self.loadAnalysis(details.compute, details.queryId);\n      } else {\n        self.analysisPossible(false);\n      }\n    });\n    self.disposals.push(function () {\n      analysisSub.dispose();\n      clearAnalysisSub.remove();\n      executionAnalysisSub.remove();\n    });\n  }\n  return _createClass(ExecutionAnalysis, [{\n    key: \"heatmapMetricChanged\",\n    value: function heatmapMetricChanged(model, el) {\n      var self = this;\n      var analysis = self.analysis();\n      if (analysis.heatmap) {\n        self.updateHeatMap(analysis.heatmap[analysis.heatmapMetrics[0]], analysis.heatmapMetrics[0]);\n      }\n    }\n  }, {\n    key: \"loadAnalysis\",\n    value: function loadAnalysis(compute, queryId) {\n      var self = this;\n      self.loading(true);\n      self.lastAnalysisPromise = apiHelper.fetchQueryExecutionAnalysis({\n        silenceErrors: true,\n        compute: compute,\n        queryId: queryId\n      }).then(function (response) {\n        var analysis = response.query;\n        self.analysis(analysis);\n      })[\"finally\"](function () {\n        self.loading(false);\n      });\n    }\n  }, {\n    key: \"updateHeatMap\",\n    value: function updateHeatMap(data, counterName) {\n      // Heatmap block and gap sizes\n      var blockWidth = 40;\n      var blockGap = 5;\n\n      // Create tooltip\n      var d3 = d3v3;\n      $('.d3-tip').remove();\n      var tip = d3.d3tip().attr('class', 'risk d3-tip').offset([-10, 0]).html(function (d) {\n        var host = d[0];\n        if (host.indexOf(':') >= 0) {\n          host = host.substring(0, host.indexOf(':'));\n        }\n        var value = d[2];\n        var unit = d[5];\n        var formattedValue = ko.bindingHandlers.numberFormat.human(value, unit);\n        return \"<strong style='color:cyan'>\" + host + '</strong><br><strong>' + counterName + \":</strong> <span style='color:red'>\" + formattedValue + '</span>';\n      });\n      d3.select('.heatmap').call(tip);\n      // Color gradient\n      var colors = ['#f6faaa', '#9E0142'];\n      var colorScale = d3.scale.linear().domain([0, 1]).interpolate(d3.interpolateHsl).range(colors);\n\n      // Define map dimensions\n\n      var $heatmap = $('.heatmap');\n      var svgWidth = $heatmap.width();\n      var cols = Math.trunc(svgWidth / (blockWidth + blockGap));\n      $heatmap.height((Math.trunc((data.data.length - 1) / cols) + 1) * (blockWidth + blockGap));\n\n      // Attribute functions\n      var x = function x(d, i) {\n        return i % cols * (blockWidth + blockGap) + 1;\n      };\n      var y = function y(d, i) {\n        return Math.trunc(i / cols) * (blockWidth + blockGap) + 1;\n      };\n      var c = function c(d) {\n        return colorScale(d[3]);\n      };\n      d3.select('.heatmap').selectAll('.box').data([]).exit().remove();\n      d3.select('.heatmap').selectAll('.box').data(data.data).enter().append('rect').attr('class', 'box').attr('x', x).attr('y', y).attr('height', blockWidth).attr('width', blockWidth).attr('fill', c).on('mouseover', tip.show).on('mouseout', tip.hide);\n    }\n  }, {\n    key: \"handleFix\",\n    value: function handleFix(fix) {\n      var self = this;\n      apiHelper.fixQueryExecutionAnalysis({\n        fix: fix,\n        start_time: komapping.toJSON(new Date().getTime()),\n        compute: self.details().compute\n      }).done(function (resp) {\n        huePubSub.publish('notebook.task.submitted', resp);\n        fix.fixed = true;\n        self.analysis.valueHasMutated();\n      });\n    }\n  }, {\n    key: \"handleNodePress\",\n    value: function handleNodePress(contributor) {\n      var self = this;\n      //TODO: Loading\n      if (!$('[href*=\"' + self.details().name + '\"]')[0]) {\n        huePubSub.publish('show.jobs.panel', {\n          id: self.details().name,\n          \"interface\": 'queries'\n        });\n        setTimeout(function () {\n          huePubSub.publish('impala.node.moveto', contributor.result_id);\n          huePubSub.publish('impala.node.select', contributor.result_id);\n        }, 500);\n      } else {\n        if (!$('#jobsPanel').is(':visible')) {\n          $('#jobsPanel').show();\n        }\n        huePubSub.publish('impala.node.moveto', contributor.result_id);\n        huePubSub.publish('impala.node.select', contributor.result_id);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, ExecutionAnalysis, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport ApiHelper from \"../../api/apiHelper\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'hue-favorite-app';\nvar TEMPLATE = \"\\n  <div class=\\\"inline pointer favorite-app\\\" data-bind=\\\"click: setAsFavoriteApp.bind($data), tooltip: { placement: 'bottom', title: isFavorite() ? '\".concat(I18n('Unset from default application'), \"' : '\").concat(I18n('Set as default application'), \"' }\\\">\\n    <i class=\\\"fa inactive-action\\\" data-bind=\\\"css: { 'fa-star-o': !isFavorite(), 'fa-star': isFavorite }\\\"></i>\\n  </div>\\n\");\nvar FavoriteApp = /*#__PURE__*/function () {\n  function FavoriteApp(params) {\n    _classCallCheck(this, FavoriteApp);\n    this.isFavorite = ko.observable(false);\n    this.app = params.app;\n    this.interpreter = params.interpreter;\n    ApiHelper.fetchFavoriteApp().then(this.updateFromApiResponse.bind(this));\n  }\n  return _createClass(FavoriteApp, [{\n    key: \"updateFromApiResponse\",\n    value: function updateFromApiResponse(data, announce) {\n      this.isFavorite(false);\n      if (data.status === 0 && data.data && data.data.default_app) {\n        try {\n          var defaultApp = JSON.parse(data.data.default_app);\n          this.isFavorite(defaultApp.app === this.app && (this.app === 'editor' && defaultApp.interpreter === this.interpreter || this.app !== 'editor'));\n          if (announce) {\n            huePubSub.publish('hue.new.default.app', defaultApp);\n          }\n        } catch (e) {\n          console.error('There was a problem decoding the default app setting.');\n        }\n      }\n    }\n  }, {\n    key: \"setAsFavoriteApp\",\n    value: function () {\n      var _setAsFavoriteApp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(vm, e) {\n        var post, postParams;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              e.originalEvent.stopPropagation();\n              e.originalEvent.stopImmediatePropagation();\n              post = {};\n              if (this.isFavorite()) {\n                post[\"delete\"] = true;\n              } else {\n                postParams = {\n                  app: this.app\n                };\n                if (this.interpreter !== '') {\n                  postParams.interpreter = this.interpreter;\n                }\n                post.set = JSON.stringify(postParams);\n              }\n              _context.t0 = this;\n              _context.next = 7;\n              return ApiHelper.setFavoriteAppAsync(post);\n            case 7:\n              _context.t1 = _context.sent;\n              _context.t0.updateFromApiResponse.call(_context.t0, _context.t1, true);\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function setAsFavoriteApp(_x, _x2) {\n        return _setAsFavoriteApp.apply(this, arguments);\n      }\n      return setAsFavoriteApp;\n    }()\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, FavoriteApp, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport html2text from 'utils/html/html2text';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'field-samples';\nvar TEMPLATE = \"\\n  <div class=\\\"context-popover-inline-autocomplete\\\" style=\\\"display: flex\\\">\\n    <div class=\\\"context-popover-sample-filter\\\">\\n      <!-- ko component: {\\n        name: 'inline-autocomplete',\\n        params: {\\n          querySpec: querySpec,\\n          autocompleteFromEntries: autocompleteFromEntries\\n        }\\n      } --><!-- /ko -->\\n    </div>\\n    <!-- ko if: showOperations -->\\n    <div class=\\\"context-popover-sample-controls\\\">\\n      <div class=\\\"margin-left-10 inline-block\\\" data-bind=\\\"component: { name: 'hue-drop-down', params: { value: operation, entries: operations } }\\\"></div>\\n      <div class=\\\"margin-left-10 inactive-action inline-block\\\">\\n        <!-- ko if: loadingSamples() || refreshSampleEnabled() -->\\n        <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { refreshSampleEnabled(false); cancelRunningQueries() }\\\"><i class=\\\"fa fa-stop\\\"></i></a>\\n        <!-- /ko -->\\n        <!-- ko if: !loadingSamples() && !refreshSampleEnabled() -->\\n        <a href=\\\"javascript:void(0);\\\" data-bind=\\\"click: function () { loadSamples(true) }\\\"><i class=\\\"fa fa-play\\\"></i></a>\\n        <!-- /ko -->\\n      </div>\\n    </div>\\n    <!-- /ko -->\\n  </div>\\n\\n  <table class=\\\"table table-condensed table-nowrap\\\">\\n    <thead>\\n    <tr>\\n      <th>\".concat(I18n('Sample'), \"</th>\\n    </tr>\\n    </thead>\\n    <!-- ko if: loadingSamples() && (!refreshSampleEnabled() || (refreshSampleEnabled() && columnSamples().length === 0))  -->\\n    <tbody>\\n    <tr>\\n      <td><!-- ko hueSpinner: { spin: true, inline: true } --><!-- /ko --></td>\\n    </tr>\\n    </tbody>\\n    <!-- /ko -->\\n\\n    <!-- ko if: !loadingSamples() || (refreshSampleEnabled() && columnSamples().length > 0)  -->\\n    <tbody data-bind=\\\"foreach: filteredColumnSamples\\\">\\n    <tr>\\n      <!-- ko if: typeof $parent.onSampleClick === 'function' -->\\n      <td class=\\\"sample-column pointer\\\" data-bind=\\\"html: $data, attr: { 'title': hueUtils.html2text($data) }, click: $parent.sampleClick\\\"></td>\\n      <!-- /ko -->\\n      <!-- ko ifnot: typeof $parent.onSampleClick === 'function' -->\\n      <td class=\\\"sample-column\\\" data-bind=\\\"html: $data, attr: { 'title': hueUtils.html2text($data) }\\\"></td>\\n      <!-- /ko -->\\n    </tr>\\n    </tbody>\\n    <!-- ko if: filteredColumnSamples().length === 0 -->\\n    <tbody>\\n    <tr>\\n      <!-- ko ifnot: hasErrors -->\\n      <td style=\\\"font-style: italic;\\\">\").concat(I18n('No entries found'), \"</td>\\n      <!-- /ko -->\\n      <!-- ko if: hasErrors -->\\n      <td style=\\\"font-style: italic;\\\">\").concat(I18n('Error loading samples'), \"</td>\\n      <!-- /ko -->\\n    </tr>\\n    </tbody>\\n    <!-- /ko -->\\n    <!-- /ko -->\\n  </table>\\n\");\nvar FieldSamples = /*#__PURE__*/function () {\n  function FieldSamples(params) {\n    _classCallCheck(this, FieldSamples);\n    var self = this;\n    self.catalogEntry = ko.isObservable(params.catalogEntry) ? params.catalogEntry : ko.observable(params.catalogEntry);\n    self.onSampleClick = params.onSampleClick;\n    self.refreshSampleInterval = params.refreshSampleInterval;\n    self.refreshSampleTimeout = -1;\n    self.refreshSampleEnabled = ko.observable(!!self.refreshSampleInterval);\n    self.cancellablePromises = [];\n    self.querySpec = ko.observable();\n    self.hasErrors = ko.observable();\n    self.loadingSamples = ko.observable();\n    self.showOperations = !self.catalogEntry().isTemporary && (self.catalogEntry().getDialect() === 'impala' || self.catalogEntry().getDialect() === 'hive');\n    self.sampleClick = function (html) {\n      self.onSampleClick(html2text(html));\n      huePubSub.publish('context.popover.hide');\n    };\n    self.operations = [{\n      label: I18n('default'),\n      type: 'default'\n    }, {\n      label: I18n('distinct'),\n      type: 'distinct'\n    }, {\n      label: I18n('max'),\n      type: 'max'\n    }, {\n      label: I18n('min'),\n      type: 'min'\n    }];\n    self.operation = ko.observable(self.operations[0]);\n    self.operation.subscribe(function () {\n      self.loadSamples();\n    });\n    self.columnSamples = ko.observableArray();\n    self.filteredColumnSamples = ko.pureComputed(function () {\n      if (!self.querySpec() || self.querySpec().query === '') {\n        return self.columnSamples();\n      }\n      return self.columnSamples().filter(function (sampleValue) {\n        if (typeof sampleValue === 'undefined' || sampleValue === null) {\n          return false;\n        }\n        return self.querySpec().text.every(function (text) {\n          var textLower = text.toLowerCase();\n          return sampleValue.toString().toLowerCase().indexOf(textLower) !== -1;\n        });\n      });\n    });\n    self.autocompleteFromEntries = function (nonPartial, partial) {\n      var result = [];\n      var partialLower = partial.toLowerCase();\n      self.columnSamples().forEach(function (sample) {\n        if (sample[0].toString().toLowerCase().indexOf(partialLower) === 0) {\n          result.push(nonPartial + partial + sample[0].toString().substring(partial.length));\n        }\n      });\n      return result;\n    };\n    self.loadSamples();\n  }\n  return _createClass(FieldSamples, [{\n    key: \"loadSamples\",\n    value: function loadSamples(refreshCache) {\n      var self = this;\n      window.clearTimeout(self.refreshSampleTimeout);\n      self.cancelRunningQueries();\n      self.loadingSamples(true);\n      var samplePromise = self.catalogEntry().getSample({\n        silenceErrors: true,\n        cancellable: true,\n        refreshCache: refreshCache,\n        operation: self.operation().type\n      });\n      self.cancellablePromises.push(samplePromise);\n      samplePromise.then(function (samples) {\n        if (samples.data && samples.data.length) {\n          self.columnSamples(samples.data);\n        }\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      })[\"finally\"](function () {\n        self.loadingSamples(false);\n        if (self.refreshSampleTimeout && self.refreshSampleEnabled()) {\n          self.refreshSampleTimeout = window.setTimeout(function () {\n            self.loadSamples(true);\n          }, self.refreshSampleInterval);\n        }\n      });\n    }\n  }, {\n    key: \"cancelRunningQueries\",\n    value: function cancelRunningQueries() {\n      var self = this;\n      window.clearTimeout(self.refreshSampleTimeout);\n      while (self.cancellablePromises.length) {\n        var promise = self.cancellablePromises.pop();\n        if (promise.cancel) {\n          promise.cancel();\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      self.cancelRunningQueries();\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, FieldSamples, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../api/apiHelper\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport { ASSIST_SHOW_SQL_EVENT } from \"./assist/events\";\nexport var NAME = 'hue-global-search';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"top-search-autocomp-item\\\">\\n    <a href=\\\"javascript:void(0);\\\">\\n      <div>\\n        <div><i class=\\\"fa fa-fw\\\" data-bind=\\\"css: icon\\\"></i></div>\\n        <div>\\n          <div data-bind=\\\"html: label, style: { 'padding-top': description ? 0 : '9px' }\\\"></div>\\n          <!-- ko if: description -->\\n          <div data-bind=\\\"html: description\\\"></div>\\n          <!-- /ko -->\\n        </div>\\n      </div>\\n    </a>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"top-search-autocomp-no-match\\\">\\n    <div style=\\\"height: 30px;\\\">\\n      <div>\".concat(I18n('No match found'), \"</div>\\n    </div>\\n  </script>\\n  \\n  <!-- ko component: inlineAutocompleteComponent --><!-- /ko -->\\n  <!-- ko if: searchResultVisible()  -->\\n  <!-- ko if: !loading() && searchResultCategories().length === 0 && hasLoadedOnce() -->\\n  <div class=\\\"global-search-results global-search-empty\\\" data-bind=\\\"onClickOutside: onResultClickOutside\\\">\\n    <div>\").concat(I18n('No results found.'), \"</div>\\n  </div>\\n  <!-- /ko -->\\n  <!-- ko if: searchResultCategories().length > 0 -->\\n  <div class=\\\"global-search-results\\\" data-bind=\\\"onClickOutside: onResultClickOutside, style: { 'height' : heightWhenDragging }\\\">\\n    <div class=\\\"global-search-alternatives\\\" data-bind=\\\"css: { 'global-search-full-width': !selectedResult() }, delayedOverflow\\\" style=\\\"position: relative\\\">\\n      <!-- ko foreach: searchResultCategories -->\\n      <div class=\\\"global-search-category\\\">\\n        <div class=\\\"global-search-category-header\\\" data-bind=\\\"text: label\\\"></div>\\n        <ul>\\n          <!-- ko foreach: expanded() ? result : topMatches -->\\n          <li class=\\\"result\\\" data-bind=\\\"multiClick: {\\n              click: function () { $parents[1].resultSelected($parentContext.$index(), $index()) },\\n              dblClick: function () { $parents[1].resultSelected($parentContext.$index(), $index()); $parents[1].openResult(); }\\n            }, html: label, css: { 'selected': $parents[1].selectedResult() === $data }\\\"></li>\\n          <!-- /ko -->\\n          <!-- ko if: topMatches.length < result.length && !expanded() -->\\n          <li class=\\\"blue\\\" data-bind=\\\"toggle: expanded\\\">\").concat(I18n('Show more...'), \"</li>\\n          <!-- /ko -->\\n        </ul>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko hueSpinner: { spin: loading() && searchResultCategories().length > 0, inline: true } --><!-- /ko -->\\n    </div>\\n    <!-- ko with: selectedResult -->\\n    <div class=\\\"global-search-preview\\\" style=\\\"overflow: auto;\\\">\\n        <div class=\\\"global-search-close-preview\\\"><a class=\\\"pointer inactive-action\\\" data-bind=\\\"click: function () { $parent.selectedIndex(undefined); }\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a></div>\\n        <!-- ko switch: type -->\\n          <!-- ko case: ['database', 'document', 'field', 'table', 'view', 'partition']  -->\\n            <!-- ko component: { name: 'context-popover-contents-global-search', params: { data: data, globalSearch: $parent } } --><!-- /ko -->\\n          <!-- /ko -->\\n          <!-- ko case: $default -->\\n            <pre data-bind=\\\"text: ko.mapping.toJSON($data)\\\"></pre>\\n          <!-- /ko -->\\n        <!-- /ko -->\\n    </div>\\n    <!--/ko -->\\n  </div>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n\");\nvar HUE_DOC_CATEGORY = 'documents';\nvar NAV_CATEGORY = 'nav';\nvar CATEGORIES = {\n  table: I18n('Tables'),\n  database: I18n('Databases'),\n  field: I18n('Columns'),\n  partition: I18n('Partitions'),\n  view: I18n('Views'),\n  hueDoc: I18n('Documents')\n};\nvar GlobalSearch = /*#__PURE__*/function () {\n  function GlobalSearch() {\n    _classCallCheck(this, GlobalSearch);\n    var self = this;\n    self.knownFacetValues = ko.observable({\n      type: {\n        field: -1,\n        table: -1,\n        view: -1,\n        database: -1,\n        partition: -1,\n        document: -1\n      }\n    });\n    self.cancellablePromises = [];\n    self.autocompleteThrottle = -1;\n    self.fetchThrottle = -1;\n    self.searchHasFocus = ko.observable(false);\n    self.facetDropDownVisible = ko.observable(false);\n    self.querySpec = ko.observable();\n    self.searchActive = ko.observable(false);\n    self.searchResultVisible = ko.observable(false);\n    self.heightWhenDragging = ko.observable(null);\n    self.searchResultCategories = ko.observableArray([]);\n    self.selectedIndex = ko.observable();\n    self.loadingNav = ko.observable(false);\n    self.loadingDocs = ko.observable(false);\n    self.loading = ko.pureComputed(function () {\n      return self.loadingNav() || self.loadingDocs();\n    });\n    self.hasLoadedOnce = ko.observable(false);\n    self.initializeFacetValues();\n    self.inlineAutocompleteComponent = {\n      name: 'inline-autocomplete',\n      params: {\n        hasFocus: self.searchHasFocus,\n        disableNavigation: true,\n        showMagnify: true,\n        facetDropDownVisible: self.facetDropDownVisible,\n        spin: self.loading,\n        placeHolder: I18n(window.HAS_CATALOG ? 'Search data and saved documents...' : 'Search saved documents...'),\n        querySpec: self.querySpec,\n        onClear: function onClear() {\n          self.selectedIndex(null);\n          self.searchResultVisible(false);\n        },\n        facets: window.HAS_READ_ONLY_CATALOG ? ['classification', 'tag', 'tags', 'type'] : ['originalName', 'parentPath', 'tag', 'tags', 'type'],\n        knownFacetValues: self.knownFacetValues,\n        autocompleteFromEntries: self.autocompleteFromEntries,\n        triggerObservable: self.searchResultCategories\n      }\n    };\n    self.selectedResult = ko.pureComputed(function () {\n      if (self.selectedIndex()) {\n        return self.searchResultCategories()[self.selectedIndex().categoryIndex].result[self.selectedIndex().resultIndex];\n      }\n    }).extend({\n      deferred: true\n    });\n    var deferredCloseIfVisible = function deferredCloseIfVisible() {\n      window.setTimeout(function () {\n        if (self.searchResultVisible()) {\n          self.close();\n        }\n      }, 0);\n    };\n    huePubSub.subscribe('global.search.close', deferredCloseIfVisible);\n    huePubSub.subscribe('context.popover.open.in.metastore', deferredCloseIfVisible);\n    huePubSub.subscribe('context.popover.show.in.assist', deferredCloseIfVisible);\n    huePubSub.subscribe('sample.error.insert.click', deferredCloseIfVisible);\n    self.querySpec.subscribe(function (newValue) {\n      window.clearTimeout(self.fetchThrottle);\n      if (newValue && newValue.query !== '') {\n        self.fetchThrottle = window.setTimeout(function () {\n          self.fetchResults(newValue);\n        }, 600);\n      } else {\n        self.searchResultVisible(false);\n        self.selectedIndex(undefined);\n        self.searchResultCategories([]);\n        self.cancelRunningRequests();\n      }\n    });\n    self.autocompleteFromEntries = function (lastNonPartial, partial) {\n      var result = undefined;\n      var partialLower = partial.toLowerCase();\n      self.searchResultCategories().every(function (category) {\n        return category.result.every(function (entry) {\n          if (category.type === 'documents' && entry.data.originalName.toLowerCase().indexOf(partialLower) === 0) {\n            result = lastNonPartial + partial + entry.data.originalName.substring(partial.length, entry.data.originalName.length);\n            return false;\n          } else if (entry.data.selectionName && entry.data.selectionName.toLowerCase().indexOf(partialLower) === 0) {\n            result = lastNonPartial + partial + entry.data.selectionName.substring(partial.length, entry.data.selectionName.length);\n            return false;\n          }\n          return true;\n        });\n      });\n      return result;\n    };\n    self.searchHasFocus.subscribe(function (newVal) {\n      if (newVal && self.querySpec() && self.querySpec().query !== '') {\n        if (!self.searchResultVisible()) {\n          self.searchResultVisible(true);\n        }\n      }\n    });\n    self.searchResultVisible.subscribe(function (newVal) {\n      if (newVal) {\n        self.heightWhenDragging(null);\n      } else {\n        self.selectedIndex(undefined);\n      }\n    });\n\n    // TODO: Consider attach/detach on focus\n    $(document).keydown(function (event) {\n      if (self.facetDropDownVisible() || !self.searchHasFocus() && !self.searchResultVisible()) {\n        return;\n      }\n      if (event.keyCode === 13 && self.searchHasFocus() && self.querySpec() && self.querySpec().query !== '') {\n        window.clearTimeout(self.fetchThrottle);\n        self.fetchResults(self.querySpec());\n        return;\n      }\n      if (self.searchResultVisible() && self.searchResultCategories().length > 0) {\n        var currentIndex = self.selectedIndex();\n        if (event.keyCode === 40) {\n          // Down\n          self.searchHasFocus(false);\n          if (currentIndex && !(self.searchResultCategories()[currentIndex.categoryIndex].result.length <= currentIndex.resultIndex + 1 && self.searchResultCategories().length <= currentIndex.categoryIndex + 1)) {\n            if (self.searchResultCategories()[currentIndex.categoryIndex].result.length <= currentIndex.resultIndex + 1) {\n              self.selectedIndex({\n                categoryIndex: currentIndex.categoryIndex + 1,\n                resultIndex: 0\n              });\n            } else {\n              self.selectedIndex({\n                categoryIndex: currentIndex.categoryIndex,\n                resultIndex: currentIndex.resultIndex + 1\n              });\n            }\n          } else {\n            self.selectedIndex({\n              categoryIndex: 0,\n              resultIndex: 0\n            });\n          }\n          event.preventDefault();\n        } else if (event.keyCode === 38) {\n          // Up\n          self.searchHasFocus(false);\n          if (currentIndex && !(currentIndex.categoryIndex === 0 && currentIndex.resultIndex === 0)) {\n            if (currentIndex.resultIndex === 0) {\n              self.selectedIndex({\n                categoryIndex: currentIndex.categoryIndex - 1,\n                resultIndex: self.searchResultCategories()[currentIndex.categoryIndex - 1].result.length - 1\n              });\n            } else {\n              self.selectedIndex({\n                categoryIndex: currentIndex.categoryIndex,\n                resultIndex: currentIndex.resultIndex - 1\n              });\n            }\n          } else {\n            self.selectedIndex({\n              categoryIndex: self.searchResultCategories().length - 1,\n              resultIndex: self.searchResultCategories()[self.searchResultCategories().length - 1].result.length - 1\n            });\n          }\n          event.preventDefault();\n        } else if (event.keyCode === 13 && !self.searchHasFocus() && self.selectedIndex()) {\n          // Enter\n          self.openResult();\n        }\n      }\n    });\n  }\n  return _createClass(GlobalSearch, [{\n    key: \"initializeFacetValues\",\n    value: function () {\n      var _initializeFacetValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var facets, facetValues;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return dataCatalog.getAllNavigatorTags({\n                silenceErrors: true\n              });\n            case 3:\n              facets = _context.sent;\n              facetValues = self.knownFacetValues();\n              facetValues['tags'] = facets;\n              facetValues['tag'] = facets;\n              if (window.HAS_READ_ONLY_CATALOG) {\n                facetValues['classification'] = facets;\n              }\n              _context.next = 12;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 10]]);\n      }));\n      function initializeFacetValues() {\n        return _initializeFacetValues.apply(this, arguments);\n      }\n      return initializeFacetValues;\n    }()\n  }, {\n    key: \"cancelRunningRequests\",\n    value: function cancelRunningRequests() {\n      var self = this;\n      while (self.cancellablePromises.length) {\n        var promise = self.cancellablePromises.pop();\n        if (promise.cancel) {\n          promise.cancel();\n        }\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var self = this;\n      window.clearTimeout(self.fetchThrottle);\n      self.cancelRunningRequests();\n      self.searchResultVisible(false);\n      self.hasLoadedOnce(false);\n      self.querySpec({\n        query: '',\n        facets: {},\n        text: []\n      });\n    }\n  }, {\n    key: \"openResult\",\n    value: function openResult() {\n      var self = this;\n      var selectedResult = self.selectedResult();\n      if (['database', 'table', 'field', 'view'].indexOf(selectedResult.type) !== -1) {\n        huePubSub.publish('context.popover.show.in.assist');\n      } else if (selectedResult.type === 'document') {\n        if (selectedResult.data.doc_type === 'directory') {\n          huePubSub.publish('context.popover.show.in.assist');\n        } else {\n          huePubSub.publish('open.link', '/hue' + selectedResult.data.link);\n        }\n      }\n      self.close();\n    }\n  }, {\n    key: \"resultSelected\",\n    value: function resultSelected(categoryIndex, resultIndex) {\n      var self = this;\n      if (!self.selectedIndex() || !(self.selectedIndex().categoryIndex === categoryIndex && self.selectedIndex().resultIndex === resultIndex)) {\n        self.selectedIndex({\n          categoryIndex: categoryIndex,\n          resultIndex: resultIndex\n        });\n      }\n    }\n  }, {\n    key: \"onResultClickOutside\",\n    value: function onResultClickOutside() {\n      var self = this;\n      if (!self.searchResultVisible() || self.searchHasFocus()) {\n        return false;\n      }\n      self.searchResultVisible(false);\n      window.clearTimeout(self.fetchThrottle);\n      window.clearTimeout(self.autocompleteThrottle);\n    }\n  }, {\n    key: \"mainSearchSelect\",\n    value: function mainSearchSelect(entry) {\n      if (entry.data && entry.data.link) {\n        huePubSub.publish('open.link', entry.data.link);\n      } else if (!/:\\s*$/.test(entry.value)) {\n        huePubSub.publish(ASSIST_SHOW_SQL_EVENT);\n        huePubSub.publish('assist.db.search', entry.value);\n      }\n    }\n  }, {\n    key: \"updateCategories\",\n    value: function updateCategories(type, categoriesToAdd) {\n      var self = this;\n      var newCategories = self.searchResultCategories().filter(function (category) {\n        return category.type !== type;\n      });\n      var change = newCategories.length !== self.searchResultCategories().length;\n      if (categoriesToAdd.length > 0) {\n        newCategories = newCategories.concat(categoriesToAdd);\n        newCategories.sort(function (a, b) {\n          if (a.weight === b.weight) {\n            return a.label.localeCompare(b.label);\n          }\n          return b.weight - a.weight;\n        });\n        change = true;\n      }\n      if (change) {\n        var selected = self.selectedResult();\n        var newIndex = undefined;\n        if (selected) {\n          for (var i = 0; i < newCategories.length; i++) {\n            for (var j = 0; j < newCategories[i].result.length; j++) {\n              if (newCategories[i].result[j].type === selected.type && newCategories[i].result[j].label === selected.label) {\n                newIndex = {\n                  categoryIndex: i,\n                  resultIndex: j\n                };\n                break;\n              }\n            }\n            if (newIndex) {\n              break;\n            }\n          }\n        }\n        self.selectedIndex(newIndex);\n        self.searchResultCategories(newCategories);\n      }\n    }\n  }, {\n    key: \"fetchResults\",\n    value: function fetchResults(querySpec) {\n      var self = this;\n      self.cancelRunningRequests();\n      if (/:$/.test(querySpec.query)) {\n        self.searchResultVisible(false);\n        return;\n      }\n      self.loadingDocs(true);\n      self.searchResultVisible(true);\n      var clearDocsTimeout = window.setTimeout(function () {\n        self.updateCategories(HUE_DOC_CATEGORY, []);\n      }, 300);\n      var docQuery = querySpec.query;\n      var docOnly = querySpec.facets && querySpec.facets['type'] && querySpec.facets['type']['document'];\n      if (docOnly) {\n        docQuery = querySpec.text.join(' ');\n      }\n      self.cancellablePromises.push(apiHelper.fetchHueDocsInteractive(docQuery).always(function () {\n        self.loadingDocs(false);\n        window.clearTimeout(clearDocsTimeout);\n      }).done(function (data) {\n        self.hasLoadedOnce(true);\n        var categories = [];\n        var docCategory = {\n          label: CATEGORIES.hueDoc,\n          result: [],\n          expanded: ko.observable(false),\n          type: HUE_DOC_CATEGORY,\n          weight: 3\n        };\n        data.results.forEach(function (doc) {\n          if (doc.hue_name.indexOf('.') !== 0) {\n            docCategory.result.push({\n              label: doc.hue_name,\n              type: 'document',\n              data: doc\n            });\n          }\n        });\n        if (docCategory.result.length) {\n          docCategory.topMatches = docCategory.result.slice(0, 6);\n          categories.push(docCategory);\n        }\n        self.updateCategories(HUE_DOC_CATEGORY, categories);\n      }));\n      if (!docOnly && window.HAS_CATALOG) {\n        var clearNavTimeout = window.setTimeout(function () {\n          self.updateCategories(NAV_CATEGORY, []);\n        }, 300);\n        var navQuery = querySpec.query;\n        // Add * in front of each term unless already there\n        querySpec.text.forEach(function (textPart) {\n          if (textPart.indexOf('*') === -1 && navQuery.indexOf('*' + textPart) === -1 && textPart.indexOf(':') === -1) {\n            navQuery = navQuery.replace(textPart, '*' + textPart);\n          }\n        });\n        self.loadingNav(true);\n        self.cancellablePromises.push(apiHelper.fetchNavEntitiesInteractive({\n          query: navQuery\n        }).always(function () {\n          self.loadingNav(false);\n          window.clearTimeout(clearNavTimeout);\n        }).done(function (data) {\n          self.hasLoadedOnce(true);\n          var categories = [];\n          var newCategories = {};\n          data.results.forEach(function (result) {\n            var typeLower = result.type.toLowerCase();\n            if (CATEGORIES[typeLower]) {\n              var category = newCategories[typeLower];\n              if (!category) {\n                category = {\n                  label: CATEGORIES[typeLower],\n                  result: [],\n                  expanded: ko.observable(false),\n                  type: NAV_CATEGORY,\n                  weight: 2\n                };\n                newCategories[typeLower] = category;\n              }\n              var meta = {\n                source: 'globalSearch'\n              };\n              if (result.type.toLowerCase() === 'database') {\n                meta.type = 'sql';\n                meta.database = result.originalName;\n              } else if (result.type.toLowerCase() === 'table') {\n                meta.type = 'sql';\n                var split = result.originalName.split('.');\n                if (split.length === 2) {\n                  meta.database = split[0];\n                  meta.table = split[1];\n                }\n              } else if (result.type.toLowerCase() === 'field') {\n                meta.type = 'sql';\n                var _split = result.originalName.split('.');\n                if (_split.length >= 3) {\n                  meta.database = _split[0];\n                  meta.table = _split[1];\n                  meta.column = _split[2];\n                }\n              }\n              category.result.push({\n                label: result.hue_name || result.originalName,\n                type: typeLower,\n                data: result\n              });\n            }\n          });\n          Object.keys(newCategories).forEach(function (key) {\n            var category = newCategories[key];\n            if (category.result.length) {\n              category.topMatches = category.result.slice(0, 6);\n              categories.push(category);\n            }\n          });\n          self.updateCategories(NAV_CATEGORY, categories);\n        }));\n      } else {\n        self.updateCategories(NAV_CATEGORY, []);\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, GlobalSearch, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport dataCatalog from 'catalog/dataCatalog';\nimport NotebookViewModel from \"../../apps/notebook/NotebookViewModel\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'hue-history-panel';\nvar TEMPLATE = \"\\n  <button class=\\\"btn btn-flat pull-right btn-toggle-jobs-panel\\\" title=\\\"\".concat(I18n('Task History'), \"\\\" data-bind=\\\"click: toggleVisibility\\\">\\n    <i class=\\\"fa fa-history\\\"></i>\\n    <div class=\\\"jobs-badge\\\" data-bind=\\\"text: historyRunningJobs().length, visible: historyRunningJobs().length > 0\\\"></div>\\n  </button>\\n\\n  <div class=\\\"jobs-panel history-panel\\\" data-bind=\\\"visible: historyPanelVisible, style: { 'top' : top, 'left': left }\\\" style=\\\"display: none;\\\">\\n    <a class=\\\"pointer inactive-action pull-right\\\" data-bind=\\\"click: function(){ historyPanelVisible(false); }\\\"><i class=\\\"fa fa-fw fa-times\\\"></i></a>\\n    <!-- ko ifnot: editorViewModel.selectedNotebook() && editorViewModel.selectedNotebook().history().length > 0 -->\\n      <span style=\\\"font-style: italic\\\">\").concat(I18n('No task history.'), \"</span>\\n    <!-- /ko -->\\n    <!-- ko if: editorViewModel.selectedNotebook() && editorViewModel.selectedNotebook().history().length > 0 -->\\n    <!-- ko with: editorViewModel.selectedNotebook() -->\\n    <div class=\\\"notification-history margin-bottom-10\\\">\\n      <!-- ko if: onSuccessUrl() -->\\n      <div class=\\\"notification-history-title\\\">\\n        <strong class=\\\"margin-left-5\\\" data-bind=\\\"text: name\\\"></strong>\\n        <!-- ko if: onSuccessUrl() !== 'assist.db.refresh' -->\\n        <a class=\\\"pull-right margin-right-10\\\" href=\\\"javascript:void(0)\\\" data-bind=\\\"hueLink: onSuccessUrl()\\\">\\n          \").concat(I18n('Output'), \"\\n        </a>\\n        <!-- /ko -->\\n        <div class=\\\"clearfix\\\"></div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: snippets()[0] -->\\n      <!-- ko with: snippets()[0] -->\\n      <!-- ko if: progress -->\\n      <div class=\\\"snippet-progress-container\\\">\\n        <div class=\\\"progress-snippet progress\\\" data-bind=\\\"css: {\\n                  'progress-danger': progress() == 0 && errors().length > 0 || status() == 'failed',\\n                  'progress-starting': progress() == 0 && status() == 'running',\\n                  'progress-warning': progress() > 0 && progress() < 100 && status() != 'failed',\\n                  'progress-success': progress() == 100\\n                  }\\\" style=\\\"background-color: #FFF; width: 100%\\\">\\n          <div class=\\\"bar\\\" data-bind=\\\"style: {'width': (errors().length > 0 ? 100 : Math.max(2, progress())) + '%'}\\\"></div>\\n        </div>\\n      </div>\\n      <!-- /ko -->\\n      <!-- ko if: result -->\\n      <pre data-bind=\\\"visible: result.logs() && result.logs().length == 0\\\" class=\\\"logs logs-bigger\\\">\").concat(I18n('No logs available at this moment.'), \"</pre>\\n      <pre data-bind=\\\"visible: result.logs() && result.logs().length > 0, text: result.logs, logScroller: result.logs, logScrollerVisibilityEvent: showLogs\\\" class=\\\"logs logs-bigger logs-populated\\\" style=\\\"height: 120px; overflow-y: auto;\\\"></pre>\\n      <!-- /ko -->\\n      <!-- /ko -->\\n      <!-- /ko -->\\n    </div>\\n    <!-- ko if: history -->\\n    <hr>\\n    <div class=\\\"notification-history margin-bottom-10\\\">\\n      <!-- ko if: history().length == 0 -->\\n      <span style=\\\"font-style: italic\\\">\").concat(I18n('No task history.'), \"</span>\\n      <!-- /ko -->\\n      <!-- ko if: history().length > 0 -->\\n      <div class=\\\"notification-history-title\\\">\\n        <strong class=\\\"margin-left-5\\\">\").concat(I18n('Task History'), \"</strong>\\n        <div class=\\\"inactive-action pointer pull-right\\\" title=\\\"\").concat(I18n('Clear the query history'), \"\\\" data-target=\\\"#clearNotificationHistoryModal\\\" data-toggle=\\\"modal\\\" rel=\\\"tooltip\\\">\\n          <i class=\\\"fa fa-calendar-times-o\\\"></i>\\n        </div>\\n        <div class=\\\"clearfix\\\"></div>\\n      </div>\\n      <ul class=\\\"unstyled notification-history-list\\\">\\n        <!-- ko foreach: history -->\\n        <li data-bind=\\\"click: function() { $parents[1].editorViewModel.openNotebook(uuid()); }, css: {'active': $parents[1].editorViewModel.selectedNotebook() !== null && $parents[1].editorViewModel.selectedNotebook().uuid() === uuid() }\\\">\\n          <div class=\\\"muted pull-left\\\" data-bind=\\\"momentFromNow: {data: lastExecuted, interval: 10000, titleFormat: 'LLL'}\\\"></div>\\n          <div class=\\\"pull-right muted\\\">\\n            <!-- ko switch: status -->\\n            <!-- ko case: 'running' -->\\n            <div class=\\\"history-status\\\" data-bind=\\\"tooltip: { title: '\").concat(I18n('Query running'), \"', placement: 'bottom' }\\\"><i class=\\\"fa fa-fighter-jet fa-fw\\\"></i></div>\\n            <!-- /ko -->\\n            <!-- ko case: 'failed' -->\\n            <div class=\\\"history-status\\\" data-bind=\\\"tooltip: { title: '\").concat(I18n('Query failed'), \"', placement: 'bottom' }\\\"><i class=\\\"fa fa-exclamation fa-fw\\\"></i></div>\\n            <!-- /ko -->\\n            <!-- ko case: 'available' -->\\n            <div class=\\\"history-status\\\" data-bind=\\\"tooltip: { title: '\").concat(I18n('Result available'), \"', placement: 'bottom' }\\\"><i class=\\\"fa fa-check fa-fw\\\"></i></div>\\n            <!-- /ko -->\\n            <!-- ko case: 'expired' -->\\n            <div class=\\\"history-status\\\" data-bind=\\\"tooltip: { title: '\").concat(I18n('Result expired'), \"', placement: 'bottom' }\\\"><i class=\\\"fa fa-unlink fa-fw\\\"></i></div>\\n            <!-- /ko -->\\n            <!-- /ko -->\\n          </div>\\n          <div class=\\\"clearfix\\\"></div>\\n          <strong data-bind=\\\"text: name, attr: { title: uuid }\\\"></strong>\\n          <div data-bind=\\\"highlight: { value: query }\\\"></div>\\n        </li>\\n        <!-- /ko -->\\n      </ul>\\n      <!-- /ko -->\\n    </div>\\n    <!-- /ko -->\\n    <!-- /ko -->\\n    <!-- /ko -->\\n  </div>\\n\\n  <div id=\\\"clearNotificationHistoryModal\\\" class=\\\"modal hide fade\\\" data-backdrop=\\\"false\\\">\\n    <div class=\\\"modal-header\\\">\\n      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\").concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n      <h2 class=\\\"modal-title\\\">\").concat(I18n('Confirm History Clearing'), \"</h2>\\n    </div>\\n    <div class=\\\"modal-body\\\">\\n      <p>\").concat(I18n('Are you sure you want to clear the task history?'), \"</p>\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <a class=\\\"btn\\\" data-dismiss=\\\"modal\\\">\").concat(I18n('No'), \"</a>\\n      <a class=\\\"btn btn-danger disable-feedback\\\" data-bind=\\\"click: function() { editorViewModel.selectedNotebook().clearHistory(); editorViewModel.selectedNotebook(null); }\\\">\").concat(I18n('Yes'), \"</a>\\n    </div>\\n  </div>\\n\");\nvar HistoryPanel = /*#__PURE__*/function () {\n  function HistoryPanel() {\n    _classCallCheck(this, HistoryPanel);\n    var self = this;\n    self.top = ko.observable();\n    self.left = ko.observable();\n    self.historyPanelVisible = ko.observable(false);\n    self.historyPanelVisible.subscribe(function (newVal) {\n      if (newVal) {\n        huePubSub.publish('hide.jobs.panel');\n      }\n    });\n    huePubSub.subscribe('hide.history.panel', function () {\n      self.historyPanelVisible(false);\n    });\n    self.editorViewModel = new NotebookViewModel({\n      user: window.LOGGED_USERNAME,\n      userId: window.LOGGED_USER_ID,\n      languages: [{\n        name: 'Java',\n        type: 'java'\n      }, {\n        name: 'Hive SQL',\n        type: 'hive'\n      }],\n      // TODO reuse\n      snippetViewSettings: {\n        hive: {\n          placeHolder: I18n('Example: SELECT * FROM tablename, or press CTRL + space'),\n          aceMode: 'ace/mode/hive',\n          snippetImage: window.STATIC_URLS['beeswax/art/icon_beeswax_48.png'],\n          sqlDialect: true\n        },\n        impala: {\n          placeHolder: I18n('Example: SELECT * FROM tablename, or press CTRL + space'),\n          aceMode: 'ace/mode/impala',\n          snippetImage: window.STATIC_URLS['impala/art/icon_impala_48.png'],\n          sqlDialect: true\n        },\n        phoenix: {\n          placeHolder: I18n('Example: SELECT * FROM tablename, or press CTRL + space'),\n          aceMode: 'ace/mode/phoenix',\n          snippetImage: window.STATIC_URLS['rdbms/art/icon_rdbms_48.png'],\n          sqlDialect: true\n        },\n        mysql: {\n          placeHolder: I18n('Example: SELECT * FROM tablename, or press CTRL + space'),\n          aceMode: 'ace/mode/mysql',\n          snippetImage: window.STATIC_URLS['rdbms/art/icon_rdbms_48.png'],\n          sqlDialect: true\n        },\n        java: {\n          snippetIcon: 'fa-file-code-o'\n        },\n        shell: {\n          snippetIcon: 'fa-terminal'\n        },\n        sqoop1: {\n          sqlDialect: false\n        },\n        spark: {\n          sqlDialect: false\n        }\n      }\n    });\n    self.editorViewModel.editorMode(true);\n    self.editorViewModel.isNotificationManager(true);\n    self.editorViewModel.newNotebook();\n    self.$toggleElement;\n    var $container = $('body');\n    self.reposition = function () {\n      self.top(self.$toggleElement.offset().top + self.$toggleElement.height() + 15 + 'px');\n      self.left($container.offset().left + $container.width() - 630 + 'px');\n    };\n    self.historyRunningJobs = ko.computed(function () {\n      if (self.editorViewModel.selectedNotebook()) {\n        return $.grep(self.editorViewModel.selectedNotebook().history(), function (task) {\n          return task.status() == 'running';\n        });\n      } else {\n        return [];\n      }\n    });\n    self.historyFinishedJobs = ko.computed(function () {\n      if (self.editorViewModel.selectedNotebook()) {\n        return $.grep(self.editorViewModel.selectedNotebook().history(), function (task) {\n          return task.status() == 'available' || task.status() == 'failed';\n        });\n      } else {\n        return [];\n      }\n    });\n    huePubSub.subscribe('notebook.task.submitted', function (resp) {\n      var data = {\n        uuid: resp.history_uuid\n      };\n      if (resp.handle && resp.handle.session_id) {\n        data['session'] = {\n          type: resp.handle.session_type,\n          id: resp.handle.session_id,\n          session_id: resp.handle.session_guid,\n          properties: []\n        };\n      }\n      self.editorViewModel.openNotebook(data.uuid, null, true, function () {\n        var notebook = self.editorViewModel.selectedNotebook();\n        notebook.snippets()[0].progress.subscribe(function (val) {\n          if (val === 100) {\n            //self.indexingStarted(false);\n            //self.isIndexing(false);\n            //self.indexingSuccess(true);\n          }\n        });\n        notebook.snippets()[0].status.subscribe(function (val) {\n          if (val === 'failed') {\n            //self.isIndexing(false);\n            //self.indexingStarted(false);\n            //self.indexingError(true);\n          } else if (val === 'available') {\n            var snippet = notebook.snippets()[0];\n            if (!snippet.result.handle().has_more_statements) {\n              // TODO: Show finish notification and clicking on it does onSuccessUrl\n              // or if still on initial spinner we redirect automatically to onSuccessUrl\n              if (notebook.onSuccessUrl() && notebook.onSuccessUrl() !== 'assist.db.refresh') {\n                // TODO: Similar if in in FB directory, also refresh FB dir\n                huePubSub.publish('open.link', notebook.onSuccessUrl());\n              }\n              if (notebook.onSuccessUrl() === 'assist.db.refresh') {\n                dataCatalog.getEntry({\n                  namespace: snippet.namespace(),\n                  compute: snippet.compute(),\n                  connector: snippet.connector(),\n                  path: []\n                }).then(function (entry) {\n                  entry.clearCache({\n                    cascade: true,\n                    silenceErrors: true\n                  });\n                });\n              } else if (notebook.onSuccessUrl()) {\n                huePubSub.publish(notebook.pubSubUrl());\n              }\n              notebook.close(); // TODO: Don't close when onSuccessUrl is editor?\n            } else {\n              snippet.execute(true);\n            }\n          }\n        });\n        notebook.snippets()[0].checkStatus();\n\n        // Add to history\n        notebook.history.unshift(notebook.makeHistoryRecord(notebook.onSuccessUrl(), notebook.description(), new Date().getTime(), notebook.snippets()[0].status(), notebook.name(), notebook.uuid()));\n        self.historyPanelVisible(true);\n      }, data.session);\n    });\n  }\n  return _createClass(HistoryPanel, [{\n    key: \"toggleVisibility\",\n    value: function toggleVisibility(historyPanel, event) {\n      var self = this;\n      if (!self.historyPanelVisible()) {\n        self.$toggleElement = $(event.target);\n        self.reposition();\n        $(window).on('resize', self.reposition);\n        var positionSub = self.historyPanelVisible.subscribe(function (newValue) {\n          if (!newValue) {\n            $(window).off('resize', self.reposition);\n            positionSub.dispose();\n          }\n        });\n      }\n      self.historyPanelVisible(!self.historyPanelVisible());\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      $(window).off('resize', self.reposition);\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, HistoryPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport HueFileEntry from \"../../doc/hueFileEntry\";\nexport var HIDE_EVENT = 'hide.import.documents.modal';\nexport var SHOW_EVENT = 'show.import.documents.modal';\nexport var SHOWN_EVENT = 'import.documents.modal.shown';\nvar TEMPLATE = \"\\n<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <!-- ko if: isHistory -->\\n  <h2 class=\\\"modal-title\\\">\").concat(I18n('Import Query History'), \"</h2>\\n  <!-- /ko -->\\n  <!-- ko ifnot: isHistory -->\\n  <h2 class=\\\"modal-title\\\">\").concat(I18n('Import Hue Documents'), \"</h2>\\n  <!-- /ko -->\\n</div>\\n\\n<!-- ko ifnot: imported --> \\n<div class=\\\"modal-body\\\">\\n  <!-- ko with: activeEntry -->\\n  <form id=\\\"importDocumentsForm\\\" class=\\\"form-horizontal\\\" style=\\\"display: inline\\\" enctype=\\\"multipart/form-data\\\">\\n    <div data-bind=\\\"visible: uploading() || uploadComplete()\\\">\\n      <span data-bind=\\\"visible: uploading()\\\">\").concat(I18n('Importing...'), \"</span>\\n      <span data-bind=\\\"visible: !uploadFailed() && uploadComplete()\\\">\").concat(I18n('Import complete!'), \"</span>\\n      <span data-bind=\\\"visible: uploadFailed\\\">\").concat(I18n('Import failed!'), \"</span>\\n      <progress data-bind=\\\"visible: uploading() || uploadComplete()\\\" id=\\\"importDocumentsProgress\\\" value=\\\"0\\\" max=\\\"100\\\" style=\\\"width: 560px;\\\"></progress>\\n    </div>\\n    <div class=\\\"pull-right\\\">\\n      <!-- ko ifnot: uploading() || uploadComplete() -->\\n      <input type=\\\"button\\\" class=\\\"btn\\\" data-clear=\\\"fileupload\\\" data-bind=\\\"click: closeUploadModal\\\" value=\\\"\").concat(I18n('Cancel'), \"\\\" />\\n      <input type=\\\"submit\\\" class=\\\"btn btn-danger\\\" data-clear=\\\"fileupload\\\" data-bind=\\\"enable: importEnabled, click: function() { upload($parent.importComplete) }\\\" value=\\\"\").concat(I18n('Import'), \"\\\" />\\n      <!-- /ko -->\\n      <!-- ko if: uploading() || uploadComplete() -->\\n      <input type=\\\"button\\\" class=\\\"btn\\\" data-clear=\\\"fileupload\\\" data-bind=\\\"click: closeUploadModal\\\" value=\\\"\").concat(I18n('Close'), \"\\\" />\\n      <!-- /ko -->\\n    </div>\\n\\n    <div class=\\\"fileupload fileupload-new\\\" data-provides=\\\"fileupload\\\" data-bind=\\\"visible: !uploading() && !uploadComplete()\\\">\\n      <span class=\\\"btn btn-file\\\">\\n        <span class=\\\"fileupload-new\\\">\").concat(I18n('Select json file'), \"</span>\\n        <span class=\\\"fileupload-exists\\\">\").concat(I18n('Change'), \"</span>\\n        <input id=\\\"importDocumentInput\\\" type=\\\"file\\\" name=\\\"documents\\\" accept=\\\".json\\\" data-bind=\\\"value: selectedImportFile\\\" />\\n      </span>\\n      &nbsp;&nbsp;<span class=\\\"fileupload-preview\\\"></span>\\n      <a href=\\\"#\\\" class=\\\"fileupload-exists\\\" data-clear=\\\"fileupload\\\"><i class=\\\"fa fa-times\\\"></i></a>\\n    </div>\\n    <input type=\\\"hidden\\\" name=\\\"path\\\" data-bind=\\\"value: definition().path\\\" />\\n  </form>\\n  <!-- /ko -->\\n</div>\\n<!-- /ko -->\\n<!-- ko if: imported -->\\n<div class=\\\"modal-body\\\">\\n  <!-- ko with: activeEntry -->\\n  <div class=\\\"center\\\" style=\\\"display: none;\\\" data-bind=\\\"visible: importedDocumentCount() == 0\\\">\\n    <i class=\\\"fa fa-spinner fa-spin fa-2x\\\"></i>\\n  </div>\\n  <!-- ko if: importedDocumentCount() > 0 -->\\n  <ul>\\n    <li> \").concat(I18n('Imported: '), \" <span data-bind=\\\"text: importedDocSummary()['count']\\\"></span></li>\\n    <li> \").concat(I18n('Created: '), \" <span data-bind=\\\"text: importedDocSummary()['created_count']\\\"></span></li>\\n    <li> \").concat(I18n('Updated: '), \" <span data-bind=\\\"text: importedDocSummary()['updated_count']\\\"></span></li>\\n  </ul>\\n\\n  <!-- ko ifnot: showTable() -->\\n  <a href=\\\"javascript:void(0)\\\" class=\\\"margin-left-10 margin-top-10\\\" data-bind=\\\"click: toggleShowTable\\\">\").concat(I18n('Show Details'), \" <i class=\\\"fa fa-caret-down\\\"></i></a>\\n  <!-- /ko -->\\n  <!-- ko if: showTable() -->\\n  <a href=\\\"javascript:void(0)\\\" class=\\\"margin-left-10 margin-top-10\\\" data-bind=\\\"click: toggleShowTable\\\">\").concat(I18n('Hide Details'), \" <i class=\\\"fa fa-caret-up\\\"></i></a>\\n  <table class=\\\"table table-condensed\\\">\\n    <thead>\\n      <tr>\\n        <th>\").concat(I18n('Name'), \"</th>\\n        <th>\").concat(I18n('Type'), \"</th>\\n        <th>\").concat(I18n('Owner'), \"</th>\\n      </tr>\\n    </thead>\\n    <tbody data-bind=\\\"foreach: importedDocSummary()['documents']\\\">\\n      <tr>\\n        <td data-bind=\\\"text: $data.name\\\"> </td>\\n        <td data-bind=\\\"text: $data.type\\\"> </td>\\n        <td data-bind=\\\"text: $data.owner\\\"> </td>\\n      </tr>\\n    </tbody>\\n  </table>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n  <!-- /ko -->\\n</div>\\n<!-- /ko -->\\n\");\nvar ImportDocumentsModal = /*#__PURE__*/_createClass(function ImportDocumentsModal(params) {\n  var _this = this;\n  _classCallCheck(this, ImportDocumentsModal);\n  if (!params) {\n    params = {};\n  }\n  this.activeEntry = ko.observable(params.fileEntry);\n  if (!params.fileEntry) {\n    this.activeEntry(new HueFileEntry({\n      activeEntry: this.activeEntry,\n      trashEntry: ko.observable(),\n      app: 'documents',\n      user: self.user,\n      activeSort: ko.observable('defaultAsc'),\n      definition: {\n        name: '/',\n        type: 'directory'\n      }\n    }));\n  }\n  this.imported = ko.observable(false);\n  this.isHistory = ko.observable(params.isHistory);\n  this.importComplete = function () {\n    if (params.importedCallback) {\n      params.importedCallback();\n    }\n    _this.imported(true);\n  };\n});\ncomponentUtils.registerComponent('import-documents-modal', undefined, TEMPLATE).then(function () {\n  huePubSub.subscribe(SHOW_EVENT, function (params) {\n    huePubSub.publish(HIDE_EVENT);\n    var $importDocumentsModal = $('<div id=\"importDocumentsModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'import-documents-modal\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade fileupload-modal\" tabindex=\"-1\"></div>');\n    $('body').append($importDocumentsModal);\n    var data = {\n      params: new ImportDocumentsModal(params),\n      descendantsComplete: function descendantsComplete() {\n        huePubSub.publish(SHOWN_EVENT);\n      }\n    };\n    ko.applyBindings(data, $importDocumentsModal[0]);\n    $importDocumentsModal.modal('show');\n  });\n  huePubSub.subscribe('hide.import.documents.modal', function () {\n    var $importDocumentsModal = $('#importDocumentsModal');\n    if ($importDocumentsModal.length > 0) {\n      $importDocumentsModal.modal('hide');\n      ko.cleanNode($importDocumentsModal[0]);\n      $importDocumentsModal.remove();\n    }\n  });\n});","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport globalSearchParser from \"../../parse/globalSearchParser\";\nimport hueDebug from 'utils/hueDebug';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'inline-autocomplete';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <div class=\\\"inline-autocomp-container\\\">\\n    <div>\\n      <!-- ko if: showMagnify -->\\n        <!-- ko ifnot: spin -->\\n        <i style=\\\"top: 6px;\\\" class=\\\"inline-autocomp-magnify-icon fa fa-fw fa-search\\\"></i>\\n        <!-- /ko -->\\n        <!-- ko if: spin -->\\n        <i class=\\\"inline-autocomp-magnify-icon fa fa-fw fa-spinner fa-spin\\\"></i>\\n        <!-- /ko -->\\n      <!-- /ko-->\\n      <form autocomplete=\\\"off\\\">\\n        <input class=\\\"inline-autocomp-input\\\" \".concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" type=\\\"text\\\" data-bind=\\\"\\n          attr: { 'placeHolder' : hasFocus() ? '' : placeHolder },\\n          textInput: searchInput,\\n          hasFocus: hasFocus,\\n          clearable: { value: searchInput, onClear: onClear },\\n          css: { 'inline-autocomp-magnify-input': showMagnify }\\\">\\n        <input class=\\\"inline-autocomp-autocomp\\\" disabled type=\\\"text\\\" autocomplete=\\\"do-not-autocomplete\\\" data-bind=\\\"\\n          value: inlineAutocomplete,\\n          css: { 'inline-autocomp-magnify-input': showMagnify }\\\">\\n      </form>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"hue-drop-down-container hue-drop-down-fixed\\\" data-bind=\\\"event: { 'mousedown': facetDropDownMouseDown }, css: { 'open' : facetDropDownVisible() }, dropDownKeyUp: { onEsc: facetDropDownOnEsc, onEnter: facetDropDownOnEnter, onSelected: facetDropDownOnSelected, dropDownVisible: facetDropDownVisible }\\\">\\n    <div class=\\\"dropdown-menu\\\" style=\\\"overflow-y: auto;\\\" data-bind=\\\"visible: facetSuggestions().length > 0\\\">\\n      <ul class=\\\"hue-inner-drop-down\\\" data-bind=\\\"foreach: facetSuggestions\\\">\\n        <li><a href=\\\"javascript:void(0)\\\" data-bind=\\\"html: label, click: function () { $parent.facetClicked($data); }, clickBubble: false\\\"></a></li>\\n      </ul>\\n    </div>\\n  </div>\\n\");\nvar getSortedFacets = function getSortedFacets(facetIndex) {\n  var result = Object.keys(facetIndex);\n  result.sort(function (a, b) {\n    return a.localeCompare(b);\n  });\n  return result;\n};\nvar InlineAutocomplete = /*#__PURE__*/function () {\n  function InlineAutocomplete(params) {\n    _classCallCheck(this, InlineAutocomplete);\n    var self = this;\n    self.disposals = [];\n    self.showMagnify = !!params.showMagnify;\n    self.spin = params.spin;\n    self.placeHolder = params.placeHolder || I18n('Filter...');\n    self.hasFocus = params.hasFocus || ko.observable();\n    self.querySpec = params.querySpec;\n    self.querySpec({\n      query: '',\n      facets: {},\n      text: []\n    });\n    self.autocompleteFromEntries = params.autocompleteFromEntries || function () {\n      return [];\n    };\n    self.facets = params.facets || [];\n    self.knownFacetValues = params.knownFacetValues || {};\n    self.uniqueFacets = !!params.uniqueFacets;\n    self.disableNavigation = !!params.disableNavigation;\n    self.changedAfterFocus = false;\n    self.searchInput = ko.observable('');\n    self.suggestions = ko.observableArray();\n    self.selectedSuggestionIndex = ko.observable(0);\n    self.suggestions.subscribe(function () {\n      self.selectedSuggestionIndex(0);\n    });\n    self.facetSuggestions = ko.observableArray();\n    self.facetDropDownVisible = params.facetDropDownVisible || ko.observable(false);\n    self.facetClicked = function (facet) {\n      self.searchInput(facet.value);\n      self.facetDropDownVisible(false);\n    };\n    self.facetDropDownOnEnter = function (facet) {\n      if (facet) {\n        self.searchInput(facet.value);\n      }\n      self.facetDropDownVisible(false);\n    };\n    self.facetDropDownOnEsc = function () {\n      self.facetDropDownVisible(false);\n    };\n    self.facetDropDownOnSelected = function (facet) {\n      if (facet) {\n        var suggestions = self.suggestions();\n        for (var i = 0; i < suggestions.length; i++) {\n          if (facet.value === suggestions[i]) {\n            self.selectedSuggestionIndex(i);\n            break;\n          }\n        }\n      }\n    };\n    self.facetDropDownMouseDown = function (data, evt) {\n      evt.preventDefault(); // Prevent focus loss on the input when an entry is clicked\n      return false;\n    };\n    self.inlineAutocomplete = ko.pureComputed(function () {\n      if (!self.hasFocus() || self.suggestions().length === 0) {\n        return '';\n      }\n      return self.suggestions()[self.selectedSuggestionIndex()];\n    });\n    self.lastParseResult = {};\n    var querySpecSub = self.querySpec.subscribe(function (newVal) {\n      if (!newVal || !newVal.query) {\n        self.lastParseResult = {};\n        self.searchInput('');\n        self.clearSuggestions();\n      }\n    });\n    self.disposals.push(function () {\n      querySpecSub.dispose();\n    });\n    self.onClear = function () {\n      if (params.onClear) {\n        params.onClear();\n      }\n      self.clearSuggestions();\n    };\n    if (params.triggerObservable) {\n      var triggerSub = params.triggerObservable.subscribe(function () {\n        self.autocomplete();\n      });\n      self.disposals.push(function () {\n        triggerSub.dispose();\n      });\n    }\n    var inputSub = self.searchInput.subscribe(function (newValue) {\n      if (self.querySpec() && self.querySpec().query === newValue) {\n        return;\n      }\n      if (newValue === '') {\n        self.changedAfterFocus = false;\n        self.clearSuggestions();\n        if (self.querySpec() && self.querySpec().query !== '') {\n          self.querySpec({\n            query: '',\n            facets: {},\n            text: []\n          });\n        }\n        return;\n      }\n      self.changedAfterFocus = true;\n      self.updateQuerySpec();\n      self.autocomplete();\n    });\n    self.disposals.push(function () {\n      inputSub.dispose();\n    });\n    var onKeyDown = function onKeyDown(event) {\n      if (!self.hasFocus()) {\n        return;\n      }\n      if (!self.disableNavigation && event.keyCode === 38 && self.suggestions().length && !self.facetDropDownVisible()) {\n        // Up\n        if (self.selectedSuggestionIndex() === 0) {\n          self.selectedSuggestionIndex(self.suggestions().length - 1);\n        } else {\n          self.selectedSuggestionIndex(self.selectedSuggestionIndex() - 1);\n        }\n        event.preventDefault();\n        return;\n      }\n      if (!self.disableNavigation && event.keyCode === 40 && self.suggestions().length && !self.facetDropDownVisible()) {\n        // Down\n        if (self.selectedSuggestionIndex() === self.suggestions().length - 1) {\n          self.selectedSuggestionIndex(0);\n        } else {\n          self.selectedSuggestionIndex(self.selectedSuggestionIndex() + 1);\n        }\n        event.preventDefault();\n        return;\n      }\n      if (event.keyCode === 32 && event.ctrlKey) {\n        // Ctrl-Space\n        if (!self.lastParseResult) {\n          self.updateQuerySpec();\n        }\n        self.changedAfterFocus = true;\n        self.autocomplete();\n        return;\n      }\n      if (event.keyCode === 39 && self.inlineAutocomplete() !== '' && self.inlineAutocomplete() !== self.searchInput()) {\n        // Right arrow\n        // TODO: Check that cursor is last\n        self.searchInput(self.inlineAutocomplete());\n        return;\n      }\n      if (event.keyCode === 9 && self.inlineAutocomplete() !== self.searchInput()) {\n        // Tab\n        self.searchInput(self.inlineAutocomplete());\n        event.preventDefault();\n      }\n    };\n    self.disposals.push(function () {\n      $(document).off('keydown.inlineAutocomplete', onKeyDown);\n    });\n    var focusSub = self.hasFocus.subscribe(function (newVal) {\n      if (!newVal) {\n        self.clearSuggestions();\n        self.changedAfterFocus = false;\n        $(document).off('keydown.inlineAutocomplete', onKeyDown);\n      } else if (self.searchInput() !== '') {\n        self.autocomplete();\n        $(document).on('keydown.inlineAutocomplete', onKeyDown);\n      } else {\n        $(document).on('keydown.inlineAutocomplete', onKeyDown);\n      }\n      if (!newVal && self.facetDropDownVisible()) {\n        self.facetDropDownVisible(false);\n      }\n    });\n    self.disposals.push(function () {\n      focusSub.dispose();\n    });\n  }\n  return _createClass(InlineAutocomplete, [{\n    key: \"updateQuerySpec\",\n    value: function updateQuerySpec() {\n      var self = this;\n      // TODO: Get cursor position and split to before and after\n      self.lastParseResult = globalSearchParser.parseGlobalSearch(self.searchInput(), '');\n      if (hueDebug && hueDebug.showGlobalSearchParseResults) {\n        // eslint-disable-next-line no-restricted-syntax\n        console.log(self.lastParseResult);\n      }\n      var querySpec = {\n        query: self.searchInput()\n      };\n      if (self.lastParseResult.facets) {\n        var knownFacetValues = typeof self.knownFacetValues === 'function' ? self.knownFacetValues() : self.knownFacetValues;\n        var cleanFacets = {};\n        Object.keys(self.lastParseResult.facets).forEach(function (facet) {\n          if (!knownFacetValues[facet]) {\n            cleanFacets[facet] = self.lastParseResult.facets[facet];\n          } else {\n            cleanFacets[facet] = {};\n            Object.keys(self.lastParseResult.facets[facet]).forEach(function (value) {\n              if (knownFacetValues[facet][value]) {\n                cleanFacets[facet][value] = self.lastParseResult.facets[facet][value];\n              } else {\n                var found = false;\n                // Find the closest match, i.e. type:s -> type: [string, smallint, ...]\n                getSortedFacets(knownFacetValues[facet]).forEach(function (knownValue) {\n                  if (knownValue.toLowerCase().indexOf(value.toLowerCase()) === 0) {\n                    if (!cleanFacets[facet][knownValue]) {\n                      cleanFacets[facet][knownValue] = [];\n                    }\n                    cleanFacets[facet][knownValue] = true;\n                    found = true;\n                  }\n                });\n                if (!found) {\n                  cleanFacets[facet][value] = self.lastParseResult.facets[facet][value];\n                }\n              }\n            });\n          }\n        });\n        querySpec.facets = cleanFacets;\n      }\n      if (self.lastParseResult.text) {\n        querySpec.text = self.lastParseResult.text;\n      }\n      self.querySpec(querySpec);\n    }\n  }, {\n    key: \"clearSuggestions\",\n    value: function clearSuggestions() {\n      var self = this;\n      if (self.suggestions().length) {\n        self.suggestions([]);\n      }\n      if (self.facetSuggestions().length) {\n        self.facetSuggestions([]);\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }, {\n    key: \"autocomplete\",\n    value: function autocomplete() {\n      var self = this;\n      if (!self.lastParseResult) {\n        self.clearSuggestions();\n        return;\n      }\n      var text = self.searchInput();\n      var partial, nonPartial;\n      var partialMatch = text.match(/([^:\\s]+)$/i);\n      if (partialMatch) {\n        partial = partialMatch[0];\n        nonPartial = text.substring(0, text.length - partial.length);\n      } else {\n        partial = '';\n        nonPartial = text;\n      }\n      var newSuggestions = [];\n      var facetSuggestions = [];\n      var partialLower = partial.toLowerCase();\n      if (self.lastParseResult.suggestFacets) {\n        var existingFacetIndex = {};\n        if (self.uniqueFacets && self.lastParseResult.facets) {\n          Object.keys(self.lastParseResult.facets).forEach(function (facet) {\n            existingFacetIndex[facet.toLowerCase()] = true;\n          });\n        }\n        var suggestion = nonPartial + partial;\n        var isLowerCase = suggestion.length > 0 && suggestion.toLowerCase() === suggestion;\n        self.facets.forEach(function (facet) {\n          if (self.uniqueFacets && existingFacetIndex[facet]) {\n            return;\n          }\n          if (partial.length === 0 || facet.indexOf(partialLower) === 0) {\n            var remainder = facet.substring(partial.length);\n            suggestion += isLowerCase ? remainder : remainder.toUpperCase();\n            suggestion += ':';\n            newSuggestions.push(suggestion);\n          }\n        });\n      }\n      if (self.lastParseResult.suggestFacetValues) {\n        var facetValues = typeof self.knownFacetValues === 'function' ? self.knownFacetValues() : self.knownFacetValues;\n        if (facetValues && facetValues[self.lastParseResult.suggestFacetValues.toLowerCase()]) {\n          var matchedFacets = facetValues[self.lastParseResult.suggestFacetValues.toLowerCase()];\n          getSortedFacets(matchedFacets).forEach(function (value) {\n            if (value.toLowerCase().indexOf(partialLower) === 0) {\n              var fullValue = nonPartial + partial + value.substring(partial.length, value.length);\n              var label = partial.length ? '<b>' + partial + '</b>' + value.substring(partial.length) : value;\n              if (matchedFacets[value] !== -1) {\n                label += ' (' + matchedFacets[value] + ')';\n              }\n              if (matchedFacets[value] !== 0) {\n                facetSuggestions.push({\n                  label: label,\n                  value: fullValue\n                });\n                newSuggestions.push(fullValue);\n              }\n            }\n          });\n        }\n      }\n      if (partial !== '' && self.lastParseResult.suggestResults) {\n        newSuggestions = newSuggestions.concat(self.autocompleteFromEntries(nonPartial, partial));\n      }\n      self.facetSuggestions(facetSuggestions);\n      if (self.changedAfterFocus && (facetSuggestions.length > 1 || facetSuggestions.length === 1 && facetSuggestions[0].value !== self.searchInput())) {\n        self.facetDropDownVisible(true);\n      } else if (self.facetDropDownVisible()) {\n        self.facetDropDownVisible(false);\n      }\n      self.suggestions(newSuggestions);\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, InlineAutocomplete, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport { initializeMiniJobBrowser } from \"../../apps/jobBrowser/miniJobBrowser\";\nimport DisposableComponent from \"./DisposableComponent\";\nexport var NAME = 'hue-job-browser-links';\nvar TEMPLATE = \"\\n  <div class=\\\"btn-group pull-right\\\">\\n    <!-- ko if: window.IS_K8S_ONLY -->\\n      <a class=\\\"btn btn-flat\\\" style=\\\"padding-right: 4px\\\" title=\\\"\".concat(I18n('Query browser'), \"\\\" data-bind=\\\"hueLink: '/jobbrowser#!queries', click: function() { huePubSub.publish('show.jobs.panel', {interface: 'queries'}); huePubSub.publish('hide.jobs.panel'); }\\\">\\n        <span>\").concat(I18n('Queries'), \"</span>\\n      </a>\\n    <!-- /ko -->\\n    <!-- ko if: window.HAS_JOB_BROWSER && !window.getLastKnownConfig().has_computes -->\\n    <!-- ko ifnot: window.IS_K8S_ONLY -->\\n      <a class=\\\"btn btn-flat\\\" style=\\\"padding-right: 4px\\\" title=\\\"\").concat(I18n('Job browser'), \"\\\" data-bind=\\\"hueLink: '/jobbrowser#!jobs', click: function() { huePubSub.publish('hide.jobs.panel'); }\\\">\\n        <span>\").concat(I18n(window.IS_MULTICLUSTER_ONLY ? 'Queries' : 'Jobs'), \"</span>\\n      </a>\\n    <!-- /ko -->\\n    <button class=\\\"btn btn-flat btn-toggle-jobs-panel\\\" title=\\\"\").concat(I18n('Jobs preview'), \"\\\" data-bind=\\\"click: function() { huePubSub.publish('toggle.jobs.panel'); }, style: {'paddingLeft': jobCount() > 0 ? '0': '4px'}\\\">\\n      <span class=\\\"jobs-badge\\\" data-bind=\\\"visible: jobCount() > 0, text: jobCount\\\"></span>\\n      <i class=\\\"fa fa-tasks\\\"></i>\\n    </button>\\n    <!-- /ko -->\\n  </div>\\n\");\nvar JB_CHECK_INTERVAL_IN_MILLIS = 30000;\nvar JobBrowserPanel = /*#__PURE__*/function (_DisposableComponent) {\n  function JobBrowserPanel(params) {\n    var _this;\n    _classCallCheck(this, JobBrowserPanel);\n    _this = _callSuper(this, JobBrowserPanel);\n    var $container = $('body');\n    _this.initialized = false;\n    var reposition = function reposition() {\n      var $jobsPanel = $('#jobsPanel');\n      var $toggle = $('.btn-toggle-jobs-panel');\n      $jobsPanel.css('top', $toggle.offset().top + $toggle.height() + 15 + 'px');\n      $jobsPanel.css('left', $container.offset().left + $container.width() - 630 + 'px');\n    };\n    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'hide.jobs.panel', function () {\n      $(window).off('resize', reposition);\n      $('#jobsPanel').hide();\n    });\n    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'show.jobs.panel', function (options) {\n      if (!_this.initialized) {\n        _this.initialized = true;\n        initializeMiniJobBrowser();\n      }\n      if (window.IS_K8S_ONLY) {\n        huePubSub.publish('context.selector.set.cluster', 'impala');\n      }\n      huePubSub.publish('hide.history.panel');\n      $(window).on('resize', reposition);\n      reposition();\n      $('#jobsPanel').show();\n      huePubSub.publish('mini.jb.navigate', {\n        section: options && options[\"interface\"] ? options[\"interface\"] : 'jobs',\n        compute: options && options.compute\n      });\n      if (options && options.id) {\n        huePubSub.publish('mini.jb.open.job', options.id);\n      }\n    });\n    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'toggle.jobs.panel', function () {\n      if ($('#jobsPanel').is(':visible')) {\n        huePubSub.publish('hide.jobs.panel');\n      } else {\n        huePubSub.publish('show.jobs.panel');\n      }\n    });\n    _this.jobCounts = ko.observable({\n      yarn: 0,\n      schedules: 0,\n      history: 0\n    });\n    _this.jobCount = ko.pureComputed(function () {\n      var total = 0;\n      Object.keys(_this.jobCounts()).forEach(function (value) {\n        total += _this.jobCounts()[value];\n      });\n      return total;\n    });\n    _this.onePageViewModel = params.onePageViewModel;\n    var lastYarnBrowserRequest = null;\n    var checkYarnBrowserStatus = function checkYarnBrowserStatus() {\n      return $.post('/jobbrowser/jobs/', {\n        format: 'json',\n        state: 'running',\n        user: window.LOGGED_USERNAME\n      }).done(function (data) {\n        if (data != null && data.jobs != null) {\n          huePubSub.publish('jobbrowser.data', data.jobs);\n          _this.jobCounts()['yarn'] = data.jobs.length;\n          _this.jobCounts.valueHasMutated();\n        }\n      }).fail(function (response) {\n        console.warn(response);\n      });\n    };\n    var lastScheduleBrowserRequest = undefined;\n    var checkScheduleBrowserStatus = function checkScheduleBrowserStatus() {\n      return $.post('/scheduler/api/schedule/list', {\n        \"interface\": ko.mapping.toJSON('schedules'),\n        filters: ko.mapping.toJSON([{\n          text: 'user:' + window.LOGGED_USERNAME\n        }, {\n          time: {\n            time_value: 7,\n            time_unit: 'days'\n          }\n        }, {\n          states: ['running']\n        }, {\n          pagination: {\n            page: 1,\n            offset: 1,\n            limit: 1\n          }\n        }])\n      }, function (data) {\n        if (data != null && data.total != null) {\n          huePubSub.publish('jobbrowser.schedule.data', data.apps);\n          _this.jobCounts()['schedules'] = data.total;\n          _this.jobCounts.valueHasMutated();\n        }\n      });\n    };\n    var lastHistoryBrowserRequest = null;\n    var checkHistoryBrowserStatus = function checkHistoryBrowserStatus() {\n      return $.post('/jobbrowser/api/jobs/history', {\n        \"interface\": ko.mapping.toJSON('history'),\n        filters: ko.mapping.toJSON([{\n          states: ['running']\n        }, {\n          text: 'user:' + window.LOGGED_USERNAME\n        }, {\n          time: {\n            time_value: 7,\n            time_unit: 'days'\n          }\n        }, {\n          pagination: {\n            page: 1,\n            offset: 1,\n            limit: 1\n          }\n        }])\n      }).done(function (data) {\n        if (data != null && data.apps != null) {\n          _this.jobCounts()['history'] = data.apps.length;\n          _this.jobCounts.valueHasMutated();\n        }\n      }).fail(function (response) {\n        console.warn(response);\n      });\n    };\n    var checkJobBrowserStatusIdx = -1;\n    var checkJobBrowserStatus = function checkJobBrowserStatus() {\n      lastYarnBrowserRequest = checkYarnBrowserStatus();\n      if (window.ENABLE_QUERY_SCHEDULING) {\n        lastScheduleBrowserRequest = checkScheduleBrowserStatus();\n      }\n      if (window.ENABLE_HISTORY_V2) {\n        lastHistoryBrowserRequest = checkHistoryBrowserStatus();\n      }\n      $.when.apply($, [lastYarnBrowserRequest, lastScheduleBrowserRequest, lastHistoryBrowserRequest]).done(function () {\n        window.clearTimeout(checkJobBrowserStatusIdx);\n        checkJobBrowserStatusIdx = window.setTimeout(checkJobBrowserStatus, JB_CHECK_INTERVAL_IN_MILLIS);\n      }).fail(function () {\n        window.clearTimeout(checkJobBrowserStatusIdx);\n      });\n    };\n\n    // Load the mini jobbrowser DOM and insert it in the #mini_jobrowser element\n    // Any script or styles are also inserted in the header and thus loaded async.\n    $.ajax({\n      url: '/jobbrowser/apps?is_embeddable=true&is_mini=true',\n      beforeSend: function beforeSend(xhr) {\n        xhr.setRequestHeader('X-Requested-With', 'Hue');\n      },\n      dataType: 'html',\n      success: function success(response) {\n        params.onePageViewModel.processHeaders(response).done(function (rawHtml) {\n          $('#mini_jobbrowser').html(rawHtml);\n          //ko.bindingHandlers.delayedOverflow.init($('#mini_jobbrowser')[0]);\n        });\n      }\n    });\n    if (!window.IS_K8S_ONLY) {\n      checkJobBrowserStatusIdx = window.setTimeout(checkJobBrowserStatus, 10);\n      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'check.job.browser', checkYarnBrowserStatus);\n      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'check.schedules.browser', checkScheduleBrowserStatus);\n      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), \"subscribe\", _this).call(_this, 'check.history.browser', checkHistoryBrowserStatus);\n    }\n    return _this;\n  }\n  _inherits(JobBrowserPanel, _DisposableComponent);\n  return _createClass(JobBrowserPanel);\n}(DisposableComponent);\ncomponentUtils.registerComponent(NAME, JobBrowserPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'nav-properties';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"nav-property-edit-popover-content\\\">\\n    <div class=\\\"hue-nav-property-edit-content\\\">\\n      <a href=\\\"javascript: void(0);\\\" class=\\\"close-popover\\\"><i class=\\\"fa fa-times\\\"></i></a>\\n      <div class=\\\"control-group\\\" data-bind=\\\"css: { 'error': keyInvalid }\\\">\\n        <label class=\\\"control-label\\\">\".concat(I18n('Key'), \"</label>\\n        <div class=\\\"controls\\\">\\n          <input type=\\\"text\\\" placeholder=\\\"\").concat(I18n('Key'), \"\\\" data-bind=\\\"textInput: key\\\">\\n        </div>\\n      </div>\\n      <div class=\\\"control-group\\\" data-bind=\\\"css: { 'error': valueInvalid }\\\">\\n        <label class=\\\"control-label\\\">\").concat(I18n('Value'), \"</label>\\n        <div class=\\\"controls\\\">\\n          <input type=\\\"text\\\" placeholder=\\\"\").concat(I18n('Value'), \"\\\" data-bind=\\\"textInput: value\\\">\\n        </div>\\n      </div>\\n    </div>\\n  </script>\\n\\n  <!-- ko if: loading -->\\n  <div class=\\\"hue-nav-properties\\\"><div data-bind=\\\"hueSpinner: { spin: loading, inline: true }\\\"></div></div>\\n  <!-- /ko -->\\n  <!-- ko ifnot: loading -->\\n  <!-- ko ifnot: editMode -->\\n\\n  <!-- ko ifnot: window.HAS_READ_ONLY_CATALOG -->\\n  <div class=\\\"hue-nav-properties\\\" data-bind=\\\"click: startEdit, visibleOnHover: { selector: '.editable-inline-action' }\\\">\\n    <!-- ko if: !properties().length -->\\n    <div class=\\\"hue-nav-properties-empty\\\">\").concat(I18n('Add properties...'), \"</div>\\n    <!-- /ko -->\\n    <!-- ko foreach: properties -->\\n    <div class=\\\"hue-nav-property\\\"><div class=\\\"hue-nav-property-key\\\" data-bind=\\\"text: key, attr: { 'title': key }\\\"></div><div class=\\\"hue-nav-property-value\\\" data-bind=\\\"text: value, attr: { 'title': value }\\\"></div></div>\\n    <!-- /ko -->\\n    <div class=\\\"editable-inline-action\\\" title=\\\"\").concat(I18n('Edit'), \"\\\"><a href=\\\"javascript: void(0);\\\" data-bind=\\\"click: startEdit\\\"><i class=\\\"fa fa-pencil\\\"></i></a></div>\\n  </div>\\n  <!-- /ko -->\\n\\n  <!-- ko if: window.HAS_READ_ONLY_CATALOG && properties().length -->\\n  <div class=\\\"hue-nav-properties\\\">\\n    <!-- ko foreach: properties -->\\n    <div class=\\\"hue-nav-property\\\" data-bind=\\\"tooltip: { placement: 'bottom' }, attr: { title: title }\\\"><div class=\\\"hue-nav-property-key\\\" data-bind=\\\"text: key\\\"></div><div class=\\\"hue-nav-property-value\\\" data-bind=\\\"text: value\\\"></div></div>\\n    <!-- /ko -->\\n  </div>\\n  <!-- /ko -->\\n\\n  <!-- /ko -->\\n  <!-- ko if: editMode -->\\n  <div class=\\\"hue-nav-properties hue-nav-properties-edit\\\">\\n    <!-- ko foreach: editProperties -->\\n    <div class=\\\"hue-nav-property hue-nav-property-edit\\\" data-bind=\\\"css: { 'hue-nav-property-invalid': invalid }, templatePopover: { trigger: 'click', placement: 'bottom', visible: editPropertyVisible, contentTemplate: 'nav-property-edit-popover-content' }\\\">\\n      <div class=\\\"hue-nav-property-key\\\" data-bind=\\\"text: key, attr: { 'title': key }\\\"></div><div class=\\\"hue-nav-property-value\\\" data-bind=\\\"text: value, attr: { 'title': value }\\\"></div>\\n      <div class=\\\"hue-nav-property-remove\\\"><a href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Remove'), \"\\\" data-bind=\\\"click: function (entry) { $parent.removeProperty(entry); }\\\"><i class=\\\"fa fa-times\\\"></i></a></div>\\n    </div>\\n    <!-- /ko -->\\n    <div class=\\\"hue-nav-property-add\\\"><a href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Add'), \"\\\" data-bind=\\\"click: addProperty\\\"><i class=\\\"fa fa-plus\\\"></i></a></div>\\n    <div class=\\\"hue-nav-properties-edit-actions\\\">\\n      <a href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Save'), \"\\\" data-bind=\\\"click: saveEdit\\\"><i class=\\\"fa fa-check\\\"></i></a>\\n      <a href=\\\"javascript: void(0);\\\" title=\\\"\").concat(I18n('Cancel'), \"\\\" data-bind=\\\"click: cancelEdit\\\"><i class=\\\"fa fa-close\\\"></i></a>\\n    </div>\\n  </div>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n\");\nvar NavProperty = /*#__PURE__*/function () {\n  function NavProperty(key, value, isNew) {\n    _classCallCheck(this, NavProperty);\n    var self = this;\n    self.key = ko.observable(key);\n    self.keyEdited = ko.observable(false);\n    self.value = ko.observable(value);\n    self.valueEdited = ko.observable(false);\n    self.editPropertyVisible = ko.observable(isNew);\n    self.title = ko.observable();\n    var keySub = self.key.subscribe(function () {\n      keySub.dispose();\n      self.keyEdited(true);\n    });\n    var valueSub = self.value.subscribe(function () {\n      valueSub.dispose();\n      self.valueEdited(true);\n    });\n    var editSub = self.editPropertyVisible.subscribe(function () {\n      editSub.dispose();\n      keySub.dispose();\n      valueSub.dispose();\n      self.keyEdited(true);\n      self.valueEdited(true);\n    });\n    self.keyInvalid = ko.pureComputed(function () {\n      return self.keyEdited() && !self.key();\n    });\n    self.valueInvalid = ko.pureComputed(function () {\n      return self.valueEdited() && !self.value();\n    });\n    self.invalid = ko.pureComputed(function () {\n      return self.keyInvalid() || self.valueInvalid() || !self.editPropertyVisible() && !self.key() && !self.value();\n    });\n  }\n  return _createClass(NavProperty, [{\n    key: \"setTitle\",\n    value: function setTitle(title) {\n      this.title(title);\n    }\n  }]);\n}();\nvar NavProperties = /*#__PURE__*/function () {\n  /**\n   * @param {object} params\n   * @param {DataCatalogEntry} [params.catalogEntry]\n   *\n   * @constructor\n   */\n  function NavProperties(params, element) {\n    _classCallCheck(this, NavProperties);\n    var self = this;\n    self.element = element;\n    self.hasErrors = ko.observable(false);\n    self.loading = ko.observable(true);\n    self.properties = ko.observableArray();\n    self.editProperties = ko.observableArray();\n    self.catalogEntry = params.catalogEntry;\n    self.editMode = ko.observable(false);\n    self.loadProperties();\n    self.refreshSub = huePubSub.subscribe('data.catalog.entry.refreshed', function (details) {\n      if (details.entry === self.catalogEntry) {\n        self.loadProperties();\n      }\n    });\n  }\n  return _createClass(NavProperties, [{\n    key: \"startEdit\",\n    value: function startEdit() {\n      if (window.HAS_READ_ONLY_CATALOG) {\n        return;\n      }\n      var self = this;\n      var editProperties = [];\n      self.properties().forEach(function (property) {\n        editProperties.push(new NavProperty(property.key(), property.value()));\n      });\n      self.editProperties(editProperties);\n      self.editMode(true);\n      $(document).on('click.navProperties', function (event) {\n        if ($.contains(document, event.target) && !$.contains(self.element, event.target) && !self.editProperties().some(function (prop) {\n          return prop.editPropertyVisible();\n        })) {\n          self.saveEdit();\n        }\n      });\n    }\n  }, {\n    key: \"cancelEdit\",\n    value: function cancelEdit() {\n      var self = this;\n      $(document).off('click.navProperties');\n      self.editMode(false);\n    }\n  }, {\n    key: \"saveEdit\",\n    value: function saveEdit() {\n      var self = this;\n      var someInvalid = self.editProperties().some(function (property) {\n        return !property.key() || !property.value();\n      });\n      if (someInvalid) {\n        return;\n      }\n      $(document).off('click.navProperties');\n      self.editMode(false);\n      if (ko.mapping.toJSON(self.editProperties()) !== ko.mapping.toJSON(self.properties())) {\n        self.loading(true);\n        self.catalogEntry.getNavigatorMeta().then(function (navigatorMeta) {\n          var keysAfterEdit = {};\n          var modifiedCustomMetadata = {};\n          if (!navigatorMeta.properties) {\n            navigatorMeta.properties = {};\n          }\n          self.editProperties().forEach(function (property) {\n            if (navigatorMeta.properties[property.key()] !== property.value()) {\n              modifiedCustomMetadata[property.key()] = property.value();\n            }\n            keysAfterEdit[property.key()] = true;\n          });\n          var deletedCustomMetadataKeys = [];\n          self.properties().forEach(function (property) {\n            if (!keysAfterEdit[property.key()]) {\n              deletedCustomMetadataKeys.push(property.key());\n            }\n          });\n          self.catalogEntry.updateNavigatorCustomMetadata(modifiedCustomMetadata, deletedCustomMetadataKeys)[\"finally\"](function () {\n            self.loadProperties();\n          });\n        })[\"catch\"](function () {\n          self.loadProperties();\n        });\n      }\n    }\n  }, {\n    key: \"removeProperty\",\n    value: function removeProperty(property) {\n      var self = this;\n      self.editProperties.remove(property);\n    }\n  }, {\n    key: \"addProperty\",\n    value: function addProperty() {\n      var self = this;\n      var newProperty = new NavProperty('', '', true);\n      newProperty.editPropertyVisible(true);\n      self.editProperties.push(newProperty);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      self.refreshSub.remove();\n    }\n  }, {\n    key: \"loadProperties\",\n    value: function loadProperties() {\n      var self = this;\n      self.loading(true);\n      self.hasErrors(false);\n      ko.unwrap(self.catalogEntry).getNavigatorMeta().then(function (navigatorMeta) {\n        var newProps = [];\n        if (navigatorMeta.classifications) {\n          navigatorMeta.classifications.forEach(function (classification) {\n            if (classification.attributes) {\n              Object.keys(classification.attributes).forEach(function (attributeKey) {\n                var property = new NavProperty(attributeKey, classification.attributes[attributeKey]);\n                property.setTitle(classification.typeName);\n                newProps.push(property);\n              });\n            }\n          });\n        } else if (navigatorMeta.properties) {\n          Object.keys(navigatorMeta.properties).forEach(function (key) {\n            if (!key.startsWith('__cloudera_internal')) {\n              newProps.push(new NavProperty(key, navigatorMeta.properties[key]));\n            }\n          });\n          newProps.sort(function (a, b) {\n            return a.key().localeCompare(b.key());\n          });\n        }\n        self.properties(newProps);\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      })[\"finally\"](function () {\n        self.loading(false);\n      });\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new NavProperties(params, componentInfo.element);\n  }\n}, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport dataCatalog from 'catalog/dataCatalog';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'nav-tags';\nvar TEMPLATE = \"\\n  <!-- ko if: loading -->\\n  <div style=\\\"width: 100%; height: 20px; left: 6px; position: relative;\\\" data-bind=\\\"hueSpinner: { spin: loading }\\\"></div>\\n  <!-- /ko -->\\n  <!-- ko if: !loading() && (!readOnly || readOnly && currentTags().length) -->\\n  <div class=\\\"hue-tags\\\" style=\\\"width: 100%\\\" data-bind=\\\"ifnot: loading, css: { 'read-only-tags': readOnly }\\\">\\n   <textarea style=\\\"width: 100%\\\" data-bind=\\\"tagEditor: {\\n      emptyPlaceholder: '\".concat(I18n('Add tags...'), \"',\\n      readOnly: readOnly,\\n      hasErrors: hasErrors,\\n      errorMessage: '\").concat(I18n('Tags could not be loaded.'), \"',\\n      setTags: currentTags,\\n      overflowEllipsis: overflowEllipsis,\\n      onSave: saveTags.bind($data),\\n      validRegExp: '^[a-zA-z0-9_-]{1,50}$',\\n      invalidMessage: '\").concat(I18n('Tags can only contain 1 to 50 alphanumeric characters, _ or -.'), \"',\\n      load: getSelectizeTags\\n    }\\\"></textarea>\\n   <div class=\\\"selectize-error\\\" style=\\\"display: none;\\\"><i class=\\\"fa fa-exclamation-triangle\\\"></i> <span class=\\\"message\\\"></span></div>\\n  </div>\\n  <!-- /ko -->\\n\");\nvar NavTags = /*#__PURE__*/function () {\n  /**\n   * @param {object} params\n   * @param {DataCatalogEntry} [params.catalogEntry]\n   *\n   * @constructor\n   */\n  function NavTags(params) {\n    _classCallCheck(this, NavTags);\n    var self = this;\n    self.hasErrors = ko.observable(false);\n    self.loading = ko.observable(true);\n    self.currentTags = ko.observableArray();\n    self.allTags = ko.observableArray();\n    self.catalogEntry = params.catalogEntry;\n    self.overflowEllipsis = params.overflowEllipsis;\n    self.readOnly = !window.USER_HAS_METADATA_WRITE_PERM || !!params.readOnly || window.HAS_READ_ONLY_CATALOG;\n    self.getSelectizeTags = function (query, callback) {\n      callback($.map(self.allTags(), function (tag) {\n        return {\n          value: tag,\n          text: tag\n        };\n      }));\n    };\n    self.loadTags();\n    self.refreshSub = huePubSub.subscribe('data.catalog.entry.refreshed', function (details) {\n      if (details.entry === self.catalogEntry) {\n        self.loadTags();\n      }\n    });\n  }\n  return _createClass(NavTags, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      self.refreshSub.remove();\n    }\n  }, {\n    key: \"loadTags\",\n    value: function loadTags() {\n      var self = this;\n      self.loading(true);\n      self.hasErrors(false);\n      var currentTagsPromise = ko.unwrap(self.catalogEntry).getNavigatorMeta().then(function (navigatorMeta) {\n        self.currentTags(navigatorMeta && navigatorMeta.tags || []);\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      });\n      var allTagsPromise = dataCatalog.getAllNavigatorTags({\n        silenceErrors: true\n      }).then(function (tagList) {\n        self.allTags(Object.keys(tagList));\n      })[\"catch\"](function () {\n        self.allTags([]);\n      });\n      Promise.all([currentTagsPromise, allTagsPromise])[\"finally\"](function () {\n        self.loading(false);\n      });\n    }\n  }, {\n    key: \"saveTags\",\n    value: function saveTags(value) {\n      var self = this;\n      var newTags = value.length > 0 ? value.split(',') : [];\n      var tagsToRemove = [];\n      var tagsToAdd = [];\n      var tagIndex = {};\n      self.currentTags().forEach(function (tag) {\n        tagIndex[tag] = false;\n      });\n      newTags.forEach(function (newTag) {\n        if (typeof tagIndex[newTag] !== 'undefined') {\n          tagIndex[newTag] = true;\n        } else {\n          tagsToAdd.push(newTag);\n        }\n      });\n      Object.keys(tagIndex).forEach(function (oldTag) {\n        if (!tagIndex[oldTag]) {\n          tagsToRemove.push(oldTag);\n        }\n      });\n      self.loading(true);\n      self.hasErrors(false);\n      var addTagsPromise = tagsToAdd.length > 0 ? ko.unwrap(self.catalogEntry).addNavigatorTags(tagsToAdd) : Promise.resolve();\n      var deleteTagsPromise = tagsToRemove.length > 0 ? ko.unwrap(self.catalogEntry).deleteNavigatorTags(tagsToRemove) : Promise.resolve();\n      Promise.all([addTagsPromise, deleteTagsPromise]).then(function () {\n        if (tagsToAdd.length || tagsToRemove.length) {\n          dataCatalog.updateAllNavigatorTags(tagsToAdd, tagsToRemove);\n          ko.unwrap(self.catalogEntry).save();\n        }\n        self.loadTags();\n      })[\"catch\"](function () {\n        self.hasErrors(true);\n      })[\"finally\"](function () {\n        self.loading(false);\n      });\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, NavTags, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport \"./ko.catalogEntriesList\";\nimport componentUtils from \"./componentUtils\";\nimport dataCatalog from 'catalog/dataCatalog';\nexport var NAME = 'polling-catalog-entries-list';\nvar TEMPLATE = \"\\n  <div>\\n    <!-- ko hueSpinner: { spin: !catalogEntryExists(), inline: true } --><!-- /ko -->\\n    <!-- ko if: catalogEntryExists -->\\n      <!-- ko component: { name: 'catalog-entries-list', params: {\\n        catalogEntry: catalogEntry,\\n        selectedEntries: selectedEntries,\\n        editableDescriptions: editableDescriptions,\\n        contextPopoverEnabled: contextPopoverEnabled,\\n        onSampleClick: onSampleClick,\\n        refreshSampleInterval: refreshSampleInterval\\n      }} --><!-- /ko -->\\n    <!-- /ko -->\\n  </div>\\n\";\nvar PollingCatalogEntriesList = /*#__PURE__*/function () {\n  /**\n   * This is the same as the 'catalog-entries-list' component with the difference that this\n   * one waits until a catalog entry exists.\n   *\n   * Example usage:\n   *\n   * <div data-bind=\"component: { name: 'polling-catalog-entries-list', params: {\n   *   sourceType: sourceType,\n   *   namespace: ko.observable({ id: 'default' }),\n   *   compute: ko.observable({ id: 'default' }),\n   *   path: ko.observable('default.foo'),\n   *   refreshSampleInterval: 3000\n   * }}\"></div>\n   *\n   * @param params\n   * @constructor\n   */\n\n  function PollingCatalogEntriesList(params) {\n    _classCallCheck(this, PollingCatalogEntriesList);\n    var self = this;\n    self.selectedEntries = params.selectedEntries;\n    self.editableDescriptions = params.editableDescriptions;\n    self.contextPopoverEnabled = params.contextPopoverEnabled;\n    self.onSampleClick = params.onSampleClick;\n    self.sourceType = params.sourceType;\n    self.namespace = params.namespace;\n    self.compute = params.compute;\n    self.path = params.path;\n    self.refreshSampleInterval = params.refreshSampleInterval;\n    self.pollTimeout = -1;\n    self.pollCount = 0;\n    self.disposals = [];\n    self.lastPollSourceMetaPromise = undefined;\n    self.catalogEntryExists = ko.observable(false);\n    self.catalogEntry = ko.observable();\n    self.intialize();\n    if (ko.isObservable(self.path)) {\n      var pathSub = self.path.subscribe(function (newValue) {\n        if (newValue) {\n          self.intialize();\n        }\n      });\n      self.disposals.push(function () {\n        pathSub.dispose();\n      });\n    }\n  }\n  return _createClass(PollingCatalogEntriesList, [{\n    key: \"pollForSourceMeta\",\n    value: function pollForSourceMeta() {\n      var self = this;\n      window.clearTimeout(self.pollTimeout);\n      var pollInternal = function pollInternal() {\n        self.pollCount++;\n        if (self.catalogEntry()) {\n          self.lastPollSourceMetaPromise = self.catalogEntry().getSourceMeta({\n            silenceErrors: true,\n            refreshCache: self.pollCount > 0,\n            cancellable: true\n          }).then(function (sourceMeta) {\n            if (sourceMeta.notFound) {\n              self.pollForSourceMeta();\n            } else {\n              self.catalogEntryExists(true);\n            }\n          })[\"catch\"](function () {\n            self.pollForSourceMeta();\n          });\n        }\n      };\n      if (self.pollCount === 0) {\n        pollInternal();\n      } else {\n        self.pollTimeout = window.setTimeout(pollInternal, Math.min(1000 * self.pollCount, 3000));\n      }\n    }\n  }, {\n    key: \"intialize\",\n    value: function intialize() {\n      var self = this;\n      self.pollCount = 0;\n      window.clearTimeout(self.pollTimeout);\n      self.catalogEntryExists(false);\n      if (self.lastPollSourceMetaPromise && self.lastPollSourceMetaPromise.cancel) {\n        self.lastPollSourceMetaPromise.cancel();\n      }\n      dataCatalog.getEntry({\n        namespace: ko.unwrap(self.namespace),\n        compute: ko.unwrap(self.compute),\n        connector: {\n          id: ko.unwrap(self.sourceType)\n        },\n        // TODO: Use connectors in polling catalog entries list\n        path: ko.unwrap(self.path)\n      }).then(function (catalogEntry) {\n        self.catalogEntry(catalogEntry);\n        self.pollForSourceMeta();\n      });\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      window.clearTimeout(self.pollTimeout);\n      if (self.lastPollSourceMetaPromise && self.lastPollSourceMetaPromise.cancel) {\n        self.lastPollSourceMetaPromise.cancel();\n      }\n      while (self.disposals.length) {\n        self.disposals.pop()();\n      }\n    }\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, PollingCatalogEntriesList, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport componentUtils from \"./componentUtils\";\nimport DisposableComponent from \"./DisposableComponent\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'quick-query-action';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n<div style=\\\"display: inline-block; margin-left: 20px; margin-top: 5px;\\\">\\n  <button class=\\\"btn btn-mini disable-feedback\\\" data-bind=\\\"click: showQuickQuery\\\">\\n    <i class=\\\"fa fa-play fa-fw\\\"></i> \".concat(I18n('Quick Query'), \"\\n  </button>\\n</div>\\n\");\nvar QuickQueryAction = /*#__PURE__*/function (_DisposableComponent) {\n  function QuickQueryAction() {\n    _classCallCheck(this, QuickQueryAction);\n    return _callSuper(this, QuickQueryAction, arguments);\n  }\n  _inherits(QuickQueryAction, _DisposableComponent);\n  return _createClass(QuickQueryAction, [{\n    key: \"showQuickQuery\",\n    value: function showQuickQuery(data, event) {\n      var $source = $(event.target);\n      var offset = $source.offset();\n      huePubSub.publish('context.popover.show', {\n        data: {\n          type: 'quickQuery'\n        },\n        orientation: 'bottom',\n        pinEnabled: false,\n        source: {\n          left: offset.left,\n          top: offset.top,\n          right: offset.left + $source.outerWidth(),\n          bottom: offset.top + $source.outerHeight()\n        }\n      });\n    }\n  }]);\n}(DisposableComponent);\ncomponentUtils.registerComponent(NAME, QuickQueryAction, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport koMapping from 'knockout.mapping';\nimport componentUtils from \"./componentUtils\";\nimport { GLOBAL_ERROR_TOPIC, GLOBAL_INFO_TOPIC } from 'reactComponents/AlertComponent/events';\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport UUID from 'utils/string/UUID';\nexport var NAME = 'hue-sentry-privileges';\nvar TEMPLATE = \"\\n  <script type=\\\"text/html\\\" id=\\\"sentry-privileges-component-role\\\">\\n    <div class=\\\"acl-block-title\\\">\\n      <i class=\\\"fa fa-cube muted\\\"></i> <a class=\\\"pointer\\\" data-bind=\\\"click: function(){  $parents[0].showRole($data); }\\\"><span data-bind=\\\"text: name\\\"></span></a>\\n    </div>\\n    <div data-bind=\\\"template: { name: 'sentry-privileges-component-privilege', foreach: privilegesForView }\\\"></div>\\n    <div class=\\\"acl-block acl-actions\\\">\\n      <span class=\\\"pointer\\\" data-bind=\\\"visible: privilegesForViewTo() < privileges().length, click: function(){ privilegesForViewTo(privilegesForViewTo() + 50) }\\\" title=\\\"\".concat(I18n('Show 50 more...'), \"\\\"><i class=\\\"fa fa-ellipsis-h\\\"></i></span>\\n      <span class=\\\"pointer\\\" data-bind=\\\"click: addPrivilege, visible: $parents[0].isSentryAdmin && !$parents[0].readOnly\\\" title=\\\"\").concat(I18n('Add privilege'), \"\\\"><i class=\\\"fa fa-plus\\\"></i></span>\\n      <span class=\\\"pointer\\\" data-bind=\\\"click: function() { $parents[0].listSentryPrivilegesByAuthorizable() }, visible: privilegesChanged().length > 0\\\" title=\\\"\").concat(I18n('Undo'), \"\\\"> &nbsp; <i class=\\\"fa fa-undo\\\"></i></span>\\n      <span class=\\\"pointer\\\" data-bind=\\\"click: function() { $parents[0].deletePrivilegeModal($data) }, visible: privilegesChanged().length > 0\\\" title=\\\"\").concat(I18n('Save'), \"\\\"> &nbsp; <i class=\\\"fa fa-save\\\"></i></span>\\n    </div>\\n  </script>\\n\\n  <script type=\\\"text/html\\\" id=\\\"sentry-privileges-component-privilege\\\">\\n    <div data-bind=\\\"visible: status() != 'deleted' && status() != 'alreadydeleted'\\\" class=\\\"acl-block acl-block-airy\\\">\\n      <!-- ko if: editing -->\\n      <div class=\\\"pull-right privilege-actions\\\" data-bind=\\\"visible: (grantOption() || $parents[1].isSentryAdmin) && !$parents[1].readOnly\\\">\\n        <a class=\\\"pointer\\\" style=\\\"margin-right: 4px\\\" data-bind=\\\"click: function() { if (editing()) { editing(false); }}\\\"><i class=\\\"fa fa-eye\\\"></i></a>\\n        <a class=\\\"pointer\\\" style=\\\"margin-right: 4px\\\" data-bind=\\\"click: remove\\\"><i class=\\\"fa fa-times\\\"></i></a>\\n      </div>\\n    \\n      <div class=\\\"inline-block\\\" style=\\\"vertical-align: middle\\\">\\n        <a class=\\\"pointer\\\" style=\\\"padding-top: 4px\\\" data-bind=\\\"click: function(){ privilegeType('db'); action($parents[1].availableActions(privilegeScope())[0]) }\\\">\\n          <i class=\\\"fa fa-fw fa-1halfx muted\\\" data-bind=\\\"css: {'fa-circle-o': privilegeType() != 'db' , 'fa-check-circle-o': privilegeType() == 'db'}\\\"></i>\\n        </a>\\n      </div>\\n      <input type=\\\"text\\\" data-bind=\\\"hiveChooser: $data.path, enable: privilegeType() == 'db', apiHelperUser: '\").concat(window.LOGGED_USERNAME, \"', apiHelperType: 'hive'\\\" placeholder=\\\"dbName.tableName <CTRL+SPACE>\\\">\\n    \\n      <div class=\\\"inline-block\\\" style=\\\"vertical-align: middle\\\">\\n        <a class=\\\"pointer\\\" style=\\\"padding-top: 4px\\\" data-bind=\\\"click: function(){ privilegeType('uri'); action('ALL'); }\\\">\\n          <i class=\\\"fa fa-fw fa-1halfx muted\\\" data-bind=\\\"css: {'fa-circle-o': privilegeType() != 'uri' , 'fa-check-circle-o': privilegeType() == 'uri'}\\\"></i>\\n        </a>\\n      </div>\\n      <input type=\\\"text\\\" data-bind=\\\"filechooser: $data.URI, enable: privilegeType() == 'uri', valueUpdate: 'afterkeydown'\\\" placeholder=\\\"URI\\\">\\n    \\n      <select data-bind=\\\"options: $parents[1].availableActions(privilegeScope()), value: $data.action, enable: (privilegeType() == 'db')\\\" style=\\\"width: 100px; margin-bottom: 0\\\"></select>\\n    \\n      <div class=\\\"margin-top-10\\\">\\n        <label class=\\\"checkbox pull-left\\\"><input type=\\\"checkbox\\\" data-bind=\\\"checked: grantOption\\\"> \").concat(I18n('With grant'), \"</label>\\n        <div class=\\\"inline-block margin-left-10\\\" style=\\\"margin-top: 6px\\\">\\n          <a class=\\\"pointer showAdvanced\\\" data-bind=\\\"click: function(){ showAdvanced(true); }, visible: !showAdvanced()\\\"><i class=\\\"fa fa-cog\\\"></i> \").concat(I18n('Show advanced'), \"</a>\\n          <a class=\\\"pointer showAdvanced\\\" data-bind=\\\"click: function(){ showAdvanced(false); }, visible: showAdvanced()\\\"><i class=\\\"fa fa-cog\\\"></i> \").concat(I18n('Hide advanced'), \"</a>\\n        </div>\\n        <div class=\\\"clearfix\\\"></div>\\n      </div>\\n    \\n      <div class=\\\"acl-block-section\\\" data-bind=\\\"visible: showAdvanced\\\" style=\\\"margin-top: 0\\\">\\n        \").concat(I18n('Server'), \" <input type=\\\"text\\\" data-bind=\\\"value: serverName\\\" placeholder=\\\"serverName\\\" style=\\\"margin-left: 6px\\\">\\n      </div>\\n      <!-- /ko -->\\n  \\n      <!-- ko ifnot: editing -->\\n      <div class=\\\"pull-right privilege-actions\\\" data-bind=\\\"visible: (grantOption() || $parents[1].isSentryAdmin) && !$parents[1].readOnly\\\">\\n        <a title=\\\"\").concat(I18n('Edit this privilege'), \"\\\" class=\\\"pointer\\\" style=\\\"margin-right: 4px\\\" data-bind=\\\"visible: $parents[1].isSentryAdmin, click: function() { if (! editing()) { editing(true); }}\\\"><i class=\\\"fa fa-pencil\\\"></i></a>\\n        <a title=\\\"\").concat(I18n('Delete this privilege'), \"\\\" class=\\\"pointer\\\" style=\\\"margin-right: 4px\\\" data-bind=\\\"visible: $parents[1].isSentryAdmin, click: remove\\\"><i class=\\\"fa fa-times\\\"></i></a>\\n      </div>\\n  \\n      <span class=\\\"muted\\\" data-bind=\\\"text: privilegeScope, attr: {title: moment(timestamp()).fromNow()}\\\"></span>\\n      <!-- ko if: grantOption -->\\n        <i class=\\\"fa fa-unlock muted\\\" title=\\\"\").concat(I18n('With grant option'), \"\\\"></i>\\n      <!-- /ko -->\\n      <span data-bind=\\\"visible: metastorePath() != '' && privilegeType() == 'db'\\\">\\n        <a data-bind=\\\"hueLink: metastorePath()\\\" class=\\\"muted\\\" style=\\\"margin-left: 4px\\\" title=\\\"\").concat(I18n('Open in Table Browser...'), \"\\\"><i class=\\\"fa fa-external-link\\\"></i></a>\\n      </span>\\n      <br/>\\n  \\n      server=<span data-bind=\\\"text: serverName\\\"></span>\\n  \\n      <!-- ko if: privilegeType() == 'db' -->\\n      <span data-bind=\\\"visible: dbName\\\">\\n        <i class=\\\"fa fa-long-arrow-right\\\"></i> db=<a class=\\\"pointer\\\" data-bind=\\\"click: function(){ $parents[1].linkToBrowse(dbName()) }\\\" title=\\\"\").concat(I18n('Browse db privileges'), \"\\\"><span data-bind=\\\"text: dbName\\\"></span></a>\\n      </span>\\n      <span data-bind=\\\"visible: tableName\\\">\\n        <i class=\\\"fa fa-long-arrow-right\\\"></i> table=<a class=\\\"pointer\\\" data-bind=\\\"click: function(){ $parents[1].linkToBrowse(dbName() + '.' + tableName()) }\\\" title=\\\"\").concat(I18n('Browse table privileges'), \"\\\"><span data-bind=\\\"text: tableName\\\"></span></a>\\n      </span>\\n      <span data-bind=\\\"visible: columnName\\\">\\n        <i class=\\\"fa fa-long-arrow-right\\\"></i> column=<a class=\\\"pointer\\\" data-bind=\\\"click: function(){ $parents[1].linkToBrowse(dbName() + '.' + tableName() + '.' + columnName()) }\\\" title=\\\"\").concat(I18n('Browse column privileges'), \"\\\"><span data-bind=\\\"text: columnName\\\"></span></a>\\n      </span>\\n      <!-- /ko -->\\n  \\n      <!-- ko if: privilegeType() == 'uri' -->\\n      <i class=\\\"fa fa-long-arrow-right\\\"></i> <i class=\\\"fa fa-file-o\\\"></i> <i class=\\\"fa fa-long-arrow-right\\\"></i> <a data-bind=\\\"hueLink: '/filebrowser/view=/' + URI().split('/')[3]\\\"><span data-bind=\\\"text: URI\\\"></span></a>\\n      <!-- /ko -->\\n  \\n      <i class=\\\"fa fa-long-arrow-right\\\"></i> action=<span data-bind=\\\"text: action\\\"></span>\\n      <!-- /ko -->\\n    </div>\\n  </script>\\n\\n  <!-- ko hueSpinner: { spin: isLoadingPrivileges, inline: true } --><!-- /ko -->\\n  <!-- ko if: roles().length -->\\n  <div data-bind=\\\"template: { name: 'sentry-privileges-component-role', foreach: roles }\\\"></div>\\n  <!-- /ko -->\\n  <!-- ko ifnot: roles().length -->\\n  <em>\").concat(I18n('No privileges found for the selected object.'), \"</em>\\n  <!-- /ko -->\\n  \\n  <div id=\\\"sentryPrivilegesComponentDeletePrivilegeModal\\\" class=\\\"modal hide fade in\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-header\\\">\\n      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\").concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n      <h2 class=\\\"modal-title\\\">\").concat(I18n('Confirm the deletion?'), \"</h2>\\n    </div>\\n    <div class=\\\"modal-body\\\">\\n      \").concat(I18n('Sentry will recursively delete the SERVER or DATABASE privileges you marked for deletion.'), \"\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <button class=\\\"btn\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\">\").concat(I18n('Cancel'), \"</button>\\n      <button data-loading-text=\\\"\").concat(I18n('Deleting...'), \"\\\" class=\\\"btn btn-danger\\\" data-bind=\\\"click: function() { roleToUpdate().savePrivileges(roleToUpdate()); }\\\">\").concat(I18n('Yes, delete'), \"</button>\\n    </div>\\n  </div>\\n\");\nvar Privilege = /*#__PURE__*/_createClass(function Privilege(vm, privilege) {\n  _classCallCheck(this, Privilege);\n  var self = this;\n  self.id = ko.observable(typeof privilege.id != 'undefined' && privilege.id != null ? privilege.id : '');\n  self.roleName = ko.observable(typeof privilege.roleName != 'undefined' && privilege.roleName != null ? privilege.roleName : '');\n  self.status = ko.observable(typeof privilege.status != 'undefined' && privilege.status != null ? privilege.status : '');\n  self.editing = ko.observable(typeof privilege.editing != 'undefined' && privilege.editing != null ? privilege.editing : false);\n  self.serverName = ko.observable(typeof privilege.serverName != 'undefined' && privilege.serverName != null ? privilege.serverName : '');\n  self.serverName.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.dbName = ko.observable(typeof privilege.dbName != 'undefined' && privilege.dbName != null ? privilege.dbName : '');\n  self.dbName.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.tableName = ko.observable(typeof privilege.tableName != 'undefined' && privilege.tableName != null ? privilege.tableName : '');\n  self.tableName.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.columnName = ko.observable(typeof privilege.columnName != 'undefined' && privilege.columnName != null ? privilege.columnName : '');\n  self.columnName.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.URI = ko.observable(typeof privilege.URI != 'undefined' && privilege.URI != null ? privilege.URI : '');\n  self.URI.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.action = ko.observable(typeof privilege.action != 'undefined' && privilege.action != null ? privilege.action : 'SELECT');\n  self.action.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n  self.timestamp = ko.observable(typeof privilege.timestamp != 'undefined' && privilege.timestamp != null ? privilege.timestamp : 0);\n  self.grantOption = ko.observable(typeof privilege.grantOption != 'undefined' && privilege.grantOption != null ? privilege.grantOption : false);\n  self.grantOption.subscribe(function () {\n    if (self.status() === '') {\n      self.status('modified');\n    }\n  });\n\n  // UI\n  self.privilegeType = ko.observable(typeof privilege.privilegeScope != 'undefined' && privilege.privilegeScope === 'URI' ? 'uri' : 'db');\n  self.showAdvanced = ko.observable(false);\n  self.path = ko.computed({\n    read: function read() {\n      if (self.columnName().length > 0) {\n        return self.dbName() + '.' + self.tableName() + '.' + self.columnName();\n      } else if (self.tableName().length > 0) {\n        return self.dbName() + '.' + self.tableName();\n      } else {\n        return self.dbName();\n      }\n    },\n    write: function write(value) {\n      var _parts = value.split('.');\n      this.dbName(_parts[0]);\n      this.tableName(_parts.length > 1 ? _parts[1] : '');\n      this.columnName(_parts.length > 2 ? _parts[2] : '');\n    },\n    owner: self\n  });\n  self.metastorePath = ko.computed(function () {\n    if (self.columnName().length > 0) {\n      return '/metastore/table/' + self.dbName() + '/' + self.tableName() + '#col=' + self.columnName();\n    } else if (self.tableName().length > 0) {\n      return '/metastore/table/' + self.dbName() + '/' + self.tableName();\n    } else if (self.dbName().length > 0) {\n      return '/metastore/tables/' + self.dbName();\n    } else {\n      return '';\n    }\n  });\n  function getPrivilegeScope() {\n    if (self.privilegeType() === 'uri') {\n      return 'URI';\n    } else if (self.columnName().length > 0) {\n      return 'COLUMN';\n    } else if (self.tableName().length > 0) {\n      return 'TABLE';\n    } else if (self.dbName().length > 0) {\n      return 'DATABASE';\n    } else {\n      return 'SERVER';\n    }\n  }\n  self.privilegeScope = ko.observable(typeof privilege.privilegeScope != 'undefined' ? privilege.privilegeScope : getPrivilegeScope());\n  self.privilegeType.subscribe(function () {\n    self.privilegeScope(getPrivilegeScope());\n  });\n  self.columnName.subscribe(function () {\n    self.privilegeScope(getPrivilegeScope());\n  });\n  self.tableName.subscribe(function () {\n    self.privilegeScope(getPrivilegeScope());\n  });\n  self.dbName.subscribe(function () {\n    self.privilegeScope(getPrivilegeScope());\n  });\n  self.remove = function (privilege) {\n    if (privilege.status() === 'new') {\n      privilege.status('alreadydeleted');\n    } else {\n      privilege.status('deleted');\n    }\n  };\n});\nvar Role = /*#__PURE__*/_createClass(function Role(vm, role) {\n  _classCallCheck(this, Role);\n  var self = this;\n  self.name = ko.observable(typeof role.name != 'undefined' && role.name != null ? role.name : '');\n  self.name.subscribe(function (value) {\n    var _found = false;\n    vm.role().isEditing(false);\n    ko.utils.arrayForEach(vm.roles(), function (role) {\n      if (role.name() === value) {\n        vm.role(role);\n        _found = true;\n      }\n    });\n    if (_found) {\n      vm.role().isEditing(true);\n      vm.list_sentry_privileges_by_role(vm.role());\n      $(document).trigger('destroyTypeahead');\n    }\n  });\n  self.selected = ko.observable(false);\n  self.handleSelect = function () {\n    self.selected(!self.selected());\n  };\n  self.groups = ko.observableArray();\n  self.originalGroups = ko.observableArray();\n  self.groups.extend({\n    rateLimit: 300\n  });\n  self.originalGroups.extend({\n    rateLimit: 300\n  });\n  $.each(typeof role.groups != 'undefined' && role.groups != null ? role.groups : [], function (index, group) {\n    self.groups.push(group);\n    self.originalGroups.push(group);\n  });\n  self.privileges = ko.observableArray(); // Not included in the API\n  self.originalPrivileges = ko.observableArray(); // Not included in the API\n  self.privilegesForViewTo = ko.observable(49);\n  self.showPrivileges = ko.observable(false);\n  self.showPrivileges.subscribe(function (value) {\n    var _expanded = vm.expandedRoles();\n    if (value) {\n      if (_expanded.indexOf(self.name()) === -1) {\n        _expanded.push(self.name());\n      }\n    } else if (_expanded.indexOf(self.name()) > -1) {\n      _expanded.splice(_expanded.indexOf(self.name()), 1);\n    }\n    vm.expandedRoles(_expanded);\n  });\n  self.showEditGroups = ko.observable(false);\n  self.isEditing = ko.observable(false);\n  self.isLoading = ko.observable(false);\n  self.isValid = ko.computed(function () {\n    return self.name().length > 0 && $.grep(self.privileges(), function (privilege) {\n      return privilege.privilegeType() === 'uri' && privilege.URI() === '';\n    }).length === 0;\n  });\n  self.privilegesChanged = ko.computed(function () {\n    return $.grep(self.privileges(), function (privilege) {\n      return ['new', 'deleted', 'modified'].indexOf(privilege.status()) !== -1;\n    });\n  });\n  self.groupsChanged = ko.computed(function () {\n    return !($(self.groups()).not(self.originalGroups()).length === 0 && $(self.originalGroups()).not(self.groups()).length === 0);\n  });\n  self.groupsChanged.extend({\n    rateLimit: 300\n  });\n  self.privilegesForView = ko.computed(function () {\n    return self.privileges().slice(0, self.privilegesForViewTo());\n  });\n  self.reset = function () {\n    self.name('');\n    self.groups.removeAll();\n    self.privileges.removeAll();\n    self.isEditing(false);\n  };\n  self.addGroup = function () {\n    self.groups.push('');\n  };\n  self.addPrivilege = function () {\n    self.privileges.push(new Privilege(vm, {\n      serverName: vm.server(),\n      status: 'new',\n      editing: true,\n      dbName: vm.db(),\n      tableName: vm.table(),\n      columnName: vm.column()\n    }));\n  };\n  self.resetGroups = function () {\n    self.groups.removeAll();\n    $.each(self.originalGroups(), function (index, group) {\n      self.groups.push(group);\n    });\n  };\n  self.saveGroups = function () {\n    huePubSub.publish('hide.global.alerts');\n    $.post('/security/api/hive/update_role_groups', {\n      role: koMapping.toJSON(self)\n    }, function (data) {\n      if (data.status === 0) {\n        self.showEditGroups(false);\n        self.originalGroups.removeAll();\n        $.each(self.groups(), function (index, group) {\n          self.originalGroups.push(group);\n        });\n      } else {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: data.message\n        });\n      }\n    }).fail(function (xhr) {\n      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n        message: xhr.responseText\n      });\n    });\n  };\n  self.create = function () {\n    huePubSub.publish('hide.global.alerts');\n    if (self.isValid()) {\n      self.isLoading(true);\n      $.post('/security/api/hive/create_role', {\n        role: koMapping.toJSON(self)\n      }, function (data) {\n        if (data.status === 0) {\n          huePubSub.publish(GLOBAL_INFO_TOPIC, {\n            message: data.message\n          });\n          vm.showCreateRole(false);\n          self.reset();\n          var _role2 = new Role(vm, data.role);\n          _role2.showPrivileges(true);\n          vm.originalRoles.unshift(_role2);\n          vm.listSentryPrivilegesByAuthorizable();\n          $(document).trigger('createdRole');\n        } else {\n          huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n            message: data.message\n          });\n        }\n      }).fail(function (xhr) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: xhr.responseText\n        });\n      }).always(function () {\n        self.isLoading(false);\n      });\n    }\n  };\n  self.update = function () {\n    huePubSub.publish('hide.global.alerts');\n    if (self.isValid()) {\n      self.isLoading(true);\n      $.post('/security/api/hive/save_privileges', {\n        role: koMapping.toJSON(self)\n      }, function (data) {\n        if (data.status === 0) {\n          huePubSub.publish(GLOBAL_INFO_TOPIC, {\n            message: data.message\n          });\n          vm.showCreateRole(false);\n          vm.listSentryPrivilegesByAuthorizable();\n          $(document).trigger('createdRole');\n        } else {\n          huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n            message: data.message\n          });\n        }\n      }).fail(function (xhr) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: xhr.responseText\n        });\n      }).always(function () {\n        self.isLoading(false);\n      });\n    }\n  };\n  self.remove = function (role) {\n    huePubSub.publish('hide.global.alerts');\n    self.isLoading(true);\n    $.post('/security/api/hive/drop_sentry_role', {\n      roleName: role.name\n    }, function (data) {\n      if (data.status === 0) {\n        vm.removeRole(role.name());\n        vm.listSentryPrivilegesByAuthorizable();\n        $(document).trigger('removedRole');\n      } else {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: data.message\n        });\n      }\n    }).fail(function (xhr) {\n      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n        message: xhr.responseText\n      });\n    }).always(function () {\n      self.isLoading(false);\n    });\n  };\n  self.savePrivileges = function (role) {\n    huePubSub.publish('hide.global.alerts');\n    $.post('/security/api/hive/save_privileges', {\n      role: koMapping.toJSON(role)\n    }, function (data) {\n      if (data.status === 0) {\n        vm.listSentryPrivilegesByAuthorizable();\n        $(document).trigger('createdRole');\n      } else {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: data.message\n        });\n      }\n    }).fail(function (xhr) {\n      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n        message: xhr.responseText\n      });\n    });\n  };\n});\nvar _create_authorizable_from_ko = function _create_authorizable_from_ko(server, path) {\n  if (path != null) {\n    var paths = path.split(/[.]/);\n    return {\n      server: server,\n      db: paths[0] ? paths[0] : null,\n      table: paths[1] ? paths[1] : null,\n      column: paths[2] ? paths[2] : null\n    };\n  }\n};\nvar _create_ko_privilege = function _create_ko_privilege(privilege) {\n  return new Privilege(self, {\n    privilegeScope: privilege.scope,\n    serverName: privilege.server,\n    dbName: privilege.database,\n    tableName: privilege.table,\n    columnName: privilege.column,\n    URI: privilege.URI,\n    action: privilege.action,\n    timestamp: privilege.timestamp,\n    roleName: privilege.roleName,\n    grantOption: privilege.grantOption,\n    id: UUID()\n  });\n};\nvar SentryPrivilegesViewModel = /*#__PURE__*/_createClass(function SentryPrivilegesViewModel(params) {\n  _classCallCheck(this, SentryPrivilegesViewModel);\n  var self = this;\n  self.server = ko.observable(params.server);\n  self.path = ko.observable(params.path);\n  self.isSentryAdmin = params.isSentryAdmin;\n  self.readOnly = !!params.readOnly;\n  self.apiVersion = params.apiVersion || 'v1';\n  self.apiType = params.apiType || 'hive';\n  self.showFilter = params.showFilter;\n  self.enableCreateRole = params.enableCreateRole;\n  self.path.subscribe(self.listSentryPrivilegesByAuthorizable);\n  self.db = ko.computed(function () {\n    var db = self.path().split(/[.]/)[0];\n    return db ? db : null;\n  });\n  self.table = ko.computed(function () {\n    var table = self.path().split(/[.]/)[1];\n    return table ? table : null;\n  });\n  self.column = ko.computed(function () {\n    var column = self.path().split(/[.]/)[2];\n    return column ? column : null;\n  });\n  self.metastorePath = ko.computed(function () {\n    if (self.column()) {\n      return '/metastore/table/' + self.db() + '/' + self.table() + '#col=' + self.column();\n    } else if (self.table()) {\n      return '/metastore/table/' + self.db() + '/' + self.table();\n    } else if (self.db()) {\n      return '/metastore/tables/' + self.db();\n    } else {\n      return '/metastore/databases';\n    }\n  });\n  self.privileges = ko.observableArray();\n  self.roles = ko.observableArray();\n  self.roleToUpdate = ko.observable();\n  self.isLoadingPrivileges = ko.observable(false);\n  self.availableActions = function (scope) {\n    var actions = ['SELECT', 'INSERT', 'ALL'];\n    var databaseActions = ['CREATE'];\n    var tableActions = ['REFRESH', 'ALTER', 'DROP'];\n    switch (scope) {\n      case 'SERVER':\n        actions = actions.concat(databaseActions).concat(tableActions);\n        break;\n      case 'DATABASE':\n        actions = actions.concat(databaseActions);\n        break;\n      case 'TABLE':\n        actions = actions.concat(tableActions);\n        break;\n    }\n    return ko.observableArray(actions.sort());\n  };\n  self.deletePrivilegeModal = function (role) {\n    var cascadeDeletes = role.privilegesChanged().filter(function (privilege) {\n      return privilege.status() === 'deleted' && (privilege.privilegeScope() === 'SERVER' || privilege.privilegeScope() === 'DATABASE');\n    });\n    if (cascadeDeletes.length > 0) {\n      self.roleToUpdate(role);\n      $('#sentryPrivilegesComponentDeletePrivilegeModal').modal('show');\n    } else {\n      role.savePrivileges(role);\n    }\n  };\n  self.listSentryPrivilegesByAuthorizable = function () {\n    self.isLoadingPrivileges(true);\n    $.ajax({\n      type: 'POST',\n      url: '/security/api/hive/list_sentry_privileges_by_authorizable',\n      data: {\n        groupName: '',\n        roleSet: koMapping.toJSON({\n          all: true,\n          roles: []\n        }),\n        authorizableHierarchy: koMapping.toJSON(_create_authorizable_from_ko(self.server(), self.path()))\n      },\n      success: function success(data) {\n        if (data.status === 0) {\n          self.roles([]);\n          var _privileges = [];\n          $.each(data.privileges, function (index, item) {\n            if (typeof window.skipList === 'undefined' || window.skipList === false) {\n              var _role = null;\n              self.roles().forEach(function (role) {\n                if (role.name() === item.roleName) {\n                  _role = role;\n                }\n              });\n              if (_role == null) {\n                var _idx = self.roles.push(new Role(self, {\n                  name: item.roleName\n                }));\n                _role = self.roles()[_idx - 1];\n              }\n              var privilege = _create_ko_privilege(item);\n              var privilegeCopy = _create_ko_privilege(item);\n              privilegeCopy.id(privilege.id());\n              _role.privileges.push(privilege);\n              _role.originalPrivileges.push(privilegeCopy);\n              _privileges.push(privilege);\n            }\n          });\n          if (typeof window.skipList === 'undefined' || window.skipList === false) {\n            self.privileges(_privileges);\n          }\n        } else {\n          huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n            message: data.message\n          });\n        }\n      }\n    }).fail(function (xhr) {\n      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n        message: xhr.responseText\n      });\n    }).always(function () {\n      self.isLoadingPrivileges(false);\n    });\n  };\n  self.linkToBrowse = function (path) {\n    // TODO: implement smart linking\n  };\n  self.listSentryPrivilegesByAuthorizable();\n});\ncomponentUtils.registerComponent(NAME, SentryPrivilegesViewModel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport sessionManager from 'apps/editor/execution/sessionManager';\nexport var SHOW_EVENT = 'show.session.auth.modal';\nexport var SHOWN_EVENT = 'session.auth.modal.shown';\nvar TEMPLATE = \"\\n<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h2 class=\\\"modal-title\\\">\").concat(I18n('Connect to the data source'), \"</h2>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <!-- ko if: authSessionMessage -->\\n    <div class=\\\"row-fluid\\\">\\n      <div class=\\\"alert-warning\\\">\\n        <span data-bind=\\\"text: authSessionMessage\\\"></span>\\n      </div>\\n    </div>\\n  <!-- /ko -->\\n  <div class=\\\"row-fluid\\\">\\n    <div class=\\\"span6\\\">\\n      <div class=\\\"input-prepend\\\">\\n        <span class=\\\"add-on muted\\\"><i class=\\\"fa fa-user\\\"></i></span>\\n        <input name=\\\"username\\\" data-test=\\\"usernameInput\\\" type=\\\"text\\\" data-bind=\\\"textInput: authSessionUsername\\\" placeholder=\\\"\").concat(I18n('Username'), \"\\\"/>\\n      </div>\\n    </div>\\n    <div class=\\\"span6\\\">\\n      <div class=\\\"input-prepend\\\">\\n        <span class=\\\"add-on muted\\\"><i class=\\\"fa fa-lock\\\"></i></span>\\n        <input name=\\\"password\\\" data-test=\\\"passwordInput\\\" type=\\\"password\\\" data-bind=\\\"textInput: authSessionPassword\\\" placeholder=\\\"\").concat(I18n('Password'), \"\\\"/>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <a class=\\\"btn\\\" data-dismiss=\\\"modal\\\">\").concat(I18n('Cancel'), \"</a>\\n  <a class=\\\"btn btn-primary disable-feedback\\\" data-bind=\\\"click: connect, css: { 'disabled': loading }\\\"><i class='fa fa-spinner fa-spin' data-bind=\\\"visible: loading\\\"></i> \").concat(I18n('Connect'), \"</a>\\n</div>\\n\");\nvar SessionAuthModal = /*#__PURE__*/function () {\n  function SessionAuthModal(params, $modal) {\n    _classCallCheck(this, SessionAuthModal);\n    this.pending = true;\n    this.loading = ko.observable(false);\n    this.reject = params.reject;\n    this.resolve = params.resolve;\n    this.session = params.session;\n    this.authSessionMessage = params.message;\n    this.$modal = $modal;\n    var username = '';\n    this.session.properties.some(function (property) {\n      if (property.name === 'user') {\n        username = property.value;\n      }\n    });\n    this.authSessionUsername = ko.observable(username);\n    this.authSessionPassword = ko.observable();\n  }\n  return _createClass(SessionAuthModal, [{\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var properties, session;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.loading(true);\n              properties = this.session.properties.filter(function (property) {\n                return property.name !== 'user' && property.name !== 'password';\n              });\n              properties.push({\n                name: 'user',\n                value: this.authSessionUsername()\n              });\n              properties.push({\n                name: 'password',\n                value: this.authSessionPassword()\n              });\n              _context.prev = 4;\n              _context.next = 7;\n              return sessionManager.createDetachedSession({\n                type: this.session.type,\n                properties: properties,\n                preventAuthModal: true\n              });\n            case 7:\n              session = _context.sent;\n              // The modal could be closed before creation\n              if (this.pending) {\n                this.resolve(session);\n              }\n              this.pending = false;\n              this.$modal.modal('hide');\n              _context.next = 16;\n              break;\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              if (_context.t0 && _context.t0.auth) {\n                this.authSessionMessage(_context.t0.message);\n              }\n            case 16:\n              this.loading(false);\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[4, 13]]);\n      }));\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }]);\n}();\ncomponentUtils.registerComponent('session-auth-modal', undefined, TEMPLATE).then(function () {\n  huePubSub.subscribe(SHOW_EVENT, function (sessionAuthParams) {\n    var $sessionAuthModal = $('#sessionAuthModal');\n    if ($sessionAuthModal.length > 0) {\n      ko.cleanNode($sessionAuthModal[0]);\n      $sessionAuthModal.remove();\n    }\n    $sessionAuthModal = $('<div id=\"sessionAuthModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'session-auth-modal\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade\" tabindex=\"-1\"></div>');\n    $('body').append($sessionAuthModal);\n    var model = new SessionAuthModal(sessionAuthParams, $sessionAuthModal);\n    var data = {\n      params: model,\n      descendantsComplete: function descendantsComplete() {\n        huePubSub.publish(SHOWN_EVENT, $sessionAuthModal[0]);\n      }\n    };\n    ko.applyBindings(data, $sessionAuthModal[0]);\n    $sessionAuthModal.modal('show');\n    $sessionAuthModal.on('hidden', function () {\n      if (model.pending) {\n        model.reject();\n        model.pending = false;\n      }\n    });\n  });\n});","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport komapping from 'knockout.mapping';\nimport \"../bindings/ko.slideVisible\";\nimport \"../bindings/ko.toggle\";\nimport apiHelper from \"../../api/apiHelper\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport sessionManager from 'apps/editor/execution/sessionManager';\nexport var NAME = 'session-panel';\nexport var SESSION_PANEL_SHOW_EVENT = 'session.panel.show';\nvar TEMPLATE = \"\\n<div class=\\\"session-panel\\\" data-test=\\\"\".concat(NAME, \"\\\" data-bind=\\\"slideVisible: visible\\\">\\n  <div class=\\\"margin-top-10 padding-left-10 padding-right-10\\\">\\n    <h4 class=\\\"margin-bottom-10\\\"><i class=\\\"fa fa-cogs\\\"></i> \").concat(I18n('Sessions'), \"</h4>\\n    <div class=\\\"session-panel-content\\\">\\n      <!-- ko ifnot: sessions().length -->\\n      \").concat(I18n('There are currently no information about the sessions.'), \"\\n      <!-- /ko -->\\n      \\n      <!-- ko if: sessions().length -->\\n      <div class=\\\"row-fluid\\\">\\n        <div class=\\\"span11\\\">\\n          <form class=\\\"form-horizontal session-config\\\">\\n            <fieldset>\\n              <!-- ko foreach: sessions -->\\n              <div>\\n                <h4 style=\\\"clear:left; display: inline-block\\\">\\n                  <span data-bind=\\\"text: session.type\\\"></span>\\n                  <!-- ko if: typeof session.session_id != 'undefined' && session.session_id -->\\n                    <span data-bind=\\\"text: session.session_id\\\"></span>\\n                  <!-- /ko -->\\n                </h4>\\n                <div class=\\\"session-actions\\\">\\n                  <a class=\\\"inactive-action pointer\\\" title=\\\"\").concat(I18n('Re-create session'), \"\\\" rel=\\\"tooltip\\\" data-bind=\\\"click: $parent.restartSession.bind($parent)\\\">\\n                    <i class=\\\"fa fa-refresh\\\" data-bind=\\\"css: { 'fa-spin': loading }\\\"></i> \").concat(I18n('Re-create'), \"\\n                  </a>\\n                  <a class=\\\"inactive-action pointer margin-left-10\\\" title=\\\"\").concat(I18n('Close session'), \"\\\" rel=\\\"tooltip\\\" data-bind=\\\"click: $parent.closeSession.bind($parent)\\\">\\n                    <i class=\\\"fa fa-times\\\"></i> \").concat(I18n('Close'), \"\\n                  </a>\\n                  <!-- ko if: window.USE_DEFAULT_CONFIGURATION -->\\n                    <a class=\\\"inactive-action pointer margin-left-10\\\" title=\\\"\").concat(I18n('Save session settings as default'), \"\\\" rel=\\\"tooltip\\\" data-bind=\\\"click: saveDefaultUserProperties\\\"><i class=\\\"fa fa-save\\\"></i> \").concat(I18n('Set as default settings'), \"</a>\\n                  <!-- /ko -->\\n                  <!-- ko if: session.type === 'impala' && typeof session.http_addr != 'undefined' -->\\n                    <a class=\\\"margin-left-10\\\" data-bind=\\\"attr: { 'href': session.http_addr }\\\" target=\\\"_blank\\\">\\n                      <span data-bind=\\\"text: session.http_addr.replace(/^(https?):\\\\/\\\\//, '')\\\"></span> <i class=\\\"fa fa-external-link\\\"></i>\\n                    </a>\\n                  <!-- /ko -->\\n                </div>\\n                <!-- ko if: window.USE_DEFAULT_CONFIGURATION -->\\n                <div style=\\\"width:100%;\\\">\\n                  <!-- ko component: { name: 'property-selector', params: { properties: properties } } --><!-- /ko -->\\n                </div>\\n                <!-- /ko -->\\n              </div>\\n              <!-- /ko -->\\n            </fieldset>\\n          </form>\\n        </div>\\n      </div>\\n      <!-- /ko -->\\n    </div>\\n    <a class=\\\"pointer demi-modal-chevron\\\" style=\\\"position: absolute; bottom: 0\\\" data-bind=\\\"toggle: visible\\\"><i class=\\\"fa fa-chevron-up\\\"></i></a>\\n  </div>\\n</div>\\n\");\nvar EditableProperty = /*#__PURE__*/function () {\n  function EditableProperty(property) {\n    _classCallCheck(this, EditableProperty);\n    this.defaultValue = ko.observableArray(property.defaultValue);\n    this.help_text = ko.observable(property.help_text);\n    this.key = ko.observable(property.key);\n    this.multiple = ko.observable(property.multiple);\n    this.nice_name = ko.observable(property.nice_name);\n    this.type = ko.observable(property.type);\n    this.value = ko.observableArray(property.value);\n  }\n  return _createClass(EditableProperty, [{\n    key: \"getClean\",\n    value: function getClean() {\n      return komapping.toJS(this);\n    }\n  }]);\n}();\nvar EditableSession = /*#__PURE__*/function () {\n  function EditableSession(session) {\n    _classCallCheck(this, EditableSession);\n    this.session = session;\n    this.loading = ko.observable(false);\n    this.properties = ko.observableArray(this.session.properties.map(function (property) {\n      return new EditableProperty(property);\n    }));\n  }\n  return _createClass(EditableSession, [{\n    key: \"saveDefaultUserProperties\",\n    value: function saveDefaultUserProperties() {\n      apiHelper.saveConfiguration({\n        app: this.session.type,\n        properties: this.properties().map(function (property) {\n          return property.getClean();\n        }),\n        userId: window.LOGGED_USER_ID\n      });\n    }\n  }]);\n}();\nvar SessionPanel = /*#__PURE__*/function () {\n  function SessionPanel() {\n    var _this = this;\n    _classCallCheck(this, SessionPanel);\n    this.visible = ko.observable(false);\n    this.sessions = ko.observableArray();\n    this.activeTypeFilter = undefined;\n    huePubSub.subscribe(SESSION_PANEL_SHOW_EVENT, function (type) {\n      return _this.showSessions(type);\n    });\n  }\n\n  /**\n   *\n   * @param {String} typeFilter\n   * @return {Promise<void>}\n   */\n  return _createClass(SessionPanel, [{\n    key: \"showSessions\",\n    value: (function () {\n      var _showSessions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(typeFilter) {\n        var sessions;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.activeTypeFilter = typeFilter;\n              sessions = [];\n              if (!(typeFilter && sessionManager.hasSession(typeFilter))) {\n                _context.next = 10;\n                break;\n              }\n              _context.t0 = sessions;\n              _context.next = 6;\n              return sessionManager.getSession({\n                type: typeFilter\n              });\n            case 6:\n              _context.t1 = _context.sent;\n              _context.t0.push.call(_context.t0, _context.t1);\n              _context.next = 13;\n              break;\n            case 10:\n              _context.next = 12;\n              return sessionManager.getAllSessions();\n            case 12:\n              sessions = _context.sent;\n            case 13:\n              this.sessions(sessions.map(function (session) {\n                return new EditableSession(session);\n              }).sort(function (a, b) {\n                return a.session.type.localeCompare(b.session.type);\n              }));\n              this.visible(true);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function showSessions(_x) {\n        return _showSessions.apply(this, arguments);\n      }\n      return showSessions;\n    }()\n    /**\n     *\n     * @param {EditableSession} editableSession\n     * @return {Promise<void>}\n     */\n    )\n  }, {\n    key: \"restartSession\",\n    value: (function () {\n      var _restartSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(editableSession) {\n        var session;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              editableSession.loading(true);\n              session = editableSession.session; // Apply any changed properties\n              session.properties = editableSession.properties().map(function (editableProperty) {\n                return editableProperty.getClean();\n              });\n              _context2.next = 5;\n              return sessionManager.restartSession(session);\n            case 5:\n              _context2.next = 7;\n              return this.showSessions(this.activeTypeFilter);\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function restartSession(_x2) {\n        return _restartSession.apply(this, arguments);\n      }\n      return restartSession;\n    }()\n    /**\n     *\n     * @param {EditableSession} editableSession\n     * @return {Promise<void>}\n     */\n    )\n  }, {\n    key: \"closeSession\",\n    value: (function () {\n      var _closeSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(editableSession) {\n        var session;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              editableSession.loading(true);\n              session = editableSession.session;\n              _context3.next = 4;\n              return sessionManager.closeSession(session);\n            case 4:\n              _context3.next = 6;\n              return this.showSessions(this.activeTypeFilter);\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function closeSession(_x3) {\n        return _closeSession.apply(this, arguments);\n      }\n      return closeSession;\n    }())\n  }, {\n    key: \"saveDefaultUserProperties\",\n    value: function saveDefaultUserProperties(session) {}\n  }]);\n}();\ncomponentUtils.registerComponent(NAME, SessionPanel, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport ApiHelper from \"../../api/apiHelper\";\nimport componentUtils from \"./componentUtils\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../utils/i18n\";\nimport DisposableComponent from \"./DisposableComponent\";\nexport var SHOW_EVENT = 'show.share.gist.modal';\nexport var SHOWN_EVENT = 'share.gist.modal.shown';\n\n// prettier-ignore\nvar TEMPLATE = \"\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"\".concat(I18n('Close'), \"\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h2 class=\\\"modal-title\\\">\").concat(I18n('Shareable link'), \"</h2>\\n  </div>\\n  <div class=\\\"modal-body\\\">\\n    <div class=\\\"row-fluid\\\">\\n      <div class=\\\"input-append\\\">\\n        <form autocomplete=\\\"off\\\">\\n          <input id=\\\"gistLink\\\" style=\\\"width: 510px\\\" \").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, \" onfocus=\\\"this.select()\\\" data-bind=\\\"value: link\\\" type=\\\"text\\\" placeholder=\\\"\").concat(I18n('Link'), \"\\\" readonly=\\\"readonly\\\"/>\\n          <button class=\\\"btn\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" data-clipboard-target=\\\"#gistLink\\\" data-bind=\\\"clipboard\\\"><i class=\\\"fa fa-clipboard\\\"></i></button>\\n        </form>\\n      </div>\\n    </div>\\n    <!-- ko if: window.SHARE_TO_SLACK -->\\n    <label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-bind=\\\"checked: showSlackSection\\\"> \").concat(I18n('Share to Slack'), \" </input></label>\\n    <!-- ko if: showSlackSection -->\\n    <form class=\\\"form-horizontal\\\">\\n      <div class=\\\"control-group\\\">\\n        <label class=\\\"control-label\\\">\").concat(I18n('Message'), \"</label>\\n        <div class=\\\"controls\\\">\\n          <input type=\\\"text\\\" style=\\\"width: 245px\\\" data-bind=\\\"value: messageDescription, valueUpdate:'afterkeydown'\\\" placeholder=\\\"\").concat(I18n('(Optional)'), \"\\\"/>\\n        </div>\\n      </div>\\n      <div class=\\\"control-group\\\">\\n        <label class=\\\"control-label\\\">\").concat(I18n('Channel'), \"</label>\\n        <div class=\\\"controls\\\">\\n          <select class=\\\"input-xlarge\\\" data-bind=\\\"options: channels, optionsCaption: 'Choose...', value: selectedChannel\\\"></select>\\n          <button class=\\\"btn\\\" type=\\\"button\\\" data-dismiss=\\\"modal\\\" data-bind=\\\"click: postMessage\\\">\").concat(I18n('Send'), \"</button>\\n        </div>\\n      </div>\\n    </form>\\n  <!-- /ko -->\\n  <!-- /ko -->\\n  </div>\\n  <div class=\\\"modal-footer\\\">\\n    <a class=\\\"btn\\\" data-dismiss=\\\"modal\\\">\").concat(I18n('Close'), \"</a>\\n  </div>\\n\");\nvar ShareGistModal = /*#__PURE__*/function (_DisposableComponent) {\n  function ShareGistModal(params) {\n    var _this;\n    _classCallCheck(this, ShareGistModal);\n    _this = _callSuper(this, ShareGistModal);\n    _this.showSlackSection = ko.observable(false);\n    _this.link = ko.observable(params.link);\n    _this.channels = ko.observableArray(params.channels);\n    _this.selectedChannel = ko.observable('');\n    _this.messageDescription = ko.observable('');\n    return _this;\n  }\n  _inherits(ShareGistModal, _DisposableComponent);\n  return _createClass(ShareGistModal, [{\n    key: \"postMessage\",\n    value: function () {\n      var _postMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return ApiHelper.sendSlackMessageAsync({\n                channel: this.selectedChannel,\n                message: this.messageDescription() + '\\n' + this.link()\n              });\n            case 3:\n              _context.next = 9;\n              break;\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              console.warn('Failed posting message in Slack channel');\n              console.error(_context.t0);\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[0, 5]]);\n      }));\n      function postMessage() {\n        return _postMessage.apply(this, arguments);\n      }\n      return postMessage;\n    }()\n  }]);\n}(DisposableComponent);\ncomponentUtils.registerComponent('share-gist-modal', undefined, TEMPLATE).then(function () {\n  huePubSub.subscribe(SHOW_EVENT, /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(params) {\n      var $shareGistModal, data;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            $shareGistModal = $('#shareGistModal');\n            if ($shareGistModal.length) {\n              ko.cleanNode($shareGistModal[0]);\n              $shareGistModal.remove();\n            }\n            $shareGistModal = $('<div id=\"shareGistModal\" data-bind=\"descendantsComplete: descendantsComplete, component: { name: \\'share-gist-modal\\', params: params }\" data-keyboard=\"true\" class=\"modal hide fade\" tabindex=\"-1\"></div>');\n            $('body').append($shareGistModal);\n            data = {\n              params: new ShareGistModal(params),\n              descendantsComplete: function descendantsComplete() {\n                huePubSub.publish(SHOWN_EVENT);\n              }\n            };\n            ko.applyBindings(data, $shareGistModal[0]);\n            $shareGistModal.modal('show');\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n});","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport componentUtils from \"./componentUtils\";\nimport I18n from \"../../utils/i18n\";\nexport var NAME = 'sql-columns-table';\nvar TEMPLATE = \"\\n    <div class=\\\"context-popover-flex\\\">\\n      <div class=\\\"context-popover-flex-header\\\">\\n        <div class=\\\"context-popover-header\\\" style=\\\"display:inline-block;\\\">\".concat(I18n('Columns'), \" (<span data-bind=\\\"text: filteredColumns().length\\\"></span>)</div>\\n        <div class=\\\"context-popover-inline-autocomplete\\\">\\n          <div class=\\\"context-popover-asterisk-filter\\\">\\n            <!-- ko component: {\\n              name: 'inline-autocomplete',\\n              params: {\\n                querySpec: querySpec,\\n                facets: Object.keys(SQL_COLUMNS_KNOWN_FACET_VALUES),\\n                knownFacetValues: SQL_COLUMNS_KNOWN_FACET_VALUES,\\n                autocompleteFromEntries: autocompleteFromEntries\\n              }\\n            } --><!-- /ko -->\\n          </div>\\n        </div>\\n      </div>\\n      <div class=\\\"context-popover-flex-fill sql-columns-table\\\" style=\\\"position:relative; height: 100%; overflow-y: auto;\\\">\\n        <table id=\\\"sqlColumnsTable\\\" style=\\\"width: 100%\\\" class=\\\"table table-condensed table-nowrap\\\">\\n          <!-- ko if: filteredColumns().length !== 0 -->\\n          <thead>\\n          <tr>\\n            <th width=\\\"6%\\\">&nbsp;</th>\\n            <!-- ko if: typeof filteredColumns()[0].table === 'undefined' -->\\n            <th width=\\\"60%\\\">\").concat(I18n('Name'), \"</th>\\n            <!-- /ko -->\\n            <!-- ko if: typeof filteredColumns()[0].table !== 'undefined' -->\\n            <th width=\\\"40%\\\">\").concat(I18n('Name'), \"</th>\\n            <th width=\\\"20%\\\">\").concat(I18n('Table'), \"</th>\\n            <!-- /ko -->\\n            <th width=\\\"34%\\\">\").concat(I18n('Type'), \"</th>\\n            <th width=\\\"6%\\\">&nbsp;</th>\\n          </tr>\\n          </thead>\\n          <!-- /ko -->\\n          <tbody data-bind=\\\"foreachVisible: { data: filteredColumns, minHeight: 29, container: '.sql-columns-table', pubSubDispose: 'context.popover.dispose' }\\\">\\n          <tr>\\n            <!-- ko if: typeof selected === 'undefined' -->\\n            <td data-bind=\\\"text: $index()+$indexOffset()+1\\\"></td>\\n            <!-- /ko -->\\n            <!-- ko if: typeof selected !== 'undefined' -->\\n            <td class=\\\"center\\\" data-bind=\\\"multiCheckForeachVisible: { entries: $parent.filteredColumns, selectedAttr: 'selected' }\\\" style=\\\"cursor: default;\\\">\\n              <div class=\\\"hue-checkbox fa\\\" data-bind=\\\"css: {'fa-check': selected }\\\"></div>\\n            </td>\\n\\n            <!-- /ko -->\\n            <td style=\\\"overflow: hidden;\\\">\\n              <!-- ko if: $parent.scrollToColumns -->\\n              <a href=\\\"javascript:void(0)\\\" class=\\\"column-selector\\\" data-bind=\\\"click: function() { huePubSub.publish('context.popover.scroll.to.column', name); }\\\" title=\\\"\").concat(I18n('Show sample'), \"\\\"><span data-bind=\\\"text: name\\\"></span> <i class=\\\"fa fa-key\\\" data-bind=\\\"visible: typeof primary_key !== 'undefined' && primary_key === 'true'\\\"></i></a>\\n              <!-- /ko -->\\n              <!-- ko ifnot: $parent.scrollToColumns -->\\n              <span data-bind=\\\"text: name\\\"></span> <i class=\\\"fa fa-key\\\" data-bind=\\\"visible: typeof primary_key !== 'undefined' && primary_key === 'true'\\\"></i>\\n              <!-- /ko -->\\n            </td>\\n            <!-- ko if: typeof table !== 'undefined' -->\\n            <td><span data-bind=\\\"text: table\\\"></span></td>\\n            <!-- /ko -->\\n            <td><span data-bind=\\\"text: type, attr: { 'title': extendedType }, tooltip: { placement: 'bottom' }\\\"></span></td>\\n            <td><i class=\\\"snippet-icon fa fa-question-circle\\\" data-bind=\\\"visible: comment, attr: { 'title': comment }, tooltip: { placement: 'bottom' }\\\"></i></td>\\n          </tr>\\n          </tbody>\\n        </table>\\n        <div class=\\\"context-popover-empty-columns\\\" data-bind=\\\"visible: filteredColumns().length === 0\\\">\").concat(I18n('No columns found'), \"</div>\\n      </div>\\n    </div>\\n\");\nvar SqlColumnsTable = /*#__PURE__*/_createClass(function SqlColumnsTable(params) {\n  _classCallCheck(this, SqlColumnsTable);\n  var self = this;\n  self.columns = params.columns;\n  self.scrollToColumns = typeof params.scrollToColumns !== 'undefined' ? params.scrollToColumns : true;\n  self.searchInput = ko.observable('');\n  self.searchFocus = ko.observable(false);\n  self.querySpec = ko.observable();\n  self.filteredColumns = ko.pureComputed(function () {\n    if (!self.querySpec() || self.querySpec().query === '') {\n      return self.columns;\n    }\n    var facets = self.querySpec().facets;\n    var isFacetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL\n    var isTextMatch = !self.querySpec().text || self.querySpec().text.length === 0;\n    return self.columns.filter(function (column) {\n      var match = true;\n      if (!isFacetMatch) {\n        match = !!facets['type'][column.type];\n      }\n      if (match && !isTextMatch) {\n        match = self.querySpec().text.every(function (text) {\n          return column.name.toLowerCase().indexOf(text.toLowerCase()) !== -1 || column.comment.toLowerCase().indexOf(text.toLowerCase()) !== -1;\n        });\n      }\n      return match;\n    });\n  });\n  self.autocompleteFromEntries = function (nonPartial, partial) {\n    var result = [];\n    var partialLower = partial.toLowerCase();\n    self.columns.forEach(function (column) {\n      if (column.name.toLowerCase().indexOf(partialLower) === 0) {\n        result.push(nonPartial + partial + column.name.substring(partial.length));\n      }\n    });\n    return result;\n  };\n});\ncomponentUtils.registerComponent(NAME, SqlColumnsTable, TEMPLATE);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport ace from 'ext/aceHelper';\nimport SolrFormulaAutocompleter from \"./solrFormulaAutocompleter\";\nimport SolrQueryAutocompleter from \"./solrQueryAutocompleter\";\nimport { findEditorConnector } from 'config/hueConfig';\nimport AceLocationHandler from \"../../bindings/ace/aceLocationHandler\";\nimport componentUtils from \"../componentUtils\";\nimport { registerHueWorkers } from 'sql/workers/hueWorkerHandler';\nimport SqlAutocompleter from \"../../../sql/sqlAutocompleter\";\nimport AceGutterHandler from \"../../bindings/ace/aceGutterHandler\";\nimport UUID from 'utils/string/UUID';\nimport { hueLocalStorage } from 'utils/storageUtils';\nexport var NAME = 'hue-simple-ace-editor';\nexport var MULTI_NAME = 'hue-simple-ace-editor-multi';\nvar SIMPLE_ACE_TEMPLATE = \"\\n  <div class=\\\"simple-ace-single-line\\\">\\n    <div class=\\\"ace-clearable\\\" data-bind=\\\"css: { 'visible': value() !== '' }, click: clear\\\"><i class=\\\"fa fa-times-circle\\\"></i></div>\\n    <div class=\\\"ace-editor\\\"></div>\\n  </div>\\n  <!-- ko if: autocompleter !== null -->\\n  <!-- ko component: { name: 'hueAceAutocompleter', params: { editor: ace, autocompleter: autocompleter } } --><!-- /ko -->\\n  <!-- /ko -->\\n\";\nvar SIMPLE_ACE_MULTI_TEMPLATE = \"\\n  <div class=\\\"simple-ace-multi-line\\\">\\n    <div class=\\\"ace-editor\\\"></div>\\n  </div>\\n  <!-- ko if: autocompleter !== null -->\\n  <!-- ko component: { name: 'hueAceAutocompleter', params: { editor: ace, autocompleter: autocompleter } } --><!-- /ko -->\\n  <!-- /ko -->\\n\";\nvar AVAILABLE_AUTOCOMPLETERS = {\n  solrFormula: SolrFormulaAutocompleter,\n  solrQuery: SolrQueryAutocompleter,\n  impalaQuery: SqlAutocompleter,\n  hiveQuery: SqlAutocompleter,\n  impala: SqlAutocompleter,\n  hive: SqlAutocompleter\n};\nvar SimpleAceEditor = /*#__PURE__*/function () {\n  function SimpleAceEditor(params, element) {\n    _classCallCheck(this, SimpleAceEditor);\n    var $element = $(element);\n    var self = this;\n    self.value = params.value;\n    self.parsedValue = params.parsedValue;\n    self.ace = ko.observable();\n    self.disposeFunctions = [];\n    self.singleLine = !!params.singleLine;\n    var aceOptions = params.aceOptions || {};\n    if (!$element.attr('id')) {\n      $element.attr('id', UUID());\n    }\n    var _editor = ace.edit($element.find('.ace-editor')[0]);\n    if (params.mode) {\n      _editor.getSession().setMode('ace/mode/' + ko.unwrap(params.mode));\n    }\n    _editor.$blockScrolling = Infinity;\n    _editor.setTheme(hueLocalStorage('hue.ace.theme') || 'ace/theme/hue');\n    self.ace(_editor);\n    if (params.activeExecutable) {\n      _editor.commands.addCommand({\n        name: 'execute',\n        bindKey: {\n          win: 'Ctrl-Enter',\n          mac: 'Command-Enter|Ctrl-Enter'\n        },\n        exec: function () {\n          var _exec = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n            var executable;\n            return _regeneratorRuntime().wrap(function _callee$(_context) {\n              while (1) switch (_context.prev = _context.next) {\n                case 0:\n                  _editor._signal('hideAutocomplete');\n                  executable = params.activeExecutable();\n                  if (!executable) {\n                    _context.next = 6;\n                    break;\n                  }\n                  _context.next = 5;\n                  return executable.reset();\n                case 5:\n                  executable.execute();\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }, _callee);\n          }));\n          function exec() {\n            return _exec.apply(this, arguments);\n          }\n          return exec;\n        }()\n      });\n    }\n    if (params.autocomplete && ko.unwrap(params.autocomplete)) {\n      var autocomplete = ko.unwrap(params.autocomplete);\n      var connector = ko.unwrap(autocomplete.connector);\n      if (!connector || !connector.id) {\n        var connectorId = autocomplete.type.indexOf('Query') !== -1 ? autocomplete.type.replace('Query', '') : autocomplete.type;\n        connector = findEditorConnector(function (connector) {\n          return connector.id === connectorId;\n        });\n\n        // TODO: Temporary fix for dashboard\n        if (!connector) {\n          connector = {\n            id: connectorId\n          };\n        }\n      }\n      var snippet = {\n        autocompleteSettings: {\n          temporaryOnly: params.temporaryOnly\n        },\n        type: ko.observable(connector.id),\n        dialect: ko.observable(connector.dialect),\n        connector: ko.observable(connector),\n        id: ko.observable($element.attr('id')),\n        namespace: params.namespace,\n        compute: params.compute,\n        database: ko.isObservable(params.database) ? params.database : ko.observable(params.database || 'default'),\n        availableDatabases: params.availableDatabases ? params.availableDatabases : ko.observableArray([params.database && params.database() ? params.database() : 'default']),\n        positionStatement: ko.observable({\n          location: {\n            first_line: 1,\n            last_line: 1,\n            first_column: 0,\n            last_column: _editor.getValue().length\n          }\n        }),\n        whenContextSet: function whenContextSet() {\n          var promise = $.Deferred().resolve().promise();\n          promise.dispose = function () {};\n          return promise;\n        },\n        isSqlDialect: ko.observable(connector.is_sql),\n        aceCursorPosition: ko.observable(),\n        inFocus: ko.observable()\n      };\n      if (connector.is_sql && !params.disableWorkers) {\n        registerHueWorkers();\n        var aceLocationHandler = new AceLocationHandler({\n          editor: _editor,\n          editorId: $element.attr('id'),\n          snippet: snippet\n        });\n        var aceGutterHandler = new AceGutterHandler({\n          editor: _editor,\n          editorId: $element.attr('id'),\n          executor: snippet.executor\n        });\n        self.disposeFunctions.push(function () {\n          aceLocationHandler.dispose();\n          aceGutterHandler.dispose();\n        });\n        aceLocationHandler.attachSqlSyntaxWorker();\n      }\n      var focusListener = _editor.on('focus', function () {\n        snippet.inFocus(true);\n      });\n      var blurListener = _editor.on('blur', function () {\n        snippet.inFocus(false);\n      });\n      self.disposeFunctions.push(function () {\n        _editor.off('focus', focusListener);\n        _editor.off('blur', blurListener);\n      });\n      var autocompleteArgs = {\n        editor: function editor() {\n          return _editor;\n        },\n        snippet: snippet,\n        fixedPrefix: params.fixedPrefix,\n        fixedPostfix: params.fixedPostfix,\n        support: autocomplete.support\n      };\n      var AutocompleterClass = AVAILABLE_AUTOCOMPLETERS[autocomplete.type] || SqlAutocompleter;\n      self.autocompleter = new AutocompleterClass(autocompleteArgs);\n    } else {\n      self.autocompleter = null;\n    }\n    if (self.singleLine) {\n      aceOptions = $.extend(aceOptions, {\n        fontSize: '13px',\n        maxLines: 1,\n        // make it 1 line\n        autoScrollEditorIntoView: true,\n        highlightActiveLine: false,\n        printMargin: false,\n        showGutter: false\n      });\n    } else {\n      aceOptions = $.extend(aceOptions, {\n        maxLines: params.lines || 2\n      });\n    }\n    if (params.autocomplete) {\n      aceOptions = $.extend(aceOptions, {\n        enableLiveAutocompletion: true,\n        enableBasicAutocompletion: true\n      });\n    }\n    _editor.setOptions(aceOptions);\n    if (params.onExec) {\n      var bindPrefix = params.singleLine ? 'Enter|Shift-Enter|' : '';\n      _editor.commands.addCommand({\n        name: 'enter',\n        bindKey: {\n          win: bindPrefix + 'Ctrl-Enter',\n          mac: bindPrefix + 'Ctrl-Enter|Command-Enter'\n        },\n        exec: params.onExec\n      });\n    }\n    if (params.singleLine) {\n      _editor.renderer.screenToTextCoordinates = function (x, y) {\n        var pos = this.pixelToScreenCoordinates(x, y);\n        return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength() - 1, Math.max(pos.row, 0)), Math.max(pos.column, 0));\n      };\n      if (!params.onExec) {\n        _editor.commands.bindKey('Enter|Shift-Enter', 'null');\n      }\n      var pasteListener = _editor.on('paste', function (e) {\n        e.text = e.text.replace(/[\\r\\n]+/g, ' ');\n      });\n      var changeListener = _editor.on('change', function (e) {\n        if (e.action === 'insert' && (e.start.row !== 0 || e.end.row !== 0)) {\n          _editor.setValue(_editor.getValue().replace(/[\\r\\n]+/g, ' '));\n          _editor.clearSelection();\n        }\n      });\n      self.disposeFunctions.push(function () {\n        _editor.off('paste', pasteListener);\n        _editor.off('change', changeListener);\n      });\n    }\n    if (self.value()) {\n      _editor.setValue(self.value());\n      _editor.clearSelection();\n    }\n    if (params.placeHolder && ko.unwrap(params.placeHolder)) {\n      var placeHolderVisible = false;\n      var $placeHolder = $('<div>').text(ko.unwrap(params.placeHolder)).addClass('ace_invisible ace_emptyMessage');\n      if (_editor.getValue().length === 0) {\n        $placeHolder.appendTo(_editor.renderer.scroller);\n        placeHolderVisible = true;\n      }\n      var inputListener = _editor.on('input', function () {\n        if (_editor.getValue().length > 0 && placeHolderVisible) {\n          $placeHolder.remove();\n          placeHolderVisible = false;\n        } else if (_editor.getValue().length === 0 && !placeHolderVisible) {\n          $placeHolder.appendTo(_editor.renderer.scroller);\n          placeHolderVisible = true;\n        }\n      });\n      self.disposeFunctions.push(function () {\n        _editor.off('input', inputListener);\n      });\n    }\n    if (params.autocomplete) {\n      var AceAutocomplete = ace.require('ace/autocomplete').Autocomplete;\n      if (!_editor.completer) {\n        _editor.completer = new AceAutocomplete();\n      }\n      _editor.completer.exactMatch = false;\n      _editor.useHueAutocompleter = true;\n      var afterExecListener = _editor.commands.on('afterExec', function (e) {\n        if (e.command.name === 'insertstring') {\n          var triggerAutocomplete = false;\n          if (/\\S+\\(\\)$/.test(e.args)) {\n            _editor.moveCursorTo(_editor.getCursorPosition().row, _editor.getCursorPosition().column - 1);\n            triggerAutocomplete = true;\n          } else if (params.autocomplete.type === 'solrQuery' && /:$/.test(e.args)) {\n            triggerAutocomplete = true;\n          }\n          if (triggerAutocomplete) {\n            window.setTimeout(function () {\n              _editor.execCommand('startAutocomplete');\n            }, 1);\n          }\n        }\n      });\n      self.disposeFunctions.push(function () {\n        _editor.commands.off('afterExec', afterExecListener);\n      });\n    }\n    var parseThrottle = -1;\n    var valueUpdateListener = _editor.on('input', function () {\n      self.value(_editor.getValue());\n      if (self.parsedValue && self.autocompleter && self.autocompleter.parse) {\n        window.clearTimeout(parseThrottle);\n        parseThrottle = window.setTimeout(function () {\n          var parseResult = self.autocompleter.parse(_editor.getValue());\n          if (parseResult) {\n            self.parsedValue(parseResult.parsedValue);\n          } else {\n            // TODO: What to do when we can't parse?\n            self.parsedValue(_editor.getValue());\n          }\n        }, 200);\n      }\n    });\n    self.disposeFunctions.push(function () {\n      _editor.off('input', valueUpdateListener);\n    });\n  }\n  return _createClass(SimpleAceEditor, [{\n    key: \"clear\",\n    value: function clear() {\n      var self = this;\n      if (self.ace()) {\n        self.ace().setValue('');\n      } else {\n        self.value('');\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var self = this;\n      self.disposeFunctions.forEach(function (dispose) {\n        dispose();\n      });\n    }\n  }]);\n}(); // Ace requires that the child to clone is first child, so we need separate components for single line & multi line\ncomponentUtils.registerComponent(NAME, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new SimpleAceEditor(params, componentInfo.element);\n  }\n}, SIMPLE_ACE_TEMPLATE);\ncomponentUtils.registerComponent(MULTI_NAME, {\n  createViewModel: function createViewModel(params, componentInfo) {\n    return new SimpleAceEditor(params, componentInfo.element);\n  }\n}, SIMPLE_ACE_MULTI_TEMPLATE);","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nimport HueColors from \"../../../utils/hueColors\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport solrFormulaParser from \"../../../parse/solrFormulaParser\";\nimport sqlUtils from 'sql/sqlUtils';\nvar normalizedColors = HueColors.getNormalizedColors();\n\n// TODO: Autocomplete colors should be global\nvar COLORS = {\n  ALL: HueColors.BLUE,\n  FIELD: normalizedColors['green'][2],\n  FUNCTION: normalizedColors['purple-gray'][3],\n  KEYWORD: normalizedColors['blue'][4],\n  SAMPLE: normalizedColors['purple'][5]\n};\nvar SOLR_FUNCTIONS = {\n  abs: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'abs(x)',\n    draggable: 'abs()',\n    description: 'Returns the absolute value of the specified value or function.'\n  },\n  and: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'boolean',\n      multiple: true\n    }]],\n    signature: 'and(x, y, ...)',\n    draggable: 'and()',\n    description: 'Returns a value of true if and only if all of its operands evaluate to true.'\n  },\n  childfield: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'childfield(x)',\n    draggable: 'childfield()',\n    description: 'Returns the value of the given field for one of the matched child docs when searching by {!parent}. It can be used only in sort parameter.'\n  },\n  def: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'def(field, default)',\n    draggable: 'def()',\n    description: 'def is short for default. Returns the value of field \"field\", or if the field does not exist, returns the default value specified. and yields the first value where exists()==true.)'\n  },\n  div: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'div(x, y)',\n    draggable: 'div()',\n    description: 'Divides one value or function by another. div(x,y) divides x by y.'\n  },\n  dist: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'dist(power, x, y, 0, 0)',\n    draggable: 'dist()',\n    description: 'Return the distance between two vectors (points) in an n-dimensional space. Takes in the power, plus two or more ValueSource instances and calculates the distances between the two vectors. Each ValueSource must be a number. There must be an even number of ValueSource instances passed in and the method assumes that the first half represent the first vector and the second half represent the second vector.'\n  },\n  docfreq: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'docfreq(field, value)',\n    draggable: 'docfreq()',\n    description: \"Returns the number of documents that contain the term in the field. This is a constant (the same value for all documents in the index).\\n\\n You can quote the term if it's more complex, or do parameter substitution for the term value.\"\n  },\n  exists: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'exists(x)',\n    draggable: 'exists()',\n    description: 'Returns TRUE if any member of the field exists.'\n  },\n  eq: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'eq(x, y)',\n    draggable: 'eq()',\n    description: 'Equal, returns TRUE if x is equal to y'\n  },\n  field: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T',\n      optional: true\n    }]],\n    signature: 'field(field, minOrMax)',\n    draggable: 'field()',\n    description: 'Returns the numeric docValues or indexed value of the field with the specified name. In its simplest (single argument) form, this function can only be used on single valued fields, and can be called using the name of the field as a string, or for most conventional field names simply use the field name by itself with out using the field(...) syntax.\\n\\nWhen using docValues, an optional 2nd argument can be specified to select the \"min\" or \"max\" value of multivalued fields.\\n\\n0 is returned for documents without a value in the field.'\n  },\n  gt: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'gt(x, y)',\n    draggable: 'gt()',\n    description: 'Greater than, returns TRUE if x is greater than y'\n  },\n  gte: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'gte(x, y)',\n    draggable: 'gte()',\n    description: 'Greater than or equal, returns TRUE if x is greater than or equal to y'\n  },\n  hsin: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'hsin(2, true, x, y, 0, 0)',\n    draggable: 'hsin()',\n    description: 'The Haversine distance calculates the distance between two points on a sphere when traveling along the sphere. The values must be in radians. hsin also take a Boolean argument to specify whether the function should convert its output to radians.'\n  },\n  idf: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'idf(field, str)',\n    draggable: 'idf()',\n    description: 'Inverse document frequency; a measure of whether the term is common or rare across all documents. Obtained by dividing the total number of documents by the number of documents containing the term, and then taking the logarithm of that quotient. See also tf.'\n  },\n  \"if\": {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'if(test, val1, val2)',\n    draggable: 'if()',\n    description: 'Enables conditional function queries. In if(test,value1,value2): \\n- test is or refers to a logical value or expression that returns a logical value (TRUE or FALSE).\\n- value1 is the value that is returned by the function if test yields TRUE.\\n -value2 is the value that is returned by the function if test yields FALSE.\\n\\nAn expression can be any function which outputs boolean values, or even functions returning numeric values, in which case value 0 will be interpreted as false, or strings, in which case empty string is interpreted as false.'\n  },\n  linear: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'linear(x, m, c)',\n    draggable: 'linear()',\n    description: 'Implements m*x+c where m and c are constants and x is an arbitrary function. This is equivalent to sum(product(m,x),c), but slightly more efficient as it is implemented as a single function.'\n  },\n  log: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'log(x)',\n    draggable: 'log()',\n    description: 'Returns the log base 10 of the specified function.'\n  },\n  lt: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'lt(x, y)',\n    draggable: 'lt()',\n    description: 'Less than, returns TRUE if x is less than y'\n  },\n  lte: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'lte(x, y)',\n    draggable: 'lte()',\n    description: 'Less than or equal, returns TRUE if x is less than or equal to y'\n  },\n  map: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'map(x, min, max, target)',\n    draggable: 'map()',\n    description: 'Maps any values of an input function x that fall within min and max inclusive to the specified target. The arguments min and max must be constants. The arguments target and default can be constants or functions. If the value of x does not fall between min and max, then either the value of x is returned, or a default value is returned if specified as a 5th argument.'\n  },\n  max: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'max(x, y, ...)',\n    draggable: 'max()',\n    description: 'Returns the maximum numeric value of multiple nested functions or constants, which are specified as arguments: max(x,y,...). The max function can also be useful for \"bottoming out\" another function or field at some specified constant.'\n  },\n  maxdoc: {\n    returnTypes: ['T'],\n    arguments: [],\n    signature: 'maxdoc()',\n    draggable: 'maxdoc()',\n    description: 'Returns the number of documents in the index, including those that are marked as deleted but have not yet been purged. This is a constant (the same value for all documents in the index).'\n  },\n  min: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'min(x, y, ...)',\n    draggable: 'min()',\n    description: 'Returns the minimum numeric value of multiple nested functions of constants, which are specified as arguments: min(x,y,...). The min function can also be useful for providing an \"upper bound\" on a function using a constant.'\n  },\n  ms: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'ms(x, y, ...)',\n    draggable: 'ms()',\n    description: 'Returns milliseconds of difference between its arguments. Dates are relative to the Unix or POSIX time epoch, midnight, January 1, 1970 UTC. Arguments may be the name of an indexed TrieDateField, or date math based on a constant date or NOW.\\n\\n- ms(): Equivalent to ms(NOW), number of milliseconds since the epoch.\\n- ms(a): Returns the number of milliseconds since the epoch that the argument represents.\\n- ms(a,b) : Returns the number of milliseconds that b occurs before a (that is, a - b)'\n  },\n  mul: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'mul(x, y, ...)',\n    draggable: 'mul()',\n    description: 'Returns the product of multiple values or functions, which are specified in a comma-separated list. Same as the product function.'\n  },\n  norm: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'norm(field)',\n    draggable: 'norm()',\n    description: 'Returns the \"norm\" stored in the index for the specified field. This is the product of the index time boost and the length normalization factor, according to the Similarity for the field.'\n  },\n  not: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'boolean'\n    }]],\n    signature: 'not(x)',\n    draggable: 'not()',\n    description: 'The logically negated value of the wrapped function.'\n  },\n  numdocs: {\n    returnTypes: ['T'],\n    arguments: [],\n    signature: 'numdocs()',\n    draggable: 'numdocs()',\n    description: 'Returns the number of documents in the index, not including those that are marked as deleted but have not yet been purged. This is a constant (the same value for all documents in the index).'\n  },\n  or: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'boolean',\n      multiple: true\n    }]],\n    signature: 'or(x, y)',\n    draggable: 'or()',\n    description: 'A logical disjunction.'\n  },\n  ord: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'ord(field)',\n    draggable: 'ord()',\n    description: 'Returns the ordinal of the indexed field value within the indexed list of terms for that field in Lucene index order (lexicographically ordered by unicode value), starting at 1. In other words, for a given field, all values are ordered lexicographically; this function then returns the offset of a particular value in that ordering. The field must have a maximum of one value per document (not multi-valued). 0 is returned for documents without a value in the field.'\n  },\n  payload: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'payload(payloaded_field_dpf, term, 0.0, first)',\n    draggable: 'payload()',\n    description: 'Returns the float value computed from the decoded payloads of the term specified. The return value is computed using the min, max, or average of the decoded payloads. A special first function can be used instead of the others, to short-circuit term enumeration and return only the decoded payload of the first term. The field specified must have float or integer payload encoding capability (via DelimitedPayloadTokenFilter or NumericPayloadTokenFilter). If no payload is found for the term, the default value is returned.'\n  },\n  pow: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'pow(x, y)',\n    draggable: 'pow()',\n    description: 'Raises the specified base to the specified power. pow(x,y) raises x to the power of y.'\n  },\n  product: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'product(x, y, ...)',\n    draggable: 'product()',\n    description: 'Returns the product of multiple values or functions, which are specified in a comma-separated list. mul(...) may also be used as an alias for this function.'\n  },\n  query: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T',\n      optional: true\n    }]],\n    signature: 'query(subquery, default)',\n    draggable: 'query()',\n    description: 'Returns the score for the given subquery, or the default value for documents not matching the query. Any type of subquery is supported through either parameter de-referencing $otherparam or direct specification of the query string in the Local Parameters through the v key.'\n  },\n  recip: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }, {\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'recip(x, m, a, b)',\n    draggable: 'recip()',\n    description: 'Performs a reciprocal function with recip(x,m,a,b) implementing a/(m*x+b) where m,a,b are constants, and x is any arbitrarily complex function.\\n\\nWhen a and b are equal, and x>=0, this function has a maximum value of 1 that drops as x increases. Increasing the value of a and b together results in a movement of the entire function to a flatter part of the curve. These properties can make this an ideal function for boosting more recent documents when x is rord(datefield).'\n  },\n  rord: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'rord(x)',\n    draggable: 'rord()',\n    description: 'Returns the reverse ordering of that returned by ord.'\n  },\n  scale: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'scale(x, minTarget, maxTarget)',\n    draggable: 'scale()',\n    description: 'Scales values of the function x such that they fall between the specified minTarget and maxTarget inclusive. The current implementation traverses all of the function values to obtain the min and max, so it can pick the correct scale.\\n\\nThe current implementation cannot distinguish when documents have been deleted or documents that have no value. It uses 0.0 values for these cases. This means that if values are normally all greater than 0.0, one can still end up with 0.0 as the min value to map from. In these cases, an appropriate map() function could be used as a workaround to change 0.0 to a value in the real range, as shown here: scale(map(x,0,0,5),1,2).'\n  },\n  sqedist: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'sqedist(x_td, y_td, 0, 0)',\n    draggable: 'sqedist()',\n    description: 'The Square Euclidean distance calculates the 2-norm (Euclidean distance) but does not take the square root, thus saving a fairly expensive operation. It is often the case that applications that care about Euclidean distance do not need the actual distance, but instead can use the square of the distance. There must be an even number of ValueSource instances passed in and the method assumes that the first half represent the first vector and the second half represent the second vector.'\n  },\n  sqrt: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'sqrt(x)',\n    draggable: 'sqrt()',\n    description: 'Returns the square root of the specified value or function.'\n  },\n  strdist: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'strdist(string1, string2, distance_measure)',\n    draggable: 'strdist()',\n    description: \"Calculate the distance between two strings. Uses the Lucene spell checker StringDistance interface and supports all of the implementations available in that package, plus allows applications to plug in their own via Solr's resource loading capabilities. strdist takes (string1, string2, distance measure).\\n\\nPossible values for distance measure are:\\n- jw: Jaro-Winkler\\n- edit: Levenstein or Edit distance\\n- ngram: The NGramDistance, if specified, can optionally pass in the ngram size too. Default is 2.\\n- FQN: Fully Qualified class Name for an implementation of the StringDistance interface. Must have a no-arg constructor.\"\n  },\n  sub: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'sub(x, y)',\n    draggable: 'sub()',\n    description: 'Returns x-y from sub(x,y).'\n  },\n  sum: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'sum(x, y, ...)',\n    draggable: 'sum()',\n    description: 'Returns the sum of multiple values or functions, which are specified in a comma-separated list. add(...) may be used as an alias for this function'\n  },\n  sumtotaltermfreq: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'sumtotaltermfreq(field)',\n    draggable: 'sumtotaltermfreq()',\n    description: 'Returns the sum of totaltermfreq values for all terms in the field in the entire index (i.e., the number of indexed tokens for that field). (Aliases sumtotaltermfreq to sttf.)'\n  },\n  termfreq: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'termfreq(field, term)',\n    draggable: 'termfreq()',\n    description: 'Returns the number of times the term appears in the field for that document.'\n  },\n  tf: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'tf(field, term)',\n    draggable: 'tf()',\n    description: 'Term frequency; returns the term frequency factor for the given term, using the Similarity for the field. The tf-idf value increases proportionally to the number of times a word appears in the document, but is offset by the frequency of the word in the document, which helps to control for the fact that some words are generally more common than others. See also idf.'\n  },\n  top: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'top(x)',\n    draggable: 'top()',\n    description: 'Causes the function query argument to derive its values from the top-level IndexReader containing all parts of an index. For example, the ordinal of a value in a single segment will be different from the ordinal of that same value in the complete index.'\n  },\n  totaltermfreq: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }, {\n      type: 'T'\n    }]],\n    signature: 'totaltermfreq(field, term)',\n    draggable: 'totaltermfreq()',\n    description: 'Returns the number of times the term appears in the field in the entire index. (Aliases totaltermfreq to ttf.)'\n  },\n  xor: {\n    returnTypes: ['boolean'],\n    arguments: [[{\n      type: 'boolean',\n      multiple: true\n    }]],\n    signature: 'xor(x, y)',\n    draggable: 'xor()',\n    description: 'Logical exclusive disjunction, or one or the other but not both.'\n  }\n};\nvar SOLR_AGGREGATE_FUNCTIONS = {\n  avg: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'avg(x)',\n    draggable: 'avg()',\n    description: 'Average of numeric values.'\n  },\n  hll: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'hll(x)',\n    draggable: 'hll()',\n    description: 'The number of unique values using the HyperLogLog algorithm.'\n  },\n  max: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'max(x)',\n    draggable: 'max()',\n    description: 'The maximum value.'\n  },\n  min: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'min(x)',\n    draggable: 'min()',\n    description: 'The minimum value.'\n  },\n  percentile: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T',\n      multiple: true\n    }]],\n    signature: 'percentile(x, y, z, ...)',\n    draggable: 'percentile()',\n    description: 'Calculates the percentiles.'\n  },\n  stddev: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'stddev(x)',\n    draggable: 'stddev()',\n    description: 'Calculates standard deviation (Solr 6.6+).'\n  },\n  sum: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'sum(x)',\n    draggable: 'sum()',\n    description: 'The sum of numeric values.'\n  },\n  sumsq: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'sumsq(x)',\n    draggable: 'sumsq()',\n    description: 'The sum of squares.'\n  },\n  unique: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'unique(x)',\n    draggable: 'unique()',\n    description: 'The number of unique values (count distinct).'\n  },\n  variance: {\n    returnTypes: ['T'],\n    arguments: [[{\n      type: 'T'\n    }]],\n    signature: 'variance(x)',\n    draggable: 'variance()',\n    description: 'Calculates variance (Solr 6.6+).'\n  }\n};\nvar CATEGORIES = {\n  ALL: {\n    id: 'all',\n    color: COLORS.ALL,\n    label: I18n('All')\n  },\n  FIELD: {\n    id: 'field',\n    weight: 1000,\n    color: COLORS.FIELD,\n    label: I18n('Fields'),\n    detailsTemplate: 'solr-field'\n  },\n  FUNCTION: {\n    id: 'function',\n    weight: 900,\n    color: COLORS.FUNCTION,\n    label: I18n('Functions'),\n    detailsTemplate: 'udf'\n  }\n};\nvar SolrFormulaSuggestions = /*#__PURE__*/function () {\n  function SolrFormulaSuggestions(fieldAccessor) {\n    _classCallCheck(this, SolrFormulaSuggestions);\n    var self = this;\n    self.entries = ko.observableArray();\n    self.fieldAccessor = fieldAccessor;\n    self.filtered = ko.pureComputed(function () {\n      var result = self.entries();\n      if (self.filter()) {\n        result = sqlUtils.autocompleteFilter(self.filter(), result);\n        huePubSub.publish('hue.ace.autocompleter.match.updated');\n      }\n      sqlUtils.sortSuggestions(result, self.filter(), self.sortOverride);\n      return result;\n    });\n    self.availableCategories = ko.pureComputed(function () {\n      // TODO: Implement autocomplete logic\n      return [CATEGORIES.ALL];\n    });\n    self.loading = ko.observable(false);\n    self.filter = ko.observable();\n    self.cancelRequests = function () {};\n  }\n  return _createClass(SolrFormulaSuggestions, [{\n    key: \"update\",\n    value: function update(parseResult) {\n      var self = this;\n      var syncEntries = [];\n      if (parseResult.suggestFields) {\n        self.fieldAccessor().forEach(function (field) {\n          var type = field.type();\n          if (type.indexOf('<') !== -1) {\n            type = type.substring(0, type.indexOf('<'));\n          }\n          syncEntries.push({\n            category: CATEGORIES.FIELD,\n            value: field.name(),\n            meta: type,\n            weightAdjust: 0,\n            popular: ko.observable(false),\n            details: field\n          });\n        });\n      }\n      if (parseResult.suggestFunctions) {\n        Object.keys(SOLR_FUNCTIONS).forEach(function (name) {\n          syncEntries.push({\n            category: CATEGORIES.FUNCTION,\n            value: name + '()',\n            meta: SOLR_FUNCTIONS[name].returnTypes.join('|'),\n            weightAdjust: 0,\n            // Add when we type aware\n            popular: ko.observable(false),\n            details: SOLR_FUNCTIONS[name]\n          });\n        });\n      }\n      if (parseResult.suggestAggregateFunctions) {\n        Object.keys(SOLR_AGGREGATE_FUNCTIONS).forEach(function (name) {\n          syncEntries.push({\n            category: CATEGORIES.FUNCTION,\n            value: name + '()',\n            meta: SOLR_AGGREGATE_FUNCTIONS[name].returnTypes.join('|'),\n            weightAdjust: 0,\n            // Add when we type aware\n            popular: ko.observable(false),\n            details: SOLR_AGGREGATE_FUNCTIONS[name]\n          });\n        });\n      }\n      self.entries(syncEntries);\n    }\n  }]);\n}();\nvar SolrFormulaAutocompleter = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Ace} options.editor\n   * @param {Object} options.support\n   * @param {function} options.support.fields - The observable/function containing the fields\n   * @constructor\n   */\n  function SolrFormulaAutocompleter(options) {\n    _classCallCheck(this, SolrFormulaAutocompleter);\n    var self = this;\n    self.editor = options.editor();\n    self.suggestions = new SolrFormulaSuggestions(options.support.fields);\n  }\n  return _createClass(SolrFormulaAutocompleter, [{\n    key: \"autocomplete\",\n    value: function () {\n      var _autocomplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve) {\n                var parseResult = solrFormulaParser.autocompleteSolrFormula(_this.editor.getTextBeforeCursor(), _this.editor.getTextAfterCursor());\n                _this.suggestions.update(parseResult);\n                resolve(parseResult);\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function autocomplete() {\n        return _autocomplete.apply(this, arguments);\n      }\n      return autocomplete;\n    }()\n  }, {\n    key: \"parse\",\n    value: function parse(value) {\n      return solrFormulaParser.parseSolrFormula(value);\n    }\n  }]);\n}();\nexport default SolrFormulaAutocompleter;","function _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../../../api/apiHelper\";\nimport HueColors from \"../../../utils/hueColors\";\nimport huePubSub from 'utils/huePubSub';\nimport I18n from \"../../../utils/i18n\";\nimport solrQueryParser from \"../../../parse/solrQueryParser\";\nimport sqlUtils from 'sql/sqlUtils';\nvar DEFAULT_POPULAR = ko.observable(false);\nvar KEYWORD_I18n = I18n('keyword');\nvar SAMPLE_I18n = I18n('sample');\nvar SAMPLE_LIMIT = 100;\nvar normalizedColors = HueColors.getNormalizedColors();\n\n// TODO: Autocomplete colors should be global\nvar COLORS = {\n  ALL: HueColors.BLUE,\n  FIELD: normalizedColors['green'][2],\n  FUNCTION: normalizedColors['purple-gray'][3],\n  KEYWORD: normalizedColors['blue'][4],\n  SAMPLE: normalizedColors['purple'][5]\n};\nvar CATEGORIES = {\n  ALL: {\n    id: 'all',\n    color: COLORS.ALL,\n    label: I18n('All')\n  },\n  FIELD: {\n    id: 'field',\n    weight: 1000,\n    color: COLORS.FIELD,\n    label: I18n('Fields'),\n    detailsTemplate: 'solr-field'\n  },\n  KEYWORD: {\n    id: 'keyword',\n    weight: 0,\n    color: COLORS.KEYWORD,\n    label: I18n('Keywords'),\n    detailsTemplate: 'keyword'\n  },\n  SAMPLE: {\n    id: 'sample',\n    weight: 900,\n    color: COLORS.SAMPLE,\n    label: I18n('Samples'),\n    detailsTemplate: 'value'\n  }\n};\nvar SolrQuerySuggestions = /*#__PURE__*/function () {\n  function SolrQuerySuggestions(collection, editor) {\n    _classCallCheck(this, SolrQuerySuggestions);\n    var self = this;\n    self.entries = ko.observableArray();\n    self.editor = editor;\n    self.collection = collection;\n    self.lastNonSampleSuggestions = [];\n    self.parseResult = {};\n    self.filtered = ko.pureComputed(function () {\n      var result = self.entries();\n      if (self.filter()) {\n        result = sqlUtils.autocompleteFilter(self.filter(), result);\n        huePubSub.publish('hue.ace.autocompleter.match.updated');\n      }\n      sqlUtils.sortSuggestions(result, self.filter(), self.sortOverride);\n      return result;\n    });\n    self.availableCategories = ko.pureComputed(function () {\n      // TODO: Implement autocomplete logic\n      return [CATEGORIES.ALL];\n    });\n    self.loading = ko.observable(false);\n    self.filter = ko.observable();\n    self.cancelRequests = function () {};\n  }\n  return _createClass(SolrQuerySuggestions, [{\n    key: \"update\",\n    value: function update(parseResult) {\n      var self = this;\n      self.lastNonSampleSuggestions = [];\n      self.parseResult = parseResult;\n      if (self.parseResult.suggestFields) {\n        self.collection.template.fieldsAttributes().forEach(function (field) {\n          self.lastNonSampleSuggestions.push({\n            category: CATEGORIES.FIELD,\n            value: field.name() + (parseResult.suggestFields.appendColon ? ':' : ''),\n            meta: field.type(),\n            weightAdjust: 0,\n            popular: DEFAULT_POPULAR,\n            details: field\n          });\n        });\n      }\n      if (self.parseResult.suggestKeywords) {\n        parseResult.suggestKeywords.forEach(function (keyword) {\n          self.lastNonSampleSuggestions.push({\n            category: CATEGORIES.KEYWORD,\n            value: keyword,\n            meta: KEYWORD_I18n,\n            weightAdjust: 0,\n            popular: DEFAULT_POPULAR,\n            details: null\n          });\n        });\n      }\n      self.entries(self.lastNonSampleSuggestions);\n      if (self.parseResult.suggestValues) {\n        var aceUtil = ace.require('ace/autocomplete/util');\n        var pos = self.editor.getCursorPosition();\n        var partial = aceUtil.retrievePrecedingIdentifier(self.editor.session.getLine(pos.row), pos.column);\n        if (self.parseResult.suggestValues.partial) {\n          partial = self.parseResult.suggestValues.partial + partial;\n        }\n        var valuesPromise = self.handleSampleSuggestions(partial);\n        self.loading(true);\n        valuesPromise.done(function (suggestions) {\n          if (suggestions.length) {\n            self.entries(self.lastNonSampleSuggestions.concat(suggestions));\n          }\n          self.loading(false);\n        });\n      }\n    }\n  }, {\n    key: \"handleSampleSuggestions\",\n    value: function handleSampleSuggestions(prefix) {\n      var self = this;\n      var promise = $.Deferred();\n      var fieldName = self.parseResult.suggestValues.field;\n      var hasField = self.collection.template.fieldsAttributes().some(function (field) {\n        return field.name() === fieldName;\n      });\n      if (hasField) {\n        apiHelper.fetchDashboardTerms({\n          collectionName: self.collection.name(),\n          fieldName: fieldName,\n          prefix: prefix || '',\n          silenceErrors: true,\n          successCallback: function successCallback(result) {\n            var sampleSuggestions = [];\n            if (result && result.terms && result.terms.length) {\n              var maxCount = 1;\n              for (var i = 0; i < Math.min(SAMPLE_LIMIT, result.terms.length); i++) {\n                var sampleValue = result.terms[i].value;\n                var shouldQuote = !self.parseResult.suggestValues.quotePresent && /[\\s\\u3000!():\"'^+\\-\\[\\]{}~*?/]/.test(sampleValue);\n                if (maxCount < result.terms[i].count) {\n                  maxCount = result.terms[i].count;\n                }\n                var value = '';\n                if (self.parseResult.suggestValues.partial && !shouldQuote && sampleValue.toLowerCase().indexOf(self.parseResult.suggestValues.partial.toLowerCase()) === 0) {\n                  value = sampleValue.substring(self.parseResult.suggestValues.partial.length);\n                } else {\n                  value = shouldQuote ? '\"' + sampleValue + '\"' : sampleValue;\n                }\n                sampleSuggestions.push({\n                  value: value,\n                  meta: SAMPLE_I18n,\n                  category: CATEGORIES.SAMPLE,\n                  popular: DEFAULT_POPULAR,\n                  details: result.terms[i]\n                });\n              }\n              sampleSuggestions.forEach(function (sampleSuggestion) {\n                sampleSuggestion.weightAdjust = sampleSuggestion.details.count / maxCount;\n              });\n            }\n            promise.resolve(sampleSuggestions);\n          },\n          errorCallback: function errorCallback() {\n            promise.resolve([]);\n          }\n        });\n      } else {\n        promise.resolve([]);\n      }\n      return promise;\n    }\n  }, {\n    key: \"onPartial\",\n    value: function onPartial(partial) {\n      var self = this;\n      if (self.parseResult.suggestValues) {\n        var promise = self.handleSampleSuggestions(partial);\n        promise.done(function (suggestions) {\n          if (suggestions.length) {\n            self.entries(self.lastNonSampleSuggestions.concat(suggestions));\n          } else {\n            self.entries(self.lastNonSampleSuggestions);\n          }\n        });\n      }\n    }\n  }]);\n}();\nvar SolrQueryAutocompleter = /*#__PURE__*/function () {\n  /**\n   * @param {Object} options\n   * @param {Ace} options.editor\n   * @param {Object} options.support\n   * @param {function} options.support.fields - The observable/function containing the fields\n   * @param {function} options.support.collection - The observable/function containing the active collection\n   * @constructor\n   */\n  function SolrQueryAutocompleter(options) {\n    _classCallCheck(this, SolrQueryAutocompleter);\n    var self = this;\n    self.editor = options.editor();\n    self.suggestions = new SolrQuerySuggestions(options.support.collection, self.editor);\n  }\n  return _createClass(SolrQueryAutocompleter, [{\n    key: \"autocomplete\",\n    value: function () {\n      var _autocomplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this = this;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve) {\n                var parseResult = solrQueryParser.autocompleteSolrQuery(_this.editor.getTextBeforeCursor(), _this.editor.getTextAfterCursor());\n                _this.suggestions.update(parseResult);\n                resolve(parseResult);\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function autocomplete() {\n        return _autocomplete.apply(this, arguments);\n      }\n      return autocomplete;\n    }()\n  }, {\n    key: \"onPartial\",\n    value: function onPartial(partial) {\n      var self = this;\n      self.suggestions.onPartial(partial);\n    }\n  }]);\n}();\nexport default SolrQueryAutocompleter;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.extenders.maxLength = function (target, maxLength) {\n  var result = ko.computed({\n    read: target,\n    write: function write(val) {\n      var newVal = val;\n      if (maxLength > 0 && val.length > maxLength) {\n        var limitedVal = val.substring(0, maxLength);\n        if (target() === limitedVal) {\n          target.notifySubscribers();\n        } else {\n          newVal = limitedVal;\n        }\n      }\n      target(newVal);\n    }\n  }).extend({\n    notify: 'always'\n  });\n  result(target());\n  return result;\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.extenders.numeric = function (target, config) {\n  var precision = typeof config.precision === 'undefined' ? config : config.precision;\n  var roundingMultiplier = Math.pow(10, precision);\n  var result = ko.computed({\n    read: target,\n    write: function write(newValue) {\n      var current = target();\n      var newValueAsNum = isNaN(newValue) ? 0 : parseFloat(+newValue);\n      var valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;\n      if (newValue === '' && config.allowEmpty) {\n        valueToWrite = newValue;\n      }\n      if (valueToWrite !== current) {\n        target(valueToWrite);\n      } else if (newValue !== current) {\n        target.notifySubscribers(valueToWrite);\n      }\n    }\n  }).extend({\n    notify: 'always'\n  });\n  result(target());\n  return result;\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as ko from 'knockout';\nko.toJSONObject = function (koObj) {\n  return JSON.parse(ko.toJSON(koObj));\n};\nko.toCleanJSON = function (koObj) {\n  return ko.toJSON(koObj, function (key, value) {\n    if (key === '__ko_mapping__') {\n      return;\n    } else {\n      return value;\n    }\n  });\n};"],"names":[],"sourceRoot":""}
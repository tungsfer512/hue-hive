{"version":3,"file":"hue-027ccb81-bundle-a2a4f8506cb55bb7.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACzVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACj2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./desktop/core/src/desktop/js/config/events.ts","webpack:///./desktop/core/src/desktop/js/config/hueConfig.ts","webpack:///./desktop/core/src/desktop/js/config/types.ts","webpack:///./desktop/core/src/desktop/js/doc/docSupport.js","webpack:///./desktop/core/src/desktop/js/doc/hueDocument.js","webpack:///./desktop/core/src/desktop/js/doc/hueFileEntry.js","webpack:///./desktop/core/src/desktop/js/ext/aceExtensions.js","webpack:///./desktop/core/src/desktop/js/ext/aceHelper.ts"],"sourcesContent":["// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport var REFRESH_CONFIG_TOPIC = 'cluster.config.refresh.config';\nexport var CONFIG_REFRESHED_TOPIC = 'cluster.config.set.config';\nexport var GET_KNOWN_CONFIG_TOPIC = 'cluster.config.get.config';","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { post } from 'api/utils';\nimport * as URLS from \"../api/urls\";\nimport { CONFIG_REFRESHED_TOPIC, GET_KNOWN_CONFIG_TOPIC, REFRESH_CONFIG_TOPIC } from \"./events\";\nimport { AppType } from \"./types\";\nimport huePubSub from 'utils/huePubSub';\nimport { GLOBAL_ERROR_TOPIC } from \"../reactComponents/AlertComponent/events\";\nvar lastConfigPromise;\nvar lastKnownConfig;\nexport var refreshConfig = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          lastConfigPromise = new Promise( /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve, reject) {\n              var apiResponse;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return post(URLS.FETCH_CONFIG_API, {}, {\n                      silenceErrors: true\n                    });\n                  case 3:\n                    apiResponse = _context.sent;\n                    if (apiResponse.status == 0) {\n                      lastKnownConfig = apiResponse;\n                      resolve(lastKnownConfig);\n                    } else if (apiResponse.message) {\n                      huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n                        message: apiResponse.message\n                      });\n                      reject();\n                    }\n                    _context.next = 10;\n                    break;\n                  case 7:\n                    _context.prev = 7;\n                    _context.t0 = _context[\"catch\"](0);\n                    reject(_context.t0);\n                  case 10:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _callee, null, [[0, 7]]);\n            }));\n            return function (_x, _x2) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n          lastConfigPromise.then(function (config) {\n            huePubSub.publish(CONFIG_REFRESHED_TOPIC, config);\n          })[\"catch\"](function () {\n            huePubSub.publish(CONFIG_REFRESHED_TOPIC);\n          });\n          return _context2.abrupt(\"return\", lastConfigPromise);\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function refreshConfig() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getLastKnownConfig = function getLastKnownConfig() {\n  return lastKnownConfig;\n};\nexport var getConfig = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          return _context3.abrupt(\"return\", getLastKnownConfig() || refreshConfig());\n        case 1:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function getConfig() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar getInterpreters = function getInterpreters(appType) {\n  if (!lastKnownConfig || !lastKnownConfig.app_config) {\n    return [];\n  }\n  var appConfig = lastKnownConfig.app_config[appType];\n  if (!appConfig) {\n    console.warn(\"No app config for type \".concat(appType));\n    return [];\n  }\n  if (!appConfig.interpreters) {\n    console.warn(\"No interpreters configured for type \".concat(appType));\n    return [];\n  }\n  return appConfig.interpreters;\n};\nvar findConnector = function findConnector(appType, connectorTest) {\n  return getInterpreters(appType).find(connectorTest);\n};\nvar filterConnector = function filterConnector(appType, connectorTest) {\n  return getInterpreters(appType).filter(connectorTest);\n};\nexport var findDashboardConnector = function findDashboardConnector(connectorTest) {\n  return findConnector(AppType.dashboard, connectorTest);\n};\nexport var findBrowserConnector = function findBrowserConnector(connectorTest) {\n  return findConnector(AppType.browser, connectorTest);\n};\nexport var findEditorConnector = function findEditorConnector(connectorTest) {\n  return findConnector(AppType.editor, connectorTest);\n};\nexport var filterBrowserConnectors = function filterBrowserConnectors(connectorTest) {\n  return filterConnector(AppType.browser, connectorTest);\n};\nexport var filterEditorConnectors = function filterEditorConnectors(connectorTest) {\n  return filterConnector(AppType.editor, connectorTest);\n};\nvar rootPathRegex = /.*%3A%2F%2F(.+)$/;\n\n/**\n * This takes the initial path from the \"browser\" config, used in cases where the users can't access '/'\n * for abfs etc.\n */\nexport var getRootFilePath = function getRootFilePath(connector) {\n  if (!connector || connector.type === 'hdfs') {\n    return '';\n  }\n  var match = connector.page.match(rootPathRegex);\n  if (match) {\n    return match[1] + '/';\n  }\n  return '';\n};\nhuePubSub.subscribe(REFRESH_CONFIG_TOPIC, refreshConfig);\n\n// TODO: Replace GET_KNOWN_CONFIG_TOPIC pubSub with sync getKnownConfig const\nhuePubSub.subscribe(GET_KNOWN_CONFIG_TOPIC, function (callback) {\n  if (lastConfigPromise && callback) {\n    lastConfigPromise.then(callback)[\"catch\"](callback);\n  }\n});\nexport default {\n  refreshConfig: refreshConfig,\n  getInterpreters: getInterpreters,\n  getLastKnownConfig: getLastKnownConfig,\n  getRootFilePath: getRootFilePath,\n  findBrowserConnector: findBrowserConnector,\n  findDashboardConnector: findDashboardConnector,\n  findEditorConnector: findEditorConnector\n};","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport var AppType = /*#__PURE__*/function (AppType) {\n  AppType[\"browser\"] = \"browser\";\n  AppType[\"editor\"] = \"editor\";\n  AppType[\"dashboard\"] = \"dashboard\";\n  AppType[\"scheduler\"] = \"scheduler\";\n  AppType[\"sdkapps\"] = \"sdkapps\";\n  return AppType;\n}({});\n\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\n/* eslint-disable @typescript-eslint/no-empty-interface */","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport I18n from \"../utils/i18n\";\nvar DOCUMENT_TYPE_I18n = {\n  all: I18n('All'),\n  directory: I18n('Directory'),\n  'link-pigscript': I18n('Pig Design'),\n  'link-workflow': I18n('Job Design'),\n  notebook: I18n('Notebook'),\n  'oozie-bundle2': I18n('Oozie Bundle'),\n  'oozie-coordinator2': I18n('Oozie Schedule'),\n  'oozie-workflow2': I18n('Oozie Workflow'),\n  'query-hive': window.ENABLE_UNIFIED_ANALYTICS ? I18n('Unified Analytics Query') : I18n('Hive Query'),\n  'query-impala': I18n('Impala Query'),\n  'search-dashboard': I18n('Search Dashboard'),\n  'query-mapreduce': I18n('MapReduce Job'),\n  'query-sqoop1': I18n('Import Job'),\n  'query-spark2': I18n('Spark Job'),\n  'query-java': I18n('Java Job'),\n  'query-pig': I18n('Pig Script'),\n  'query-shell': I18n('Shell Script'),\n  'query-distcp': I18n('DistCp Job')\n};\nvar DOCUMENT_TYPES = [];\nObject.keys(DOCUMENT_TYPE_I18n).forEach(function (key) {\n  if (key !== 'all') {\n    DOCUMENT_TYPES.push({\n      type: key,\n      label: DOCUMENT_TYPE_I18n[key]\n    });\n  }\n});\nDOCUMENT_TYPES.sort(function (a, b) {\n  return a.label.localeCompare(b.label);\n});\nDOCUMENT_TYPES.unshift({\n  type: 'all',\n  label: DOCUMENT_TYPE_I18n['all']\n});\nexport { DOCUMENT_TYPE_I18n, DOCUMENT_TYPES };","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../api/apiHelper\";\nimport { GLOBAL_ERROR_TOPIC } from 'reactComponents/AlertComponent/events';\nimport escapeOutput from 'utils/html/escapeOutput';\nimport highlight from 'utils/html/highlight';\nimport huePubSub from 'utils/huePubSub';\nexport var DOCUMENT_UPDATED_EVENT = 'hue.document.updated';\nvar HueDocument = /*#__PURE__*/function () {\n  /**\n   *\n   * @param {Object} options\n   * @param {HueFileEntry} options.fileEntry\n   *\n   * @constructor\n   */\n  function HueDocument(options) {\n    var _this = this;\n    _classCallCheck(this, HueDocument);\n    this.fileEntry = options.fileEntry;\n    this.definition = ko.observable();\n    this.loaded = ko.observable(false);\n    this.loading = ko.observable(false);\n    this.hasErrors = ko.observable(false);\n    this.searchInput = ko.observable();\n    this.selectedUserOrGroup = ko.observable();\n    this.selectedPerm = ko.observable('read');\n    this.userMap = {};\n    this.idToUserMap = {};\n    this.selectedUserOrGroup = null;\n    this.groupMap = {};\n    this.items = [];\n    huePubSub.subscribe(DOCUMENT_UPDATED_EVENT, function (definition) {\n      if (_this.definition() && _this.definition().uuid === definition.uuid) {\n        _this.definition(definition);\n      }\n    });\n  }\n  return _createClass(HueDocument, [{\n    key: \"isShared\",\n    value: function isShared() {\n      var perms = this.definition() && this.definition().perms;\n      return perms && (perms.read.users.length > 0 || perms.read.groups.length > 0 || perms.write.users.length > 0 || perms.write.groups.length > 0 || perms.link_sharing_on);\n    }\n  }, {\n    key: \"onShareAutocompleteSelectEnter\",\n    value: function onShareAutocompleteSelectEnter(event, selectedItem) {\n      var self = this;\n      self.selectedUserOrGroup = selectedItem.item;\n    }\n  }, {\n    key: \"onShareAutocompleteUserEnter\",\n    value: function onShareAutocompleteUserEnter() {\n      var self = this;\n      var searchAutoCompInput = $('#shareDocUserInput').val();\n      if (self.selectedUserOrGroup && self.selectedUserOrGroup.value === searchAutoCompInput) {\n        var selectedValue = self.selectedUserOrGroup.type === 'user' ? self.userMap[searchAutoCompInput] : self.groupMap[searchAutoCompInput];\n        if (selectedValue != null) {\n          if (typeof selectedValue.username !== 'undefined') {\n            this.definition().perms[self.selectedPerm()].users.push(selectedValue);\n          } else {\n            this.definition().perms[self.selectedPerm()].groups.push(selectedValue);\n          }\n          this.persistPerms();\n        }\n      }\n      self.selectedUserOrGroup = null;\n      $('#shareDocUserInput').val('');\n    }\n  }, {\n    key: \"shareAutocompleteUserSource\",\n    value: function shareAutocompleteUserSource(request, callback) {\n      var self = this;\n      var successCallback = function successCallback(jsonUserGroups) {\n        self.items = [];\n        jsonUserGroups.users.forEach(function (user) {\n          var label = escapeOutput(self.prettifyUsername(user));\n          var highLightedLabel = highlight(label, request.term);\n          self.userMap[label] = user;\n          self.items.push({\n            data: {\n              icon: 'fa fa-user',\n              label: highLightedLabel\n            },\n            value: label,\n            type: 'user'\n          });\n          self.idToUserMap[user.id] = user;\n        });\n        jsonUserGroups.groups.forEach(function (group) {\n          self.groupMap[group.name] = group;\n          var highLightedLabel = highlight(escapeOutput(group.name), request.term);\n          self.items.push({\n            data: {\n              icon: 'fa fa-users',\n              label: highLightedLabel\n            },\n            value: group.name,\n            type: 'group'\n          });\n        });\n        if (self.items.length === 0) {\n          self.items.push({\n            noMatch: true\n          });\n        }\n        callback(self.items);\n      };\n      apiHelper.fetchUsersAndGroups({\n        data: {\n          filter: request.term\n        },\n        successCallback: successCallback,\n        errorCallback: function errorCallback() {}\n      });\n    }\n  }, {\n    key: \"persistPerms\",\n    value: function persistPerms() {\n      var self = this;\n      var postPerms = {\n        read: {\n          user_ids: self.definition().perms.read.users.map(function (user) {\n            return user.id;\n          }),\n          group_ids: self.definition().perms.read.groups.map(function (group) {\n            return group.id;\n          })\n        },\n        write: {\n          user_ids: self.definition().perms.write.users.map(function (user) {\n            return user.id;\n          }),\n          group_ids: self.definition().perms.write.groups.map(function (group) {\n            return group.id;\n          })\n        }\n      };\n      $.post('/desktop/api2/doc/share', {\n        uuid: JSON.stringify(self.fileEntry.definition().uuid),\n        data: JSON.stringify(postPerms)\n      }, function (response) {\n        if (response != null) {\n          if (response.status !== 0) {\n            huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n              message: 'There was an error processing your action: ' + response.message\n            });\n          } else {\n            self.load();\n          }\n        }\n      }).fail(function (response) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: 'There was an error processing your action: ' + response.responseText\n        });\n      });\n    }\n  }, {\n    key: \"persistLinkSharingPerms\",\n    value: function persistLinkSharingPerms(perm) {\n      // Perm is either: read, write, off\n      var self = this;\n      $.post('/desktop/api2/doc/share/link', {\n        uuid: JSON.stringify(self.fileEntry.definition().uuid),\n        perm: JSON.stringify(perm)\n      }, function (response) {\n        if (response != null) {\n          if (response.status !== 0) {\n            huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n              message: 'There was an error processing your action: ' + response.message\n            });\n          } else {\n            // self.load();\n          }\n        }\n      }).fail(function (response) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: 'There was an error processing your action: ' + response.responseText\n        });\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(successCallback, errorCallback) {\n      var _this2 = this;\n      var self = this;\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      self.hasErrors(false);\n      var fetchDocumentsSuccessCallback = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data) {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", new Promise(function (resolve) {\n                  var readUsers = data.document.perms.read.users.map(function (user) {\n                    return user.id;\n                  });\n                  var writeUsers = data.document.perms.write.users.map(function (user) {\n                    return user.id;\n                  });\n                  var allUsers = readUsers.concat(writeUsers);\n                  if (allUsers.length > 0) {\n                    apiHelper.fetchUsersByIds({\n                      userids: JSON.stringify(allUsers),\n                      successCallback: function successCallback(response) {\n                        response.users.forEach(function (user) {\n                          // Needed for getting prettyusername of already shared users\n                          self.idToUserMap[user.id] = user;\n                        });\n                        self.definition(data.document);\n                        resolve();\n                      },\n                      errorCallback: function errorCallback() {}\n                    });\n                  } else {\n                    self.definition(data.document);\n                    resolve();\n                  }\n                }));\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }));\n        return function fetchDocumentsSuccessCallback(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      apiHelper.fetchDocument({\n        uuid: self.fileEntry.definition().uuid\n      }).done( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data) {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetchDocumentsSuccessCallback(data);\n              case 2:\n                self.loading(false);\n                self.loaded(true);\n                if (successCallback) {\n                  successCallback(_this2);\n                }\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2);\n        }));\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }()).fail(function () {\n        self.hasErrors(true);\n        self.loading(false);\n        self.loaded(true);\n        if (errorCallback) {\n          errorCallback();\n        }\n      });\n    }\n  }, {\n    key: \"prettifyUsernameById\",\n    value: function prettifyUsernameById(id) {\n      return this.prettifyUsername(this.idToUserMap[id]);\n    }\n  }, {\n    key: \"prettifyUsername\",\n    value: function prettifyUsername(user) {\n      user.prettyName = '';\n      if (user.first_name) {\n        user.prettyName += user.first_name + ' ';\n      }\n      if (user.last_name) {\n        user.prettyName += user.last_name + ' ';\n      }\n      if (user.prettyName) {\n        user.prettyName += '(' + user.username + ')';\n      } else {\n        user.prettyName += user.username;\n      }\n      return user.prettyName;\n    }\n  }, {\n    key: \"removeFromPerms\",\n    value: function removeFromPerms(perms, id) {\n      var self = this;\n      $(perms).each(function (cnt, item) {\n        if (item.id === id) {\n          perms.splice(cnt, 1);\n        }\n      });\n      self.persistPerms();\n    }\n  }, {\n    key: \"removeUserReadShare\",\n    value: function removeUserReadShare(user) {\n      this.removeFromPerms(this.definition().perms.read.users, user.id);\n    }\n  }, {\n    key: \"removeUserWriteShare\",\n    value: function removeUserWriteShare(user) {\n      this.removeFromPerms(this.definition().perms.write.users, user.id);\n    }\n  }, {\n    key: \"removeGroupReadShare\",\n    value: function removeGroupReadShare(group) {\n      this.removeFromPerms(this.definition().perms.read.groups, group.id);\n    }\n  }, {\n    key: \"removeGroupWriteShare\",\n    value: function removeGroupWriteShare(group) {\n      this.removeFromPerms(this.definition().perms.write.groups, group.id);\n    }\n  }]);\n}();\nexport default HueDocument;","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport $ from 'jquery';\nimport * as ko from 'knockout';\nimport apiHelper from \"../api/apiHelper\";\nimport huePubSub from 'utils/huePubSub';\nimport HueDocument from \"./hueDocument\";\nimport { DOCUMENT_TYPE_I18n, DOCUMENT_TYPES } from \"./docSupport\";\nimport { SHOW_DELETE_DOC_MODAL_EVENT } from \"../ko/components/ko.deleteDocModal\";\nimport { GLOBAL_ERROR_TOPIC } from 'reactComponents/AlertComponent/events';\nvar SORTS = {\n  defaultAsc: function defaultAsc(a, b) {\n    if (a.isDirectory() && !b.isDirectory()) {\n      return -1;\n    }\n    if (!a.isDirectory() && b.isDirectory()) {\n      return 1;\n    }\n    if (a.isDirectory() && b.isDirectory()) {\n      return SORTS.nameAsc(a, b);\n    }\n    return SORTS.lastModifiedDesc(a, b);\n  },\n  nameAsc: function nameAsc(a, b) {\n    return a.definition().name.localeCompare(b.definition().name);\n  },\n  nameDesc: function nameDesc(a, b) {\n    return SORTS.nameAsc(b, a);\n  },\n  descriptionAsc: function descriptionAsc(a, b) {\n    return a.definition().description.localeCompare(b.definition().description);\n  },\n  descriptionDesc: function descriptionDesc(a, b) {\n    return SORTS.descriptionAsc(b, a);\n  },\n  typeAsc: function typeAsc(a, b) {\n    return a.definition().type.localeCompare(b.definition().type);\n  },\n  typeDesc: function typeDesc(a, b) {\n    return SORTS.typeAsc(b, a);\n  },\n  ownerAsc: function ownerAsc(a, b) {\n    return a.definition().owner.localeCompare(b.definition().owner);\n  },\n  ownerDesc: function ownerDesc(a, b) {\n    return SORTS.ownerAsc(b, a);\n  },\n  lastModifiedAsc: function lastModifiedAsc(a, b) {\n    return a.definition().last_modified_ts - b.definition().last_modified_ts;\n  },\n  lastModifiedDesc: function lastModifiedDesc(a, b) {\n    return SORTS.lastModifiedAsc(b, a);\n  }\n};\nvar HueFileEntry = /*#__PURE__*/function () {\n  /**\n   *\n   * @param {Object} options\n   * @param {Object} options.definition\n   * @param {Function} options.activeEntry - The observable keeping track of the current open directory\n   * @param {Function} options.trashEntry - The observable keeping track of the trash directory\n   * @param {HueFolder} options.parent\n   * @param {string} options.app - Currently only 'documents' is supported\n   * @param {string} options.user\n   *\n   * @constructor\n   */\n  function HueFileEntry(options) {\n    var _this = this;\n    _classCallCheck(this, HueFileEntry);\n    this.activeEntry = options.activeEntry;\n    this.trashEntry = options.trashEntry;\n    this.parent = options.parent;\n    this.definition = ko.observable(options.definition);\n    this.app = options.app;\n    this.user = options.user;\n    this.superuser = options.superuser;\n    this.serverTypeFilter = options.serverTypeFilter || ko.observable({\n      type: 'all'\n    });\n    this.statsVisible = ko.observable(false);\n    this.highlight = ko.observable(false);\n    this.document = ko.observable();\n    this.selectedDocsWithDependents = ko.observable([]);\n    this.importedDocSummary = ko.observable();\n    this.showTable = ko.observable();\n    this.entries = ko.observableArray([]);\n\n    // Filter is only used in the assist panel at the moment\n    this.isFilterVisible = ko.observable(false);\n    this.filter = ko.observable('').extend({\n      rateLimit: 400\n    });\n    this.typeFilter = options.typeFilter || ko.observable(DOCUMENT_TYPES[0]); // First one is always 'all'\n\n    this.isFilterVisible.subscribe(function (newValue) {\n      if (!newValue && _this.filter()) {\n        _this.filter('');\n      }\n    });\n    this.filteredEntries = ko.pureComputed(function () {\n      var filter = _this.filter().toLowerCase();\n      var typeFilter = _this.typeFilter().type;\n      if (filter || typeFilter !== 'all') {\n        return _this.entries().filter(function (entry) {\n          var entryType = entry.definition().type;\n          return (typeFilter === 'all' || entryType === typeFilter || entryType === 'directory') && (!filter || entry.definition().name.toLowerCase().indexOf(filter) !== -1 || DOCUMENT_TYPE_I18n[entryType] && DOCUMENT_TYPE_I18n[entryType].toLowerCase().indexOf(filter) !== -1 || entry.definition().description.toLowerCase().indexOf(filter) !== -1);\n        });\n      }\n      return _this.entries();\n    });\n    this.getSelectedDocsWithDependents = function () {\n      _this.selectedDocsWithDependents([]);\n      var uuids = _this.selectedEntries().map(function (entry) {\n        return entry.definition().uuid;\n      }).join(',');\n      var data = {\n        uuids: uuids,\n        data: 'false',\n        dependencies: 'true'\n      };\n      $.get('/desktop/api2/doc/', data, function (response) {\n        var docsWithDependents = [];\n        if (response && response.data_list) {\n          for (var index = 0; index < response.data_list.length; index++) {\n            docsWithDependents.push({\n              name: response.data_list[index].document.name,\n              dependents: response.data_list[index].dependents\n            });\n          }\n        }\n        _this.selectedDocsWithDependents(docsWithDependents);\n      }).fail(function (response) {\n        huePubSub.publish(GLOBAL_ERROR_TOPIC, {\n          message: 'Error getting document data: ' + response.responseText\n        });\n      });\n    };\n    this.isTrash = ko.pureComputed(function () {\n      return _this.definition().name === '.Trash';\n    });\n    this.isTrashed = ko.pureComputed(function () {\n      if (typeof _this.parent !== 'undefined' && _this.parent !== null) {\n        return _this.parent.isTrash() || _this.parent.isTrashed();\n      }\n      return false;\n    });\n    this.isRoot = ko.pureComputed(function () {\n      return _this.definition().name === '';\n    });\n    this.isDirectory = ko.pureComputed(function () {\n      return _this.definition().type === 'directory';\n    });\n    this.isShared = ko.pureComputed(function () {\n      var perms = _this.definition().perms;\n      return perms && (perms.read.users.length > 0 || perms.read.groups.length > 0 || perms.write.users.length > 0 || perms.write.groups.length > 0 || perms.link_sharing_on);\n    });\n    this.isSharedWithMe = ko.pureComputed(function () {\n      return _this.user !== _this.definition().owner;\n    });\n    this.canModify = ko.pureComputed(function () {\n      var perms = _this.definition().perms;\n      return !_this.isSharedWithMe() || _this.superuser || perms && (perms.write.users.some(function (user) {\n        return user.username === _this.user;\n      }) || perms.write.groups.some(function (writeGroup) {\n        return LOGGED_USERGROUPS.indexOf(writeGroup.name) !== -1;\n      }) || perms.link_sharing_on && perms.link_write);\n    });\n    this.canReshare = ko.pureComputed(function () {\n      if (!_this.isSharedWithMe()) {\n        return true;\n      }\n      var target = _this;\n      while (target.parent && !target.isShared()) {\n        target = target.parent;\n      }\n      return target.canModify();\n    });\n    this.entriesToDelete = ko.observableArray();\n    this.deletingEntries = ko.observable(false);\n    this.selected = ko.observable(false);\n    this.loaded = ko.observable(false);\n    this.loading = ko.observable(false);\n    this.hasErrors = ko.observable(false);\n    this.uploading = ko.observable(false);\n    this.uploadComplete = ko.observable(false);\n    this.uploadFailed = ko.observable(false);\n    this.selectedImportFile = ko.observable('');\n    this.importEnabled = ko.pureComputed(function () {\n      return _this.selectedImportFile() !== '';\n    });\n    this.activeSort = options.activeSort;\n    this.selectedEntries = ko.pureComputed(function () {\n      return _this.entries().filter(function (entry) {\n        return entry.selected();\n      });\n    });\n    this.sharedWithMeSelected = ko.pureComputed(function () {\n      return _this.selectedEntries().some(function (entry) {\n        return entry.isSharedWithMe();\n      });\n    });\n    this.directorySelected = ko.pureComputed(function () {\n      return _this.selectedEntries().some(function (entry) {\n        return entry.isDirectory();\n      });\n    });\n    this.selectedEntry = ko.pureComputed(function () {\n      if (_this.selectedEntries().length === 1) {\n        return _this.selectedEntries()[0];\n      }\n      return null;\n    });\n    this.breadcrumbs = ko.pureComputed(function () {\n      var result = [];\n      var lastParent = _this.parent;\n      while (lastParent) {\n        result.unshift(lastParent);\n        lastParent = lastParent.parent;\n      }\n      return result;\n    });\n  }\n  return _createClass(HueFileEntry, [{\n    key: \"getDirectory\",\n    value: function getDirectory() {\n      if (!this.definition() || this.isRoot()) {\n        return null;\n      } else {\n        return this.definition().uuid;\n      }\n    }\n  }, {\n    key: \"highlightInside\",\n    value: function highlightInside(uuid) {\n      var self = this;\n      self.typeFilter(DOCUMENT_TYPES[0]);\n      var foundEntry;\n      self.entries().forEach(function (entry) {\n        entry.highlight(false);\n        if (entry.definition() && entry.definition().uuid === uuid) {\n          foundEntry = entry;\n        }\n      });\n      if (foundEntry) {\n        if (foundEntry.definition().type === 'directory') {\n          self.activeEntry(foundEntry);\n          if (!foundEntry.entries().length) {\n            foundEntry.load();\n          }\n        } else {\n          window.setTimeout(function () {\n            huePubSub.subscribeOnce('assist.db.scrollToComplete', function () {\n              foundEntry.highlight(true);\n              // Timeout is for animation effect\n              window.setTimeout(function () {\n                foundEntry.highlight(false);\n              }, 1800);\n            });\n            huePubSub.publish('assist.db.scrollTo', foundEntry);\n          }, 0);\n        }\n      }\n    }\n  }, {\n    key: \"showContextPopover\",\n    value: function showContextPopover(entry, event, positionAdjustment) {\n      var self = this;\n      var $source = $(event.target);\n      var offset = $source.offset();\n      if (positionAdjustment) {\n        offset.left += positionAdjustment.left;\n        offset.top += positionAdjustment.top;\n      }\n      self.statsVisible(true);\n      huePubSub.publish('context.popover.show', {\n        data: {\n          type: 'hue',\n          definition: self.definition()\n        },\n        showInAssistEnabled: false,\n        orientation: 'right',\n        pinEnabled: false,\n        source: {\n          element: event.target,\n          left: offset.left,\n          top: offset.top - 3,\n          right: offset.left + $source.width() + 1,\n          bottom: offset.top + $source.height() - 3\n        }\n      });\n      huePubSub.subscribeOnce('context.popover.hidden', function () {\n        self.statsVisible(false);\n      });\n    }\n  }, {\n    key: \"addDirectoryParamToUrl\",\n    value: function addDirectoryParamToUrl(url) {\n      var self = this;\n      var directoryId = self.getDirectory();\n      if (!directoryId) {\n        return url;\n      } else if (url.indexOf('?') !== -1) {\n        return url + '&directory_uuid=' + self.definition().uuid;\n      } else {\n        return url + '?directory_uuid=' + self.definition().uuid;\n      }\n    }\n  }, {\n    key: \"beforeContextOpen\",\n    value: function beforeContextOpen() {\n      if (!this.selected()) {\n        this.parent.selectedEntries().forEach(function (entry) {\n          entry.selected(false);\n        });\n        this.selected(true);\n      }\n    }\n  }, {\n    key: \"showRenameDirectoryModal\",\n    value: function showRenameDirectoryModal() {\n      var selectedEntry = this;\n      if (!selectedEntry.selected()) {\n        selectedEntry = selectedEntry.selectedEntry();\n      }\n      if (!selectedEntry.isTrash() && !selectedEntry.isTrashed() && selectedEntry.canModify()) {\n        $('#renameDirectoryName').val(selectedEntry.definition().name);\n        $('#renameDirectoryModal').modal('show');\n      }\n    }\n  }, {\n    key: \"setSort\",\n    value: function setSort(name) {\n      if (this.activeSort().indexOf(name) === -1) {\n        if (name === 'lastModified') {\n          this.activeSort('lastModifiedDesc');\n        } else {\n          this.activeSort(name + 'Asc');\n        }\n      } else if (name !== 'lastModified' && this.activeSort().indexOf('Asc') !== -1) {\n        this.activeSort(name + 'Desc');\n      } else if (name === 'lastModified' && this.activeSort().indexOf('Desc') !== -1) {\n        this.activeSort('lastModifiedAsc');\n      } else {\n        this.activeSort('defaultAsc');\n      }\n      this.entries.sort(SORTS[this.activeSort()]);\n    }\n  }, {\n    key: \"showSharingModal\",\n    value: function showSharingModal(entry) {\n      if (entry) {\n        this.selectedEntries().forEach(function (otherEntry) {\n          if (otherEntry !== entry) {\n            otherEntry.selected(false);\n          }\n        });\n        entry.selected(true);\n      }\n      if (this.selectedEntry()) {\n        this.selectedEntry().loadDocument();\n        huePubSub.publish('doc.show.share.modal', this.selectedEntry());\n      }\n    }\n  }, {\n    key: \"copy\",\n    value: function copy() {\n      var self = this;\n      if (self.selectedEntries().indexOf(self) !== -1) {\n        self.activeEntry(self.parent);\n      }\n      var copyNext = function copyNext() {\n        if (self.selectedEntries().length > 0) {\n          var nextUuid = self.selectedEntries().shift().definition().uuid;\n          apiHelper.copyDocument({\n            uuid: nextUuid,\n            successCallback: function successCallback() {\n              copyNext();\n            },\n            errorCallback: function errorCallback() {\n              self.activeEntry().load();\n            }\n          });\n        } else {\n          huePubSub.publish('assist.document.refresh');\n          self.activeEntry().load();\n        }\n      };\n      copyNext();\n    }\n  }, {\n    key: \"loadDocument\",\n    value: function () {\n      var _loadDocument = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(successCallback, errorCallback) {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                _this2.document(new HueDocument({\n                  fileEntry: _this2\n                }));\n                _this2.document().load(function () {\n                  if (successCallback) {\n                    successCallback(_this2.document());\n                  }\n                  resolve(_this2.document());\n                }, function (err) {\n                  if (errorCallback) {\n                    errorCallback(err);\n                  }\n                  reject(err);\n                });\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function loadDocument(_x, _x2) {\n        return _loadDocument.apply(this, arguments);\n      }\n      return loadDocument;\n    }()\n    /**\n     * @param {HueFileEntry[]} entries\n     */\n  }, {\n    key: \"moveHere\",\n    value: function moveHere(entries) {\n      var self = this;\n      if (self.app === 'documents') {\n        var moveNext = function moveNext() {\n          if (entries.length > 0) {\n            var nextId = entries.shift().definition().uuid;\n            apiHelper.moveDocument({\n              successCallback: function successCallback() {\n                moveNext();\n              },\n              errorCallback: function errorCallback() {\n                self.activeEntry().load();\n              },\n              sourceId: nextId,\n              destinationId: self.definition().uuid\n            });\n          } else {\n            huePubSub.publish('assist.document.refresh');\n            if (self !== self.activeEntry()) {\n              self.load();\n            }\n            self.activeEntry().load();\n          }\n        };\n        moveNext();\n      }\n    }\n  }, {\n    key: \"createNewEntry\",\n    value: function createNewEntry(options) {\n      return new HueFileEntry($.extend({\n        activeEntry: this.activeEntry,\n        activeSort: this.activeSort,\n        trashEntry: this.trashEntry,\n        serverTypeFilter: this.serverTypeFilter,\n        typeFilter: this.typeFilter,\n        app: this.app,\n        user: this.user,\n        superuser: this.superuser\n      }, options));\n    }\n  }, {\n    key: \"search\",\n    value: function search(query) {\n      var self = this;\n      var owner = self.definition().isSearchResult ? self.parent : self;\n      if (!query) {\n        if (self.definition().isSearchResult) {\n          self.activeEntry(self.parent);\n        }\n        return;\n      }\n      var resultEntry = self.createNewEntry({\n        definition: {\n          isSearchResult: true,\n          name: '\"' + query + '\"'\n        },\n        parent: owner\n      });\n      self.activeEntry(resultEntry);\n      resultEntry.loading(true);\n      apiHelper.searchDocuments({\n        uuid: owner.uuid,\n        query: query,\n        type: self.serverTypeFilter().type,\n        successCallback: function successCallback(data) {\n          resultEntry.hasErrors(false);\n          var newEntries = [];\n          data.documents.forEach(function (definition) {\n            var entry = self.createNewEntry({\n              definition: definition,\n              parent: self\n            });\n            if (!entry.isTrash()) {\n              newEntries.push(entry);\n            }\n          });\n          resultEntry.entries(newEntries);\n          resultEntry.loading(false);\n          resultEntry.loaded(true);\n        },\n        errorCallback: function errorCallback() {\n          resultEntry.hasErrors(true);\n          resultEntry.loading(false);\n          resultEntry.loaded(true);\n        }\n      });\n    }\n  }, {\n    key: \"toggleSelected\",\n    value: function toggleSelected() {\n      this.selected(!this.selected());\n    }\n  }, {\n    key: \"openSelected\",\n    value: function openSelected() {\n      if (this.selectedEntries().length === 1) {\n        this.selectedEntry().open();\n      }\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      if (this.definition().type === 'directory') {\n        this.makeActive();\n        huePubSub.publish('file.browser.directory.opened');\n        if (!this.loaded()) {\n          this.load();\n        }\n      } else {\n        huePubSub.publish('open.link', this.definition().absoluteUrl);\n      }\n    }\n  }, {\n    key: \"load\",\n    value: function load(_successCallback, _errorCallback, silenceErrors) {\n      var self = this;\n      if (self.loading()) {\n        return;\n      }\n      self.loading(true);\n      if (self.app === 'documents') {\n        apiHelper.fetchDocuments({\n          uuid: self.definition().uuid,\n          type: self.serverTypeFilter().type,\n          silenceErrors: !!silenceErrors,\n          successCallback: function successCallback(data) {\n            self.definition(data.document);\n            self.hasErrors(false);\n            var newEntries = [];\n            data.children.forEach(function (definition) {\n              var entry = self.createNewEntry({\n                definition: definition,\n                parent: self\n              });\n              if (entry.isTrash()) {\n                self.trashEntry(entry);\n              } else {\n                newEntries.push(entry);\n              }\n            });\n            newEntries.sort(SORTS[self.activeSort()]);\n            self.entries(newEntries);\n            if (!self.parent && data.parent) {\n              self.parent = self.createNewEntry({\n                definition: data.parent.path === '/' && self.isSharedWithMe() ? {\n                  name: '/'\n                } : data.parent,\n                parent: null\n              });\n            }\n            self.loading(false);\n            self.loaded(true);\n            if (self.isRoot() && self.entries().length === 1 && self.entries()[0].definition().type === 'directory' && self.entries()[0].isSharedWithMe()) {\n              self.activeEntry(self.entries()[0]);\n              self.activeEntry().load(_successCallback);\n            } else if (_successCallback && typeof _successCallback === 'function') {\n              _successCallback();\n            }\n          },\n          errorCallback: function errorCallback() {\n            self.hasErrors(true);\n            self.loading(false);\n            self.loaded(true);\n            if (_errorCallback) {\n              _errorCallback();\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: \"showTrash\",\n    value: function showTrash() {\n      if (this.trashEntry()) {\n        this.trashEntry().open();\n      }\n    }\n  }, {\n    key: \"emptyTrash\",\n    value: function emptyTrash() {\n      var _this3 = this;\n      if (this.trashEntry()) {\n        var openConfirmation = function openConfirmation() {\n          _this3.trashEntry().entries().forEach(function (entry) {\n            return entry.selected(true);\n          });\n          huePubSub.publish(SHOW_DELETE_DOC_MODAL_EVENT, _this3.trashEntry());\n        };\n        if (!this.trashEntry().loaded()) {\n          this.trashEntry().load(openConfirmation);\n        } else {\n          openConfirmation();\n        }\n      }\n    }\n  }, {\n    key: \"moveToTrash\",\n    value: function moveToTrash() {\n      if (this.selectedEntries().length > 0 && (this.superuser || !this.sharedWithMeSelected())) {\n        this.entriesToDelete(this.selectedEntries());\n        this.removeDocuments(false);\n      }\n    }\n  }, {\n    key: \"showRestoreConfirmation\",\n    value: function showRestoreConfirmation() {\n      if (this.selectedEntries().length > 0 && (this.superuser || !this.sharedWithMeSelected())) {\n        $('#restoreFromTrashModal').modal('show');\n      }\n    }\n  }, {\n    key: \"removeDocuments\",\n    value: function removeDocuments(deleteForever) {\n      var self = this;\n      if (self.entriesToDelete().indexOf(self) !== -1) {\n        self.activeEntry(self.parent);\n      }\n      var deleteNext = function deleteNext() {\n        if (self.entriesToDelete().length > 0) {\n          var nextUuid = self.entriesToDelete().shift().definition().uuid;\n          apiHelper.deleteDocument({\n            uuid: nextUuid,\n            skipTrash: deleteForever,\n            successCallback: function successCallback() {\n              deleteNext();\n            },\n            errorCallback: function errorCallback() {\n              self.activeEntry().load();\n              $('#deleteEntriesModal').modal('hide');\n              $('.modal-backdrop').remove();\n              self.deletingEntries(false);\n            }\n          });\n        } else {\n          self.deletingEntries(false);\n          huePubSub.publish('assist.document.refresh');\n          $('#deleteEntriesModal').modal('hide');\n          $('.modal-backdrop').remove();\n          self.activeEntry().load();\n        }\n      };\n      self.deletingEntries(true);\n      deleteNext();\n    }\n  }, {\n    key: \"closeUploadModal\",\n    value: function closeUploadModal() {\n      var _this4 = this;\n      if (this.app === 'documents') {\n        huePubSub.publish('hide.import.documents.modal');\n      }\n      // Allow the modal to hide\n      window.setTimeout(function () {\n        _this4.uploading(false);\n        _this4.uploadComplete(false);\n        _this4.uploadFailed(false);\n      }, 400);\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(importSuccessCallback) {\n      var self = this;\n      if (document.getElementById('importDocumentInput').files.length > 0 && self.app === 'documents') {\n        self.uploading(true);\n        self.uploadComplete(false);\n        self.uploadFailed(false);\n        self.importedDocSummary(null);\n        self.showTable(false);\n        apiHelper.uploadDocument({\n          formData: new FormData($('#importDocumentsForm')[0]),\n          successCallback: function successCallback(data) {\n            self.uploading(false);\n            self.uploadComplete(true);\n            huePubSub.publish('assist.document.refresh');\n            self.load();\n            self.importedDocSummary(data);\n            if (importSuccessCallback) {\n              importSuccessCallback();\n            }\n          },\n          progressHandler: function progressHandler(event) {\n            $('#importDocumentsProgress').val(Math.round(event.loaded / event.total * 100));\n          },\n          errorCallback: function errorCallback() {\n            self.uploading(false);\n            self.uploadComplete(true);\n            self.uploadFailed(true);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"importedDocumentCount\",\n    value: function importedDocumentCount() {\n      if (this.importedDocSummary()) {\n        return this.importedDocSummary()['documents'].length;\n      }\n      return 0;\n    }\n  }, {\n    key: \"toggleShowTable\",\n    value: function toggleShowTable() {\n      this.showTable(!this.showTable());\n    }\n  }, {\n    key: \"makeActive\",\n    value: function makeActive() {\n      if (!this.loaded()) {\n        this.load();\n      }\n      this.activeEntry(this);\n    }\n  }, {\n    key: \"showUploadModal\",\n    value: function showUploadModal() {\n      if (this.app === 'documents' && !this.isTrash() && !this.isTrashed()) {\n        huePubSub.publish('show.import.documents.modal', {\n          fileEntry: this\n        });\n      }\n    }\n  }, {\n    key: \"contextMenuDownload\",\n    value: function contextMenuDownload() {\n      if (this.selected()) {\n        this.parent.download();\n      } else {\n        this.downloadThis();\n      }\n    }\n  }, {\n    key: \"downloadThis\",\n    value: function downloadThis() {\n      window.location.href = window.HUE_BASE_URL + '/desktop/api2/doc/export?documents=' + ko.mapping.toJSON([this.definition().id]);\n    }\n  }, {\n    key: \"download\",\n    value: function download() {\n      if (this.app === 'documents') {\n        if (this.selectedEntries().length > 0) {\n          var ids = this.selectedEntries().map(function (entry) {\n            return entry.definition().id;\n          });\n          window.location.href = window.HUE_BASE_URL + '/desktop/api2/doc/export?documents=' + ko.mapping.toJSON(ids);\n        } else {\n          this.downloadThis();\n        }\n      }\n    }\n  }, {\n    key: \"restoreFromTrash\",\n    value: function restoreFromTrash() {\n      var self = this;\n      if (self.app === 'documents') {\n        if (self.selectedEntries().indexOf(self) !== -1) {\n          self.activeEntry(self.parent);\n        }\n        if (self.selectedEntries().length > 0) {\n          var uuids = self.selectedEntries().map(function (entry) {\n            return entry.definition().uuid;\n          }).join(',');\n          apiHelper.restoreDocument({\n            uuids: uuids,\n            successCallback: function successCallback() {\n              huePubSub.publish('assist.document.refresh');\n              self.activeEntry().load();\n            },\n            errorCallback: function errorCallback() {\n              self.activeEntry().load();\n            }\n          });\n        } else {\n          self.activeEntry().load();\n        }\n        $('#restoreFromTrashModal').modal('hide');\n      }\n    }\n  }, {\n    key: \"createDirectory\",\n    value: function createDirectory(name) {\n      var self = this;\n      if (name && self.app === 'documents') {\n        apiHelper.createDocumentsFolder({\n          successCallback: function successCallback() {\n            huePubSub.publish('assist.document.refresh');\n            self.load();\n          },\n          parentUuid: self.definition().uuid,\n          name: name\n        });\n        $('#newDirectoryName').val(null);\n      }\n    }\n  }, {\n    key: \"renameDirectory\",\n    value: function renameDirectory(name) {\n      var self = this;\n      if (name && self.app === 'documents') {\n        apiHelper.updateDocument({\n          successCallback: function successCallback() {\n            huePubSub.publish('assist.document.refresh');\n            self.load();\n          },\n          uuid: self.definition().uuid,\n          name: name\n        });\n        $('#renameDirectoryName').val(null);\n      }\n    }\n  }]);\n}();\nexport default HueFileEntry;","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ntry {\n  ace.originalEdit = ace.edit;\n  var AceRange = ace.require('ace/range').Range;\n  ace.edit = function (el) {\n    var editor = ace.originalEdit(el);\n    editor.enableAutocomplete = function () {\n      editor.setOptions({\n        enableBasicAutocompletion: true,\n        enableLiveAutocompletion: true\n      });\n    };\n    editor.disableAutocomplete = function () {\n      editor.setOptions({\n        enableBasicAutocompletion: false,\n        enableLiveAutocompletion: false\n      });\n    };\n    editor.removeTextBeforeCursor = function (length) {\n      var _r = new AceRange(this.getCursorPosition().row, this.getCursorPosition().column - length, this.getCursorPosition().row, this.getCursorPosition().column);\n      editor.getSession().getDocument().remove(_r);\n    };\n    editor.getTextBeforeCursor = function (separator) {\n      var _r = new AceRange(0, 0, this.getCursorPosition().row, this.getCursorPosition().column);\n      return separator ? this.session.getTextRange(_r).split(separator).pop() : this.session.getTextRange(_r);\n    };\n    editor.removeTextAfterCursor = function (length) {\n      var _r = new AceRange(this.getCursorPosition().row, this.getCursorPosition().column, this.getCursorPosition().row, this.getCursorPosition().column + length);\n      editor.getSession().getDocument().remove(_r);\n    };\n    editor.getTextAfterCursor = function (separator) {\n      var _r = new AceRange(this.getCursorPosition().row, this.getCursorPosition().column, this.session.getLength(), this.session.getRowLength(this.session.getLength()));\n      return separator ? this.session.getTextRange(_r).split(separator).shift() : this.session.getTextRange(_r);\n    };\n    editor.getCursorScreenPosition = function () {\n      return this.renderer.textToScreenCoordinates(this.getCursorPosition());\n    };\n    editor.showSpinner = function () {\n      var _position = this.getCursorScreenPosition();\n      if ($(\".ace-spinner\").length == 0) {\n        $(\"<i class='fa fa-spinner fa-spin ace-spinner'></i>\").appendTo('body');\n      }\n      $(\".ace-spinner\").css(\"top\", _position.pageY + \"px\").css(\"left\", _position.pageX - 4 + \"px\").show();\n    };\n    editor.hideSpinner = function () {\n      $(\".ace-spinner\").hide();\n    };\n    editor.showFileButton = function () {\n      var _position = this.getCursorScreenPosition();\n      if ($(\".ace-inline-button\").length == 0) {\n        $(\"<a class='btn btn-mini ace-inline-button'><i class='fa fa-ellipsis-h'></i></a>\").appendTo('body');\n      }\n      $(\".ace-inline-button\").css(\"top\", _position.pageY + \"px\").css(\"left\", _position.pageX + 4 + \"px\").show();\n      $(\".ace-inline-button\").off(\"click\");\n      return $(\".ace-inline-button\");\n    };\n    editor.hideFileButton = function () {\n      $(\".ace-inline-button\").hide();\n    };\n    editor.clearAnnotations = function (type) {\n      if (type === 'error') {\n        this.session.setAnnotations(this.session.getAnnotations().filter(function (item) {\n          return item.type === 'warning';\n        }));\n      } else if (type === 'warning') {\n        this.session.setAnnotations(this.session.getAnnotations().filter(function (item) {\n          return item.type === 'error';\n        }));\n      } else {\n        this.session.clearAnnotations();\n      }\n    };\n    editor.clearErrorsAndWarnings = function (type) {\n      for (var id in this.session.getMarkers()) {\n        var _marker = this.session.getMarkers()[id];\n        var _condition = _marker.clazz == \"ace_error-line\" || _marker.clazz == \"ace_warning-line\";\n        if (type === 'error') {\n          _condition = _marker.clazz == \"ace_error-line\";\n        }\n        if (type === 'warning') {\n          _condition = _marker.clazz == \"ace_warning-line\";\n        }\n        if (_condition) {\n          this.session.removeMarker(_marker.id);\n        }\n      }\n      editor.clearAnnotations(type);\n    };\n    editor.clearErrors = function () {\n      editor.clearErrorsAndWarnings('error');\n    };\n    editor.clearWarnings = function () {\n      editor.clearErrorsAndWarnings('warning');\n    };\n    editor.addError = function (message, line) {\n      var _range = new AceRange(line, 0, line, this.session.getLine(line).length);\n      this.session.addMarker(_range, \"ace_error-line\");\n      var errors = this.session.getAnnotations();\n      errors.push({\n        row: _range.start.row,\n        column: _range.start.column,\n        raw: message,\n        text: message,\n        type: \"error\"\n      });\n      this.session.setAnnotations(errors);\n    };\n    editor.addWarning = function (message, line) {\n      var _range = new AceRange(line, 0, line, this.session.getLine(line).length);\n      this.session.addMarker(_range, \"ace_warning-line\");\n      var warnings = this.session.getAnnotations();\n      warnings.push({\n        row: _range.start.row,\n        column: _range.start.column,\n        raw: message,\n        text: message,\n        type: \"warning\"\n      });\n      this.session.setAnnotations(warnings);\n    };\n    return editor;\n  };\n} catch (e) {\n  console.error(\"You need to include ace.js before including this snippet.\");\n}","// Licensed to Cloudera, Inc. under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  Cloudera, Inc. licenses this file\n// to you under the Apache License, Version 2.0 (the\n// 'License'); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an 'AS IS' BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport \"./ace/ace\";\nimport \"./ace/ext-language_tools\";\nimport \"./ace/ext-searchbox\";\nimport \"./ace/ext-settings_menu\";\nimport \"./ace/mode-bigquery\";\nimport \"./ace/mode-dasksql\";\nimport \"./ace/mode-druid\";\nimport \"./ace/mode-elasticsearch\";\nimport \"./ace/mode-flink\";\nimport \"./ace/mode-hive\";\nimport \"./ace/mode-hplsql\";\nimport \"./ace/mode-impala\";\nimport \"./ace/mode-ksql\";\nimport \"./ace/mode-markdown\";\nimport \"./ace/mode-mysql\";\nimport \"./ace/mode-pgsql\";\nimport \"./ace/mode-phoenix\";\nimport \"./ace/mode-presto\";\nimport \"./ace/mode-solr\";\nimport \"./ace/mode-sparksql\";\nimport \"./ace/mode-sql\";\nimport \"./ace/mode-text\";\nimport \"./ace/snippets/bigquery\";\nimport \"./ace/snippets/druid\";\nimport \"./ace/snippets/elasticsearch\";\nimport \"./ace/snippets/flink\";\nimport \"./ace/snippets/hive\";\nimport \"./ace/snippets/hplsql\";\nimport \"./ace/snippets/impala\";\nimport \"./ace/snippets/ksql\";\nimport \"./ace/snippets/markdown\";\nimport \"./ace/snippets/mysql\";\nimport \"./ace/snippets/pgsql\";\nimport \"./ace/snippets/phoenix\";\nimport \"./ace/snippets/presto\";\nimport \"./ace/snippets/dasksql\";\nimport \"./ace/snippets/solr\";\nimport \"./ace/snippets/sql\";\nimport \"./ace/snippets/text\";\nimport \"./ace/theme-hue\";\nimport \"./ace/theme-hue_dark\";\nimport \"./aceExtensions\";\nexport default window.ace;\nvar DIALECT_ACE_MODE_MAPPING = {\n  'bigquery': 'ace/mode/bigquery',\n  'druid': 'ace/mode/druid',\n  'elasticsearch': 'ace/mode/elasticsearch',\n  'flink': 'ace/mode/flink',\n  'dasksql': 'ace/mode/dasksql',\n  'hive': 'ace/mode/hive',\n  'hplsql': 'ace/mode/hplsql',\n  'impala': 'ace/mode/impala',\n  'ksql': 'ace/mode/ksql',\n  'mysql': 'ace/mode/mysql',\n  'pgsq': 'ace/mode/pgsql',\n  'phoenix': 'ace/mode/phoenix',\n  'presto': 'ace/mode/presto',\n  'solr': 'ace/mode/solr',\n  'sql': 'ace/mode/sql'\n};\nexport var getAceMode = function getAceMode(dialect) {\n  return dialect && DIALECT_ACE_MODE_MAPPING[dialect] || DIALECT_ACE_MODE_MAPPING.sql;\n};"],"names":[],"sourceRoot":""}
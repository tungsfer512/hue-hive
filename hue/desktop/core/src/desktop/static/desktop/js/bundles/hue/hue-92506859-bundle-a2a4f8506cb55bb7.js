/*!
 * 
 * Licensed to Cloudera, Inc. under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  Cloudera, Inc. licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
"use strict";
(self["webpackChunkgethue"] = self["webpackChunkgethue"] || []).push([["hue-92506859"],{

/***/ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js":
/*!**************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/DisposableComponent.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ DisposableComponent)
/* harmony export */ });
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


var DisposableComponent = /*#__PURE__*/function () {
  function DisposableComponent() {
    _classCallCheck(this, DisposableComponent);
    this.disposals = [];
  }
  return _createClass(DisposableComponent, [{
    key: "subscribe",
    value: function subscribe(subscribable, callback) {
      if (typeof subscribable === 'string') {
        var pubSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_0__["default"].subscribe(subscribable, callback);
        this.disposals.push(function () {
          pubSub.remove();
        });
        return pubSub;
      }
      if (subscribable.subscribe) {
        var sub = subscribable.subscribe(callback);
        this.disposals.push(function () {
          sub.dispose();
        });
        return sub;
      }
    }
  }, {
    key: "addDisposalCallback",
    value: function addDisposalCallback(callback) {
      this.disposals.push(callback);
    }
  }, {
    key: "dispose",
    value: function dispose() {
      while (this.disposals.length) {
        try {
          this.disposals.pop()();
        } catch (err) {
          console.warn(err);
        }
      }
    }
  }]);
}();


/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/appSwitcher/environment.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/appSwitcher/environment.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAltusBaseUrl": () => (/* binding */ getAltusBaseUrl),
/* harmony export */   "getMowBaseUrl": () => (/* binding */ getMowBaseUrl)
/* harmony export */ });
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

var Environment = {
  MOCK: 'MOCK',
  LOCAL: 'LOCAL',
  DEV: 'DEV',
  INT: 'INT',
  STAGE: 'STAGE',
  PROD: 'PROD'
};

/**
 * Returns environment type based on current url.
 * E.g., PROD is returned for localhost.altus.cloudera.com
 * Default to PROD
 * @param environmentBaseUrl
 */
var getEnvironment = function getEnvironment(environmentBaseUrl) {
  var hostName = environmentBaseUrl || window.location.hostname;
  if (hostName.indexOf('localhost.') > -1) {
    return Environment.LOCAL;
  }
  if (hostName.indexOf('-dev.cloudera.com') > -1) {
    return Environment.DEV;
  }
  if (hostName.indexOf('-int.cloudera.com') > -1) {
    return Environment.INT;
  }
  if (hostName.indexOf('-stage.cloudera.com') > -1) {
    return Environment.STAGE;
  }
  return Environment.PROD;
};
var getAltusBaseUrl = function getAltusBaseUrl() {
  var environment = getEnvironment(window.APP_SWITCHER_ALTUS_BASE_URL);
  switch (environment) {
    case Environment.MOCK:
      return '';
    case Environment.LOCAL:
      return '';
    case Environment.DEV:
      return 'https://console.thunderhead-dev.cloudera.com';
    case Environment.INT:
      return 'https://console.thunderhead-int.cloudera.com';
    case Environment.STAGE:
      return 'https://console.thunderhead-stage.cloudera.com';
    case Environment.PROD:
      return window.APP_SWITCHER_ALTUS_BASE_URL || 'https://console.altus.cloudera.com';
  }
};
var getMowBaseUrl = function getMowBaseUrl() {
  var environment = getEnvironment(window.APP_SWITCHER_MOW_BASE_URL);
  switch (environment) {
    case Environment.MOCK:
    case Environment.LOCAL:
    case Environment.DEV:
      return 'https://cloudera.dps.mow-dev.cloudera.com';
    case Environment.INT:
      return 'https://cloudera.cdp.mow-int.cloudera.com';
    case Environment.STAGE:
      return 'https://cloudera.cdp.mow-stage.cloudera.com';
    case Environment.PROD:
      return window.APP_SWITCHER_MOW_BASE_URL || 'https://cloudera.us-west-1.cdp.cloudera.com';
  }
};

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/appSwitcher/ko.appSwitcher.js":
/*!*********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/appSwitcher/ko.appSwitcher.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ko_components_appSwitcher_apps_v2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ko/components/appSwitcher/apps.v2 */ "./desktop/core/src/desktop/js/ko/components/appSwitcher/apps.v2.json");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./environment */ "./desktop/core/src/desktop/js/ko/components/appSwitcher/environment.js");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var TEMPLATE = "\n  <div class=\"hue-sidebar-header\">\n    <a class=\"hue-app-switcher-trigger\" data-bind=\"toggle: open\"><svg class=\"show\"><use href=\"#hi-app-picker\"></use></svg></a>\n    <div class=\"hue-app-switcher-logo\"><svg><use href=\"#hi-sidebar-logo\"></use></svg></div>\n  </div>\n\n  <div class=\"hue-app-switcher\" data-bind=\"css: { 'open': open }\">\n    <div class=\"app-switcher-header\">\n      <svg class=\"show\"><use href=\"#hi-cdp-logo\"></use></svg>\n      <a href=\"javascript: void(0);\" class=\"close\" data-bind=\"toggle: open\">&times;</a></form>\n    </div>\n\n    <ul data-bind=\"foreach: links\">\n      <li><a data-bind=\"attr: { href: url }\"><i data-bind=\"html: svg\"></i><span data-bind=\"text: label\"></span></a></li>\n    </ul>\n  </div>\n";
var getUrl = function getUrl(baseUrl, path) {
  if (baseUrl === 'mow') {
    return (0,_environment__WEBPACK_IMPORTED_MODULE_4__.getMowBaseUrl)() + path;
  } else if (baseUrl === 'altus') {
    return (0,_environment__WEBPACK_IMPORTED_MODULE_4__.getAltusBaseUrl)() + path;
  }
  console.warn('Could not find baseUrl for "' + baseUrl + '", using relative link instead.');
  return path;
};
var AppSwitcher = function AppSwitcher() {
  var _this = this;
  this.links = ko_components_appSwitcher_apps_v2__WEBPACK_IMPORTED_MODULE_2__.map(function (app) {
    return {
      label: app.displayName,
      svg: app.logo,
      url: getUrl(app.baseUrl, app.path)
    };
  });
  this.open = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  var closeOnClickOutside = function closeOnClickOutside(event) {
    if (!_this.open()) {
      return;
    }
    if (jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(document, event.target) && !jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-app-switcher')[0], event.target)) {
      _this.open(false);
    }
  };
  this.open.subscribe(function (newVal) {
    if (newVal) {
      window.setTimeout(function () {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('click', closeOnClickOutside);
      }, 0);
    } else {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click', closeOnClickOutside);
    }
  });
};
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerComponent('hue-app-switcher', AppSwitcher, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js":
/*!***************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! catalog/analyzer/sqlAnalyzerRepository */ "./desktop/core/src/desktop/js/catalog/analyzer/sqlAnalyzerRepository.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sql/sqlUtils */ "./desktop/core/src/desktop/js/sql/sqlUtils.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var findNameInHierarchy = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(entry, searchCondition) {
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          while (entry && !searchCondition(entry)) {
            entry = entry.parent;
          }
          if (!entry) {
            _context.next = 5;
            break;
          }
          _context.next = 4;
          return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__["default"].backTickIfNeeded(entry.catalogEntry.getConnector(), entry.catalogEntry.name);
        case 4:
          return _context.abrupt("return", _context.sent);
        case 5:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return function findNameInHierarchy(_x, _x2) {
    return _ref.apply(this, arguments);
  };
}();
var AssistDbEntry = /*#__PURE__*/function () {
  /**
   * @param {DataCatalogEntry} catalogEntry
   * @param {AssistDbEntry} parent
   * @param {AssistDbNamespace} assistDbNamespace
   * @param {Object} filter
   * @param {function} filter.querySpec (observable)
   * @param {Object} i18n
   * @param {string} i18n.errorLoadingTablePreview
   * @param {Object} navigationSettings
   * @constructor
   */
  function AssistDbEntry(catalogEntry, parent, assistDbNamespace, filter, i18n, navigationSettings) {
    _classCallCheck(this, AssistDbEntry);
    var self = this;
    self.catalogEntry = catalogEntry;
    self.parent = parent;
    self.assistDbNamespace = assistDbNamespace;
    self.filter = filter;
    self.i18n = i18n;
    self.navigationSettings = navigationSettings;
    self.sourceType = assistDbNamespace.sourceType;
    self.phoenix_connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_5__.findEditorConnector)(function (connector) {
      return connector.dialect === 'phoenix';
    });
    self.importer_url = self.phoenix_connector && self.sourceType === self.phoenix_connector.id ? window.HUE_URLS.IMPORTER_CREATE_PHOENIX_TABLE : window.HUE_URLS.IMPORTER_CREATE_TABLE;
    self.expandable = self.catalogEntry.hasPossibleChildren();
    self.filterColumnNames = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.highlight = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.popularity = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(0);
    self.loaded = false;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.open = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_2__.observableArray([]);
    self.statsVisible = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.iconClass = '';
    if (!self.navigationSettings.rightAssist) {
      if (self.sourceType === 'solr') {
        self.iconClass = 'fa-search';
      } else if (self.sourceType === 'kafka') {
        self.iconClass = 'fa-sitemap';
      } else if (self.catalogEntry.isView()) {
        self.iconClass = 'fa-eye';
      } else if (self.catalogEntry.isModel()) {
        self.iconClass = 'fa-puzzle-piece';
      } else {
        self.iconClass = 'fa-table';
      }
    }
    self.open.subscribe(function (newValue) {
      if (newValue && self.entries().length === 0) {
        self.loadEntries();
      }
    });
    self.hasEntries = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      return self.entries().length > 0;
    });
    self.filteredEntries = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      var facets = self.filter.querySpec().facets;
      var facetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL
      // Only text match on tables/views or columns if flag is set
      var textMatch = !self.catalogEntry.isDatabase() && !self.filterColumnNames() || !self.filter.querySpec().text || self.filter.querySpec().text.length === 0;
      if (facetMatch && textMatch) {
        return self.entries();
      }
      return self.entries().filter(function (entry) {
        var match = true;
        if (match && !facetMatch) {
          if (entry.catalogEntry.isField()) {
            match = Object.keys(facets['type']).length === 2 && facets['type']['table'] && facets['type']['view'] || Object.keys(facets['type']).length === 1 && (facets['type']['table'] || facets['type']['view']) || facets['type'][entry.catalogEntry.getType()];
          } else if (entry.catalogEntry.isTableOrView()) {
            match = !facets['type']['table'] && !facets['type']['view'] || facets['type']['table'] && entry.catalogEntry.isTable() || facets['type']['view'] && entry.catalogEntry.isView();
          }
        }
        if (match && !textMatch) {
          var nameLower = entry.catalogEntry.name.toLowerCase();
          match = self.filter.querySpec().text.every(function (text) {
            return nameLower.indexOf(text.toLowerCase()) !== -1;
          });
        }
        return match;
      });
    });
    self.autocompleteFromEntries = function (nonPartial, partial) {
      var result = [];
      var partialLower = partial.toLowerCase();
      self.entries().forEach(function (entry) {
        if (entry.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
          result.push(nonPartial + partial + entry.catalogEntry.name.substring(partial.length));
        }
      });
      return result;
    };
    self.tableName = null;
    self.columnName = null;
    self.type = null;
    self.databaseName = self.getHierarchy()[0];
    if (self.catalogEntry.isTableOrView()) {
      self.tableName = self.catalogEntry.name;
      self.columnName = null;
      self.type = self.catalogEntry.getType();
    } else if (self.catalogEntry.isColumn()) {
      self.tableName = parent.catalogEntry.name;
      self.columnName = self.catalogEntry.name;
    }
    self.editorText = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    var setEditorText = /*#__PURE__*/function () {
      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!self.catalogEntry.isTableOrView()) {
                _context2.next = 8;
                break;
              }
              _context2.t0 = self;
              _context2.next = 4;
              return self.getTableName();
            case 4:
              _context2.t1 = _context2.sent;
              _context2.t0.editorText.call(_context2.t0, _context2.t1);
              _context2.next = 23;
              break;
            case 8:
              if (!self.catalogEntry.isColumn()) {
                _context2.next = 17;
                break;
              }
              _context2.t2 = self;
              _context2.next = 12;
              return self.getColumnName();
            case 12:
              _context2.t3 = _context2.sent;
              _context2.t4 = _context2.t3 + ', ';
              _context2.t2.editorText.call(_context2.t2, _context2.t4);
              _context2.next = 23;
              break;
            case 17:
              _context2.t5 = self;
              _context2.next = 20;
              return self.getComplexName();
            case 20:
              _context2.t6 = _context2.sent;
              _context2.t7 = _context2.t6 + ', ';
              _context2.t5.editorText.call(_context2.t5, _context2.t7);
            case 23:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      return function setEditorText() {
        return _ref2.apply(this, arguments);
      };
    }();
    setEditorText();
  }
  return _createClass(AssistDbEntry, [{
    key: "knownFacetValues",
    value: function knownFacetValues() {
      var self = this;
      var types = {};
      if (self.parent === null) {
        // Only find facets on the DB level
        self.entries().forEach(function (tableEntry) {
          if (!self.assistDbNamespace.nonSqlType) {
            if (tableEntry.catalogEntry.isTable()) {
              types.table = types.table ? types.table + 1 : 1;
            } else if (tableEntry.catalogEntry.isView()) {
              types.view = types.view ? types.view + 1 : 1;
            }
          }
          if (tableEntry.open()) {
            tableEntry.entries().forEach(function (colEntry) {
              if (!types[colEntry.catalogEntry.getType()]) {
                types[colEntry.catalogEntry.getType()] = 1;
              } else {
                types[colEntry.catalogEntry.getType()]++;
              }
            });
          }
        });
      }
      if (Object.keys(types).length) {
        return {
          type: types
        };
      }
      return {};
    }
  }, {
    key: "getDatabaseName",
    value: function () {
      var _getDatabaseName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return findNameInHierarchy(this, function (entry) {
                return entry.catalogEntry.isDatabase();
              });
            case 2:
              return _context3.abrupt("return", _context3.sent);
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getDatabaseName() {
        return _getDatabaseName.apply(this, arguments);
      }
      return getDatabaseName;
    }()
  }, {
    key: "getTableName",
    value: function () {
      var _getTableName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return findNameInHierarchy(this, function (entry) {
                return entry.catalogEntry.isTableOrView();
              });
            case 2:
              return _context4.abrupt("return", _context4.sent);
            case 3:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function getTableName() {
        return _getTableName.apply(this, arguments);
      }
      return getTableName;
    }()
  }, {
    key: "getColumnName",
    value: function () {
      var _getColumnName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return findNameInHierarchy(this, function (entry) {
                return entry.catalogEntry.isColumn();
              });
            case 2:
              return _context5.abrupt("return", _context5.sent);
            case 3:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function getColumnName() {
        return _getColumnName.apply(this, arguments);
      }
      return getColumnName;
    }()
  }, {
    key: "getComplexName",
    value: function () {
      var _getComplexName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var entry, sourceType, parts;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              entry = this;
              sourceType = entry.sourceType;
              parts = [];
            case 3:
              if (!(entry != null)) {
                _context6.next = 19;
                break;
              }
              if (!entry.catalogEntry.isTableOrView()) {
                _context6.next = 6;
                break;
              }
              return _context6.abrupt("break", 19);
            case 6:
              if (!(entry.catalogEntry.isArray() || entry.catalogEntry.isMapValue())) {
                _context6.next = 10;
                break;
              }
              if (sourceType === 'hive') {
                parts.push('[]');
              }
              _context6.next = 16;
              break;
            case 10:
              _context6.t0 = parts;
              _context6.next = 13;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__["default"].backTickIfNeeded(entry.catalogEntry.getConnector(), entry.catalogEntry.name);
            case 13:
              _context6.t1 = _context6.sent;
              _context6.t0.push.call(_context6.t0, _context6.t1);
              parts.push('.');
            case 16:
              entry = entry.parent;
              _context6.next = 3;
              break;
            case 19:
              parts.reverse();
              return _context6.abrupt("return", parts.slice(1).join(''));
            case 21:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function getComplexName() {
        return _getComplexName.apply(this, arguments);
      }
      return getComplexName;
    }()
  }, {
    key: "showContextPopover",
    value: function showContextPopover(entry, event, positionAdjustment) {
      var self = this;
      var $source = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target);
      var offset = $source.offset();
      if (positionAdjustment) {
        offset.left += positionAdjustment.left;
        offset.top += positionAdjustment.top;
      }
      self.statsVisible(true);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.show', {
        data: {
          type: 'catalogEntry',
          catalogEntry: self.catalogEntry
        },
        showInAssistEnabled: !!self.navigationSettings.rightAssist,
        orientation: self.navigationSettings.rightAssist ? 'left' : 'right',
        pinEnabled: self.navigationSettings.pinEnabled,
        source: {
          element: event.target,
          left: offset.left,
          top: offset.top - 3,
          right: offset.left + $source.width() + 1,
          bottom: offset.top + $source.height() - 3
        }
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('context.popover.hidden', function () {
        self.statsVisible(false);
      });
    }
  }, {
    key: "triggerRefresh",
    value: function triggerRefresh() {
      var self = this;
      self.catalogEntry.clearCache({
        cascade: true
      });
    }
  }, {
    key: "highlightInside",
    value: function highlightInside(path) {
      var self = this;
      var searchEntry = function searchEntry() {
        var foundEntry;
        self.entries().forEach(function (entry) {
          entry.highlight(false);
          if (entry.catalogEntry.name === path[0]) {
            foundEntry = entry;
          }
        });
        if (foundEntry) {
          if (foundEntry.expandable && !foundEntry.open()) {
            foundEntry.open(true);
          }
          window.setTimeout(function () {
            if (path.length > 1) {
              foundEntry.highlightInside(path.slice(1));
            } else {
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('assist.db.scrollToComplete', function () {
                foundEntry.highlight(true);
                // Timeout is for animation effect
                window.setTimeout(function () {
                  foundEntry.highlight(false);
                }, 1800);
              });
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.db.scrollTo', foundEntry);
            }
          }, 0);
        }
      };
      if (self.entries().length === 0) {
        if (self.loading()) {
          var subscription = self.loading.subscribe(function (newVal) {
            if (!newVal) {
              subscription.dispose();
              searchEntry();
            }
          });
        } else {
          self.loadEntries(searchEntry);
        }
      } else {
        searchEntry();
      }
    }
  }, {
    key: "loadEntries",
    value: function loadEntries(callback) {
      var self = this;
      if (!self.expandable || self.loading()) {
        return;
      }
      self.loading(true);
      var loadEntriesDeferred = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();
      var successCallback = function successCallback(sourceMeta) {
        self.entries([]);
        if (!sourceMeta.notFound) {
          self.catalogEntry.getChildren({
            silenceErrors: self.navigationSettings.rightAssist
          }).then(function (catalogEntries) {
            self.hasErrors(false);
            self.loading(false);
            self.loaded = true;
            if (catalogEntries.length === 0) {
              self.entries([]);
              return;
            }
            var newEntries = [];
            catalogEntries.forEach(function (catalogEntry) {
              newEntries.push(self.createEntry(catalogEntry));
            });
            if (sourceMeta.type === 'array') {
              self.entries(newEntries);
              self.entries()[0].open(true);
            } else {
              self.entries(newEntries);
            }
            loadEntriesDeferred.resolve(newEntries);
            if (typeof callback === 'function') {
              callback();
            }
          })["catch"](function () {
            self.loading(false);
            self.loaded = true;
            self.hasErrors(true);
          });
          if (!self.assistDbNamespace.nonSqlType) {
            self.catalogEntry.loadNavigatorMetaForChildren({
              silenceErrors: self.navigationSettings.rightAssist
            })["finally"](function () {});
          }
        } else {
          self.hasErrors(true);
          self.loading(false);
          self.loaded = true;
          if (typeof callback === 'function') {
            callback();
          }
        }
      };
      var errorCallback = function errorCallback() {
        self.hasErrors(true);
        self.loading(false);
        self.loaded = true;
        loadEntriesDeferred.resolve([]);
      };
      if (!self.navigationSettings.rightAssist && window.HAS_SQL_ANALYZER && (self.catalogEntry.isTable() || self.catalogEntry.isDatabase()) && !self.assistDbNamespace.nonSqlType) {
        var sqlAnalyzer = catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__["default"].getSqlAnalyzer(self.catalogEntry.getConnector());
        self.catalogEntry.loadSqlAnalyzerPopularityForChildren({
          silenceErrors: true,
          sqlAnalyzer: sqlAnalyzer
        }).then(function () {
          loadEntriesDeferred.done(function () {
            if (!self.hasErrors()) {
              self.entries().forEach(function (entry) {
                if (entry.catalogEntry.sqlAnalyzerPopularity) {
                  if (entry.catalogEntry.sqlAnalyzerPopularity.popularity) {
                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.popularity);
                  } else if (entry.catalogEntry.sqlAnalyzerPopularity.column_count) {
                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.column_count);
                  } else if (entry.catalogEntry.sqlAnalyzerPopularity.selectColumn) {
                    entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.selectColumn.columnCount);
                  }
                }
              });
            }
          });
        });
      }
      self.catalogEntry.getSourceMeta({
        silenceErrors: self.navigationSettings.rightAssist
      }).then(successCallback)["catch"](errorCallback);
    }

    /**
     * @param {DataCatalogEntry} catalogEntry
     */
  }, {
    key: "createEntry",
    value: function createEntry(catalogEntry) {
      var self = this;
      return new AssistDbEntry(catalogEntry, self, self.assistDbNamespace, self.filter, self.i18n, self.navigationSettings);
    }
  }, {
    key: "getHierarchy",
    value: function getHierarchy() {
      var self = this;
      return self.catalogEntry.path.concat();
    }
  }, {
    key: "dblClick",
    value: function () {
      var _dblClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var self;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              self = this;
              if (!self.catalogEntry.isTableOrView()) {
                _context7.next = 13;
                break;
              }
              _context7.t0 = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"];
              _context7.next = 5;
              return self.getTableName();
            case 5:
              _context7.t1 = _context7.sent;
              _context7.next = 8;
              return self.getDatabaseName();
            case 8:
              _context7.t2 = _context7.sent;
              _context7.t3 = {
                name: _context7.t1,
                database: _context7.t2
              };
              _context7.t0.publish.call(_context7.t0, 'editor.insert.table.at.cursor', _context7.t3);
              _context7.next = 40;
              break;
            case 13:
              if (!self.catalogEntry.isColumn()) {
                _context7.next = 28;
                break;
              }
              _context7.t4 = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"];
              _context7.next = 17;
              return self.getColumnName();
            case 17:
              _context7.t5 = _context7.sent;
              _context7.next = 20;
              return self.getTableName();
            case 20:
              _context7.t6 = _context7.sent;
              _context7.next = 23;
              return self.getDatabaseName();
            case 23:
              _context7.t7 = _context7.sent;
              _context7.t8 = {
                name: _context7.t5,
                table: _context7.t6,
                database: _context7.t7
              };
              _context7.t4.publish.call(_context7.t4, 'editor.insert.column.at.cursor', _context7.t8);
              _context7.next = 40;
              break;
            case 28:
              _context7.t9 = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"];
              _context7.next = 31;
              return self.getComplexName();
            case 31:
              _context7.t10 = _context7.sent;
              _context7.next = 34;
              return self.getTableName();
            case 34:
              _context7.t11 = _context7.sent;
              _context7.next = 37;
              return self.getDatabaseName();
            case 37:
              _context7.t12 = _context7.sent;
              _context7.t13 = {
                name: _context7.t10,
                table: _context7.t11,
                database: _context7.t12
              };
              _context7.t9.publish.call(_context7.t9, 'editor.insert.column.at.cursor', _context7.t13);
            case 40:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function dblClick() {
        return _dblClick.apply(this, arguments);
      }
      return dblClick;
    }()
  }, {
    key: "explore",
    value: function () {
      var _explore = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(isSolr) {
        var self;
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              self = this;
              if (!isSolr) {
                _context8.next = 5;
                break;
              }
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/hue/dashboard/browse/' + self.catalogEntry.name);
              _context8.next = 19;
              break;
            case 5:
              _context8.t0 = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"];
              _context8.next = 8;
              return self.getDatabaseName();
            case 8:
              _context8.t1 = _context8.sent;
              _context8.t2 = '/hue/dashboard/browse/' + _context8.t1;
              _context8.t3 = _context8.t2 + '.';
              _context8.next = 13;
              return self.getTableName();
            case 13:
              _context8.t4 = _context8.sent;
              _context8.t5 = _context8.t3 + _context8.t4;
              _context8.t6 = _context8.t5 + '?engine=';
              _context8.t7 = self.assistDbNamespace.sourceType;
              _context8.t8 = _context8.t6 + _context8.t7;
              _context8.t0.publish.call(_context8.t0, 'open.link', _context8.t8);
            case 19:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function explore(_x3) {
        return _explore.apply(this, arguments);
      }
      return explore;
    }()
  }, {
    key: "openInMetastore",
    value: function openInMetastore() {
      var self = this;
      var url;
      if (self.catalogEntry.isDatabase()) {
        url = '/metastore/tables/' + self.catalogEntry.name + '?connector_id=' + self.catalogEntry.getConnector().id + '&namespace=' + self.catalogEntry.namespace.id;
      } else if (self.catalogEntry.isTableOrView()) {
        url = '/metastore/table/' + self.parent.catalogEntry.name + '/' + self.catalogEntry.name + '?connector_id=' + self.catalogEntry.getConnector().id + '&namespace=' + self.catalogEntry.namespace.id;
      } else {
        return;
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', url);
    }
  }, {
    key: "openInIndexer",
    value: function openInIndexer() {
      var self = this;
      var definitionName = self.catalogEntry.name;
      if (window.IS_NEW_INDEXER_ENABLED) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/indexer/indexes/' + definitionName);
      } else {
        var hash = '#edit/' + definitionName;
        if (window.location.pathname.startsWith('/hue/indexer') && !window.location.pathname.startsWith('/hue/indexer/importer')) {
          window.location.hash = hash;
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('app.gained.focus', function (app) {
            if (app === 'indexes') {
              window.setTimeout(function () {
                window.location.hash = hash;
              }, 0);
            }
          });
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/indexer');
        }
      }
    }
  }, {
    key: "toggleOpen",
    value: function toggleOpen() {
      var self = this;
      self.open(!self.open());
    }
  }, {
    key: "openItem",
    value: function openItem() {
      var self = this;
      if (self.catalogEntry.isTableOrView()) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.table.selected', self.catalogEntry);
      } else if (self.catalogEntry.isDatabase()) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.database.selected', self.catalogEntry);
      }
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistDbEntry);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistDbNamespace.js":
/*!*******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistDbNamespace.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! catalog/analyzer/sqlAnalyzerRepository */ "./desktop/core/src/desktop/js/catalog/analyzer/sqlAnalyzerRepository.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var _assistDbEntry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./assistDbEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var AssistDbNamespace = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Object} options.i18n
   * @param {string} options.sourceType
   * @param {Connector} options.connector
   * @param {ContextNamespace} options.namespace
   * @param {boolean} options.nonSqlType - Optional, default false
   * @param {Object} options.navigationSettings
   * @constructor
   */
  function AssistDbNamespace(options) {
    var _this = this;
    _classCallCheck(this, AssistDbNamespace);
    var self = this;
    self.i18n = options.i18n;
    self.navigationSettings = options.navigationSettings;
    self.sourceType = options.sourceType;
    self.connector = options.connector;
    self.nonSqlType = options.nonSqlType;
    self.namespace = options.namespace;
    self.status = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(options.namespace.status);
    // TODO: Compute selection in assist?
    self.compute = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    if (self.namespace.computes.length) {
      self.compute(self.namespace.computes[0]);
    }
    self.name = options.namespace.name;
    self.dbIndex = {};
    self.databases = knockout__WEBPACK_IMPORTED_MODULE_2__.observableArray();
    self.selectedDatabase = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    self.highlight = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.loadedPromise = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();
    self.loadedDeferred = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();
    self.loaded = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.reloading = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.loadingTables = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      return typeof self.selectedDatabase() !== 'undefined' && self.selectedDatabase() !== null && self.selectedDatabase().loading();
    });
    self.filter = {
      querySpec: knockout__WEBPACK_IMPORTED_MODULE_2__.observable({}).extend({
        rateLimit: 300
      })
    };
    self.hasEntries = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      return self.databases().length > 0;
    });
    self.filteredEntries = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      if (!self.filter.querySpec() || typeof self.filter.querySpec().query === 'undefined' || !self.filter.querySpec().query) {
        return self.databases();
      }
      return self.databases().filter(function (database) {
        return database.catalogEntry.name.toLowerCase().indexOf(self.filter.querySpec().query.toLowerCase()) !== -1;
      });
    });
    self.autocompleteFromEntries = function (nonPartial, partial) {
      var result = [];
      var partialLower = partial.toLowerCase();
      self.databases().forEach(function (db) {
        if (db.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
          result.push(nonPartial + partial + db.catalogEntry.name.substring(partial.length));
        }
      });
      return result;
    };
    self.selectedDatabase.subscribe(function () {
      var db = self.selectedDatabase();
      if (db) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_3__.ASSIST_ACTIVE_DB_CHANGED_EVENT, {
          connector: _this.connector,
          namespace: _this.namespace,
          database: db.name
        });
      }
      if (window.HAS_SQL_ANALYZER && db && !db.popularityIndexSet && !self.nonSqlType) {
        var sqlAnalyzer = catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__["default"].getSqlAnalyzer(db.catalogEntry.getConnector());
        db.catalogEntry.loadSqlAnalyzerPopularityForChildren({
          silenceErrors: true,
          sqlAnalyzer: sqlAnalyzer
        }).then(function () {
          var applyPopularity = function applyPopularity() {
            db.entries().forEach(function (entry) {
              if (entry.catalogEntry.sqlAnalyzerPopularity && entry.catalogEntry.sqlAnalyzerPopularity.popularity >= 5) {
                entry.popularity(entry.catalogEntry.sqlAnalyzerPopularity.popularity);
              }
            });
          };
          if (db.loading()) {
            var subscription = db.loading.subscribe(function () {
              subscription.dispose();
              applyPopularity();
            });
          } else if (db.entries().length === 0) {
            var _subscription = db.entries.subscribe(function (newEntries) {
              if (newEntries.length > 0) {
                _subscription.dispose();
                applyPopularity();
              }
            });
          } else {
            applyPopularity();
          }
        });
      }
    });
    self.selectedDatabaseChanged = function () {
      if (self.selectedDatabase()) {
        if (!self.selectedDatabase().hasEntries() && !self.selectedDatabase().loading()) {
          self.selectedDatabase().loadEntries();
        }
        if (!self.navigationSettings.rightAssist) {
          var entry = self.selectedDatabase().catalogEntry;
          (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage)('assist_' + entry.getConnector().id + '_' + entry.namespace.id + '.lastSelectedDb', entry.name);
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish('assist.database.set', entry);
        }
      } else {
        (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage)('assist_' + self.connector.id + '_' + self.namespace.id + '.lastSelectedDb', null);
      }
    };
    var nestedFilter = {
      querySpec: knockout__WEBPACK_IMPORTED_MODULE_2__.observable({}).extend({
        rateLimit: 300
      })
    };
    self.setDatabase = function (databaseName) {
      if (databaseName && self.selectedDatabase() && databaseName === self.selectedDatabase().catalogEntry.name) {
        return;
      }
      if (databaseName && self.dbIndex[databaseName]) {
        self.selectedDatabase(self.dbIndex[databaseName]);
        self.selectedDatabaseChanged();
        return;
      }
      var lastSelectedDb = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.getFromLocalStorage)('assist_' + self.sourceType + '_' + self.namespace.id + '.lastSelectedDb');
      if (!lastSelectedDb && lastSelectedDb !== '') {
        lastSelectedDb = 'default';
      }
      if (lastSelectedDb && self.dbIndex[lastSelectedDb]) {
        self.selectedDatabase(self.dbIndex[lastSelectedDb]);
        self.selectedDatabaseChanged();
      } else if (lastSelectedDb && self.databases().length > 0) {
        self.selectedDatabase(self.databases()[0]);
        self.selectedDatabaseChanged();
      }
    };
    self.initDatabases = function (callback) {
      if (self.loading()) {
        return;
      }
      self.loading(true);
      self.hasErrors(false);
      var lastSelectedDbName = self.selectedDatabase() ? self.selectedDatabase().catalogEntry.name : null;
      self.selectedDatabase(null);
      self.databases([]);
      catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
        namespace: self.namespace,
        compute: self.compute(),
        connector: self.connector,
        path: [],
        definition: {
          type: 'source'
        }
      }).then(function (catalogEntry) {
        self.catalogEntry = catalogEntry;
        self.catalogEntry.getChildren({
          silenceErrors: self.navigationSettings.rightAssist
        }).then(function (databaseEntries) {
          self.dbIndex = {};
          var hasNavMeta = false;
          var dbs = [];
          databaseEntries.forEach(function (catalogEntry) {
            hasNavMeta = hasNavMeta || !!catalogEntry.navigatorMeta;
            var database = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_5__["default"](catalogEntry, null, self, nestedFilter, self.i18n, self.navigationSettings);
            self.dbIndex[catalogEntry.name] = database;
            if (catalogEntry.name === lastSelectedDbName) {
              self.selectedDatabase(database);
              self.selectedDatabaseChanged();
            }
            dbs.push(database);
          });
          if (!hasNavMeta && !self.nonSqlType) {
            try {
              self.catalogEntry.loadNavigatorMetaForChildren({
                silenceErrors: true
              });
            } catch (err) {}
          }
          self.databases(dbs);
          if (typeof callback === 'function') {
            callback();
          }
        })["catch"](function () {
          self.hasErrors(true);
        })["finally"](function () {
          self.loaded(true);
          self.loadedDeferred.resolve();
          self.loading(false);
          self.reloading(false);
        });
      });
    };
    self.modalItem = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    if (!self.navigationSettings.rightAssist) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribe('data.catalog.entry.refreshed', function (details) {
        if (self.namespace.id !== details.entry.namespace.id || details.entry.getConnector().id !== self.sourceType) {
          return;
        }
        if (self.catalogEntry === details.entry) {
          self.initDatabases();
        } else {
          var targetPath = details.entry.path.join('.');
          var findAndReloadInside = function findAndReloadInside(entries) {
            return entries.some(function (entry) {
              if (entry.catalogEntry.path.join('.') === targetPath) {
                entry.catalogEntry = details.entry;
                entry.loadEntries();
                return true;
              }
              return findAndReloadInside(entry.entries());
            });
          };
          findAndReloadInside(self.databases());
        }
      });
    }
  }
  return _createClass(AssistDbNamespace, [{
    key: "whenLoaded",
    value: function whenLoaded(callback) {
      var self = this;
      self.loadedDeferred.done(callback);
    }
  }, {
    key: "highlightInside",
    value: function highlightInside(catalogEntry) {
      var self = this;
      var foundDb;
      var findDatabase = function findDatabase() {
        self.databases().forEach(function (db) {
          db.highlight(false);
          if (db.databaseName === catalogEntry.path[0]) {
            foundDb = db;
          }
        });
        if (foundDb) {
          var whenLoaded = function whenLoaded() {
            if (self.selectedDatabase() !== foundDb) {
              self.selectedDatabase(foundDb);
            }
            if (!foundDb.open()) {
              foundDb.open(true);
            }
            window.setTimeout(function () {
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribeOnce('assist.db.scrollToComplete', function () {
                foundDb.highlight(true);
                // Timeout is for animation effect
                window.setTimeout(function () {
                  foundDb.highlight(false);
                }, 1800);
              });
              if (catalogEntry.path.length > 1) {
                foundDb.highlightInside(catalogEntry.path.slice(1));
              } else {
                utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish('assist.db.scrollTo', foundDb);
              }
            }, 0);
          };
          if (foundDb.hasEntries()) {
            whenLoaded();
          } else {
            foundDb.loadEntries(whenLoaded);
          }
        }
      };
      if (!self.loaded()) {
        self.initDatabases(findDatabase);
      } else {
        findDatabase();
      }
    }
  }, {
    key: "triggerRefresh",
    value: function triggerRefresh() {
      var self = this;
      if (self.catalogEntry) {
        self.catalogEntry.clearCache();
      }
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistDbNamespace);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! catalog/contextCatalog */ "./desktop/core/src/desktop/js/catalog/contextCatalog.ts");
/* harmony import */ var catalog_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! catalog/events */ "./desktop/core/src/desktop/js/catalog/events.ts");
/* harmony import */ var _assistDbNamespace__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assistDbNamespace */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbNamespace.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.








var AssistDbSource = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Object} options.i18n
   * @param {string} options.type
   * @param {Namespace} [options.initialNamespace] - Optional initial namespace to use
   * @param {Compute} [options.initialCompute] - Optional initial compute to use
   * @param {Connector} options.connector
   * @param {string} options.name
   * @param {boolean} options.nonSqlType - Optional, default false
   * @param {Object} options.navigationSettings
   * @constructor
   */
  function AssistDbSource(options) {
    _classCallCheck(this, AssistDbSource);
    var self = this;

    // TODO: Get rid of sourceType
    self.sourceType = options.type;
    self.connector = options.connector;
    self.name = options.name;
    self.i18n = options.i18n;
    self.nonSqlType = options.nonSqlType;
    self.navigationSettings = options.navigationSettings;
    self.initialNamespace = options.initialNamespace || (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_6__.getFromLocalStorage)('contextSelector.lastSelectedNamespace');
    self.initialCompute = options.initialCompute || (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_6__.getFromLocalStorage)('contextSelector.lastSelectedCompute');
    self.selectedNamespace = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.namespaces = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.loadedDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.filter = {
      querySpec: knockout__WEBPACK_IMPORTED_MODULE_1__.observable({}).extend({
        rateLimit: 300
      })
    };
    self.filteredNamespaces = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      if (!self.filter.querySpec() || typeof self.filter.querySpec().query === 'undefined' || !self.filter.querySpec().query) {
        return self.namespaces();
      }
      return self.namespaces().filter(function (namespace) {
        return namespace.name.toLowerCase().indexOf(self.filter.querySpec().query.toLowerCase()) !== -1;
      });
    });
    self.autocompleteFromNamespaces = function (nonPartial, partial) {
      var result = [];
      var partialLower = partial.toLowerCase();
      self.namespaces().forEach(function (namespace) {
        if (namespace.name.toLowerCase().indexOf(partialLower) === 0) {
          result.push(nonPartial + partial + namespace.name.substring(partial.length));
        }
      });
      return result;
    };
    var ensureDbSet = function ensureDbSet() {
      if (self.nonSqlType) {
        if (!self.selectedNamespace().selectedDatabase()) {
          self.selectedNamespace().selectedDatabase(self.selectedNamespace().databases()[0]);
          self.selectedNamespace().selectedDatabaseChanged();
        }
      }
    };
    self.selectedNamespace.subscribe(function (namespace) {
      if (namespace && !namespace.loaded() && !namespace.loading()) {
        namespace.initDatabases(ensureDbSet);
      } else {
        ensureDbSet();
      }
    });
    self.hasNamespaces = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.namespaces().length > 0;
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe(catalog_events__WEBPACK_IMPORTED_MODULE_3__.NAMESPACES_REFRESHED_TOPIC, function (connectorId) {
      if (self.connector.id !== connectorId) {
        return;
      }
      self.loading(true);
      (0,catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_2__.getNamespaces)({
        connector: self.connector
      }).then(function (context) {
        var newNamespaces = [];
        var existingNamespaceIndex = {};
        self.namespaces().forEach(function (assistNamespace) {
          existingNamespaceIndex[assistNamespace.namespace.id] = assistNamespace;
        });
        context.namespaces.forEach(function (newNamespace) {
          if (existingNamespaceIndex[newNamespace.id]) {
            existingNamespaceIndex[newNamespace.id].namespace = newNamespace;
            existingNamespaceIndex[newNamespace.id].name = newNamespace.name;
            existingNamespaceIndex[newNamespace.id].status(newNamespace.status);
            newNamespaces.push(existingNamespaceIndex[newNamespace.id]);
          } else {
            newNamespaces.push(new _assistDbNamespace__WEBPACK_IMPORTED_MODULE_4__["default"]({
              sourceType: self.sourceType,
              connector: self.connector,
              namespace: newNamespace,
              i18n: self.i18n,
              nonSqlType: self.nonSqlType,
              navigationSettings: self.navigationSettings
            }));
          }
        });
        self.namespaces(newNamespaces);
      })["catch"]()["finally"](function () {
        self.loading(false);
      });
    });
  }
  return _createClass(AssistDbSource, [{
    key: "whenLoaded",
    value: function whenLoaded(callback) {
      var self = this;
      self.loadedDeferred.done(callback);
    }
  }, {
    key: "loadNamespaces",
    value: function loadNamespaces(refresh) {
      var self = this;
      self.loading(true);
      if (refresh) {
        (0,catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_2__.getComputes)({
          connector: self.connector,
          clearCache: true
        })["catch"]();
      }
      return (0,catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_2__.getNamespaces)({
        connector: self.connector,
        clearCache: refresh
      }).then(function (context) {
        var assistNamespaces = [];
        var activeNamespace;
        var activeCompute;
        context.namespaces.forEach(function (namespace) {
          var assistNamespace = new _assistDbNamespace__WEBPACK_IMPORTED_MODULE_4__["default"]({
            sourceType: self.sourceType,
            namespace: namespace,
            connector: self.connector,
            i18n: self.i18n,
            nonSqlType: self.nonSqlType,
            navigationSettings: self.navigationSettings
          });
          if (self.initialNamespace && namespace.id === self.initialNamespace.id) {
            activeNamespace = assistNamespace;
            if (self.initialCompute) {
              activeNamespace.namespace.computes.some(function (compute) {
                if (compute.id === self.initialCompute.id) {
                  activeCompute = compute;
                }
              });
            }
          }
          assistNamespaces.push(assistNamespace);
        });
        self.namespaces(assistNamespaces);
        if (!refresh) {
          if (activeNamespace) {
            self.selectedNamespace(activeNamespace);
          } else if (assistNamespaces.length) {
            self.selectedNamespace(assistNamespaces[0]);
          }
          if (activeCompute) {
            self.selectedNamespace().compute(activeCompute);
          } else if (self.selectedNamespace() && self.selectedNamespace().namespace && self.selectedNamespace().namespace.computes && self.selectedNamespace().namespace.computes.length) {
            self.selectedNamespace().compute(self.selectedNamespace().namespace.computes[0]);
          }
        }
      })["catch"](function () {
        self.hasErrors(true);
      })["finally"](function () {
        self.loadedDeferred.resolve();
        self.loading(false);
      });
    }
  }, {
    key: "highlightInside",
    value: function highlightInside(catalogEntry) {
      var self = this;
      if (self.navigationSettings.rightAssist) {
        return;
      }
      var whenLoaded = function whenLoaded() {
        self.namespaces().some(function (namespace) {
          if (namespace.namespace.id === catalogEntry.namespace.id) {
            if (self.selectedNamespace() !== namespace) {
              self.selectedNamespace(namespace);
            }
            if (self.selectedNamespace().hasEntries()) {
              self.selectedNamespace().highlightInside(catalogEntry);
            } else {
              self.selectedNamespace().initDatabases(function () {
                self.selectedNamespace().highlightInside(catalogEntry);
              });
            }
            return true;
          }
        });
      };
      if (self.namespaces().length) {
        whenLoaded();
      } else if (self.loading()) {
        var loadingSub = self.loading.subscribe(function () {
          loadingSub.dispose();
          whenLoaded();
        });
      } else {
        self.loadNamespaces().then(whenLoaded);
      }
    }
  }, {
    key: "triggerRefresh",
    value: function triggerRefresh() {
      var self = this;
      self.loadNamespaces(true);
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistDbSource);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistGitEntry.js":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistGitEntry.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var AssistGitEntry = /*#__PURE__*/function () {
  /**
   * @param {object} options
   * @param {object} options.definition
   * @param {string} options.definition.name
   * @param {string} options.definition.type (file, dir)
   * @param {AssistGitEntry} options.parent
   * @constructor
   */
  function AssistGitEntry(options) {
    _classCallCheck(this, AssistGitEntry);
    var self = this;
    self.definition = options.definition;
    self.parent = options.parent;
    self.path = '';
    if (self.parent !== null) {
      self.path = self.parent.path;
      if (self.parent.path !== '/') {
        self.path += '/';
      }
    }
    self.path += self.definition.name;
    self.fileContent = knockout__WEBPACK_IMPORTED_MODULE_0__.observable('');
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray([]);
    self.loaded = false;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.loadingMore = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.open = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.open.subscribe(function (newValue) {
      if (newValue && self.entries().length === 0) {
        self.loadEntries();
      }
    });
    self.hasEntries = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return self.entries().length > 0;
    });
  }
  return _createClass(AssistGitEntry, [{
    key: "dblClick",
    value: function dblClick() {
      var self = this;
      if (self.definition.type !== 'file') {
        return;
      }
      self.hasErrors(false);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].fetchGitContents({
        pathParts: self.getHierarchy(),
        fileType: self.definition.type,
        successCallback: function successCallback(data) {
          self.fileContent(data.content);
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.dblClickGitItem', self);
        },
        errorCallback: function errorCallback() {
          self.hasErrors(true);
          self.loading(false);
        }
      });
    }
  }, {
    key: "loadEntries",
    value: function loadEntries(callback) {
      var self = this;
      if (self.loading()) {
        return;
      }
      self.loading(true);
      self.hasErrors(false);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].fetchGitContents({
        pathParts: self.getHierarchy(),
        fileType: self.definition.type,
        successCallback: function successCallback(data) {
          var filteredFiles = data.files.filter(function (file) {
            return file.name !== '.' && file.name !== '..';
          });
          self.entries(filteredFiles.map(function (file) {
            return new AssistGitEntry({
              definition: file,
              parent: self
            });
          }));
          self.loaded = true;
          self.loading(false);
          if (callback) {
            callback();
          }
        },
        errorCallback: function errorCallback() {
          self.hasErrors(true);
          self.loading(false);
          if (callback) {
            callback();
          }
        }
      });
    }
  }, {
    key: "loadDeep",
    value: function loadDeep(folders, callback) {
      var self = this;
      if (folders.length === 0) {
        callback(self);
        return;
      }
      var findNextAndLoadDeep = function findNextAndLoadDeep() {
        var nextName = folders.shift();
        var foundEntry = self.entries().filter(function (entry) {
          return entry.definition.name === nextName && entry.definition.type === 'dir';
        });
        if (foundEntry.length === 1) {
          foundEntry[0].loadDeep(folders, callback);
        } else if (!self.hasErrors()) {
          callback(self);
        }
      };
      if (!self.loaded) {
        self.loadEntries(findNextAndLoadDeep);
      } else {
        findNextAndLoadDeep();
      }
    }
  }, {
    key: "getHierarchy",
    value: function getHierarchy() {
      var self = this;
      var parts = [];
      var entry = self;
      while (entry != null) {
        parts.push(entry.definition.name);
        entry = entry.parent;
      }
      parts.reverse();
      return parts;
    }
  }, {
    key: "toggleOpen",
    value: function toggleOpen() {
      var self = this;
      if (self.definition.type !== 'dir') {
        return;
      }
      self.open(!self.open());
      if (self.definition.name === '..') {
        if (self.parent.parent) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.selectGitEntry', self.parent.parent);
        }
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.selectGitEntry', self);
      }
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistGitEntry);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistHBaseEntry.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistHBaseEntry.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var AssistHBaseEntry = /*#__PURE__*/function () {
  /**
   * @param {object} options
   * @param {object} options.definition
   * @param {string} options.definition.name
   * @constructor
   */
  function AssistHBaseEntry(options) {
    _classCallCheck(this, AssistHBaseEntry);
    var self = this;
    self.definition = options.definition;
    self.path = self.definition.name;
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray([]);
    self.loaded = false;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.hasEntries = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return self.entries().length > 0;
    });
  }
  return _createClass(AssistHBaseEntry, [{
    key: "loadEntries",
    value: function loadEntries(callback) {
      var self = this;
      if (self.loading()) {
        return;
      }
      self.loading(true);
      self.hasErrors(false);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].fetchHBase({
        parent: self.definition,
        successCallback: function successCallback(data) {
          self.entries(data.data.map(function (obj) {
            return new AssistHBaseEntry({
              definition: obj
            });
          }));
          self.loaded = true;
          self.loading(false);
          if (callback) {
            callback();
          }
        },
        errorCallback: function errorCallback() {
          self.hasErrors(true);
          self.loading(false);
          if (callback) {
            callback();
          }
        }
      });
    }
  }, {
    key: "open",
    value: function open() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.clickHBaseItem', this);
    }
  }, {
    key: "click",
    value: function click() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.clickHBaseItem', this);
    }
  }, {
    key: "dblClick",
    value: function dblClick() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('assist.dblClickHBaseItem', this);
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistHBaseEntry);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistInnerPanel.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistInnerPanel.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.



var AssistInnerPanel = /*#__PURE__*/_createClass(
/**
 * @param {Object} options
 * @param {string} options.type
 * @param {number} options.minHeight
 * @param {string} options.icon
 * @param {boolean} [options.rightAlignIcon] - Default false
 * @param {boolean} [options.visible]
 * @param {Object} panelData - component data
 * @constructor
 */
function AssistInnerPanel(options) {
  _classCallCheck(this, AssistInnerPanel);
  var self = this;
  self.minHeight = options.minHeight;
  self.icon = options.icon;
  self.type = options.type;
  self.name = options.name;
  self.panelData = options.panelData;
  self.rightAlignIcon = !!options.rightAlignIcon;
  self.iconSvg = options.iconSvg;
  self.visible = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(!!options.visible);
  (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_1__.withLocalStorage)('assist.showingPanel_' + self.type, self.visible, false, options.visible);
  self.templateName = 'assist-' + (['solr', 'kafka'].indexOf(self.type) !== -1 ? 'sql' : self.type) + '-inner-panel';
  var loadWhenVisible = function loadWhenVisible() {
    if (!self.visible()) {
      return;
    }
    if (self.type === 'documents' && !self.panelData.activeEntry().loaded()) {
      self.panelData.activeEntry().load();
    }
  };
  self.visible.subscribe(loadWhenVisible);
  loadWhenVisible();
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistInnerPanel);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistStorageEntry.js":
/*!********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistStorageEntry.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var PAGE_SIZE = 100;
var TYPE_SPECIFICS = {
  adls: {
    apiHelperFetchFunction: 'fetchAdlsPath',
    dblClickPubSubId: 'assist.dblClickAdlsItem'
  },
  abfs: {
    apiHelperFetchFunction: 'fetchAbfsPath',
    dblClickPubSubId: 'assist.dblClickAbfsItem'
  },
  hdfs: {
    apiHelperFetchFunction: 'fetchHdfsPath',
    dblClickPubSubId: 'assist.dblClickHdfsItem'
  },
  s3: {
    apiHelperFetchFunction: 'fetchS3Path',
    dblClickPubSubId: 'assist.dblClickS3Item'
  },
  gs: {
    apiHelperFetchFunction: 'fetchGSPath',
    dblClickPubSubId: 'assist.dblClickGSItem'
  },
  ofs: {
    apiHelperFetchFunction: 'fetchOfsPath',
    dblClickPubSubId: 'assist.dblClickOfsItem'
  }
};
var AssistStorageEntry = /*#__PURE__*/function () {
  /**
   * @param {object} options
   * @param {object} options.definition
   * @param {string} options.definition.name
   * @param {string} options.definition.type (file, dir)
   * @param {string} options.source - The storage source
   * @param {string} [options.originalType] - The original storage type ('adl', 's3a')
   * @param {AssistStorageEntry} options.parent
   * @constructor
   */
  function AssistStorageEntry(options) {
    _classCallCheck(this, AssistStorageEntry);
    var self = this;
    self.source = options.source;
    self.originalType = options.originalType;
    self.definition = options.definition;
    self.parent = options.parent;
    self.rootPath = options.rootPath || '';
    self.path = '';
    if (self.parent !== null) {
      self.path = self.parent.path;
      if (self.parent.path !== '/' && !/\/$/.test(self.path)) {
        self.path += '/';
      }
    }
    self.path += self.definition.name;
    self.abfsPath = (/^\//.test(self.path) ? 'abfs:/' : 'abfs://') + self.path;
    self.currentPage = 1;
    self.hasMorePages = true;
    self.preview = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.contextPopoverVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.filter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('').extend({
      rateLimit: 400
    });
    self.filter.subscribe(function () {
      self.currentPage = 1;
      self.hasMorePages = true;
      self.loadEntries();
    });
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray([]);
    self.loaded = false;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loadingMore = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.errorText = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.open = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.open.subscribe(function (newValue) {
      if (newValue && self.entries().length === 0) {
        if (self.definition.type === 'dir') {
          self.loadEntries();
        } else {
          self.loadPreview();
        }
      }
    });
    self.hasEntries = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.entries().length > 0;
    });
  }
  return _createClass(AssistStorageEntry, [{
    key: "dblClick",
    value: function dblClick() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(TYPE_SPECIFICS[self.source.type].dblClickPubSubId, this);
    }
  }, {
    key: "loadPreview",
    value: function loadPreview() {
      var self = this;
      self.loading(true);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchStoragePreview({
        path: self.getHierarchy(),
        type: self.source.type,
        silenceErrors: true
      }).done(function (data) {
        self.preview(data);
      }).fail(function (errorText) {
        self.hasErrors(true);
        self.errorText(errorText);
      }).always(function () {
        self.loading(false);
      });
    }
  }, {
    key: "loadEntries",
    value: function loadEntries(callback) {
      var self = this;
      if (self.loading()) {
        return;
      }
      self.loading(true);
      self.hasErrors(false);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"][TYPE_SPECIFICS[self.source.type].apiHelperFetchFunction]({
        pageSize: PAGE_SIZE,
        page: self.currentPage,
        filter: self.filter().trim() ? self.filter() : undefined,
        pathParts: self.getHierarchy(),
        rootPath: self.rootPath,
        successCallback: function successCallback(data) {
          self.hasMorePages = data.page.next_page_number > self.currentPage;
          var filteredFiles = data.files.filter(function (file) {
            return file.name !== '.' && file.name !== '..';
          });
          self.entries(filteredFiles.map(function (file) {
            return new AssistStorageEntry({
              originalType: self.originalType,
              rootPath: self.rootPath,
              source: self.source,
              definition: file,
              parent: self
            });
          }));
          self.loaded = true;
          self.loading(false);
          self.hasErrors(!!data.s3_listing_not_allowed); // Special case where we want errors inline instead of the default popover. We don't want errorCallback handling
          self.errorText(data.s3_listing_not_allowed);
          if (callback) {
            callback();
          }
        },
        errorCallback: function errorCallback(errorText) {
          self.hasErrors(true);
          self.errorText(errorText);
          self.loading(false);
          if (callback) {
            callback();
          }
        }
      });
    }
  }, {
    key: "goHome",
    value: function goHome() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.storage.go.home');
    }
  }, {
    key: "loadDeep",
    value: function loadDeep(folders, callback) {
      var self = this;
      if (folders.length === 0) {
        callback(self);
        return;
      }
      if (this.rootPath) {
        var relativeFolders = folders.join('/').replace(new RegExp('^' + this.rootPath, ''), '');
        folders = relativeFolders.split('/');
      }
      var nextName = folders.shift();
      var loadedPages = 0;
      var findNextAndLoadDeep = function findNextAndLoadDeep() {
        var foundEntry = self.entries().filter(function (entry) {
          return entry.definition.name === nextName;
        });
        var passedAlphabetically = self.entries().length > 0 && self.entries()[self.entries().length - 1].definition.name.localeCompare(nextName) > 0;
        if (foundEntry.length === 1) {
          foundEntry[0].loadDeep(folders, callback);
        } else if (!passedAlphabetically && self.hasMorePages && loadedPages < 50) {
          loadedPages++;
          self.fetchMore(findNextAndLoadDeep, function () {
            callback(self);
          });
        } else {
          callback(self);
        }
      };
      if (!self.loaded) {
        self.loadEntries(findNextAndLoadDeep);
      } else {
        findNextAndLoadDeep();
      }
    }
  }, {
    key: "getHierarchy",
    value: function getHierarchy() {
      var self = this;
      var parts = [];
      var entry = self;
      while (entry) {
        if (!entry.parent && entry.definition.name) {
          var rootParts = entry.definition.name.split('/').filter(Boolean);
          rootParts.reverse();
          parts = parts.concat(rootParts);
        } else if (entry.definition.name) {
          parts.push(entry.definition.name);
        }
        entry = entry.parent;
      }
      parts.reverse();
      return parts;
    }
  }, {
    key: "toggleOpen",
    value: function toggleOpen(data, event) {
      var self = this;
      if (self.definition.type === 'file') {
        var browserTarget = event.ctrlKey || event.metaKey || event.which === 2 ? '_blank' : undefined;
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.filebrowserlink', {
          pathPrefix: '/filebrowser/view=',
          decodedPath: self.definition.path,
          browserTarget: browserTarget
        });
        return;
      }
      self.open(!self.open());
      if (self.definition.name === '..') {
        if (self.parent.parent) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.selectStorageEntry', self.parent.parent);
        }
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.selectStorageEntry', self);
      }
    }
  }, {
    key: "fetchMore",
    value: function fetchMore(_successCallback, _errorCallback) {
      var self = this;
      if (!self.hasMorePages || self.loadingMore()) {
        return;
      }
      self.currentPage++;
      self.loadingMore(true);
      self.hasErrors(false);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"][TYPE_SPECIFICS[self.source.type].apiHelperFetchFunction]({
        pageSize: PAGE_SIZE,
        page: self.currentPage,
        filter: self.filter().trim() ? self.filter() : undefined,
        pathParts: self.getHierarchy(),
        successCallback: function successCallback(data) {
          self.hasMorePages = data.page.next_page_number > self.currentPage;
          var filteredFiles = data.files.filter(function (file) {
            return file.name !== '.' && file.name !== '..';
          });
          self.entries(self.entries().concat(filteredFiles.map(function (file) {
            return new AssistStorageEntry({
              originalType: self.originalType,
              rootPath: self.rootPath,
              source: self.source,
              definition: file,
              parent: self
            });
          })));
          self.loadingMore(false);
          if (_successCallback) {
            _successCallback();
          }
        },
        errorCallback: function errorCallback() {
          self.hasErrors(true);
          if (_errorCallback) {
            _errorCallback();
          }
        }
      });
    }
  }, {
    key: "showContextPopover",
    value: function showContextPopover(entry, event, positionAdjustment) {
      var $source = jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target);
      var offset = $source.offset();
      entry.contextPopoverVisible(true);
      if (positionAdjustment) {
        offset.left += positionAdjustment.left;
        offset.top += positionAdjustment.top;
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.show', {
        data: {
          type: 'storageEntry',
          storageEntry: entry
        },
        pinEnabled: true,
        orientation: 'right',
        source: {
          element: event.target,
          left: offset.left,
          top: offset.top - 3,
          right: offset.left + $source.width() + 3,
          bottom: offset.top + $source.height() - 3
        }
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('context.popover.hidden', function () {
        entry.contextPopoverVisible(false);
      });
    }
  }, {
    key: "openInImporter",
    value: function openInImporter() {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.in.importer', this.definition.path);
    }

    /**
     * Helper function to create an assistStorageEntry. It will load the entries starting from the root up until the
     * path or stop when a part is not found.
     *
     * @param {string} path - The path, can include the type i.e. '/tmp' or 's3:/tmp'.
     * @param {string} [type] - Optional type, if not specified here or in the path 'hdfs' will be used.
     * @return {JQueryPromise<AssistStorageEntry>}
     */
  }], [{
    key: "getEntry",
    value: function getEntry(path, type) {
      var deferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
      var typeMatch = path.match(/^([^:]+):\/(\/.*)\/?/i);
      type = typeMatch ? typeMatch[1] : type || 'hdfs';
      type = type.replace(/s3.*/i, 's3');
      type = type.replace(/adl.*/i, 'adls');
      type = type.replace(/abfs.*/i, 'abfs');
      type = type.replace(/ofs.*/i, 'ofs');

      // TODO: connector.id for browser connectors
      var connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_4__.findBrowserConnector)(function (connector) {
        return connector.type === type;
      });
      if (connector) {
        var rootPath = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_4__.getRootFilePath)(connector);
        var rootEntry = new AssistStorageEntry({
          source: connector,
          rootPath: rootPath,
          originalType: typeMatch && typeMatch[1],
          definition: {
            name: rootPath,
            type: 'dir'
          },
          parent: null,
          apiHelper: _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"]
        });
        if (type === 'abfs' || type === 'adls') {
          // ABFS / ADLS can have domain name in path. To prevent regression with s3 which allow periods in bucket name handle separately.
          var azureMatch = path.match(/^([^:]+):\/(\/((\w+)@)?[\w]+([\-\.]{1}\w+)*\.[\w]*)?(\/.*)?\/?/i);
          path = (azureMatch ? azureMatch[6] || '' : path).replace(/(?:^\/)|(?:\/$)/g, '').split('/');
          if (azureMatch && azureMatch[4]) {
            path.unshift(azureMatch[4]);
          }
        } else {
          path = (typeMatch ? typeMatch[2] : path).replace(/(?:^\/)|(?:\/$)/g, '').split('/');
        }
        rootEntry.loadDeep(path, deferred.resolve);
      } else {
        deferred.reject();
      }
      return deferred.promise();
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistStorageEntry);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/assistViewModel.js":
/*!*****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/assistViewModel.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _assistDbEntry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assistDbEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js");
/* harmony import */ var _assistDbSource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assistDbSource */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




// TODO: Get rid of
window.AssistDbEntry = _assistDbEntry__WEBPACK_IMPORTED_MODULE_0__["default"];
window.AssistDbSource = _assistDbSource__WEBPACK_IMPORTED_MODULE_1__["default"];

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/events.js":
/*!********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/events.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ASSIST_ACTIVE_DB_CHANGED_EVENT": () => (/* binding */ ASSIST_ACTIVE_DB_CHANGED_EVENT),
/* harmony export */   "ASSIST_DB_HIGHLIGHT_EVENT": () => (/* binding */ ASSIST_DB_HIGHLIGHT_EVENT),
/* harmony export */   "ASSIST_DB_PANEL_IS_READY_EVENT": () => (/* binding */ ASSIST_DB_PANEL_IS_READY_EVENT),
/* harmony export */   "ASSIST_DOC_HIGHLIGHT_EVENT": () => (/* binding */ ASSIST_DOC_HIGHLIGHT_EVENT),
/* harmony export */   "ASSIST_GET_DATABASE_EVENT": () => (/* binding */ ASSIST_GET_DATABASE_EVENT),
/* harmony export */   "ASSIST_GET_SOURCE_EVENT": () => (/* binding */ ASSIST_GET_SOURCE_EVENT),
/* harmony export */   "ASSIST_IS_DB_PANEL_READY_EVENT": () => (/* binding */ ASSIST_IS_DB_PANEL_READY_EVENT),
/* harmony export */   "ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT": () => (/* binding */ ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT),
/* harmony export */   "ASSIST_LANG_REF_SHOW_TOPIC_EVENT": () => (/* binding */ ASSIST_LANG_REF_SHOW_TOPIC_EVENT),
/* harmony export */   "ASSIST_SET_DATABASE_EVENT": () => (/* binding */ ASSIST_SET_DATABASE_EVENT),
/* harmony export */   "ASSIST_SET_SOURCE_EVENT": () => (/* binding */ ASSIST_SET_SOURCE_EVENT),
/* harmony export */   "ASSIST_SHOW_DOC_EVENT": () => (/* binding */ ASSIST_SHOW_DOC_EVENT),
/* harmony export */   "ASSIST_SHOW_SOLR_EVENT": () => (/* binding */ ASSIST_SHOW_SOLR_EVENT),
/* harmony export */   "ASSIST_SHOW_SQL_EVENT": () => (/* binding */ ASSIST_SHOW_SQL_EVENT),
/* harmony export */   "BOTH_ASSIST_TOGGLE_EVENT": () => (/* binding */ BOTH_ASSIST_TOGGLE_EVENT),
/* harmony export */   "SHOW_LEFT_ASSIST_EVENT": () => (/* binding */ SHOW_LEFT_ASSIST_EVENT),
/* harmony export */   "SHOW_RIGHT_ASSIST_EVENT": () => (/* binding */ SHOW_RIGHT_ASSIST_EVENT)
/* harmony export */ });
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

var SHOW_LEFT_ASSIST_EVENT = 'left.assist.show';
var SHOW_RIGHT_ASSIST_EVENT = 'right.assist.show';
var BOTH_ASSIST_TOGGLE_EVENT = 'both.assists.toggle';
var ASSIST_IS_DB_PANEL_READY_EVENT = 'assist.is.db.panel.ready';
var ASSIST_DB_PANEL_IS_READY_EVENT = 'assist.db.panel.is.ready';
var ASSIST_GET_SOURCE_EVENT = 'assist.get.source';
var ASSIST_SET_SOURCE_EVENT = 'assist.set.source';
var ASSIST_GET_DATABASE_EVENT = 'assist.get.database';
var ASSIST_SET_DATABASE_EVENT = 'assist.set.database';
var ASSIST_DB_HIGHLIGHT_EVENT = 'assist.db.highlight';
var ASSIST_DOC_HIGHLIGHT_EVENT = 'assist.doc.highlight';
var ASSIST_ACTIVE_DB_CHANGED_EVENT = 'assist.active.db.changed.event';
var ASSIST_SHOW_DOC_EVENT = 'assist.show.documents';
var ASSIST_SHOW_SQL_EVENT = 'assist.show.sql';
var ASSIST_SHOW_SOLR_EVENT = 'assist.show.solr';
var ASSIST_LANG_REF_SHOW_TOPIC_EVENT = 'assist.lang.ref.show.topic';
var ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT = 'assist.lang.ref.panel.show.topic';

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistDashboardPanel.js":
/*!*************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistDashboardPanel.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assistDbEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assistDbEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js");
/* harmony import */ var _assistDbSource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assistDbSource */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _ko_assistEditorContextPanel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ko.assistEditorContextPanel */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistEditorContextPanel.js");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var AssistDashboardPanel = /*#__PURE__*/_createClass(function AssistDashboardPanel() {
  var _this = this;
  _classCallCheck(this, AssistDashboardPanel);
  this.isSolr = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(true);
  this.showRisks = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
  this.filter = {
    querySpec: knockout__WEBPACK_IMPORTED_MODULE_0__.observable({
      query: '',
      facets: {},
      text: []
    }).extend({
      rateLimit: 300
    })
  };
  this.sourceType = knockout__WEBPACK_IMPORTED_MODULE_0__.observable('solr');
  this.activeTables = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
  this.filteredTables = _ko_assistEditorContextPanel__WEBPACK_IMPORTED_MODULE_6__.AssistantUtils.getFilteredTablesPureComputed(this);
  this.someLoading = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
    return _this.activeTables().some(function (table) {
      return table.loading() || !table.hasEntries() && !table.hasErrors();
    });
  });
  var navigationSettings = {
    showStats: true,
    rightAssist: true
  };
  var i18n = {};
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('set.active.dashboard.collection', function (collection) {
    var collectionName = collection.name();
    if (!collectionName) {
      return;
    }
    _this.sourceType = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(collection.engine());
    var connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_7__.findDashboardConnector)(function (connector) {
      return connector.id === collection.engine();
    });
    var assistDbSource = new _assistDbSource__WEBPACK_IMPORTED_MODULE_2__["default"]({
      i18n: i18n,
      initialNamespace: collection.activeNamespace,
      initialCompute: collection.activeCompute,
      type: collection.engine(),
      name: collection.engine(),
      connector: connector,
      nonSqlType: true,
      navigationSettings: navigationSettings
    });
    var fakeParentName = collectionName.indexOf('.') > -1 ? collectionName.split('.')[0] : 'default';
    var sourceType = collection.source() === 'query' ? collection.engine() + '-query' : collection.engine();
    catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
      namespace: collection.activeNamespace,
      compute: collection.activeCompute,
      connector: {
        id: sourceType
      },
      // TODO: Use connectors in assist dashboard panel
      path: [fakeParentName],
      definition: {
        type: 'database'
      }
    }).then(function (fakeDbCatalogEntry) {
      var assistFakeDb = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_1__["default"](fakeDbCatalogEntry, null, assistDbSource, _this.filter, i18n, navigationSettings);
      catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
        namespace: collection.activeNamespace,
        compute: collection.activeCompute,
        connector: {
          id: sourceType
        },
        // TODO: Use connectors in assist dashboard panel
        path: [fakeParentName, collectionName.indexOf('.') > -1 ? collectionName.split('.')[1] : collectionName],
        definition: {
          type: 'table'
        }
      }).then(function (collectionCatalogEntry) {
        var collectionEntry = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_1__["default"](collectionCatalogEntry, assistFakeDb, assistDbSource, _this.filter, i18n, navigationSettings);
        _this.activeTables([collectionEntry]);
        if (!collectionEntry.loaded && !collectionEntry.hasErrors() && !collectionEntry.loading()) {
          collectionEntry.loadEntries(function () {
            collectionEntry.toggleOpen();
          });
        }
      });
    });
    _this.autocompleteFromEntries = function (nonPartial, partial) {
      var added = {};
      var result = [];
      var partialLower = partial.toLowerCase();
      this.activeTables().forEach(function (table) {
        if (!added[table.catalogEntry.name] && table.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
          added[table.catalogEntry.name] = true;
          result.push(nonPartial + partial + table.catalogEntry.name.substring(partial.length));
        }
        table.entries().forEach(function (col) {
          if (!added[col.catalogEntry.name] && col.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
            added[col.catalogEntry.name] = true;
            result.push(nonPartial + partial + col.catalogEntry.name.substring(partial.length));
          }
        });
      });
      return result;
    };
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerStaticComponent('assist-dashboard-panel', AssistDashboardPanel, _ko_assistEditorContextPanel__WEBPACK_IMPORTED_MODULE_6__.TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistDbPanel.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistDbPanel.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _ko_assistKey__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ko.assistKey */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _assistDbSource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./assistDbSource */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.













var ASSIST_TABLE_TEMPLATES = "\n  <script type=\"text/html\" id=\"assist-no-database-entries\">\n    <ul class=\"assist-tables\">\n      <li>\n        <span class=\"assist-no-entries\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No entries found'), "</span>\n      </li>\n    </ul>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-no-table-entries\">\n    <ul>\n      <li>\n        <span class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('The table has no columns'), "</span>\n      </li>\n    </ul>\n  </script>\n\n  <script type=\"text/html\" id=\"sql-context-items\">\n    <!-- ko if: typeof catalogEntry !== 'undefined' -->\n      <li><a href=\"javascript:void(0);\" data-bind=\"click: function (data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\"><i class=\"fa fa-fw fa-info\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Show details'), "</a></li>\n      <!-- ko switch: sourceType -->\n      <!-- ko case: 'solr' -->\n        <!-- ko if: catalogEntry.isTableOrView() -->\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: openInIndexer\"><i class=\"fa fa-fw fa-table\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Browser'), "</a></li>\n        <li><a href=\"javascript: void(0);\" data-bind=\"click: function() { explore(true); }\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Dashboard'), "</a></li>\n        <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko case: $default -->\n        <!-- ko if: !catalogEntry.isDatabase() && $currentApp() === 'editor' -->\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: dblClick\"><i class=\"fa fa-fw fa-paste\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Insert at cursor'), "</a></li>\n        <!-- /ko -->\n        <!-- ko if: catalogEntry.path.length <=2 -->\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: openInMetastore\"><i class=\"fa fa-fw fa-table\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Browser'), "</a></li>\n        <!-- /ko -->\n        <!-- ko if: catalogEntry.isTableOrView() -->\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function() { huePubSub.publish('query.and.watch', {'url': '/notebook/browse/' + databaseName + '/' + tableName + '/', sourceType: sourceType}); }\"><i class=\"fa fa-fw fa-code\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Editor'), "</a></li>\n        <!-- ko if: window.HAS_SQL_DASHBOARD -->\n        <li><a href=\"javascript: void(0);\" data-bind=\"click: function() { explore(false); }\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Dashboard'), "</a></li>\n        <!-- /ko -->\n        <!-- /ko -->\n        <!-- ko if: window.ENABLE_QUERY_BUILDER && catalogEntry.isColumn() && $currentApp() === 'editor' -->\n        <li class=\"divider\"></li>\n        <!-- ko template: { name: 'query-builder-context-items' } --><!-- /ko -->\n        <!-- /ko -->\n      <!-- /ko -->\n      <!-- /ko -->\n    <!-- /ko -->\n  </script>\n\n  <script type=\"text/html\" id=\"query-builder-context-items\">\n    <li data-bind=\"contextSubMenu: '.hue-context-sub-menu'\">\n      <a href=\"javascript:void(0);\"><i class=\"fa fa-fw fa-magic\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Project'), "<i class=\"sub-icon fa fa-fw fa-chevron-right\"></i></a>\n      <ul class=\"hue-context-menu hue-context-sub-menu\">\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Select', 'Project', '{0}', false, false); }\">Select</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Select distinct', 'Project', '{0}', false, false); }\">Select distinct</a></li>\n      </ul>\n    </li>\n\n    <li data-bind=\"contextSubMenu: '.hue-context-sub-menu'\">\n      <a href=\"javascript:void(0);\"><i class=\"fa fa-fw fa-magic\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Aggregate'), "<i class=\"sub-icon fa fa-fw fa-chevron-right\"></i></a>\n      <ul class=\"hue-context-menu hue-context-sub-menu\">\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Count', 'Aggregate', 'COUNT({0}.{1}) as count_{1}', false, false); }\">Count</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Count distinct', 'Aggregate', 'COUNT(DISTINCT {0}.{1}) as distinct_count_{1}', false, false); }\">Count distinct</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Sum', 'Aggregate', 'SUM({0}.{1}) as sum_{1}', false, false); }\">Sum</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Minimum', 'Aggregate', 'MIN({0}.{1}) as min_{1}', false, false); }\">Minimum</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Maximum', 'Aggregate', 'MAX({0}.{1}) as max_{1}', false, false); }\">Maximum</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Average', 'Aggregate', 'AVG({0}.{1}) as avg_{1}', false, false); }\">Average</a></li>\n      </ul>\n    </li>\n\n    <li data-bind=\"contextSubMenu: '.hue-context-sub-menu'\">\n      <a href=\"javascript:void(0);\"><i class=\"fa fa-fw fa-magic\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Filter'), "<i class=\"sub-icon fa fa-fw fa-chevron-right\"></i></a>\n      <ul class=\"hue-context-menu hue-context-sub-menu\">\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { var isNotNullRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Is not null'); if (isNotNullRule.length) { isNotNullRule.attr('rule', 'Is null'); isNotNullRule.find('.rule').text('Is null'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Is null', 'Filter', '{0}.{1} = null', false, false); } }\">Is null</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { var isNullRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Is null'); if (isNullRule.length) { isNullRule.attr('rule', 'Is not null'); isNullRule.find('.rule').text('Is not null'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Is not null', 'Filter', '{0}.{1} != null', false, false); } }\">Is not null</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Equal to', 'Filter', '{0}.{1} = {2}', true, true); }\">Equal to</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Not equal to', 'Filter', '{0}.{1} != {2}', true, true); }\">Not equal to</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Greater than', 'Filter', '{0}.{1} > {2}', true, false) }\">Greater than</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { QueryBuilder.addRule(databaseName, tableName, columnName, 'Less than', 'Filter', '{0}.{1} < {2}', true, false); }\">Less than</a></li>\n      </ul>\n    </li>\n    <li data-bind=\"contextSubMenu: '.hue-context-sub-menu'\">\n      <a href=\"javascript:void(0);\"><i class=\"fa fa-fw fa-magic\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Order'), "<i class=\"sub-icon fa fa-fw fa-chevron-right\"></i></a>\n      <ul class=\"hue-context-menu hue-context-sub-menu\">\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { var descendingRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Descending'); if (descendingRule.length) { descendingRule.attr('rule', 'Ascending'); descendingRule.find('.rule').text('Ascending'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Ascending', 'Order', '{0}.{1} ASC', false, false); } }\">Ascending</a></li>\n        <li><a href=\"javascript:void(0);\" data-bind=\"click: function () { var ascendingRule = QueryBuilder.getRule(databaseName, tableName, columnName, 'Ascending'); if (ascendingRule.length) { ascendingRule.attr('rule', 'Descending'); ascendingRule.find('.rule').text('Descending'); } else { QueryBuilder.addRule(databaseName, tableName, columnName, 'Descending', 'Order', '{0}.{1} DESC', false, false); } }\">Descending</a></li>\n      </ul>\n    </li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-table-entry\">\n    <li class=\"assist-table\" data-bind=\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visibleOnHover: { override: statsVisible() || navigationSettings.rightAssist, selector: '.table-actions' }\">\n      <div class=\"assist-actions table-actions\" data-bind=\"css: { 'assist-actions-left': navigationSettings.rightAssist }\" style=\"opacity: 0\">\n        <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\"><i class=\"fa fa-fw fa-info\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Show details'), "\"></i></a>\n        <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.openItem, click: openItem\"><i class=\"fa fa-long-arrow-right\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open'), "\"></i></a>\n      </div>\n      <a class=\"assist-entry assist-table-link\" href=\"javascript:void(0)\" data-bind=\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }, draggableText: { text: editorText,  meta: { connector: catalogEntry.getConnector(), type: 'sql', isView: catalogEntry.isView(), table: tableName, database: databaseName } }\">\n        <i class=\"fa fa-fw muted valign-middle\" data-bind=\"css: iconClass\"></i>\n        <span class=\"highlightable\" data-bind=\"text: catalogEntry.getDisplayName(navigationSettings.rightAssist), css: { 'highlight': highlight }\"></span>\n      </a>\n      <div class=\"center assist-spinner\" data-bind=\"visible: loading() && open()\"><i class=\"fa fa-spinner fa-spin\"></i></div>\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\n    </li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-column-entry\">\n    <li data-bind=\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visible: ! hasErrors(), visibleOnHover: { childrenOnly: true, override: statsVisible, selector: catalogEntry.isView() ? '.table-actions' : '.column-actions' }, css: { 'assist-table': catalogEntry.isView(), 'assist-column': catalogEntry.isField() }\">\n      <div class=\"assist-actions column-actions\" data-bind=\"css: { 'assist-actions-left': navigationSettings.rightAssist }\" style=\"opacity: 0\">\n        <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\"><i class=\"fa fa-fw fa-info\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Show details'), "\"></i></a>\n      </div>\n      <!-- ko if: expandable -->\n      <a class=\"assist-entry assist-field-link\" href=\"javascript:void(0)\" data-bind=\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\">\n        <span class=\"highlightable\" data-bind=\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName }, text: catalogEntry.getDisplayName(), draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '").concat(_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__.ASSIST_KEY_COMPONENT, "', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\n      </a>\n      <!-- /ko -->\n      <!-- ko ifnot: expandable -->\n      <div class=\"assist-entry assist-field-link default-cursor\" href=\"javascript:void(0)\" data-bind=\"event: { dblclick: dblClick }, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\">\n        <span class=\"highlightable\" data-bind=\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName}, text: catalogEntry.getDisplayName(), draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '").concat(_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__.ASSIST_KEY_COMPONENT, "', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\n      </div>\n      <!-- /ko -->\n      <div class=\"center assist-spinner\" data-bind=\"visible: loading\"><i class=\"fa fa-spinner fa-spin\"></i></div>\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\n    </li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-column-entry-assistant\">\n    <li data-bind=\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visible: ! hasErrors(), visibleOnHover: { childrenOnly: true, override: statsVisible, selector: catalogEntry.isView() ? '.table-actions' : '.column-actions' }, css: { 'assist-table': catalogEntry.isView(), 'assist-column': catalogEntry.isField() }\">\n      <div class=\"assist-actions column-actions assist-actions-left\" style=\"opacity: 0\">\n        <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.showStats, popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\"><i class=\"fa fa-fw fa-info\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Show details'), "\"></i></a>\n      </div>\n      <!-- ko if: expandable -->\n      <a class=\"assist-entry assist-field-link assist-field-link-dark assist-entry-left-action assist-ellipsis\" href=\"javascript:void(0)\" data-bind=\"click: toggleOpen, attr: {'title': catalogEntry.getTitle(true) }\">\n        <span data-bind=\"text: catalogEntry.getType()\" class=\"muted pull-right margin-right-20\"></span>\n        <span class=\"highlightable\" data-bind=\"css: { 'highlight': highlight}, attr: { 'column': columnName, 'table': tableName, 'database': databaseName }, text: catalogEntry.name, draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '").concat(_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__.ASSIST_KEY_COMPONENT, "', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\n      </a>\n      <!-- /ko -->\n      <!-- ko ifnot: expandable -->\n      <div class=\"assist-entry assist-field-link assist-field-link-dark default-cursor assist-ellipsis\" href=\"javascript:void(0)\" data-bind=\"event: { dblclick: dblClick }, attr: {'title': catalogEntry.getTitle(true) }, css: { 'assist-entry-left-action': navigationSettings.rightAssist }\">\n        <span data-bind=\"text: catalogEntry.getType()\" class=\"muted pull-right margin-right-20\"></span>\n        <span class=\"highlightable\" data-bind=\"css: { 'highlight': highlight}, attr: {'column': columnName, 'table': tableName, 'database': databaseName}, text: catalogEntry.name, draggableText: { text: editorText, meta: { connector: catalogEntry.getConnector(), type: 'sql', column: columnName, table: tableName, database: databaseName } }\"></span><!-- ko if: catalogEntry.isKey() --> <!-- ko component: { name: '").concat(_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__.ASSIST_KEY_COMPONENT, "', params: { entry: catalogEntry } } --><!-- /ko --><!-- /ko -->\n      </div>\n      <!-- /ko -->\n      <div class=\"center assist-spinner\" data-bind=\"visible: loading\"><i class=\"fa fa-spinner fa-spin\"></i></div>\n      <!-- ko template: { if: open, name: 'assist-db-entries'  } --><!-- /ko -->\n    </li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-db-entries\">\n    <!-- ko if: ! hasErrors() && hasEntries() && ! loading() && filteredEntries().length == 0 -->\n    <ul class=\"assist-tables\">\n      <li class=\"assist-entry assist-no-entries\"><!-- ko if: catalogEntry.isTableOrView() -->").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No columns found'), "<!--/ko--><!-- ko if: catalogEntry.isDatabase() -->").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No tables found'), "<!--/ko--><!-- ko if: catalogEntry.isField() -->").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No results found'), "<!--/ko--></li>\n    </ul>\n    <!-- /ko -->\n    <!-- ko if: ! hasErrors() && hasEntries() && ! loading() && filteredEntries().length > 0 -->\n    <ul class=\"database-tree\" data-bind=\"foreachVisible: { data: filteredEntries, minHeight: navigationSettings.rightAssist ? 22 : 23, container: '.assist-db-scrollable', skipScrollEvent: navigationSettings.rightAssist, usePreloadBackground: true }, css: { 'assist-tables': catalogEntry.isDatabase() }\">\n      <!-- ko template: { if: catalogEntry.isTableOrView(), name: 'assist-table-entry' } --><!-- /ko -->\n      <!-- ko if: navigationSettings.rightAssist -->\n        <!-- ko template: { ifnot: catalogEntry.isTableOrView(), name: 'assist-column-entry-assistant' } --><!-- /ko -->\n      <!-- /ko -->\n      <!-- ko ifnot: navigationSettings.rightAssist -->\n        <!-- ko template: { ifnot: catalogEntry.isTableOrView(), name: 'assist-column-entry' } --><!-- /ko -->\n      <!-- /ko -->\n    </ul>\n    <!-- /ko -->\n    <!-- ko template: { if: ! hasErrors() && ! hasEntries() && ! loading() && (catalogEntry.isTableOrView()), name: 'assist-no-table-entries' } --><!-- /ko -->\n    <!-- ko template: { if: ! hasErrors() && ! hasEntries() && ! loading() && catalogEntry.isDatabase(), name: 'assist-no-database-entries' } --><!-- /ko -->\n    <!-- ko if: hasErrors -->\n    <ul class=\"assist-tables\">\n      <!-- ko if: catalogEntry.isTableOrView() -->\n      <li class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Error loading columns.'), "</li>\n      <!-- /ko -->\n      <!-- ko if: catalogEntry.isField() -->\n      <li class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Error loading fields.'), "</li>\n      <!-- /ko -->\n    </ul>\n    <!-- /ko -->\n  </script>\n");
var TEMPLATE = ASSIST_TABLE_TEMPLATES + "\n  <script type=\"text/html\" id=\"assist-database-actions\">\n    <div class=\"assist-actions database-actions\" style=\"opacity: 0\">\n      <!-- ko if: sourceType === 'hive' || sourceType === 'impala' -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.showStats, popoverOnHover: function (data, event) { showContextPopover(data, event); }, css: { 'blue': statsVisible }\"><i class=\"fa fa-fw fa-info\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Show details'), "\"></i></a>\n      <!-- /ko -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"visible: navigationSettings.openItem, click: openItem\"><i class=\"fa fa-long-arrow-right\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open'), "\"></i></a>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"collection-title-context-items\">\n    <li><a href=\"javascript:void(0);\" data-bind=\"hueLink: '/indexer'\"><i class=\"fa fa-fw fa-table\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Open in Browser'), "</a></li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-database-entry\">\n    <li class=\"assist-table\" data-bind=\"appAwareTemplateContextMenu: { template: 'sql-context-items', scrollContainer: '.assist-db-scrollable' }, visibleOnHover: { selector: '.database-actions' }\">\n      <!-- ko template: { name: 'assist-database-actions' } --><!-- /ko -->\n      <a class=\"assist-table-link\" href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.selectedDatabase($data); $parent.selectedDatabaseChanged(); }, attr: {'title': catalogEntry.getTitle(true) }, draggableText: { text: editorText,  meta: { connector: catalogEntry.getConnector(), type: 'sql', database: databaseName } }\"><i class=\"fa fa-fw fa-database muted valign-middle\"></i> <span class=\"highlightable\" data-bind=\"text: catalogEntry.name, css: { 'highlight': highlight() }\"></span></a>\n    </li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-db-breadcrumb\">\n    <div class=\"assist-flex-header assist-breadcrumb\">\n      <!-- ko if: selectedSource() -->\n      <!-- ko if: selectedSource().selectedNamespace() -->\n      <!-- ko if: selectedSource().selectedNamespace().selectedDatabase() -->\n      <a data-bind=\"click: back, appAwareTemplateContextMenu: { template: 'sql-context-items', viewModel: selectedSource().selectedNamespace().selectedDatabase() }\">\n        <i class=\"fa fa-chevron-left assist-breadcrumb-back\" ></i>\n        <i class=\"fa assist-breadcrumb-text\" data-bind=\"css: { 'fa-server': nonSqlType, 'fa-database': !nonSqlType }\"></i>\n        <span class=\"assist-breadcrumb-text\" data-bind=\"text: breadcrumb, attr: {'title': breadcrumbTitle }\"></span>\n      </a>\n      <!-- /ko -->\n      <!-- ko ifnot: selectedSource().selectedNamespace().selectedDatabase() -->\n      <!-- ko if: window.HAS_MULTI_CLUSTER-->\n      <a data-bind=\"click: back\">\n        <i class=\"fa fa-chevron-left assist-breadcrumb-back\"></i>\n        <i class=\"fa fa-snowflake-o assist-breadcrumb-text\"></i>\n        <span class=\"assist-breadcrumb-text\" data-bind=\"text: breadcrumb, attr: {'title': breadcrumbTitle }\"></span>\n      </a>\n      <!-- /ko -->\n      <!-- ko ifnot: window.HAS_MULTI_CLUSTER -->\n      <a data-bind=\"click: back\">\n        <i class=\"fa fa-chevron-left assist-breadcrumb-back\"></i>\n        <i class=\"fa fa-server assist-breadcrumb-text\"></i>\n        <span class=\"assist-breadcrumb-text\" data-bind=\"text: breadcrumb\"></span>\n      </a>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko ifnot: selectedSource().selectedNamespace() -->\n      <a data-bind=\"click: back\">\n        <i class=\"fa fa-chevron-left assist-breadcrumb-back\"></i>\n        <i class=\"fa fa-server assist-breadcrumb-text\"></i>\n        <span class=\"assist-breadcrumb-text\" data-bind=\"text: breadcrumb\"></span>\n      </a>\n      <!-- /ko -->\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-sql-inner-panel\">\n    <!-- ko template: { if: breadcrumb() !== null, name: 'assist-db-breadcrumb' } --><!-- /ko -->\n    <!-- ko template: { ifnot: selectedSource, name: 'assist-sources-template' } --><!-- /ko -->\n    <!-- ko with: selectedSource -->\n      <!-- ko template: { ifnot: selectedNamespace, name: 'assist-namespaces-template' } --><!-- /ko -->\n      <!-- ko with: selectedNamespace -->\n        <!-- ko template: { ifnot: selectedDatabase, name: 'assist-databases-template' } --><!-- /ko -->\n        <!-- ko with: selectedDatabase -->\n          <!-- ko template: { name: 'assist-tables-template' } --><!-- /ko -->\n        <!-- /ko -->\n      <!-- /ko -->\n    <!-- /ko -->\n  </script>\n\n  <script type=\"text/html\" id=\"ask-for-invalidate-title\">\n    &nbsp;<a class=\"pull-right pointer close-popover inactive-action\">&times;</a>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-namespace-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <!-- ko ifnot: loading -->\n      <span class=\"assist-tables-counter\">(<span data-bind=\"text: filteredNamespaces().length\"></span>)</span>\n      <!-- ko if: window.HAS_MULTI_CLUSTER -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: triggerRefresh\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Refresh'), "\"></i></a>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko if: loading -->\n      <i class=\"fa fa-refresh fa-spin blue\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Refresh'), "\"></i>\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-db-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <!-- ko ifnot: loading -->\n      <span class=\"assist-tables-counter\">(<span data-bind=\"text: filteredEntries().length\"></span>)</span>\n      <!-- ko if: sourceType !== 'solr' && $component.showImporter() -->\n      <!-- ko if: typeof databaseName !== 'undefined' -->\n        <a class=\"inactive-action\" data-bind=\"hueLink: importer_url + databaseName + '/?sourceType=' + sourceType + '&namespace=' + assistDbNamespace.namespace.id\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Create table'), "\" href=\"javascript:void(0)\">\n          <i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Create table'), "\"></i>\n        </a>\n      <!-- /ko -->\n      <!-- ko if: typeof databases !== 'undefined' -->\n        <a class=\"inactive-action\" data-bind=\"hueLink: window.HUE_URLS.IMPORTER_CREATE_DATABASE + '/?sourceType=' + sourceType + '&namespace=' + namespace.id\" href=\"javascript:void(0)\">\n          <i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Create database'), "\"></i>\n        </a>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko if: sourceType === 'solr' -->\n      <a class=\"inactive-action\" data-bind=\"hueLink: '/indexer/importer/prefill/all/index/'\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Create index'), "\">\n        <i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Create index'), "\"></i>\n      </a>\n      <!-- /ko -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: triggerRefresh\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Refresh'), "\"></i></a>\n      <!-- /ko -->\n      <!-- ko if: loading -->\n      <i class=\"fa fa-refresh fa-spin blue\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Refresh'), "\"></i>\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-sources-template\">\n    <div class=\"assist-flex-header\">\n      <div class=\"assist-inner-header\">\n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Sources'), "\n      </div>\n    </div>\n    <div class=\"assist-flex-fill\">\n      <ul class=\"assist-tables\" data-bind=\"foreach: sources\">\n        <li class=\"assist-table\">\n          <a class=\"assist-table-link\" href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.selectedSource($data); }\"><i class=\"fa fa-fw fa-server muted valign-middle\"></i> <span data-bind=\"text: name\"></span></a>\n        </li>\n      </ul>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-namespaces-template\">\n    <div class=\"assist-flex-header\">\n      <div class=\"assist-inner-header\">\n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Namespaces'), "\n        <!-- ko template: 'assist-namespace-header-actions' --><!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-search\" data-bind=\"visible: hasNamespaces() && !hasErrors()\">\n      <div class=\"assist-filter\">\n        <!-- ko component: {\n            name: 'inline-autocomplete',\n            params: {\n              querySpec: filter.querySpec,\n              facets: [],\n              knownFacetValues: {},\n              autocompleteFromEntries: autocompleteFromNamespaces\n            }\n          } --><!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-fill assist-db-scrollable\" data-bind=\"visible: !hasErrors() && !loading() && hasNamespaces(), delayedOverflow\">\n      <!-- ko if: !loading() && filteredNamespaces().length == 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No results found'), "</li>\n      </ul>\n      <!-- /ko -->\n      <ul class=\"assist-tables\" data-bind=\"foreach: filteredNamespaces\">\n        <li class=\"assist-table\">\n          <!-- ko if: status() === 'STARTING' -->\n          <span class=\"assist-table-link\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Starting'), "\" data-bind=\"tooltip: { placement: 'bottom' }\"><i class=\"fa fa-fw fa-spinner fa-spin muted valign-middle\"></i> <span data-bind=\"text: name\"></span></span>\n          <!-- /ko -->\n          <!-- ko if: status() !== 'STARTING' -->\n          <!-- ko if: namespace.computes.length -->\n          <a class=\"assist-table-link\" href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.selectedNamespace($data); }\"><i class=\"fa fa-fw fa-snowflake-o muted valign-middle\"></i> <span data-bind=\"text: name\"></span></a>\n          <!-- /ko -->\n          <!-- ko ifnot: namespace.computes.length -->\n          <span class=\"assist-table-link\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No related computes'), "\" data-bind=\"tooltip: { placement: 'bottom' }\"><i class=\"fa fa-fw fa-warning muted valign-middle\"></i> <span data-bind=\"text: name\"></span></span>\n          <!-- /ko -->\n          <!-- /ko -->\n        </li>\n      </ul>\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: loading\">\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: hasErrors() && !loading()\">\n      <span class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Error loading namespaces.'), "</span>\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: !hasErrors() && !loading() && !hasNamespaces()\">\n      <span class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No namespaces found.'), "</span>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-databases-template\">\n    <div class=\"assist-flex-header\" data-bind=\"visibleOnHover: { selector: '.hover-actions', override: loading() }\">\n      <div class=\"assist-inner-header\">\n        <!-- ko ifnot: sourceType === 'solr' || sourceType === 'kafka' -->\n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Databases'), "\n        <!-- ko template: 'assist-db-header-actions' --><!-- /ko -->\n        <!-- /ko -->\n        <!-- ko if: sourceType === 'solr' || sourceType === 'kafka'-->\n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Sources'), "\n        <!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-search\" data-bind=\"visible: hasEntries() && ! hasErrors()\">\n      <div class=\"assist-filter\">\n        <!-- ko component: {\n            name: 'inline-autocomplete',\n            params: {\n              querySpec: filter.querySpec,\n              facets: [],\n              placeHolder: sourceType === 'solr' || sourceType === 'kafka' ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Filter sources...'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Filter databases...'), "',\n              knownFacetValues: {},\n              autocompleteFromEntries: autocompleteFromEntries\n            }\n          } --><!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-fill assist-db-scrollable\" data-bind=\"visible: ! hasErrors() && ! loading() && hasEntries(), delayedOverflow\">\n      <!-- ko if: ! loading() && filteredEntries().length == 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No results found'), "</li>\n      </ul>\n      <!-- /ko -->\n      <ul class=\"assist-tables\" data-bind=\"foreachVisible: {data: filteredEntries, minHeight: 23, container: '.assist-db-scrollable', skipScrollEvent: navigationSettings.rightAssist }\">\n        <!-- ko template: { name: 'assist-database-entry' } --><!-- /ko -->\n      </ul>\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: loading\">\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: hasErrors() && ! loading()\">\n      <span class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Error loading databases.'), "</span>\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: ! hasErrors() && ! loading() && ! hasEntries()\">\n      <span class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('No databases found.'), "</span>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-tables-template\">\n    <div class=\"assist-flex-header\">\n      <div class=\"assist-inner-header\" data-bind=\"visible: !$parent.loading() && !$parent.hasErrors()\">\n        <!-- ko ifnot: sourceType === 'solr' || sourceType === 'kafka' -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Tables'), "\n        <!-- /ko -->\n        <!-- ko if: sourceType === 'solr' -->\n          <div data-bind=\"appAwareTemplateContextMenu: { template: 'collection-title-context-items', scrollContainer: '.assist-db-scrollable' }\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Indexes'), "</div>\n        <!-- /ko -->\n        <!-- ko if: sourceType === 'kafka' -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Topics'), "\n        <!-- /ko -->\n        <!-- ko template: 'assist-db-header-actions' --><!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-search\" data-bind=\"visible: hasEntries() && !$parent.loading() && !$parent.hasErrors()\">\n      <div class=\"assist-filter\">\n        <!-- ko component: {\n          name: 'inline-autocomplete',\n          params: {\n            querySpec: filter.querySpec,\n            facets: ['type'],\n            knownFacetValues: knownFacetValues.bind($data),\n            autocompleteFromEntries: autocompleteFromEntries\n          }\n        } --><!-- /ko -->\n      </div>\n    </div>\n    <div class=\"assist-flex-fill assist-db-scrollable\" data-bind=\"visible: ! hasErrors() && ! loading(), delayedOverflow\">\n      <!-- ko template: 'assist-db-entries' --><!-- /ko -->\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: loading() || $parent.loading()\">\n      <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    </div>\n    <div class=\"assist-flex-fill\" data-bind=\"visible: hasErrors() && ! loading()\">\n      <span class=\"assist-errors\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_10__["default"])('Error loading tables.'), "</span>\n    </div>\n  </script>\n\n  <!-- ko template: 'assist-sql-inner-panel' --><!-- /ko -->\n");
var AssistDbPanel = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Object} options.i18n
   * @param {Object} options.navigationSettings - enable/disable the links
   * @param {boolean} options.navigationSettings.openItem
   * @param {boolean} options.navigationSettings.showStats
   * @param {boolean} options.navigationSettings.pinEnabled
   * @param {boolean} [options.isSolr] - Default false;
   * @param {boolean} [options.isStreams] - Default false;
   * @constructor
   **/
  function AssistDbPanel(options) {
    var _this = this;
    _classCallCheck(this, AssistDbPanel);
    this.options = options;
    this.i18n = options.i18n;
    this.isStreams = options.isStreams;
    this.isSolr = options.isSolr;
    this.nonSqlType = this.isSolr || this.isStreams;
    this.showImporter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.sources = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    this.sourceIndex = {};
    this.selectedSource = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(null);
    this.breadcrumbTitle = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return "".concat(_this.breadcrumb(), " (").concat(_this.selectedSource().connector.displayName, ")");
    });
    this.breadcrumb = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      if (_this.isStreams && _this.selectedSource()) {
        return _this.selectedSource().connector.displayName;
      }
      if (!_this.isSolr && _this.selectedSource()) {
        if (_this.selectedSource().selectedNamespace()) {
          if (_this.selectedSource().selectedNamespace().selectedDatabase()) {
            return _this.selectedSource().selectedNamespace().selectedDatabase().catalogEntry.name;
          }
          if (window.HAS_MULTI_CLUSTER) {
            return _this.selectedSource().selectedNamespace().name;
          }
        }
        return _this.selectedSource().connector.displayName;
      }
      return null;
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_DB_HIGHLIGHT_EVENT, function (catalogEntry) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.SHOW_LEFT_ASSIST_EVENT);
      if (catalogEntry.getDialect() === 'solr') {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_SOLR_EVENT);
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_SQL_EVENT);
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish('context.popover.hide');
      window.setTimeout(function () {
        var foundSource;
        _this.sources().some(function (source) {
          if (source.sourceType === catalogEntry.getConnector().id) {
            foundSource = source;
            return true;
          }
        });
        if (foundSource) {
          if (_this.selectedSource() !== foundSource) {
            _this.selectedSource(foundSource);
          }
          foundSource.highlightInside(catalogEntry);
        }
      }, 0);
    });
    if (this.isSolr) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe('assist.collections.refresh', function () {
        var solrSource = _this.sourceIndex['solr'];
        var doRefresh = function doRefresh() {
          if (solrSource.selectedNamespace()) {
            var assistDbNamespace = solrSource.selectedNamespace();
            catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
              namespace: assistDbNamespace.namespace,
              compute: assistDbNamespace.compute(),
              connector: {
                id: 'solr'
              },
              path: []
            }).then(function (entry) {
              entry.clearCache({
                cascade: true
              });
            });
          }
        };
        if (!solrSource.hasNamespaces()) {
          solrSource.loadNamespaces(true).done(doRefresh);
        } else {
          doRefresh();
        }
      });
    } else if (!this.isSolr && !this.isStreams) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SET_DATABASE_EVENT, function (databaseDef) {
        if (!databaseDef.connector || !_this.sourceIndex[databaseDef.connector.id]) {
          return;
        }
        _this.selectedSource(_this.sourceIndex[databaseDef.connector.id]);
        _this.setDatabaseWhenLoaded(databaseDef.namespace, databaseDef.name);
      });
      var getSelectedDatabase = function getSelectedDatabase(connector) {
        var deferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
        var assistDbSource = _this.sourceIndex[connector.id];
        if (assistDbSource) {
          assistDbSource.loadedDeferred.done(function () {
            if (assistDbSource.selectedNamespace()) {
              assistDbSource.selectedNamespace().loadedDeferred.done(function () {
                if (assistDbSource.selectedNamespace().selectedDatabase()) {
                  deferred.resolve(assistDbSource.selectedNamespace().selectedDatabase().catalogEntry);
                } else {
                  var lastSelectedDb = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_11__.getFromLocalStorage)('assist_' + connector.id + '_' + assistDbSource.selectedNamespace().namespace.id + '.lastSelectedDb');
                  if (!lastSelectedDb && lastSelectedDb !== '') {
                    lastSelectedDb = 'default';
                  }
                  catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
                    connector: connector,
                    namespace: assistDbSource.selectedNamespace().namespace,
                    compute: assistDbSource.selectedNamespace().compute,
                    path: [lastSelectedDb]
                  }).then(deferred.resolve);
                }
              });
            } else {
              catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_4__["default"].getEntry({
                connector: connector,
                namespace: {
                  id: 'default'
                },
                compute: {
                  id: 'default'
                },
                path: ['default']
              }).then(deferred.resolve);
            }
          });
        } else {
          deferred.reject();
        }
        return deferred;
      };
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_GET_DATABASE_EVENT, function (options) {
        getSelectedDatabase(options.connector).done(options.callback);
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_GET_SOURCE_EVENT, function (callback) {
        callback(_this.selectedSource() ? _this.selectedSource().sourceType : undefined);
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SET_SOURCE_EVENT, function (source) {
        if (_this.sourceIndex[source]) {
          _this.selectedSource(_this.sourceIndex[source]);
        }
      });
      this.selectedSource.subscribe(function (newSource) {
        if (newSource) {
          if (newSource.namespaces().length === 0) {
            newSource.loadNamespaces();
          }
          (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_11__.setInLocalStorage)('assist.lastSelectedSource', newSource.sourceType);
        } else {
          (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_11__.setInLocalStorage)('assist.lastSelectedSource', null);
        }
      });
    }
    this.init(options.navigationSettings);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_DB_PANEL_IS_READY_EVENT);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_IS_DB_PANEL_READY_EVENT, function (callback) {
      if (callback) {
        callback();
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_DB_PANEL_IS_READY_EVENT);
    });
  }
  return _createClass(AssistDbPanel, [{
    key: "setDatabaseWhenLoaded",
    value: function setDatabaseWhenLoaded(namespace, databaseName) {
      var _this2 = this;
      this.selectedSource().whenLoaded(function () {
        if (_this2.selectedSource().selectedNamespace() && _this2.selectedSource().selectedNamespace().namespace.id !== namespace.id) {
          _this2.selectedSource().namespaces().some(function (otherNamespace) {
            if (otherNamespace.namespace.id === namespace.id) {
              _this2.selectedSource().selectedNamespace(otherNamespace);
              return true;
            }
          });
        }
        if (_this2.selectedSource().selectedNamespace()) {
          _this2.selectedSource().selectedNamespace().whenLoaded(function () {
            _this2.selectedSource().selectedNamespace().setDatabase(databaseName);
          });
        }
      });
    }
  }, {
    key: "back",
    value: function back() {
      if (this.isStreams) {
        this.selectedSource(null);
        return;
      }
      if (this.selectedSource()) {
        if (this.selectedSource() && this.selectedSource().selectedNamespace()) {
          if (this.selectedSource().selectedNamespace().selectedDatabase()) {
            this.selectedSource().selectedNamespace().selectedDatabase(null);
            this.selectedSource().selectedNamespace().selectedDatabaseChanged();
          } else if (window.HAS_MULTI_CLUSTER) {
            this.selectedSource().selectedNamespace(null);
          } else {
            this.selectedSource(null);
          }
        } else {
          this.selectedSource(null);
        }
      }
    }
  }, {
    key: "setSingleSource",
    value: function setSingleSource(connector, navigationSettings, nonSqlType) {
      var _this3 = this;
      this.sourceIndex = {};
      var source = new _assistDbSource__WEBPACK_IMPORTED_MODULE_7__["default"]({
        i18n: this.i18n,
        type: connector.id,
        name: connector.displayName,
        connector: connector,
        nonSqlType: nonSqlType,
        navigationSettings: navigationSettings
      });
      this.sourceIndex[connector.id] = source;
      this.sources([source]);
      this.selectedSource(source);
      source.loadNamespaces().then(function () {
        var namespace = _this3.selectedSource().selectedNamespace();
        if (namespace) {
          namespace.initDatabases();
          namespace.whenLoaded(function () {
            namespace.setDatabase('default');
          });
        }
      });
    }
  }, {
    key: "init",
    value: function init(navigationSettings) {
      var _this4 = this;
      if (this.isSolr) {
        var connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_6__.findDashboardConnector)(function (connector) {
          return connector.id === 'solr';
        });
        this.setSingleSource(connector, navigationSettings, true);
        return;
      }
      if (this.isStreams) {
        var _connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_6__.findEditorConnector)(function (connector) {
          return connector.dialect === 'ksql';
        });
        this.setSingleSource(_connector, navigationSettings, true);
        return;
      }
      var updateFromConfig = function updateFromConfig() {
        var sources = [];
        _this4.showImporter(!!(0,config_hueConfig__WEBPACK_IMPORTED_MODULE_6__.findBrowserConnector)(function (connector) {
          return connector.type === 'importer';
        }));
        var connectors = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_6__.filterEditorConnectors)(function (connector) {
          return connector.is_sql;
        });
        connectors.forEach(function (connector) {
          var source = _this4.sourceIndex[connector.id] || new _assistDbSource__WEBPACK_IMPORTED_MODULE_7__["default"]({
            i18n: _this4.i18n,
            type: connector.id,
            // TODO: Remove redundant
            name: connector.displayName,
            // TODO: Remove redundant
            connector: connector,
            nonSqlType: false,
            navigationSettings: navigationSettings
          });
          sources.push(source);
        });
        _this4.sourceIndex = {};
        sources.forEach(function (source) {
          _this4.sourceIndex[source.sourceType] = source;
        });
        if (sources.indexOf(_this4.selectedSource()) === -1) {
          if (sources.length) {
            var storageSourceType = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_11__.getFromLocalStorage)('assist.lastSelectedSource');
            _this4.selectedSource(storageSourceType && _this4.sourceIndex[storageSourceType] || sources[0]);
          } else {
            _this4.selectedSource(undefined);
          }
        }
        _this4.sources(sources);
      };
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_9__["default"].subscribe(config_events__WEBPACK_IMPORTED_MODULE_5__.CONFIG_REFRESHED_TOPIC, updateFromConfig);
      updateFromConfig();
    }
  }]);
}();
var instances = {};
var viewModelFactory = {
  createViewModel: function createViewModel(params) {
    var name = params.isStreams ? 'streams' : params.isSolr ? 'solr' : 'sql';
    if (!instances[name]) {
      instances[name] = new AssistDbPanel(params);
    }
    return instances[name];
  }
};
_componentUtils__WEBPACK_IMPORTED_MODULE_8__["default"].registerComponent('hue-assist-db-panel', viewModelFactory, TEMPLATE);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ASSIST_TABLE_TEMPLATES);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistDocumentsPanel.js":
/*!*************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistDocumentsPanel.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "REFRESH_DOC_ASSIST_EVENT": () => (/* binding */ REFRESH_DOC_ASSIST_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _doc_docSupport__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../doc/docSupport */ "./desktop/core/src/desktop/js/doc/docSupport.js");
/* harmony import */ var _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../doc/hueFileEntry */ "./desktop/core/src/desktop/js/doc/hueFileEntry.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.












var REFRESH_DOC_ASSIST_EVENT = 'assist.document.refresh';

// prettier-ignore
var TEMPLATE = "\n  <script type=\"text/html\" id=\"document-context-items\">\n    <!-- ko if: definition().type === 'directory' -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: open\"><i class=\"fa fa-fw fa-folder-open-o\"></i> ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Open folder'), "</a></li>\n    <!-- /ko -->\n    <!-- ko if: definition().type !== 'directory' -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: function(data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\"><i class=\"fa fa-fw fa-info\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Show details'), "</a></li>\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: open\"><i class=\"fa fa-fw fa-edit\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Open document'), "</a></li>\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: function() { $data.selected(true); huePubSub.publish('doc.show.delete.modal', $data.parent); }\"><i class=\"fa fa-fw fa-trash-o\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Delete document'), "</a></li>\n    <!-- /ko -->\n    <!-- ko if: $containerContext.sharingEnabled -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"publish: { 'doc.show.share.modal': $data }\"><i class=\"fa fa-fw fa-users\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Share'), "</a></li>\n    <!-- /ko -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: contextMenuDownload\"><i class=\"fa fa-fw fa-download\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Download'), "</a></li>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-document-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <!-- ko if: !loading() -->\n      <div class=\"highlightable\" data-bind=\"css: { 'highlight': $parent.highlightTypeFilter() }, component: { name: 'hue-drop-down', params: { fixedPosition: true, value: typeFilter, searchable: true, entries: DOCUMENT_TYPES, linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Document type'), "' } }\" style=\"display: inline-block\"></div>\n      <!-- /ko -->\n      <span class=\"dropdown new-document-drop-down\">\n\n        <a class=\"inactive-action dropdown-toggle\" data-toggle=\"dropdown\" data-bind=\"dropdown\" href=\"javascript:void(0);\">\n          <i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('New document'), "\"></i>\n        </a>\n        <ul class=\"dropdown-menu less-padding document-types\" style=\"margin-top:3px; margin-left:-140px; width: 175px;position: absolute;\" role=\"menu\">\n            <!-- ko if: window.HUE_APPS.indexOf('beeswax') !== -1 -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])(window.ENABLE_UNIFIED_ANALYTICS ? 'Unified Analytics Query' : 'Hive Query'), "\" data-bind=\"click: function() { huePubSub.publish('open.editor.new.query', {type: 'hive', 'directoryUuid': $data.getDirectory()}); }\" href=\"javascript:void(0);\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: window.ENABLE_UNIFIED_ANALYTICS ? 'impala' : 'hive' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])(window.ENABLE_UNIFIED_ANALYTICS ? 'Unified Analytics' : 'Hive'), "\n                </a>\n              </li>\n            <!-- /ko -->\n            <!-- ko if: window.HUE_APPS.indexOf('impala') !== -1 -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Impala Query'), "\" class=\"dropdown-item\" data-bind=\"click: function() { huePubSub.publish('open.editor.new.query', {type: 'impala', 'directoryUuid': $data.getDirectory()}); }\" href=\"javascript:void(0);\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'impala' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Impala'), "\n                </a>\n            </li>\n            <!-- /ko -->\n            <!-- ko if: window.SHOW_NOTEBOOKS -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Notebook'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.NOTEBOOK_INDEX)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'notebook' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Notebook'), "\n                </a>\n              </li>\n            <!-- /ko -->\n            <!-- ko if: window.HUE_APPS.indexOf('pig') !== -1 -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Pig Script'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.PIG_INDEX)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'pig' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Pig Script'), "\n                </a>\n              </li>\n            <!-- /ko -->\n            <!-- ko if: window.HUE_APPS.indexOf('oozie') !== -1 -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Oozie Workflow'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_WORKFLOW)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-workflow' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Workflow'), "\n                </a>\n              </li>\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Oozie Schedule'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_COORDINATOR)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-coordinator' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Schedule'), "\n                </a>\n              </li>\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Oozie Bundle'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.OOZIE_NEW_BUNDLE)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'oozie-bundle' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Bundle'), "\n                </a>\n              </li>\n            <!-- /ko -->\n            <!-- ko if: window.HUE_APPS.indexOf('search') !== -1 -->\n              <li>\n                <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Solr Search'), "\" data-bind=\"click: function() { $('.new-document-drop-down').removeClass('open');}, hueLink: $data.addDirectoryParamToUrl(window.HUE_URLS.SEARCH_NEW_SEARCH)\">\n                  <!-- ko template: { name: 'app-icon-template', data: { icon: 'dashboard' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Dashboard'), "\n                </a>\n              </li>\n            <!-- /ko -->\n            <li class=\"divider\"></li>\n            <li data-bind=\"css: { 'disabled': $data.isTrash() || $data.isTrashed() || !$data.canModify() }\">\n              <a href=\"javascript:void(0);\" data-bind=\"click: function () { $('.new-document-drop-down').removeClass('open'); huePubSub.publish('show.create.directory.modal', $data); }\"><svg class=\"hi\"><use href=\"#hi-folder\"></use><use href=\"#hi-plus-addon\"></use></svg> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('New folder'), "</a>\n            </li>\n          </ul>\n      </span>\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: function () { huePubSub.publish('").concat(REFRESH_DOC_ASSIST_EVENT, "'); }\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Manual refresh'), "\"></i></a>\n    </div>\n  </script>\n\n  <!-- ko with: activeEntry -->\n  <div class=\"assist-flex-header assist-breadcrumb\" style=\"overflow: visible\">\n    <!-- ko ifnot: isRoot -->\n    <a href=\"javascript: void(0);\" data-bind=\"click: function () { if (loaded()) { parent.makeActive(); } }\">\n      <i class=\"fa fa-fw fa-chevron-left\"></i>\n      <i class=\"fa fa-fw fa-folder-o\"></i>\n      <span data-bind=\"text: definition().name, attr: {'title': definition().name }\"></span>\n    </a>\n    <!-- /ko -->\n    <!-- ko if: isRoot -->\n    <div>\n      <i class=\"fa fa-fw fa-folder-o\"></i>\n      <span>/</span>\n    </div>\n    <!-- /ko -->\n    <!-- ko template: 'assist-document-header-actions' --><!-- /ko -->\n  </div>\n  <div class=\"assist-flex-search\">\n    <div class=\"assist-filter\">\n      <form autocomplete=\"off\">\n        <input class=\"clearable\" type=\"text\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Filter...'), "\" data-bind=\"clearable: filter, value: filter, valueUpdate: 'afterkeydown'\"/>\n      </form>\n    </div>\n  </div>\n  <div class=\"assist-flex-fill assist-file-scrollable\" data-bind=\"delayedOverflow\">\n    <div data-bind=\"visible: ! loading() && ! hasErrors() && entries().length > 0\">\n      <!-- ko if: filteredEntries().length == 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry\"><span class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('No documents found'), "</span></li>\n      </ul>\n      <!-- /ko -->\n      <ul class=\"assist-tables\" data-bind=\"foreachVisible: { data: filteredEntries, minHeight: 27, container: '.assist-file-scrollable' }\">\n        <li class=\"assist-entry assist-file-entry\" data-bind=\"appAwareTemplateContextMenu: { template: 'document-context-items', containerContext: $parents[2], scrollContainer: '.assist-file-scrollable', beforeOpen: beforeContextOpen }, assistFileDroppable, assistFileDraggable, visibleOnHover: { 'selector': '.assist-file-actions' }\">\n          <div class=\"assist-file-actions table-actions\">\n            <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"popoverOnHover: showContextPopover, css: { 'blue': statsVisible }\"><i class=\"fa fa-fw fa-info\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Show details'), "\"></i></a>\n          </div>\n          <a href=\"javascript:void(0)\" class=\"assist-entry assist-document-link\" data-bind=\"click: open, attr: {'title': name }\">\n            <!-- ko template: { name: 'document-icon-template', data: { document: $data, showShareAddon: true } } --><!-- /ko -->\n            <span class=\"highlightable\" data-bind=\"css: { 'highlight': highlight }, text: definition().name\"></span>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <div data-bind=\"visible: !loading() && ! hasErrors() && entries().length === 0\">\n      <span class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Empty directory'), "</span>\n    </div>\n    <div class=\"center\" data-bind=\"visible: loading() && ! hasErrors()\">\n      <i class=\"fa fa-spinner fa-spin\" style=\"font-size: 20px; color: #BBB\"></i>\n    </div>\n    <div class=\"assist-errors\" data-bind=\"visible: ! loading() && hasErrors()\">\n      <span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_9__["default"])('Error loading contents.'), "</span>\n    </div>\n  </div>\n  <!-- /ko -->\n");
var AssistDocumentsPanel = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {string} options.user
   * @constructor
   **/
  function AssistDocumentsPanel(options) {
    var _this = this;
    _classCallCheck(this, AssistDocumentsPanel);
    var self = this;
    self.user = options.user;
    self.activeEntry = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.activeSort = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('defaultAsc');
    self.typeFilter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(_doc_docSupport__WEBPACK_IMPORTED_MODULE_3__.DOCUMENT_TYPES[0]); // all is first
    self.sharingEnabled = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    var updateFromConfig = function updateFromConfig(hueConfig) {
      self.sharingEnabled(hueConfig && (hueConfig.hue_config.is_admin || hueConfig.hue_config.enable_sharing));
    };
    updateFromConfig((0,config_hueConfig__WEBPACK_IMPORTED_MODULE_7__.getLastKnownConfig)());
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].subscribe(config_events__WEBPACK_IMPORTED_MODULE_6__.CONFIG_REFRESHED_TOPIC, updateFromConfig);
    self.highlightTypeFilter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    var lastOpenedUuid = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_10__.getFromLocalStorage)('assist.last.opened.assist.doc.uuid');
    if (lastOpenedUuid) {
      self.activeEntry(new _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_4__["default"]({
        activeEntry: self.activeEntry,
        trashEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
        app: 'documents',
        user: self.user,
        activeSort: self.activeSort,
        typeFilter: self.typeFilter,
        definition: {
          uuid: lastOpenedUuid,
          type: 'directory'
        }
      }));
    } else {
      self.fallbackToRoot();
    }
    self.activeEntry.subscribe(function (newEntry) {
      if (!newEntry.loaded()) {
        var loadedSub = newEntry.loaded.subscribe(function (loaded) {
          if (loaded && !newEntry.hasErrors() && newEntry.definition() && newEntry.definition().uuid) {
            (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_10__.setInLocalStorage)('assist.last.opened.assist.doc.uuid', newEntry.definition().uuid);
          }
          loadedSub.dispose();
        });
      } else if (!newEntry.hasErrors() && newEntry.definition() && newEntry.definition().uuid) {
        (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_10__.setInLocalStorage)('assist.last.opened.assist.doc.uuid', newEntry.definition().uuid);
      }
    });
    self.reload = function () {
      self.activeEntry().load(function () {}, function () {
        self.fallbackToRoot();
      });
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].subscribe(REFRESH_DOC_ASSIST_EVENT, function () {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].publish('assist.clear.document.cache');
      self.reload();
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_DOC_HIGHLIGHT_EVENT, function (details) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_DOC_EVENT);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].publish('context.popover.hide');
      var whenLoaded = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred().done(function () {
        self.activeEntry().highlightInside(details.docUuid);
      });
      if (self.activeEntry() && self.activeEntry().definition() && self.activeEntry().definition().uuid === details.parentUuid) {
        if (self.activeEntry().loaded() && !self.activeEntry().hasErrors()) {
          whenLoaded.resolve();
        } else {
          var loadedSub = self.activeEntry().loaded.subscribe(function (newVal) {
            if (newVal) {
              if (!self.activeEntry().hasErrors()) {
                whenLoaded.resolve();
              }
              whenLoaded.reject();
              loadedSub.remove();
            }
          });
        }
        self.activeEntry().highlight(details.docUuid);
      } else {
        self.activeEntry(new _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_4__["default"]({
          activeEntry: self.activeEntry,
          trashEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
          app: 'documents',
          user: self.user,
          activeSort: self.activeSort,
          typeFilter: self.typeFilter,
          definition: {
            uuid: details.parentUuid,
            type: 'directory'
          }
        }));
        self.activeEntry().load(function () {
          whenLoaded.resolve();
        }, function () {
          whenLoaded.reject();
          self.fallbackToRoot();
        });
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_8__["default"].subscribe('assist.documents.set.type.filter', function (docType) {
      if (docType) {
        _this.setTypeFilter(docType);
      }
    });
    self.init();
  }
  return _createClass(AssistDocumentsPanel, [{
    key: "setTypeFilter",
    value: function setTypeFilter(newType) {
      var self = this;
      _doc_docSupport__WEBPACK_IMPORTED_MODULE_3__.DOCUMENT_TYPES.some(function (docType) {
        if (docType.type === newType) {
          self.typeFilter(docType);
          return true;
        }
      });
      self.highlightTypeFilter(true);
      window.setTimeout(function () {
        self.highlightTypeFilter(false);
      }, 600);
    }
  }, {
    key: "fallbackToRoot",
    value: function fallbackToRoot() {
      var self = this;
      if (!self.activeEntry() || self.activeEntry().definition() && (self.activeEntry().definition().path !== '/' || self.activeEntry().definition().uuid)) {
        (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_10__.setInLocalStorage)('assist.last.opened.assist.doc.uuid', null);
        self.activeEntry(new _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_4__["default"]({
          activeEntry: self.activeEntry,
          trashEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
          app: 'documents',
          user: self.user,
          activeSort: self.activeSort,
          typeFilter: self.typeFilter,
          definition: {
            name: '/',
            type: 'directory'
          }
        }));
        self.activeEntry().load();
      }
    }
  }, {
    key: "init",
    value: function init() {
      var self = this;
      if (!self.activeEntry().loaded()) {
        self.activeEntry().load(function () {}, function () {
          self.fallbackToRoot();
        }, true);
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_5__["default"].registerStaticComponent('hue-assist-documents-panel', AssistDocumentsPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistEditorContextPanel.js":
/*!*****************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistEditorContextPanel.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AssistantUtils": () => (/* binding */ AssistantUtils),
/* harmony export */   "TEMPLATE": () => (/* binding */ TEMPLATE)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ko_assistDbPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ko.assistDbPanel */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistDbPanel.js");
/* harmony import */ var _assistDbEntry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assistDbEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbEntry.js");
/* harmony import */ var _assistDbSource__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assistDbSource */ "./desktop/core/src/desktop/js/ko/components/assist/assistDbSource.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var catalog_DataCatalogEntry__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! catalog/DataCatalogEntry */ "./desktop/core/src/desktop/js/catalog/DataCatalogEntry.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.











var TEMPLATE = _ko_assistDbPanel__WEBPACK_IMPORTED_MODULE_2__["default"] + "\n  <div class=\"assist-inner-panel assist-assistant-panel\">\n    <div class=\"assist-flex-panel\">\n      <div class=\"assist-flex-header\">\n        <div class=\"assist-inner-header\">\n          <!-- ko if: isSolr -->\n          ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Indexes'), "\n          <!-- /ko -->\n          <!-- ko ifnot: isSolr -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Tables'), "\n          <!-- ko if: statementCount() > 1 -->\n          <div class=\"statement-count\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Statement'), " <span data-bind=\"text: activeStatementIndex() + '/' + statementCount()\"></span></div>\n          <!-- /ko -->\n          <!-- /ko -->\n        </div>\n      </div>\n      <div class=\"assist-flex-search\" data-bind=\"visible: activeTables().length > 0\">\n        <div class=\"assist-filter\">\n          <!-- ko component: {\n            name: 'inline-autocomplete',\n            params: {\n              querySpec: filter.querySpec,\n              facets: ['type'],\n              knownFacetValues: isSolr() ? SOLR_ASSIST_KNOWN_FACET_VALUES : SQL_ASSIST_KNOWN_FACET_VALUES,\n              autocompleteFromEntries: $component.autocompleteFromEntries\n            }\n          } --><!-- /ko -->\n        </div>\n      </div>\n      <div class=\"assist-flex-fill assist-db-scrollable\" data-bind=\"delayedOverflow\">\n        <!-- ko if: filteredTables().length === 0 && (!filter.querySpec() || filter.querySpec().query === '') -->\n        <div class=\"assist-no-entries\">\n          <!-- ko if: isSolr -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No indexes selected.'), "\n          <!-- /ko -->\n          <!-- ko ifnot: isSolr  -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No tables identified.'), "\n          <!-- /ko -->\n        </div>\n        <!-- /ko -->\n        <!-- ko if: filteredTables().length === 0 && filter.querySpec() && filter.querySpec().query !== '' && !someLoading() -->\n        <div class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No entries found'), "</div>\n        <!-- /ko -->\n        <!-- ko if: filteredTables().length > 0 -->\n        <ul class=\"database-tree assist-tables\" data-bind=\"foreachVisible: { data: filteredTables, minHeight: 22, container: '.assist-db-scrollable', skipScrollEvent: true }\">\n          <!-- ko if: hasErrors -->\n          <li class=\"assist-table hue-warning\" data-bind=\"attr: { 'title': $parent.isSolr() ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Error loading index details.'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Error loading table details.'), "'}\">\n            <span class=\"assist-entry\">\n              <i class=\"hue-warning fa fa-fw muted valign-middle fa-warning\"></i>\n              <!-- ko with: catalogEntry -->\n              <!-- ko if: typeof reload !== 'undefined' -->\n              <span data-bind=\"text: getDisplayName(true)\"></span> <a class=\"inactive-action\" href=\"javascript: void(0);\" data-bind=\"click: reload\"><i class=\"fa fa-refresh\" data-bind=\"css: { 'fa-spin': reloading }\"></i></a>\n              <!-- /ko -->\n              <!-- /ko -->\n            </span>\n          </li>\n          <!-- /ko -->\n          <!-- ko ifnot: hasErrors -->\n          <!-- ko template: { if: catalogEntry.isTableOrView(), name: 'assist-table-entry' } --><!-- /ko -->\n          <!-- ko template: { if: catalogEntry.isField(), name: 'assist-column-entry-assistant' } --><!-- /ko -->\n          <!-- /ko -->\n        </ul>\n        <!-- /ko -->\n        <!-- ko hueSpinner: { spin: filter.querySpec() && filter.querySpec().query !== '' && someLoading(), inline: true,  center: true} --><!-- /ko -->\n      </div>\n\n      <!-- ko if: showRisks -->\n      <div class=\"assist-flex-header assist-divider\"><div class=\"assist-inner-header\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Query Analysis'), "</div></div>\n      <div class=\"assist-flex-third\">\n        <!-- ko if: ! activeRisks().hints -->\n        <div class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Select a query or start typing to get optimization hints.'), "</div>\n        <!-- /ko -->\n        <!-- ko if: activeRisks().hints && activeRisks().hints.length === 0 -->\n        <div class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No optimizations identified.'), "</div>\n        <!-- /ko -->\n        <!-- ko if: activeRisks().hints && activeRisks().hints.length > 0 -->\n        <ul class=\"risk-list\" data-bind=\"foreach: activeRisks().hints\">\n          <li>\n            <div class=\"risk-list-title\" data-bind=\"css: { 'risk-list-high' : risk === 'high', 'risk-list-normal':  risk !== 'high' }, tooltip: { title: risk + ' ' + riskTables }\"><span data-bind=\"text: riskAnalysis\"></span></div>\n            <div class=\"risk-list-description\" data-bind=\"text: riskRecommendation\"></div>\n            <div class=\"risk-quickfix\" data-bind=\"visible: (riskId === 17 || riskId === 18 || riskId === 22) && $parent.activeEditor() && $parent.activeLocations()\" style=\"display:none;\">\n              <a href=\"javascript:void(0);\" data-bind=\"click: function () { $parent.addFilter(riskId); hueAnalytics.convert('sqlAnalyzer', 'addFilter/' + riskId); }\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Fix me'), "</a>\n            </div>\n          </li>\n        </ul>\n        <!-- /ko -->\n        <!-- ko if: hasMissingRisks() -->\n        <div class=\"margin-top-20\">\n          <!-- ko hueSpinner: { spin: uploadingTableStats, inline: true} --><!-- /ko -->\n          <!-- ko ifnot: uploadingTableStats -->\n          <a href=\"javascript:void(0)\" data-bind=\"visible: activeTables().length > 0, click: function() { uploadTableStats(true) }, attr: { 'title': ('").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Add table'), " '  + (isMissingDDL() ? 'DDL' : '') + (isMissingDDL() && isMissingStats() ? ' ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('and'), " ' : '') + (isMissingStats() ? 'stats' : '')) }\">\n            <i class=\"fa fa-fw fa-plus-circle\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Improve Analysis'), "\n          </a>\n          <!-- /ko -->\n        </div>\n        <!-- /ko -->\n      </div>\n      <!-- /ko -->\n    </div>\n  </div>\n");
var AssistantUtils = /*#__PURE__*/function () {
  function AssistantUtils() {
    _classCallCheck(this, AssistantUtils);
  }
  return _createClass(AssistantUtils, null, [{
    key: "getFilteredTablesPureComputed",
    value: function getFilteredTablesPureComputed(vm) {
      var openedByFilter = [];
      return knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
        if (!vm.filter || !vm.filter.querySpec() || (!vm.filter.querySpec().facets || Object.keys(vm.filter.querySpec().facets).length === 0) && (!vm.filter.querySpec().text || vm.filter.querySpec().text.length === 0)) {
          while (openedByFilter.length) {
            openedByFilter.pop().open(false);
          }
          return vm.activeTables();
        }
        var facets = vm.filter.querySpec().facets;
        var result = [];
        vm.activeTables().forEach(function (entry) {
          var facetMatch = !facets || !facets['type'] || !facets['type']['table'] && !facets['type']['view'];
          if (!facetMatch && facets['type']['table']) {
            facetMatch = entry.catalogEntry.isTable();
          }
          if (!facetMatch && facets['type']['view']) {
            facetMatch = entry.catalogEntry.isView();
          }
          var textMatch = !vm.filter.querySpec().text || vm.filter.querySpec().text.length === 0;
          if (!textMatch) {
            var nameLower = entry.catalogEntry.name.toLowerCase();
            textMatch = vm.filter.querySpec().text.every(function (text) {
              return nameLower.indexOf(text.toLowerCase()) !== -1;
            });
          }
          entry.filterColumnNames(!textMatch);
          if (facetMatch && textMatch || entry.filteredEntries().length > 0) {
            if (!entry.open()) {
              entry.open(true);
              openedByFilter.push(entry);
            }
            result.push(entry);
          }
        });
        return result;
      });
    }
  }]);
}();
var AssistEditorContextPanel = /*#__PURE__*/function () {
  function AssistEditorContextPanel(params) {
    var _this = this;
    _classCallCheck(this, AssistEditorContextPanel);
    this.isSolr = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.activeTab = params.activeTab;
    this.connector = params.connector;
    this.showRisks = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      if (!window.HAS_SQL_ANALYZER || _this.isSolr()) {
        return false;
      }
      if (_this.connector().dialect_properties) {
        // TODO: dialect_properties only for when ENABLE_CONNECTORS is enabled
        return _this.connector().dialect_properties.has_optimizer_risks;
      } else {
        return _this.connector().dialect === 'impala' || _this.connector().dialect === 'hive';
      }
    });
    this.uploadingTableStats = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.activeStatement = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    this.activeTables = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    this.activeRisks = knockout__WEBPACK_IMPORTED_MODULE_1__.observable({});
    this.activeEditor = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    this.activeRisks.subscribe(function () {
      if (_this.isMissingDDL()) {
        _this.uploadTableStats(false);
      }
    });
    this.activeLocations = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    this.statementCount = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    this.activeStatementIndex = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    this.hasActiveRisks = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return _this.activeRisks().hints && _this.activeRisks().hints.length > 0;
    });
    this.hasMissingRisks = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return _this.isMissingDDL() || _this.isMissingStats();
    });
    this.isMissingDDL = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return _this.activeRisks().noDDL && _this.activeRisks().noDDL.length > 0;
    });
    this.isMissingStats = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return window.AUTO_UPLOAD_SQL_ANALYZER_STATS && _this.activeRisks().noStats && _this.activeRisks().noStats.length > 0;
    });
    this.someLoading = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return _this.activeTables().some(function (table) {
        return table.loading() || !table.hasEntries() && !table.hasErrors();
      });
    });
    var createQualifiedIdentifier = function createQualifiedIdentifier(identifierChain, defaultDatabase) {
      if (identifierChain.length === 1) {
        return defaultDatabase + '.' + identifierChain[0].name;
      }
      return identifierChain.map(function (identifier) {
        return identifier.name;
      }).join('.').toLowerCase();
    };
    this.filter = {
      querySpec: knockout__WEBPACK_IMPORTED_MODULE_1__.observable({
        query: '',
        facets: {},
        text: []
      }).extend({
        rateLimit: 300
      })
    };
    this.filteredTables = AssistantUtils.getFilteredTablesPureComputed(this);
    var navigationSettings = {
      showStats: true,
      rightAssist: true
    };
    var i18n = {};
    var sources = {};
    var loadEntriesTimeout = -1;
    // This fetches the columns for each table synchronously with 2 second in between.
    var loadEntries = function loadEntries(currentCount) {
      var count = currentCount || 0;
      count++;
      if (count > 10) {
        return;
      }
      window.clearTimeout(loadEntriesTimeout);
      if (_this.activeTables().length === 1) {
        var singleTable = _this.activeTables()[0];
        if (!singleTable.hasErrors()) {
          singleTable.open(true);
        }
      } else {
        loadEntriesTimeout = window.setTimeout(function () {
          _this.activeTables().every(function (table) {
            if (!table.loaded && !table.hasErrors() && !table.loading()) {
              table.loadEntries(function () {
                loadEntries(count);
              });
              return false;
            }
            return !table.loading();
          });
        }, 2000);
      }
    };
    this.autocompleteFromEntries = function (nonPartial, partial) {
      var added = {};
      var result = [];
      var partialLower = partial.toLowerCase();
      _this.filteredTables().forEach(function (table) {
        if (!added[table.catalogEntry.name] && table.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
          added[table.catalogEntry.name] = true;
          result.push(nonPartial + partial + table.catalogEntry.name.substring(partial.length));
        }
        table.entries().forEach(function (col) {
          if (!added[col.catalogEntry.name] && col.catalogEntry.name.toLowerCase().indexOf(partialLower) === 0) {
            added[col.catalogEntry.name] = true;
            result.push(nonPartial + partial + col.catalogEntry.name.substring(partial.length));
          }
        });
      });
      return result;
    };
    this.activeTables.subscribe(loadEntries);
    var updateOnVisible = false;
    var runningPromises = [];
    var handleLocationUpdate = function handleLocationUpdate(activeLocations) {
      while (runningPromises.length) {
        var promise = runningPromises.pop();
        if (promise.cancel) {
          promise.cancel();
        }
      }
      updateOnVisible = false;
      if (!sources[activeLocations.connector.id]) {
        sources[activeLocations.connector.id] = {
          assistDbSource: new _assistDbSource__WEBPACK_IMPORTED_MODULE_4__["default"]({
            i18n: i18n,
            initialNamespace: activeLocations.namespace,
            connector: activeLocations.connector,
            type: activeLocations.connector.id,
            name: activeLocations.connector.displayName,
            navigationSettings: navigationSettings
          }),
          databaseIndex: {},
          activeTableIndex: {}
        };
      }
      var assistDbSource = sources[activeLocations.connector.id].assistDbSource;
      var databaseIndex = sources[activeLocations.connector.id].databaseIndex;
      var activeTableIndex = sources[activeLocations.connector.id].activeTableIndex;
      if (!activeLocations) {
        _this.activeLocations(undefined);
        return;
      }
      _this.activeLocations(activeLocations);
      _this.statementCount(activeLocations.totalStatementCount);
      _this.activeStatementIndex(activeLocations.activeStatementIndex);
      if (activeLocations.activeStatementLocations) {
        var updateTables = false;
        var tableQidIndex = {};
        var ctes = {};
        activeLocations.activeStatementLocations.forEach(function (location) {
          if (location.type === 'alias' && location.source === 'cte') {
            ctes[location.alias.toLowerCase()] = true;
          }
        });
        activeLocations.activeStatementLocations.forEach(function (location) {
          if (location.type === 'table' && (location.identifierChain.length !== 1 || !ctes[location.identifierChain[0].name.toLowerCase()])) {
            var tableDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
            var dbDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
            runningPromises.push(tableDeferred);
            runningPromises.push(dbDeferred);
            var qid = createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase);
            if (activeTableIndex[qid]) {
              tableQidIndex[qid] = true;
              tableDeferred.resolve(activeTableIndex[qid]);
              dbDeferred.resolve(activeTableIndex[qid].parent);
            } else {
              var database = location.identifierChain.length === 2 ? location.identifierChain[0].name : activeLocations.defaultDatabase;
              database = database.toLowerCase();
              if (databaseIndex[database]) {
                dbDeferred.resolve(databaseIndex[database]);
              } else {
                catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_6__["default"].getEntry({
                  namespace: activeLocations.namespace,
                  compute: activeLocations.compute,
                  connector: activeLocations.connector,
                  path: [database],
                  definition: {
                    type: 'database'
                  }
                }).then(function (catalogEntry) {
                  databaseIndex[database] = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_3__["default"](catalogEntry, null, assistDbSource, _this.filter, i18n, navigationSettings);
                  updateTables = true;
                  dbDeferred.resolve(databaseIndex[database]);
                })["catch"](function () {
                  dbDeferred.reject();
                });
              }
              dbDeferred.done(function (dbEntry) {
                dbEntry.catalogEntry.getChildren({
                  silenceErrors: true
                }).then(function (tableEntries) {
                  var tableName = location.identifierChain[location.identifierChain.length - 1].name;
                  var found = tableEntries.some(function (tableEntry) {
                    if (tableEntry.name.toLowerCase() === tableName.toLowerCase()) {
                      var assistTableEntry = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_3__["default"](tableEntry, dbEntry, assistDbSource, _this.filter, i18n, navigationSettings);
                      activeTableIndex[createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase)] = assistTableEntry;
                      tableQidIndex[qid] = true;
                      updateTables = true;
                      tableDeferred.resolve(assistTableEntry);
                      return true;
                    }
                  });
                  if (!found) {
                    var catalogEntry = new catalog_DataCatalogEntry__WEBPACK_IMPORTED_MODULE_9__["default"]({
                      path: [dbEntry.catalogEntry.name, tableName],
                      dataCatalog: dbEntry.catalogEntry.dataCatalog,
                      namespace: dbEntry.catalogEntry.namespace,
                      compute: dbEntry.catalogEntry.namespace
                    });
                    catalogEntry.reloading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
                    catalogEntry.reload = function () {
                      var self = this;
                      if (self.reloading()) {
                        return;
                      }
                      self.reloading(true);
                      utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribeOnce('data.catalog.entry.refreshed', function (data) {
                        data.entry.getSourceMeta({
                          silenceErrors: true
                        })["finally"](function () {
                          self.reloading(false);
                        });
                      });
                      catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_6__["default"].getEntry({
                        namespace: activeLocations.namespace,
                        compute: activeLocations.compute,
                        connector: activeLocations.connector,
                        path: []
                      }).then(function (sourceEntry) {
                        sourceEntry.getChildren().then(function (dbEntries) {
                          var clearPromise;
                          // Clear the database first if it exists without cascade
                          var hasDb = dbEntries.some(function (dbEntry) {
                            if (dbEntry.name.toLowerCase() === self.path[0].toLowerCase()) {
                              clearPromise = dbEntry.clearCache({
                                invalidate: 'invalidate',
                                cascade: false
                              });
                              return true;
                            }
                          });
                          if (!hasDb) {
                            // If the database is missing clear the source without cascade
                            clearPromise = sourceEntry.clearCache({
                              invalidate: 'invalidate',
                              cascade: false
                            });
                          }
                          clearPromise["catch"](function () {
                            self.reloading(false);
                          });
                        })["catch"](function () {
                          self.reloading(false);
                        });
                      })["catch"](function () {
                        self.reloading(false);
                      });
                    };
                    var missingEntry = new _assistDbEntry__WEBPACK_IMPORTED_MODULE_3__["default"](catalogEntry, dbEntry, assistDbSource, _this.filter, i18n, navigationSettings);
                    activeTableIndex[createQualifiedIdentifier(location.identifierChain, activeLocations.defaultDatabase)] = missingEntry;
                    tableQidIndex[qid] = true;
                    updateTables = true;
                    missingEntry.hasErrors(true);
                    tableDeferred.resolve(missingEntry);
                  }
                })["catch"](tableDeferred.reject);
              })["catch"](tableDeferred.reject);
            }
          }
        });
        jquery__WEBPACK_IMPORTED_MODULE_0___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_0___default()), runningPromises).always(function () {
          runningPromises.length = 0;
          Object.keys(activeTableIndex).forEach(function (key) {
            if (!tableQidIndex[key]) {
              delete activeTableIndex[key];
              updateTables = true;
            }
          });
          if (updateTables) {
            var tables = [];
            Object.keys(activeTableIndex).forEach(function (key) {
              tables.push(activeTableIndex[key]);
            });
            tables.sort(function (a, b) {
              return a.catalogEntry.name.localeCompare(b.catalogEntry.name);
            });
            _this.activeTables(tables);
          }
        });
      }
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('data.catalog.entry.refreshed', function (details) {
      var connectorId = details.entry.getConnector().id;
      if (sources[connectorId]) {
        var completeRefresh = false;
        if (details.entry.isSource()) {
          sources[connectorId].databaseIndex = {};
          sources[connectorId].activeTableIndex = {};
          completeRefresh = true;
        } else if (details.entry.isDatabase() && sources[connectorId].databaseIndex[details.entry.name]) {
          var dbEntry = sources[connectorId].databaseIndex[details.entry.name];
          var activeTableIndex = sources[connectorId].activeTableIndex;
          Object.keys(activeTableIndex).forEach(function (tableKey) {
            var tableEntry = activeTableIndex[tableKey];
            if (tableEntry.parent === dbEntry) {
              delete activeTableIndex[tableKey];
              completeRefresh = true;
            }
          });
        } else if (details.entry.isTableOrView()) {
          var _activeTableIndex = sources[connectorId].activeTableIndex;
          if (_activeTableIndex[details.entry.getQualifiedPath()]) {
            delete _activeTableIndex[details.entry.getQualifiedPath()];
            completeRefresh = true;
          }
        }
        if (completeRefresh) {
          handleLocationUpdate(_this.activeLocations());
        }
      }
    });
    if (this.activeTab() === 'editorAssistant') {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('get.active.editor.locations', handleLocationUpdate);
    } else {
      updateOnVisible = true;
    }
    this.activeTab.subscribe(function (activeTab) {
      if (activeTab === 'editorAssistant' && updateOnVisible) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('get.active.editor.locations', handleLocationUpdate);
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('editor.active.locations', function (activeLocations) {
      if (_this.activeTab() === 'editorAssistant') {
        handleLocationUpdate(activeLocations);
      } else {
        updateOnVisible = true;
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('editor.active.risks', function (details) {
      if (details.risks !== _this.activeRisks()) {
        _this.activeRisks(details.risks);
        _this.activeEditor(details.editor);
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('editor.get.active.risks', function (details) {
      _this.activeRisks(details.risks);
      _this.activeEditor(details.editor);
    });
  }
  return _createClass(AssistEditorContextPanel, [{
    key: "addFilter",
    value: function addFilter(riskId) {
      var _this2 = this;
      if (this.activeLocations() && this.activeEditor()) {
        this.activeLocations().activeStatementLocations.every(function (location) {
          var isLowerCase = false;
          if (_this2.activeLocations().activeStatementLocations && _this2.activeLocations().activeStatementLocations.length > 0) {
            var firstToken = _this2.activeLocations().activeStatementLocations[0].firstToken;
            isLowerCase = firstToken === firstToken.toLowerCase();
          }
          if (riskId === 22 && location.type === 'whereClause' && !location.subquery && location.missing) {
            _this2.activeEditor().moveCursorToPosition({
              row: location.location.last_line - 1,
              column: location.location.last_column - 1
            });
            _this2.activeEditor().clearSelection();
            if (/\S$/.test(_this2.activeEditor().getTextBeforeCursor())) {
              _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), ' ');
            }
            var operation = location.missing ? 'WHERE ' : 'AND ';
            _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), isLowerCase ? operation.toLowerCase() : operation);
            _this2.activeEditor().focus();
            if (riskId === 22) {
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('editor.autocomplete.temporary.sort.override', {
                partitionColumnsFirst: true
              });
            }
            window.setTimeout(function () {
              _this2.activeEditor().execCommand('startAutocomplete');
            }, 1);
            return false;
          }
          if (riskId === 17 && location.type === 'limitClause' && !location.subquery && location.missing) {
            _this2.activeEditor().moveCursorToPosition({
              row: location.location.last_line - 1,
              column: location.location.last_column - 1
            });
            _this2.activeEditor().clearSelection();
            if (/\S$/.test(_this2.activeEditor().getTextBeforeCursor())) {
              _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), ' ');
            }
            var _operation = 'LIMIT';
            _this2.activeEditor().session.insert(_this2.activeEditor().getCursorPosition(), isLowerCase ? _operation.toLowerCase() : _operation);
            _this2.activeEditor().focus();
            window.setTimeout(function () {
              _this2.activeEditor().execCommand('startAutocomplete');
            }, 1);
            return false;
          }
          if (riskId === 18 && location.type === 'asterisk' && !location.subquery) {
            _this2.activeEditor().moveCursorToPosition({
              row: location.location.last_line - 1,
              column: location.location.last_column - 1
            });
            _this2.activeEditor().clearSelection();
            _this2.activeEditor().removeTextBeforeCursor(1);
            _this2.activeEditor().focus();
            window.setTimeout(function () {
              _this2.activeEditor().execCommand('startAutocomplete');
            }, 1);
            return false;
          }
          return true;
        });
      }
    }
  }, {
    key: "uploadTableStats",
    value: function uploadTableStats(showProgress) {
      var _this3 = this;
      if (this.uploadingTableStats()) {
        return;
      }
      this.uploadingTableStats(true);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('editor.upload.table.stats', {
        activeTables: this.activeTables(),
        showProgress: showProgress,
        callback: function callback() {
          _this3.uploadingTableStats(false);
        }
      });
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_5__["default"].registerStaticComponent('assist-editor-context-panel', AssistEditorContextPanel, TEMPLATE);


/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistFunctionsPanel.js":
/*!*************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistFunctionsPanel.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _ko_dropDown__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ko.dropDown */ "./desktop/core/src/desktop/js/ko/components/ko.dropDown.js");
/* harmony import */ var sql_reference_sqlReferenceRepository__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sql/reference/sqlReferenceRepository */ "./desktop/core/src/desktop/js/sql/reference/sqlReferenceRepository.ts");
/* harmony import */ var sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sql/reference/sqlUdfRepository */ "./desktop/core/src/desktop/js/sql/reference/sqlUdfRepository.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.











var NAME = 'assist-functions-panel';
// prettier-ignore
var TEMPLATE = "\n  <div class=\"assist-inner-panel\">\n    <div class=\"assist-flex-panel\">\n      <div class=\"assist-flex-header\">\n        <div class=\"assist-inner-header\">\n          <div class=\"function-dialect-dropdown\" style=\"display: inline-block\" data-bind=\"\n              component: {\n                name: '".concat(_ko_dropDown__WEBPACK_IMPORTED_MODULE_4__.HUE_DROP_DOWN_COMPONENT, "',\n                params: {\n                  fixedPosition: true,\n                  value: activeConnectorUdfs,\n                  entries: availableConnectorUdfs,\n                  linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Selected type'), "'\n                 }\n              }\n            \"></div>\n            <div class=\"pull-right\" style=\"margin-right: 15px;\" data-bind=\"with: activeConnectorUdfs\">\n               <!-- ko ifnot: loading -->\n                 <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: refresh\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Refresh'), "\">\n                   <i class=\"pointer fa fa-refresh\"></i>\n                 </a>\n               <!-- /ko -->\n               <!-- ko if: loading -->\n                 <i class=\"fa fa-refresh fa-spin blue\"></i>\n               <!-- /ko -->\n            </div>\n        </div>\n      </div>\n      <!-- ko with: activeConnectorUdfs -->\n        <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n        <!-- ko ifnot: loading -->\n          <div class=\"assist-flex-search\">\n            <div class=\"assist-filter\">\n              <form autocomplete=\"off\">\n                <input class=\"clearable\" type=\"text\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " placeholder=\"Filter...\" data-bind=\"clearable: query, value: query, valueUpdate: 'afterkeydown'\">\n              </form>\n            </div>\n          </div>\n          <div data-bind=\"css: { 'assist-flex-fill': !selectedFunction(), 'assist-flex-half': selectedFunction() }\">\n            <!-- ko ifnot: query -->\n              <ul class=\"assist-function-categories\" data-bind=\"foreach: categories\">\n                <li>\n                  <a class=\"black-link\" href=\"javascript: void(0);\" data-bind=\"toggle: open\"><i class=\"fa fa-fw\" data-bind=\"css: { 'fa-chevron-right': !open(), 'fa-chevron-down': open }\"></i> <span data-bind=\"text: name\"></span></a>\n                  <ul class=\"assist-functions\" data-bind=\"slideVisible: open, foreach: functions\">\n                    <li data-bind=\"tooltip: { title: description, placement: 'left', delay: 1000 }\">\n                      <a class=\"assist-field-link\" href=\"javascript: void(0);\" data-bind=\"draggableText: { text: draggable, meta: { type: 'function' } }, css: { 'blue': $parents[1].selectedFunction() === $data }, multiClick: { click: function () { $parents[1].selectedFunction($data); }, dblClick: function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }, text: signature\"></a>\n                    </li>\n                  </ul>\n                </li>\n              </ul>\n            <!-- /ko -->\n            <!-- ko if: query -->\n              <!-- ko if: filteredFunctions().length > 0 -->\n              <ul class=\"assist-functions\" data-bind=\"foreach: filteredFunctions\">\n                <li data-bind=\"tooltip: { title: description, placement: 'left', delay: 1000 }\">\n                  <a class=\"assist-field-link\" href=\"javascript: void(0);\" data-bind=\"draggableText: { text: draggable, meta: { type: 'function' } }, css: { 'blue': $parent.selectedFunction() === $data }, multiClick: { click: function () { $parent.selectedFunction($data); }, dblClick: function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }, html: signatureMatch\"></a>\n                </li>\n              </ul>\n              <!-- /ko -->\n              <!-- ko if: filteredFunctions().length === 0 -->\n              <ul class=\"assist-functions\">\n                <li class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No results found.'), "</li>\n              </ul>\n              <!-- /ko -->\n            <!-- /ko -->\n          </div>\n          <!-- ko if: selectedFunction -->\n            <div class=\"assist-flex-half assist-function-details\" data-bind=\"with: selectedFunction\">\n              <!-- ko hueSpinner: { spin: !loaded(), center: true, size: 'large' } --><!-- /ko -->\n              <!-- ko if: loaded -->\n              <div class=\"assist-panel-close\"><button class=\"close\" data-bind=\"click: function() { $parent.selectedFunction(null); }\">&times;</button></div>\n              <div class=\"assist-function-signature blue\" data-bind=\"draggableText: { text: draggable, meta: { type: 'function' } }, text: signature, event: { 'dblclick': function () { huePubSub.publish('editor.insert.at.cursor', { text: draggable }); } }\"></div>\n              <!-- ko if: description -->\n              <div data-bind=\"html: descriptionMatch\"></div>\n              <!-- /ko -->\n              <!-- /ko -->\n            </div>\n          <!-- /ko -->\n        <!-- /ko -->\n      <!-- /ko -->\n    </div>\n  </div>\n");
var ConnectorUdfCategories = /*#__PURE__*/function () {
  function ConnectorUdfCategories(connector) {
    var _this = this;
    _classCallCheck(this, ConnectorUdfCategories);
    this.connector = connector;
    this.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(true);
    this.initialized = false;
    this.label = this.connector.displayName;
    this.categories = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray([]);
    this.query = knockout__WEBPACK_IMPORTED_MODULE_0__.observable().extend({
      rateLimit: 400
    });
    this.selectedFunction = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    this.selectedFunction.subscribe(function (selectedUdf) {
      if (selectedUdf) {
        if (!selectedUdf.category.open()) {
          selectedUdf.category.open(true);
        }
        if (!selectedUdf.loaded()) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish(sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_6__.DESCRIBE_UDF_EVENT, {
            connector: _this.connector,
            udfName: selectedUdf.name
          });
        }
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_6__.UDF_DESCRIBED_EVENT, function (details) {
      // TODO: Show UDFs from databases in the assist functions panel
      if (!details.database && details.connector.id === _this.connector.id) {
        _this.categories().some(function (category) {
          return category.functions.some(function (udf) {
            if (udf.name === details.udf.name) {
              udf.loaded(details.udf.described);
              udf.signature(details.udf.signature);
              udf.signatureMatch(details.udf.signature);
              udf.description(details.udf.description);
              udf.descriptionMatch(details.udf.description);
              udf.loaded(details.udf.described);
              return true;
            }
          });
        });
      }
    });
    this.filteredFunctions = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      var result = [];
      if (_this.loading()) {
        return result;
      }
      var lowerCaseQuery = _this.query().toLowerCase();
      var replaceRegexp = new RegExp('(' + lowerCaseQuery + ')', 'i');
      _this.categories().forEach(function (category) {
        category.functions.forEach(function (fn) {
          if (fn.signature().toLowerCase().indexOf(lowerCaseQuery) === 0) {
            fn.weight = 2;
            fn.signatureMatch(fn.signature().replace(replaceRegexp, '<b>$1</b>'));
            fn.descriptionMatch(fn.description());
            result.push(fn);
          } else if (fn.signature().toLowerCase().indexOf(lowerCaseQuery) !== -1) {
            fn.weight = 1;
            fn.signatureMatch(fn.signature().replace(replaceRegexp, '<b>$1</b>'));
            fn.descriptionMatch(fn.description());
            result.push(fn);
          } else if (fn.description() && fn.description().toLowerCase().indexOf(lowerCaseQuery) !== -1) {
            fn.signatureMatch(fn.signature());
            fn.descriptionMatch(fn.description().replace(replaceRegexp, '<b>$1</b>'));
            fn.weight = 0;
            result.push(fn);
          } else {
            if (fn.signatureMatch() !== fn.signature()) {
              fn.signatureMatch(fn.signature());
            }
            if (fn.descriptionMatch() !== fn.description()) {
              fn.descriptionMatch(fn.description());
            }
          }
        });
      });
      result.sort(function (a, b) {
        if (a.weight !== b.weight) {
          return b.weight - a.weight;
        }
        return a.signature().localeCompare(b.signature());
      });
      return result;
    });
  }
  return _createClass(ConnectorUdfCategories, [{
    key: "init",
    value: function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.initialized) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              _context.next = 4;
              return this.getUdfs();
            case 4:
              this.initialized = true;
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "refresh",
    value: function () {
      var _refresh = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.loading(true);
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish(sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_6__.CLEAR_UDF_CACHE_EVENT, {
                connector: this.connector,
                callback: this.getUdfs.bind(this)
              });
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function refresh() {
        return _refresh.apply(this, arguments);
      }
      return refresh;
    }()
  }, {
    key: "getUdfs",
    value: function () {
      var _getUdfs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var categories, functions;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this.loading(true);
              categories = [];
              _context3.next = 4;
              return (0,sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_6__.getUdfCategories)(sql_reference_sqlReferenceRepository__WEBPACK_IMPORTED_MODULE_5__["default"], this.connector);
            case 4:
              functions = _context3.sent;
              functions.forEach(function (category) {
                var koCategory = {
                  name: category.name,
                  open: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false),
                  functions: Object.keys(category.functions).map(function (key) {
                    var fn = category.functions[key];
                    return {
                      name: fn.name,
                      draggable: fn.draggable,
                      signature: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(fn.signature),
                      signatureMatch: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(fn.signature),
                      description: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(fn.description),
                      descriptionMatch: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(fn.description),
                      loaded: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(fn.described)
                    };
                  })
                };
                koCategory.functions.forEach(function (fn) {
                  fn.category = koCategory;
                });
                categories.push(koCategory);
              });
              this.categories(categories);
              this.loading(false);
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getUdfs() {
        return _getUdfs.apply(this, arguments);
      }
      return getUdfs;
    }()
  }]);
}();
var AssistFunctionsPanel = /*#__PURE__*/_createClass(function AssistFunctionsPanel(params) {
  var _this2 = this;
  _classCallCheck(this, AssistFunctionsPanel);
  this.categories = {};
  this.activeConnector = params.activeConnector;
  this.availableConnectorUdfs = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
  this.activeConnectorUdfs = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
  this.activeConnectorUdfs.subscribe( /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(activeConnectorUdfs) {
      return _regeneratorRuntime().wrap(function _callee4$(_context4) {
        while (1) switch (_context4.prev = _context4.next) {
          case 0:
            _context4.next = 2;
            return activeConnectorUdfs.init();
          case 2:
            (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.setInLocalStorage)('assist.function.panel.active.connector.type', activeConnectorUdfs.connector.type);
          case 3:
          case "end":
            return _context4.stop();
        }
      }, _callee4);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }());
  var setCategoriesFromConnector = function setCategoriesFromConnector(connector) {
    _this2.availableConnectorUdfs().some(function (availableConnectorUdfs) {
      if (availableConnectorUdfs.connector.type === connector.type) {
        _this2.activeConnectorUdfs(availableConnectorUdfs);
        return true;
      }
    });
  };
  this.activeConnector.subscribe(function (connector) {
    if (connector) {
      setCategoriesFromConnector(connector);
    }
  });
  var configUpdated = function configUpdated() {
    var lastActiveConnectorType = _this2.activeConnector() && _this2.activeConnector().type || (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.getFromLocalStorage)('assist.function.panel.active.connector.type');
    var availableConnectorUdfs = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_2__.filterEditorConnectors)(function (connector) {
      return connector.dialect && sql_reference_sqlReferenceRepository__WEBPACK_IMPORTED_MODULE_5__["default"].hasUdfCategories(connector.dialect);
    }).map(function (connector) {
      return new ConnectorUdfCategories(connector);
    });
    availableConnectorUdfs.sort(function (a, b) {
      return a.connector.displayName.localeCompare(b.connector.displayName);
    });
    _this2.availableConnectorUdfs(availableConnectorUdfs);
    var activeConnectorUdfs;
    if (lastActiveConnectorType) {
      activeConnectorUdfs = _this2.availableConnectorUdfs().find(function (connectorUdf) {
        return connectorUdf.connector.type === lastActiveConnectorType;
      });
    }
    if (!activeConnectorUdfs && _this2.availableConnectorUdfs().length) {
      activeConnectorUdfs = _this2.availableConnectorUdfs()[0];
    }
    _this2.activeConnectorUdfs(activeConnectorUdfs);
    setCategoriesFromConnector(_this2.activeConnector());
  };
  configUpdated();
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(config_events__WEBPACK_IMPORTED_MODULE_1__.CONFIG_REFRESHED_TOPIC, configUpdated);
});
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerStaticComponent(NAME, AssistFunctionsPanel, TEMPLATE);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistFunctionsPanel);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistGitPanel.js":
/*!*******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistGitPanel.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assistGitEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assistGitEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistGitEntry.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var TEMPLATE = "\n  <script type=\"text/html\" id=\"git-details-title\">\n    <span data-bind=\"text: definition.name\"></span>\n  </script>\n\n  <script type=\"text/html\" id=\"assist-git-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: function () { huePubSub.publish('assist.git.refresh'); }\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Manual refresh'), "\"></i></a>\n    </div>\n  </script>\n\n  <!-- ko with: selectedGitEntry -->\n  <div class=\"assist-flex-header assist-breadcrumb\" >\n    <!-- ko if: parent !== null -->\n    <a href=\"javascript: void(0);\" data-bind=\"click: function () { huePubSub.publish('assist.selectGitEntry', parent); }\">\n      <i class=\"fa fa-fw fa-chevron-left\"></i>\n      <i class=\"fa fa-fw fa-folder-o\"></i>\n      <span data-bind=\"text: path, attr: {'title': path }\"></span>\n    </a>\n    <!-- /ko -->\n    <!-- ko if: parent === null -->\n    <div>\n      <i class=\"fa fa-fw fa-folder-o\"></i>\n      <span data-bind=\"text: path\"></span>\n    </div>\n    <!-- /ko -->\n    <!-- ko template: 'assist-git-header-actions' --><!-- /ko -->\n  </div>\n  <div class=\"assist-flex-fill assist-git-scrollable\" data-bind=\"delayedOverflow\">\n    <div data-bind=\"visible: ! loading() && ! hasErrors()\" style=\"position: relative;\">\n      <!-- ko hueSpinner: { spin: loadingMore, overlay: true } --><!-- /ko -->\n      <ul class=\"assist-tables\" data-bind=\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-git-scrollable' }\">\n        <li class=\"assist-entry assist-table-link\" style=\"position: relative;\" data-bind=\"visibleOnHover: { 'selector': '.assist-actions' }\">\n\n          <a href=\"javascript:void(0)\" class=\"assist-entry assist-table-link\" data-bind=\"multiClick: { click: toggleOpen, dblClick: dblClick }, attr: {'title': definition.name }\">\n            <!-- ko if: definition.type === 'dir' -->\n            <i class=\"fa fa-fw fa-folder-o muted valign-middle\"></i>\n            <!-- /ko -->\n            <!-- ko ifnot: definition.type === 'dir' -->\n            <i class=\"fa fa-fw fa-file-o muted valign-middle\"></i>\n            <!-- /ko -->\n            <span draggable=\"true\" data-bind=\"text: definition.name, draggableText: { text: '\\'' + path + '\\'', meta: {'type': 'git', 'definition': definition} }\"></span>\n          </a>\n        </li>\n      </ul>\n      <!-- ko if: !loading() && entries().length === 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry\"><span class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Empty directory'), "</span></li>\n      </ul>\n      <!-- /ko -->\n    </div>\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    <div class=\"assist-errors\" data-bind=\"visible: ! loading() && hasErrors()\">\n      <span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Error loading contents.'), "</span>\n    </div>\n  </div>\n  <!-- /ko -->\n");
var AssistGitPanel = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @constructor
   **/
  function AssistGitPanel(options) {
    _classCallCheck(this, AssistGitPanel);
    var self = this;
    self.selectedGitEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.reload = function () {
      var lastKnownPath = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__.getFromLocalStorage)('assist.currentGitPath', window.USER_HOME_DIR);
      var parts = lastKnownPath.split('/');
      parts.shift();
      var currentEntry = new _assistGitEntry__WEBPACK_IMPORTED_MODULE_1__["default"]({
        definition: {
          name: '/',
          type: 'dir'
        },
        parent: null
      });
      currentEntry.loadDeep(parts, function (entry) {
        self.selectedGitEntry(entry);
        entry.open(true);
      });
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.selectGitEntry', function (entry) {
      self.selectedGitEntry(entry);
      (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__.setInLocalStorage)('assist.currentGitPath', entry.path);
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.git.refresh', function () {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.clear.git.cache');
      self.reload();
    });
    self.init();
  }
  return _createClass(AssistGitPanel, [{
    key: "init",
    value: function init() {
      this.reload();
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerStaticComponent('hue-assist-git-panel', AssistGitPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistHBasePanel.js":
/*!*********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistHBasePanel.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assistHBaseEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assistHBaseEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistHBaseEntry.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var TEMPLATE = "\n  <script type=\"text/html\" id=\"hbase-context-items\">\n    <!-- ko if: definition.host -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: open\"><i class=\"fa fa-fw fa-folder-open-o\"></i> ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Open cluster'), "</a></li>\n    <!-- /ko -->\n    <!-- ko ifnot: definition.host -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: open\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'hbase' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Open in HBase'), "</a></li>\n    <!-- /ko -->\n  </script>\n  \n  <script type=\"text/html\" id=\"assist-hbase-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: function () { huePubSub.publish('assist.hbase.refresh'); }\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Manual refresh'), "\"></i></a>\n    </div>\n  </script>\n\n  <!-- ko with: selectedHBaseEntry -->\n  <div class=\"assist-inner-header assist-breadcrumb\" >\n    <!-- ko if: definition.host !== '' -->\n    <a href=\"javascript: void(0);\" data-bind=\"click: function () { huePubSub.publish('assist.clickHBaseRootItem'); }\">\n      <i class=\"fa fa-fw fa-chevron-left\"></i>\n      <i class=\"fa fa-fw fa-th-large\"></i>\n      <span data-bind=\"text: definition.name\"></span>\n    </a>\n    <!-- /ko -->\n    <!-- ko if: definition.host === '' -->\n    ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Clusters'), "\n    <!-- /ko -->\n    <!-- ko template: 'assist-hbase-header-actions' --><!-- /ko -->\n  </div>\n  <div class=\"assist-flex-fill assist-hbase-scrollable\" data-bind=\"delayedOverflow\">\n    <div data-bind=\"visible: ! loading() && ! hasErrors()\" style=\"position: relative;\">\n      <ul class=\"assist-tables\" data-bind=\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-hbase-scrollable' }\">\n        <li class=\"assist-entry assist-table-link\" style=\"position: relative;\" data-bind=\"appAwareTemplateContextMenu: { template: 'hbase-context-items', scrollContainer: '.assist-hbase-scrollable' }, visibleOnHover: { 'selector': '.assist-actions' }\">\n          <a href=\"javascript:void(0)\" class=\"assist-entry assist-table-link\" data-bind=\"multiClick: { click: click, dblClick: dblClick }, attr: {'title': definition.name }\">\n            <!-- ko if: definition.host -->\n            <i class=\"fa fa-fw fa-th-large muted valign-middle\"></i>\n            <!-- /ko -->\n            <!-- ko ifnot: definition.host -->\n            <i class=\"fa fa-fw fa-th muted valign-middle\"></i>\n            <!-- /ko -->\n            <span draggable=\"true\" data-bind=\"text: definition.name, draggableText: { text: '\\'' + definition.name + '\\'', meta: {'type': 'collection', 'definition': definition} }\"></span>\n          </a>\n        </li>\n      </ul>\n      <!-- ko if: !loading() && entries().length === 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry\">\n          <span class=\"assist-no-entries\">\n          <!-- ko if: definition.host === '' -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('No clusters available.'), "\n          <!-- /ko -->\n          <!-- ko if: definition.host !== '' -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('No tables available.'), "\n          <!-- /ko -->\n          </span>\n        </li>\n      </ul>\n      <!-- /ko -->\n    </div>\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    <div class=\"assist-errors\" data-bind=\"visible: ! loading() && hasErrors()\">\n      <span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Error loading contents.'), "</span>\n    </div>\n  </div>\n  <!-- /ko -->\n");
var AssistHBasePanel = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @constructor
   **/
  function AssistHBasePanel(options) {
    _classCallCheck(this, AssistHBasePanel);
    var self = this;
    self.initialized = false;
    var root = new _assistHBaseEntry__WEBPACK_IMPORTED_MODULE_1__["default"]({
      definition: {
        host: '',
        name: '',
        port: 0
      }
    });
    self.selectedHBaseEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.reload = function () {
      self.selectedHBaseEntry(root);
      root.loadEntries(function () {
        var lastOpenendPath = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__.getFromLocalStorage)('assist.last.opened.hbase.entry');
        if (lastOpenendPath) {
          root.entries().every(function (entry) {
            if (entry.path === lastOpenendPath) {
              entry.open();
              return false;
            }
            return true;
          });
        }
      });
    };
    self.selectedHBaseEntry.subscribe(function (newEntry) {
      if (newEntry !== root || newEntry === root && newEntry.loaded) {
        (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_5__.setInLocalStorage)('assist.last.opened.hbase.entry', newEntry.path);
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.clickHBaseItem', function (entry) {
      if (entry.definition.host) {
        entry.loadEntries();
        self.selectedHBaseEntry(entry);
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.dblClickHBaseItem', entry);
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.clickHBaseRootItem', function () {
      self.reload();
    });
    var delayChangeHash = function delayChangeHash(hash) {
      window.setTimeout(function () {
        window.location.hash = hash;
      }, 0);
    };
    self.lastClickeHBaseEntry = null;
    self.HBaseLoaded = false;
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('hbase.app.loaded', function () {
      if (self.selectedHBaseEntry() && self.lastClickeHBaseEntry) {
        delayChangeHash(self.selectedHBaseEntry().definition.name + '/' + self.lastClickeHBaseEntry.definition.name);
      }
      self.HBaseLoaded = true;
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.dblClickHBaseItem', function (entry) {
      var hash = self.selectedHBaseEntry().definition.name + '/' + entry.definition.name;
      if (window.location.pathname.startsWith('/hue/hbase')) {
        window.location.hash = hash;
      } else {
        self.lastClickeHBaseEntry = entry;
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribeOnce('app.gained.focus', function (app) {
          if (app === 'hbase' && self.HBaseLoaded) {
            delayChangeHash(hash);
          }
        });
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/hbase');
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('assist.hbase.refresh', function () {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('assist.clear.hbase.cache');
      self.reload();
    });
    self.init();
  }
  return _createClass(AssistHBasePanel, [{
    key: "init",
    value: function init() {
      var self = this;
      if (self.initialized) {
        return;
      }
      self.reload();
      self.initialized = true;
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerStaticComponent('hue-assist-hbase-panel', AssistHBasePanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js":
/*!**************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ASSIST_KEY_COMPONENT": () => (/* binding */ ASSIST_KEY_COMPONENT)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _bindings_ko_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../bindings/ko.tooltip */ "./desktop/core/src/desktop/js/ko/bindings/ko.tooltip.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var ASSIST_KEY_COMPONENT = 'hue-assist-key';
var TEMPLATE = "\n  <!-- ko if: entry.isForeignKey() -->\n    <!-- ko if: entry.definition.foreignKey.to -->\n      <a class=\"assist-field-link\" style=\"padding: 0 2px;\" href=\"javascript: void(0);\" data-bind=\"\n          tooltip: {\n            title: foreignKeyTooltipHtml,\n            html: true,\n            placement: 'bottom'\n          },\n          click: foreignKeyClick,\n          clickbubble: false\n        \"><i class=\"fa fa-key\"></i></a>\n    <!-- /ko -->\n    <!-- ko ifnot: entry.definition.foreignKey.to -->\n      <i class=\"fa fa-key\" style=\"padding: 0 2px;\" data-bind=\"\n          tooltip: {\n            title: '".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Foreign Key'), "',\n            placement: 'bottom'\n          }\n        \"></i>\n    <!-- /ko -->\n  <!-- /ko -->\n  <!-- ko if: entry.isPrimaryKey() || entry.isPartitionKey() -->\n    <i class=\"fa fa-key\" style=\"padding: 0 2px;\" data-bind=\"\n        tooltip: {\n          title: entry.isPrimaryKey() ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Primary Key'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Partition Key'), "',\n          placement: 'bottom'\n        }\n      \"></i>\n  <!-- /ko -->\n  <!-- ko ifnot: entry.isForeignKey() || entry.isPrimaryKey() || entry.isPartitionKey() -->\n    <i class=\"fa fa-key\"></i>\n  <!-- /ko -->\n");
var AssistKey = /*#__PURE__*/function () {
  function AssistKey(params) {
    var _this = this;
    _classCallCheck(this, AssistKey);
    this.entry = knockout__WEBPACK_IMPORTED_MODULE_0___default().unwrap(params.entry);
    this.onForeignKeyClick = params.onForeignKeyClick;
    this.foreignKeyTooltipHtml = knockout__WEBPACK_IMPORTED_MODULE_0___default().pureComputed(function () {
      return "<i style=\"margin-right: 4px\" class=\"fa fa-arrow-right\"></i>\n    ".concat(_this.entry.definition.foreignKey && _this.entry.definition.foreignKey.to);
    });
  }
  return _createClass(AssistKey, [{
    key: "foreignKeyClick",
    value: function foreignKeyClick() {
      var _this2 = this;
      this.entry.dataCatalog.getEntry({
        path: this.entry.definition.foreignKey.to,
        namespace: this.entry.namespace,
        compute: this.entry.compute
      }).then(function (entry) {
        if (_this2.onForeignKeyClick) {
          // Ensure definition is loaded
          if (!entry.definition) {
            entry.getParent().then(function (parentEntry) {
              parentEntry.getChildren().then(function () {
                _this2.onForeignKeyClick(entry);
              });
            })["catch"](function () {});
          } else {
            _this2.onForeignKeyClick(entry);
          }
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_4__.ASSIST_DB_HIGHLIGHT_EVENT, entry);
        }
      });
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerComponent(ASSIST_KEY_COMPONENT, AssistKey, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistLangRefPanel.js":
/*!***********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistLangRefPanel.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _api_apiUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../api/apiUtils */ "./desktop/core/src/desktop/js/api/apiUtils.js");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










var NAME = 'assist-language-reference-panel';

// prettier-ignore
var TEMPLATE = "\n  <script type=\"text/html\" id=\"language-reference-topic-tree\">\n    <!-- ko if: $data.length -->\n    <ul class=\"assist-docs-topic-tree \" data-bind=\"foreach: $data\">\n      <li>\n        <a class=\"black-link\" href=\"javascript: void(0);\" data-bind=\"click: function () { $component.selectedTopic($data); }, toggle: open\">\n          <i class=\"fa fa-fw\" style=\"font-size: 12px;\" data-bind=\"css: { 'fa-chevron-right': children.length && !open(), 'fa-chevron-down': children.length && open() }\"></i>\n          <span class=\"assist-field-link\" href=\"javascript: void(0);\" data-bind=\"css: { 'blue': $component.selectedTopic() === $data }, text: title\"></span>\n        </a>\n        <!-- ko if: open -->\n        <!-- ko template: { name: 'language-reference-topic-tree', data: children } --><!-- /ko -->\n        <!-- /ko -->\n      </li>\n    </ul>\n    <!-- /ko -->\n  </script>\n\n  <div class=\"assist-inner-panel\">\n    <div class=\"assist-flex-panel\">\n      <div class=\"assist-flex-header\">\n        <div class=\"assist-inner-header\">\n          <div class=\"function-dialect-dropdown\" data-bind=\"component: { name: 'hue-drop-down', params: { fixedPosition: true, value: activeDialect, entries: availableDialects, linkTitle: '".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Selected dialect'), "' } }\" style=\"display: inline-block\"></div>\n        </div>\n      </div>\n      <div class=\"assist-flex-search\">\n        <div class=\"assist-filter\">\n          <form autocomplete=\"off\">\n            <input class=\"clearable\" type=\"text\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " placeholder=\"Filter...\" data-bind=\"clearable: query, value: query, valueUpdate: 'afterkeydown'\">\n          </form>\n        </div>\n      </div>\n      <div class=\"assist-docs-topics\" data-bind=\"css: { 'assist-flex-fill': !selectedTopic(), 'assist-flex-40': selectedTopic() }\">\n        <!-- ko ifnot: query -->\n        <!-- ko template: { name: 'language-reference-topic-tree', data: topics } --><!-- /ko -->\n        <!-- /ko -->\n        <!-- ko if: query -->\n        <!-- ko if: filteredTopics().length > 0 -->\n        <ul class=\"assist-docs-topic-tree\" data-bind=\"foreach: filteredTopics\">\n          <li>\n            <a class=\"assist-field-link\" href=\"javascript: void(0);\" data-bind=\"css: { 'blue': $component.selectedTopic() === $data }, click: function () { $component.selectedTopic($data); }, html: titleMatch() || title\"></a>\n          </li>\n        </ul>\n        <!-- /ko -->\n        <!-- ko if: filteredTopics().length === 0 -->\n        <ul class=\"assist-docs-topic-tree\">\n          <li class=\"assist-no-entries\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No results found.'), "</li>\n        </ul>\n        <!-- /ko -->\n        <!-- /ko -->\n      </div>\n      <!-- ko if: selectedTopic -->\n      <div class=\"assist-flex-60 assist-docs-details\" data-bind=\"with: selectedTopic\">\n        <div class=\"assist-panel-close\"><button class=\"close\" data-bind=\"click: function() { $component.selectedTopic(undefined); }\">&times;</button></div>\n        <div data-bind=\"htmlUnsecure: bodyMatch() || body()\"></div>\n      </div>\n      <!-- /ko -->\n    </div>\n  </div>\n");
var LanguageReferenceTopic = /*#__PURE__*/function () {
  function LanguageReferenceTopic(entry, index) {
    var _this = this;
    _classCallCheck(this, LanguageReferenceTopic);
    this.ref = entry.ref;
    this.title = entry.title;
    this.index = index;
    this.weight = 1;
    this.children = [];
    entry.children.forEach(function (child) {
      _this.children.push(new LanguageReferenceTopic(child, _this.index));
    });
    this.loadDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
    this.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.body = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    this.bodyMatch = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    this.open = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.titleMatch = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  }
  return _createClass(LanguageReferenceTopic, [{
    key: "load",
    value: function load() {
      var _this2 = this;
      if (this.body() || this.loading()) {
        return this.loadDeferred.promise();
      }
      this.loading(true);
      (0,_api_apiUtils__WEBPACK_IMPORTED_MODULE_3__.simpleGet)(this.index[this.ref]).done(function (doc) {
        _this2.body(doc.body);
      }).always(function () {
        _this2.loading(false);
        _this2.loadDeferred.resolve(_this2);
      });
      return this.loadDeferred.promise();
    }
  }]);
}();
var AssistLangRefPanel = /*#__PURE__*/_createClass(function AssistLangRefPanel(params, element) {
  var _this3 = this;
  _classCallCheck(this, AssistLangRefPanel);
  this.connector = params.connector;
  this.availableDialects = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  this.activeDialect = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  this.allTopics = {
    impala: [],
    hive: []
  };
  window.IMPALA_DOC_TOP_LEVEL.forEach(function (topLevelItem) {
    _this3.allTopics.impala.push(new LanguageReferenceTopic(topLevelItem, window.IMPALA_DOC_INDEX));
  });
  window.HIVE_DOC_TOP_LEVEL.forEach(function (topLevelItem) {
    _this3.allTopics.hive.push(new LanguageReferenceTopic(topLevelItem, window.HIVE_DOC_INDEX));
  });
  var updateDialect = function updateDialect(dialect) {
    if (_this3.availableDialects().indexOf(dialect) !== -1) {
      _this3.activeDialect(dialect);
    }
  };
  this.connector.subscribe(function (connector) {
    if (connector) {
      updateDialect(connector.dialect);
    }
  });
  var configUpdated = function configUpdated() {
    var lastActiveDialect = _this3.activeDialect();
    var configuredDialects = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_5__.filterEditorConnectors)(function (connector) {
      return connector.dialect === 'hive' || connector.dialect === 'impala';
    }).map(function (connector) {
      return connector.dialect;
    });
    configuredDialects.sort();
    _this3.availableDialects(configuredDialects);
    if (lastActiveDialect && _this3.availableDialects().find(function (dialect) {
      return dialect === lastActiveDialect;
    })) {
      _this3.activeDialect(lastActiveDialect);
    } else {
      _this3.activeDialect(_this3.availableDialects().length ? _this3.availableDialects()[0] : undefined);
    }
  };
  configUpdated();
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(config_events__WEBPACK_IMPORTED_MODULE_4__.CONFIG_REFRESHED_TOPIC, configUpdated);
  if (this.connector()) {
    updateDialect(this.connector().dialect);
  }
  this.topics = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    return _this3.activeDialect() ? _this3.allTopics[_this3.activeDialect()] : [];
  });
  this.selectedTopic = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  this.selectedTopic.subscribe(function (newTopic) {
    if (newTopic) {
      newTopic.load();
    }
  });
  this.query = knockout__WEBPACK_IMPORTED_MODULE_1__.observable().extend({
    throttle: 200
  });
  this.filteredTopics = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  var sortFilteredTopics = function sortFilteredTopics() {
    _this3.filteredTopics.sort(function (a, b) {
      if (a.weight !== b.weight) {
        return b.weight - a.weight;
      }
      return a.title.localeCompare(b.title);
    });
  };
  this.query.subscribe(function (newVal) {
    if (!newVal) {
      return;
    }
    var lowerCaseQuery = _this3.query().toLowerCase();
    var replaceRegexp = new RegExp('(' + lowerCaseQuery + ')', 'i');
    _this3.filteredTopics([]);
    var sortTimeout = -1;
    var findInside = function findInside(topic) {
      topic.load().done(function (loadedTopic) {
        var match = false;
        var titleIndex = loadedTopic.title.toLowerCase().indexOf(lowerCaseQuery);
        if (titleIndex !== -1) {
          loadedTopic.weight = titleIndex === 0 ? 2 : 1;
          loadedTopic.titleMatch(loadedTopic.title.replace(new RegExp('(' + lowerCaseQuery + ')', 'i'), '<b>$1</b>'));
          loadedTopic.bodyMatch(undefined);
          _this3.filteredTopics.push(loadedTopic);
          match = true;
        } else if (loadedTopic.body() && loadedTopic.body().toLowerCase().indexOf(lowerCaseQuery) !== -1) {
          loadedTopic.weight = 0;
          loadedTopic.titleMatch(undefined);
          loadedTopic.bodyMatch(loadedTopic.body().replace(replaceRegexp, '<b>$1</b>'));
          _this3.filteredTopics.push(loadedTopic);
          match = true;
        } else {
          loadedTopic.titleMatch(undefined);
          loadedTopic.bodyMatch(undefined);
        }
        if (match) {
          window.clearTimeout(sortTimeout);
          sortTimeout = window.setTimeout(sortFilteredTopics, 100);
        }
      });
      topic.children.forEach(findInside);
    };
    _this3.topics().forEach(findInside);
    window.setTimeout(function () {
      // Initial sort deferred for promises to complete
      sortFilteredTopics();
    }, 0);
  });
  this.selectedTopic.subscribe(function () {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.assist-docs-details').scrollTop(0);
  });
  this.query.subscribe(function () {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.assist-docs-topics').scrollTop(0);
  });
  var scrollToSelectedTopic = function scrollToSelectedTopic() {
    var topics = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.assist-docs-topics');
    if (topics.find('.blue').length) {
      topics.scrollTop(Math.min(topics.scrollTop() + topics.find('.blue').position().top - 20, topics.find('> ul').height() - topics.height()));
    }
  };
  var scrollToAnchor = function scrollToAnchor(anchorId) {
    if (!anchorId) {
      return;
    }
    var detailsPanel = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.assist-docs-details');
    var found = detailsPanel.find('#' + anchorId.split('/').join(' #'));
    if (found.length) {
      detailsPanel.scrollTop(found.position().top - 10);
    }
  };
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('scroll.test', scrollToSelectedTopic);
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, function (targetTopic) {
    var topicStack = [];
    var findTopic = function findTopic(topics) {
      topics.some(function (topic) {
        topicStack.push(topic);
        if (topic.ref === targetTopic.ref) {
          while (topicStack.length) {
            topicStack.pop().open(true);
          }
          _this3.query('');
          _this3.selectedTopic(topic);
          window.setTimeout(function () {
            scrollToAnchor(targetTopic.anchorId);
            scrollToSelectedTopic();
          }, 0);
          return true;
        } else if (topic.children.length) {
          var inChild = findTopic(topic.children);
          if (inChild) {
            return true;
          }
        }
        topicStack.pop();
      });
    };
    findTopic(_this3.topics());
  });
  jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).on('click.langref', function (event) {
    if (event.target.className === 'hue-doc-internal-link') {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, {
        ref: jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).data('doc-ref'),
        anchorId: jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).data('doc-anchor-id')
      });
    }
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_6__["default"].registerStaticComponent(NAME, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new AssistLangRefPanel(params, componentInfo.element);
  }
}, TEMPLATE);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AssistLangRefPanel);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistPanel.js":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistPanel.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./assistInnerPanel */ "./desktop/core/src/desktop/js/ko/components/assist/assistInnerPanel.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_hueAnalytics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/hueAnalytics */ "./desktop/core/src/desktop/js/utils/hueAnalytics.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.











var TEMPLATE = "\n  <script type=\"text/html\" id=\"assist-panel-inner-header\">\n    <div class=\"assist-header assist-fixed-height\" data-bind=\"visibleOnHover: { selector: '.assist-header-actions' }, css: { 'assist-resizer': $index() > 0 }\" style=\"display:none;\">\n      <span data-bind=\"text: $parent.name\"></span>\n      <div class=\"assist-header-actions\">\n        <div class=\"inactive-action\" data-bind=\"click: function () { $parent.visible(false) }\"><i class=\"fa fa-times\"></i></div>\n      </div>\n    </div>\n  </script>\n  \n  <div class=\"assist-panel\" data-bind=\"dropzone: { url: '/indexer/api/indexer/upload_local_file_drag_and_drop', clickable: false, paramName: 'file', onComplete: function(path){ huePubSub.publish('assist.dropzone.complete', path); }, disabled: !window.SHOW_UPLOAD_BUTTON }\">\n    <!-- ko if: availablePanels().length > 1 -->\n    <div class=\"assist-panel-switches\">\n      <!-- ko foreach: availablePanels -->\n      <div class=\"inactive-action assist-type-switch\" data-bind=\"click: function () { $parent.visiblePanel($data); }, css: { 'blue': $parent.visiblePanel() === $data }, style: { 'float': rightAlignIcon ? 'right' : 'left' },  attr: { 'title': name }\">\n        <!-- ko if: iconSvg --><span style=\"font-size:22px;\"><svg class=\"hi\"><use data-bind=\"attr: {'href': iconSvg }\" href=''></use></svg></span><!-- /ko -->\n        <!-- ko if: !iconSvg --><i class=\"fa fa-fw valign-middle\" data-bind=\"css: icon\"></i><!-- /ko -->\n      </div>\n      <!-- /ko -->\n    </div>\n    <!-- /ko -->\n    <!-- ko with: visiblePanel -->\n    <div class=\"assist-panel-contents\" data-bind=\"style: { 'padding-top': $parent.availablePanels().length > 1 ? '10px' : '5px' }\">\n      <div class=\"assist-inner-panel\">\n        <div class=\"assist-flex-panel\">\n          <!-- ko component: panelData --><!-- /ko -->\n        </div>\n      </div>\n    </div>\n    <!-- /ko -->\n  </div>\n";
var AssistPanel = /*#__PURE__*/_createClass(
/**
 * @param {Object} params
 * @param {string} params.user
 * @param {boolean} params.onlySql - For the old query editors
 * @param {string[]} params.visibleAssistPanels - Panels that will initially be shown regardless of localStorage
 * @param {Object} params.sql
 * @param {Object} params.sql.navigationSettings - enable/disable the links
 * @param {boolean} params.sql.navigationSettings.openItem - Example: true
 * @param {boolean} params.sql.navigationSettings.showStats - Example: true
 * @constructor
 */
function AssistPanel(params) {
  _classCallCheck(this, AssistPanel);
  var self = this;
  var i18n = {
    errorLoadingDatabases: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('There was a problem loading the databases'),
    errorLoadingTablePreview: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('There was a problem loading the table preview')
  };
  var i18nCollections = {
    errorLoadingDatabases: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('There was a problem loading the indexes'),
    errorLoadingTablePreview: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('There was a problem loading the index preview')
  };
  self.availablePanels = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.visiblePanel = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  self.lastOpenPanelType = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.withLocalStorage)('assist.last.open.panel', self.lastOpenPanelType);

  // TODO: Support dynamic config changes
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish(config_events__WEBPACK_IMPORTED_MODULE_3__.GET_KNOWN_CONFIG_TOPIC, function (clusterConfig) {
    if (clusterConfig && clusterConfig['app_config']) {
      var panels = [];
      var appConfig = clusterConfig['app_config'];
      if (appConfig['editor']) {
        var sqlPanel = new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
          panelData: {
            name: 'hue-assist-db-panel',
            params: jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({
              i18n: i18n
            }, params.sql)
          },
          name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('SQL'),
          type: 'sql',
          icon: 'fa-database',
          minHeight: 75
        });
        panels.push(sqlPanel);
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_SQL_EVENT, function () {
          if (self.visiblePanel() !== sqlPanel) {
            self.visiblePanel(sqlPanel);
          }
        });
      }
      if (appConfig.browser && appConfig.browser.interpreters) {
        var storageBrowsers = appConfig.browser.interpreters.filter(function (interpreter) {
          return interpreter.type === 'adls' || interpreter.type === 'hdfs' || interpreter.type === 's3' || interpreter.type === 'gs' || interpreter.type === 'abfs' || interpreter.type === 'ofs';
        });
        if (storageBrowsers.length) {
          panels.push(new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
            panelData: {
              name: 'hue-assist-storage-panel',
              params: {
                sources: storageBrowsers
              }
            },
            name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Files'),
            type: 'files',
            icon: 'fa-files-o',
            minHeight: 50
          }));
        }
        if (appConfig.browser.interpreter_names.indexOf('indexes') !== -1) {
          var solrPanel = new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
            panelData: {
              name: 'hue-assist-db-panel',
              params: jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({
                i18n: i18nCollections,
                isSolr: true
              }, params.sql)
            },
            name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Indexes'),
            type: 'solr',
            icon: 'fa-search-plus',
            minHeight: 75
          });
          panels.push(solrPanel);
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_SOLR_EVENT, function () {
            if (self.visiblePanel() !== solrPanel) {
              self.visiblePanel(solrPanel);
            }
          });
        }
        if (appConfig.browser.interpreter_names.indexOf('kafka') !== -1) {
          var streamsPanel = new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
            panelData: {
              name: 'hue-assist-db-panel',
              params: jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({
                i18n: i18nCollections,
                isStreams: true
              }, params.sql)
            },
            name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Streams'),
            type: 'kafka',
            icon: 'fa-sitemap',
            minHeight: 75
          });
          panels.push(streamsPanel);
        }
        if (appConfig.browser.interpreter_names.indexOf('hbase') !== -1) {
          panels.push(new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
            panelData: {
              name: 'hue-assist-hbase-panel',
              params: {}
            },
            name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('HBase'),
            type: 'hbase',
            icon: 'fa-th-large',
            minHeight: 50
          }));
        }
      }
      var documentsPanel = new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
        panelData: {
          name: 'hue-assist-documents-panel',
          params: {
            user: params.user
          }
        },
        name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Documents'),
        type: 'documents',
        icon: 'fa-files-o',
        iconSvg: '#hi-documents',
        minHeight: 50,
        rightAlignIcon: true,
        visible: params.visibleAssistPanels && params.visibleAssistPanels.indexOf('documents') !== -1
      });
      panels.push(documentsPanel);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_SHOW_DOC_EVENT, function (docType) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_2__.SHOW_LEFT_ASSIST_EVENT);
        if (self.visiblePanel() !== documentsPanel) {
          self.visiblePanel(documentsPanel);
        }
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish('assist.documents.set.type.filter', docType);
      });
      if (window.HAS_GIT) {
        panels.push(new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
          panelData: {
            name: 'hue-assist-git-panel',
            params: {}
          },
          name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Git'),
          type: 'git',
          icon: 'fa-github',
          minHeight: 50,
          rightAlignIcon: true
        }));
      }
      self.availablePanels(panels);
    } else {
      self.availablePanels([new _assistInnerPanel__WEBPACK_IMPORTED_MODULE_4__["default"]({
        panelData: {
          name: 'hue-assist-db-panel',
          params: jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({
            i18n: i18n
          }, params.sql)
        },
        name: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('SQL'),
        type: 'sql',
        icon: 'fa-database',
        minHeight: 75
      })]);
    }
    if (!self.lastOpenPanelType()) {
      self.lastOpenPanelType(self.availablePanels()[0].type);
    }
    var lastFoundPanel = self.availablePanels().filter(function (panel) {
      return panel.type === self.lastOpenPanelType();
    });
    self.visiblePanel.subscribe(function (newValue) {
      if (self.lastOpenPanelType() !== (newValue === null || newValue === void 0 ? void 0 : newValue.type)) {
        utils_hueAnalytics__WEBPACK_IMPORTED_MODULE_7__["default"].log('left-assist-panel', 'panel-selection/' + (newValue === null || newValue === void 0 ? void 0 : newValue.type));
      }
      self.lastOpenPanelType(newValue.type);
    });
    self.visiblePanel(lastFoundPanel.length === 1 ? lastFoundPanel[0] : self.availablePanels()[0]);
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_5__["default"].registerStaticComponent('assist-panel', AssistPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistSchedulePanel.js":
/*!************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistSchedulePanel.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var TEMPLATE = "\n  <div class=\"assist-inner-panel\">\n    <div class=\"assist-flex-panel\">\n      <!-- ko if: selectedNotebook() && selectedNotebook().isBatchable() -->\n      <!-- ko with: selectedNotebook() -->\n      <div class=\"tab-pane\" id=\"scheduleTab\">\n        <!-- ko ifnot: isSaved() && ! isHistory() -->\n        ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Query needs to be saved.'), "\n        <!-- /ko -->\n        <!-- ko if: isSaved() && ! isHistory() -->\n          <!-- ko if: schedulerViewModelIsLoaded() && schedulerViewModel.coordinator.isDirty() -->\n          <a data-bind=\"click: saveScheduler\" href=\"javascript: void(0);\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Save changes'), "</a>\n          <!-- /ko -->\n          <!-- ko if: schedulerViewModelIsLoaded() && ! schedulerViewModel.coordinator.isDirty() && (! viewSchedulerId() || isSchedulerJobRunning() == false )-->\n          <a data-bind=\"click: showSubmitPopup\" href=\"javascript: void(0);\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Start'), "</a>\n          <!-- /ko -->\n          <!-- ko if: schedulerViewModelIsLoaded() && viewSchedulerId()-->\n          <a data-bind=\"click: function() { huePubSub.publish('show.jobs.panel', {id: viewSchedulerId(), interface: 'schedules'}) }, clickBubble: false\" href=\"javascript: void(0);\">\n            ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('View'), "\n          </a>\n          <!-- ko if: isSchedulerJobRunning() -->\n            ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Running'), "\n          <!-- /ko -->\n          <!-- ko if: isSchedulerJobRunning() == false -->\n            ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Stopped'), "\n          <!-- /ko -->\n        <!-- /ko -->\n        <!-- /ko -->\n        <br>\n        <br>\n        <div id=\"schedulerEditor\"></div>\n      </div>\n      <!-- /ko -->\n      <!-- /ko -->\n    </div>\n  </div>\n");
var AssistSchedulePanel = /*#__PURE__*/_createClass(function AssistSchedulePanel() {
  var _this = this;
  _classCallCheck(this, AssistSchedulePanel);
  this.selectedNotebook = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();

  // TODO: Move all the scheduler logic out of the notebook to here.

  this.selectedNotebook.subscribe(function (notebook) {
    // Happening 4 times for each notebook loaded
    if (notebook && notebook.schedulerViewModel == null && notebook.isSaved() && !notebook.isHistory()) {
      notebook.loadScheduler();
      if (notebook.viewSchedulerId()) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('check.schedules.browser');
      }
    }
  });
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].subscribe('jobbrowser.schedule.data', function (jobs) {
    if (_this.selectedNotebook() && _this.selectedNotebook().viewSchedulerId()) {
      var job = jobs.filter(function (job) {
        return _this.selectedNotebook().viewSchedulerId() === job.id;
      });
      _this.selectedNotebook().isSchedulerJobRunning(job.length > 0 && job[0].apiStatus === 'RUNNING');
    }
  });

  // Hue 3
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].subscribe('set.selected.notebook', this.selectedNotebook);
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].subscribe('selected.notebook.changed', this.selectedNotebook);
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('get.selected.notebook');

  // Hue 4
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].subscribe('set.current.app.view.model', function (viewModel) {
    if (viewModel.selectedNotebook) {
      if (viewModel.selectedNotebook()) {
        _this.selectedNotebook(viewModel.selectedNotebook());
      } else {
        var subscription = viewModel.selectedNotebook.subscribe(function (notebook) {
          _this.selectedNotebook(notebook);
          subscription.dispose();
        });
      }
    } else {
      _this.selectedNotebook(null);
    }
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerStaticComponent('assist-schedule-panel', AssistSchedulePanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistStoragePanel.js":
/*!***********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.assistStoragePanel.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assistStorageEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assistStorageEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistStorageEntry.js");
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










// prettier-ignore
var TEMPLATE = "\n  <script type=\"text/html\" id=\"storage-context-items\">\n    <li><a href=\"javascript:void(0);\" data-bind=\"click: function (data) { showContextPopover(data, { target: $parentContext.$contextSourceElement }, { left: -15, top: 2 }); }\"><i class=\"fa fa-fw fa-info\"></i> ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Show details'), "</a></li>\n    <li>\n      <a href=\"javascript:void(0);\" data-bind=\"click: ()=> {huePubSub.publish('open.filebrowserlink', { pathPrefix: '/filebrowser/view=', decodedPath: definition.path });}\">\n        <i class=\"fa fa-fw\" data-bind=\"css: {'fa-folder-open-o': definition.type === 'dir', 'fa-file-text-o': definition.type === 'file'}\"></i> \n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Open in Browser'), "\n      </a>\n    </li>\n    <!-- ko if: definition.type === 'file' -->\n    <li><a href=\"javascript:void(0);\" data-bind=\"click: openInImporter\"><!-- ko template: { name: 'app-icon-template', data: { icon: 'importer' } } --><!-- /ko --> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Open in Importer'), "</a></li>\n    <!-- /ko -->\n    <!-- ko if: $currentApp() === 'editor' -->\n    <li><a href=\"javascript:void(0);\" data-bind=\"click: dblClick\"><i class=\"fa fa-fw fa-paste\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Insert at cursor'), "</a></li>\n    <!-- /ko -->\n  </script>\n\n  <script type=\"text/html\" id=\"assist-storage-header-actions\">\n    <div class=\"assist-db-header-actions\">\n      <!-- ko if: source.type !== 's3' && source.type !== 'abfs' -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: goHome, attr: { title: I18n('Go to ' + window.USER_HOME_DIR) }\"><i class=\"pointer fa fa-home\"></i></a>\n      <!-- ko if: window.SHOW_UPLOAD_BUTTON -->\n      <a class=\"inactive-action\" data-bind=\"dropzone: {\n            url: '/filebrowser/upload/file?dest=' + (source.type === 'adls' ? 'adl:' : '') + path,\n            params: { dest: path },\n            paramName: 'hdfs_file',\n            onError: function(x, e){\n              huePubSub.publish('hue.global.error', { message: e });\n            },\n            onComplete: function () { huePubSub.publish('assist.storage.refresh'); } }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Upload file'), "\" href=\"javascript:void(0)\">\n        <div class=\"dz-message inline\" data-dz-message><i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Upload file'), "\"></i></div>\n      </a>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko if: source.type === 'abfs' && path !== '/' && window.SHOW_UPLOAD_BUTTON -->\n      <a class=\"inactive-action\" data-bind=\"dropzone: {\n            url: '/filebrowser/upload/file?dest=' + abfsPath,\n            params: { dest: abfsPath },\n            paramName: 'hdfs_file',\n            onError: function(x, e){ huePubSub.publish('hue.global.error', { message: e }); },\n            onComplete: function () { huePubSub.publish('assist.storage.refresh'); } }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Upload file'), "\" href=\"javascript:void(0)\">\n        <div class=\"dz-message inline\" data-dz-message><i class=\"pointer fa fa-plus\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Upload file'), "\"></i></div>\n      </a>\n      <!-- /ko -->\n      <a class=\"inactive-action\" href=\"javascript:void(0)\" data-bind=\"click: function () { huePubSub.publish('assist.storage.refresh'); }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Manual refresh'), "\"><i class=\"pointer fa fa-refresh\" data-bind=\"css: { 'fa-spin blue' : loading }\"></i></a>\n    </div>\n  </script>\n\n  <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n\n  <!-- ko ifnot: activeSource -->\n  <div class=\"assist-flex-header\">\n    <div class=\"assist-inner-header\">\n      ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Sources'), "\n    </div>\n  </div>\n  <div class=\"assist-flex-fill\">\n    <ul class=\"assist-tables\" data-bind=\"foreach: sources\">\n      <li class=\"assist-table\">\n        <a class=\"assist-table-link\" href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.activeSource($data); }\"><i class=\"fa fa-fw fa-server muted valign-middle\"></i> <span data-bind=\"text: $data.displayName\"></span></a>\n      </li>\n    </ul>\n  </div>\n  <!-- /ko -->\n\n  <!-- ko if: activeSource -->\n  <!-- ko with: selectedStorageEntry -->\n  <div class=\"assist-flex-header assist-breadcrumb\" >\n    <!-- ko if: parent !== null -->\n    <a href=\"javascript: void(0);\" data-bind=\"appAwareTemplateContextMenu: {\n      template: 'storage-context-items',\n      scrollContainer: '.assist-files-scrollable'\n    }, click: function () {\n      huePubSub.publish('assist.selectStorageEntry', parent);\n    }\">\n      <i class=\"fa fa-fw fa-chevron-left\"></i>\n      <i class=\"fa fa-fw fa-folder-o\"></i>\n      <span data-bind=\"text: definition.name, tooltip: {'title': path, 'placement': 'top' }\"></span>\n    </a>\n    <!-- /ko -->\n    <!-- ko if: parent === null -->\n    <a href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.activeSource(undefined) }\">\n      <i class=\"fa fa-fw fa-chevron-left\"></i>\n      <i class=\"fa fa-fw fa-server\"></i>\n      <span data-bind=\"text: $parent.activeSource().displayName\"></span>\n    </a>\n    <!-- /ko -->\n    <!-- ko template: 'assist-storage-header-actions' --><!-- /ko -->\n  </div>\n  <div class=\"assist-flex-search\">\n    <div class=\"assist-filter\">\n      <form autocomplete=\"off\">\n        <input class=\"clearable\" type=\"text\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Filter...'), "\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, "\n        data-bind=\"clearable: filter, value: filter, valueUpdate: 'afterkeydown'\"/>\n      </form>\n    </div>\n  </div>\n\n  <div class=\"assist-flex-fill assist-storage-scrollable\" data-bind=\"delayedOverflow\">\n    <div data-bind=\"visible: ! loading() && ! hasErrors()\" style=\"position: relative;\">\n      <!-- ko hueSpinner: { spin: loadingMore, overlay: true } --><!-- /ko -->\n      <ul class=\"assist-tables\" data-bind=\"foreachVisible: { data: entries, minHeight: 22, container: '.assist-storage-scrollable', fetchMore: $data.fetchMore.bind($data) }\">\n        <li class=\"assist-entry assist-table-link\" style=\"position: relative;\" data-bind=\"appAwareTemplateContextMenu: { template: 'storage-context-items', scrollContainer: '.assist-storage-scrollable' }, visibleOnHover: { override: contextPopoverVisible, 'selector': '.assist-actions' }\">\n          <div class=\"assist-actions table-actions\" style=\"opacity: 0;\" >\n            <a style=\"padding: 0 3px;\" class=\"inactive-action\" href=\"javascript:void(0);\" data-bind=\"popoverOnHover: showContextPopover, css: { 'blue': contextPopoverVisible }\">\n              <i class='fa fa-info' title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Details'), "\"></i>\n            </a>\n          </div>\n\n          <a href=\"javascript:void(0)\" class=\"assist-entry assist-table-link\" data-bind=\"multiClick: { click: toggleOpen, dblClick: dblClick }, attr: {'title': definition.name }\">\n            <!-- ko if: definition.type === 'dir' -->\n            <i class=\"fa fa-fw fa-folder-o muted valign-middle\"></i>\n            <!-- /ko -->\n            <!-- ko if: definition.type === 'file' -->\n            <i class=\"fa fa-fw fa-file-o muted valign-middle\"></i>\n            <!-- /ko -->\n            <span draggable=\"true\" data-bind=\"text: definition.name, draggableText: { text: '\\'' + path + '\\'', meta: {'type': source.type, 'definition': definition} }\"></span>\n          </a>\n        </li>\n      </ul>\n      <!-- ko if: !loading() && entries().length === 0 -->\n      <ul class=\"assist-tables\">\n        <li class=\"assist-entry\"><span class=\"assist-no-entries\"><!-- ko if: filter() -->").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No results found'), "<!-- /ko --><!-- ko ifnot: filter() -->").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Empty directory'), "<!-- /ko --></span></li>\n      </ul>\n      <!-- /ko -->\n    </div>\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko -->\n    <span class=\"assist-errors\" data-bind=\"visible: ! loading() && hasErrors(), text: errorText() || '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Error loading contents.'), "'\">\n    </span>\n  </div>\n  <!-- /ko -->\n  <!-- /ko -->\n");
var AssistStoragePanel = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Interpreter[]} options.sources
   * @constructor
   **/
  function AssistStoragePanel(options) {
    var _this = this;
    _classCallCheck(this, AssistStoragePanel);
    this.sources = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray(options.sources);
    var lastSourceType = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.getFromLocalStorage)('assist.lastStorageSource', 'hdfs');
    var foundLastSource = this.sources().find(function (source) {
      return source.type === lastSourceType;
    });
    if (!foundLastSource && this.sources().length) {
      foundLastSource = this.sources().find(function (source) {
        return source.type === 'hdfs';
      }) || this.sources()[0];
    }
    this.activeSource = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(foundLastSource);
    this.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    this.initialized = false;
    this.rootPath = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_4__.getRootFilePath)(this.activeSource());
    this.selectedStorageEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    this.activeSource.subscribe(function (newValue) {
      if (newValue) {
        _this.rootPath = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_4__.getRootFilePath)(_this.activeSource());
        (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage)('assist.lastStorageSource', newValue.type);
        _this.selectedStorageEntry(undefined);
        _this.reload();
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('assist.selectStorageEntry', function (entry) {
      _this.selectedStorageEntry(entry);
      (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage)('assist.currentStoragePath_' + entry.source.type, entry.path);
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('assist.storage.refresh', function () {
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].clearStorageCache(_this.activeSource().type);
      _this.reload();
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('assist.storage.go.home', function () {
      var path = _this.activeSource().type === 's3' || _this.activeSource().type === 'gs' || _this.activeSource().type === 'abfs' || _this.activeSource().type === 'ofs' ? '/' : window.USER_HOME_DIR;
      _this.loadPath(path);
      (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.setInLocalStorage)('assist.currentStoragePath_' + _this.activeSource().type, path);
    });
    this.init();
  }
  return _createClass(AssistStoragePanel, [{
    key: "loadPath",
    value: function loadPath(path) {
      var _this2 = this;
      this.loading(true);
      var relativePath = path;
      if (this.rootPath) {
        relativePath = relativePath.replace(this.rootPath, '/');
      }
      var parts = relativePath.split('/');
      parts.shift();
      var currentEntry = new _assistStorageEntry__WEBPACK_IMPORTED_MODULE_1__["default"]({
        source: this.activeSource(),
        rootPath: this.rootPath,
        definition: {
          name: this.rootPath,
          type: 'dir'
        },
        parent: null
      });
      currentEntry.loadDeep(parts, function (entry) {
        _this2.selectedStorageEntry(entry);
        entry.open(true);
        _this2.loading(false);
      });
    }
  }, {
    key: "reload",
    value: function reload() {
      this.loadPath((0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.getFromLocalStorage)('assist.currentStoragePath_' + this.activeSource().type, this.activeSource().type === 'hdfs' ? window.USER_HOME_DIR : '/'));
    }
  }, {
    key: "init",
    value: function init() {
      if (this.initialized) {
        return;
      }
      this.reload();
      this.initialized = true;
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerStaticComponent('hue-assist-storage-panel', AssistStoragePanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/assist/ko.rightAssistPanel.js":
/*!*********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/assist/ko.rightAssistPanel.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _apps_editor_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../apps/editor/events */ "./desktop/core/src/desktop/js/apps/editor/events.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_hueAnalytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/hueAnalytics */ "./desktop/core/src/desktop/js/utils/hueAnalytics.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var EDITOR_ASSISTANT_TAB = 'editorAssistant';
var DASHBOARD_ASSISTANT_TAB = 'dashboardAssistant';
var FUNCTIONS_TAB = 'functions';
var SCHEDULES_TAB = 'schedules';
var LANG_REF_TAB = 'langRef';
var TEMPLATE = "\n  <div class=\"right-assist-tabs\" data-bind=\"splitFlexDraggable : {\n      containerSelector: '.content-wrapper',\n      sidePanelSelector: '.right-panel',\n      sidePanelVisible: visible,\n      orientation: 'right',\n      onPosition: function() { huePubSub.publish('split.draggable.position') }\n    }\">\n    <div class=\"right-assist-tab\" data-bind=\"visible: editorAssistantTabAvailable\" style=\"display:none;\"><a class=\"inactive-action\" href=\"javascript: void(0);\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Assistant'), "\" data-bind=\"css: { 'blue' : activeTab() === 'editorAssistant' }, tooltip: { placement: 'left' }, click: editorAssistantTabClick\"><i class=\"fa fa-fw fa-compass\"></i></a></div>\n    <div class=\"right-assist-tab\" data-bind=\"visible: dashboardAssistantTabAvailable\" style=\"display:none;\"><a class=\"inactive-action\" href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Assistant'), "\" data-bind=\"css: { 'blue' : activeTab() === 'dashboardAssistant' }, tooltip: { placement: 'left' }, click: dashboardAssistantTabClick\"><i class=\"fa fa-fw fa-compass\"></i></a></div>\n    <div class=\"right-assist-tab\" data-bind=\"visible: functionsTabAvailable\" style=\"display:none;\"><a class=\"inactive-action\" href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Functions'), "\" data-bind=\"css: { 'blue' : activeTab() === 'functions' }, tooltip: { placement: 'left' }, click: functionsTabClick\"><i class=\"fa fa-fw fa-superscript\"></i></a></div>\n    <div class=\"right-assist-tab\" data-bind=\"visible: langRefTabAvailable\" style=\"display:none;\"><a class=\"inactive-action\" href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Language Reference'), "\" data-bind=\"css: { 'blue' : activeTab() === 'langRef' }, tooltip: { placement: 'left' }, click: langRefTabClick\"><i class=\"fa fa-fw fa-book\"></i></a></div>\n    <div class=\"right-assist-tab\" data-bind=\"visible: schedulesTabAvailable\" style=\"display:none;\"><a class=\"inactive-action\" href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Schedule'), "\" data-bind=\"css: { 'blue' : activeTab() === 'schedules' }, tooltip: { placement: 'left' }, click: schedulesTabClick\"><i class=\"fa fa-fw fa-calendar\"></i></a></div>\n  </div>\n\n  <!-- ko if: visible -->\n  <div class=\"right-assist-contents\">\n    <!-- ko if: editorAssistantTabAvailable-->\n    <div data-bind=\"\n        component: { \n          name: 'assist-editor-context-panel', \n          params: { \n            activeTab: activeTab, \n            connector: connector \n          }\n        },\n        visible: activeTab() === 'editorAssistant'\n      \"></div>\n    <!-- /ko -->\n\n    <!-- ko if: functionsTabAvailable -->\n    <div data-bind=\"\n        component: {\n          name: 'assist-functions-panel',\n          params: {\n            activeConnector: connector\n          }\n        },\n        visible: activeTab() === 'functions'\n      \"></div>\n    <!-- /ko -->\n\n    <!-- ko if: langRefTabAvailable -->\n    <div data-bind=\"\n        component: {\n          name: 'assist-language-reference-panel',\n          params: {\n            connector: connector\n          }\n        },\n        visible: activeTab() === 'langRef'\n      \"></div>\n    <!-- /ko -->\n\n    <!-- ko if: dashboardAssistantTabAvailable -->\n    <div data-bind=\"component: { name: 'assist-dashboard-panel' }, visible: activeTab() === 'dashboardAssistant'\"></div>\n    <!-- /ko -->\n\n    <div data-bind=\"component: { name: 'assist-schedule-panel' }, visible: activeTab() === 'schedules'\" style=\"display:none;\"></div>\n  </div>\n  <!-- /ko -->\n");
var RightAssistPanel = /*#__PURE__*/function () {
  function RightAssistPanel(params) {
    var _this = this;
    _classCallCheck(this, RightAssistPanel);
    this.activeTab = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    this.visible = params.visible;
    this.connector = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    this.editorAssistantTabAvailable = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && _this.connector().is_sql;
    });
    this.dashboardAssistantTabAvailable = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && _this.connector().id === 'dashboard';
    });
    this.functionsTabAvailable = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && (_this.connector().dialect === 'flink' || _this.connector().dialect === 'hive' || _this.connector().dialect === 'impala' || _this.connector().dialect === 'pig' || _this.connector().dialect === 'sparksql');
    });
    this.langRefTabAvailable = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && (_this.connector().dialect === 'hive' || _this.connector().dialect === 'impala');
    });
    this.schedulesTabAvailable = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    this.lastActiveTabEditor = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.withLocalStorage)('assist.last.open.right.panel', this.lastActiveTabEditor, EDITOR_ASSISTANT_TAB);
    this.lastActiveTabDashboard = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_7__.withLocalStorage)('assist.last.open.right.panel.dashboard', this.lastActiveTabDashboard, DASHBOARD_ASSISTANT_TAB);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe('assist.highlight.risk.suggestions', function () {
      if (_this.editorAssistantTabAvailable() && _this.activeTab() !== EDITOR_ASSISTANT_TAB) {
        _this.activeTab(EDITOR_ASSISTANT_TAB);
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe(_events__WEBPACK_IMPORTED_MODULE_1__.ASSIST_LANG_REF_SHOW_TOPIC_EVENT, function (targetTopic) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_1__.SHOW_RIGHT_ASSIST_EVENT);
      if (_this.langRefTabAvailable() && _this.activeTab() !== LANG_REF_TAB) {
        _this.activeTab(LANG_REF_TAB);
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish(_events__WEBPACK_IMPORTED_MODULE_1__.ASSIST_LANG_REF_PANEL_SHOW_TOPIC_EVENT, targetTopic);
    });
    var updateTabs = function updateTabs() {
      if (!_this.visible()) {
        _this.activeTab(undefined);
        return;
      }
      if (_this.lastActiveTabEditor() === FUNCTIONS_TAB && _this.functionsTabAvailable()) {
        _this.activeTab(FUNCTIONS_TAB);
      } else if (_this.lastActiveTabEditor() === SCHEDULES_TAB && _this.schedulesTabAvailable()) {
        _this.activeTab(SCHEDULES_TAB);
      } else if (_this.lastActiveTabEditor() === LANG_REF_TAB && _this.langRefTabAvailable()) {
        _this.activeTab(LANG_REF_TAB);
      } else if (_this.editorAssistantTabAvailable()) {
        _this.activeTab(EDITOR_ASSISTANT_TAB);
      } else if (_this.functionsTabAvailable()) {
        _this.activeTab(FUNCTIONS_TAB);
      } else if (_this.schedulesTabAvailable()) {
        _this.activeTab(SCHEDULES_TAB);
      } else if (_this.dashboardAssistantTabAvailable()) {
        _this.activeTab(DASHBOARD_ASSISTANT_TAB);
      } else {
        _this.activeTab(undefined);
      }
    };
    var updateContentsForConnector = function updateContentsForConnector(connector) {
      _this.connector(connector);
      _this.schedulesTabAvailable(false);
      if (connector && connector.id !== 'dashboard') {
        if (window.ENABLE_QUERY_SCHEDULING) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribeOnce('set.current.app.view.model', function (viewModel) {
            // Async
            _this.schedulesTabAvailable(!!viewModel.selectedNotebook);
            updateTabs();
          });
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish('get.current.app.view.model');
        } else {
          _this.schedulesTabAvailable(false);
        }
      }
      updateTabs();
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe(_apps_editor_events__WEBPACK_IMPORTED_MODULE_2__.ACTIVE_SNIPPET_CONNECTOR_CHANGED_EVENT, updateContentsForConnector);
    var onAppChange = function onAppChange(appName) {
      if (appName === 'dashboard') {
        updateContentsForConnector({
          id: appName,
          is_sql: false
        });
      }
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish('get.current.app.name', onAppChange);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe('set.current.app.name', onAppChange);
    updateTabs();
  }
  return _createClass(RightAssistPanel, [{
    key: "switchTab",
    value: function switchTab(tabName) {
      utils_hueAnalytics__WEBPACK_IMPORTED_MODULE_5__["default"].log('right-assist-panel', 'tab-click/' + tabName);
      if (this.activeTab() === tabName) {
        this.visible(false);
        this.activeTab(undefined);
      } else {
        this.activeTab(tabName);
        if (!this.visible()) {
          this.visible(true);
        }
      }
    }
  }, {
    key: "editorAssistantTabClick",
    value: function editorAssistantTabClick() {
      this.lastActiveTabEditor(EDITOR_ASSISTANT_TAB);
      this.switchTab(EDITOR_ASSISTANT_TAB);
    }
  }, {
    key: "dashboardAssistantTabClick",
    value: function dashboardAssistantTabClick() {
      this.lastActiveTabDashboard(DASHBOARD_ASSISTANT_TAB);
      this.switchTab(DASHBOARD_ASSISTANT_TAB);
    }
  }, {
    key: "functionsTabClick",
    value: function functionsTabClick() {
      this.lastActiveTabEditor(FUNCTIONS_TAB);
      this.switchTab(FUNCTIONS_TAB);
    }
  }, {
    key: "langRefTabClick",
    value: function langRefTabClick() {
      this.lastActiveTabEditor(LANG_REF_TAB);
      this.switchTab(LANG_REF_TAB);
    }
  }, {
    key: "schedulesTabClick",
    value: function schedulesTabClick() {
      this.lastActiveTabEditor(SCHEDULES_TAB);
      this.switchTab(SCHEDULES_TAB);
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerStaticComponent('right-assist-panel', RightAssistPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/componentUtils.js":
/*!*********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/componentUtils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


var instances = {};
var componentUtils = /*#__PURE__*/function () {
  function componentUtils() {
    _classCallCheck(this, componentUtils);
  }
  return _createClass(componentUtils, null, [{
    key: "registerComponent",
    value: function () {
      var _registerComponent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name, model, template) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new Promise(function (resolve, reject) {
                if (!knockout__WEBPACK_IMPORTED_MODULE_0__.components.isRegistered(name)) {
                  var componentInfo = {
                    template: template
                  };
                  if (model) {
                    componentInfo['viewModel'] = model;
                  }
                  knockout__WEBPACK_IMPORTED_MODULE_0__.components.register(name, componentInfo);
                  resolve();
                } else {
                  reject();
                }
              }));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function registerComponent(_x, _x2, _x3) {
        return _registerComponent.apply(this, arguments);
      }
      return registerComponent;
    }()
  }, {
    key: "registerStaticComponent",
    value: function () {
      var _registerStaticComponent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(name, model, template) {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", componentUtils.registerComponent(name, {
                createViewModel: function createViewModel(params, componentInfo) {
                  if (!instances[name]) {
                    if (model && model.createViewModel) {
                      instances[name] = model.createViewModel(params, componentInfo);
                    } else if (model) {
                      instances[name] = new model(params);
                    }
                  }
                  if (instances[name] && instances[name].dispose) {
                    console.warn('"dispose" function present on static component ' + name);
                  }
                  return instances[name];
                }
              }, template));
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2);
      }));
      function registerStaticComponent(_x4, _x5, _x6) {
        return _registerStaticComponent.apply(this, arguments);
      }
      return registerStaticComponent;
    }()
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (componentUtils);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/asteriskContextTabs.js":
/*!*****************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/asteriskContextTabs.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sql/sqlUtils */ "./desktop/core/src/desktop/js/sql/sqlUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var AsteriskData = /*#__PURE__*/_createClass(function AsteriskData(data, connector, namespace, compute, defaultDatabase) {
  _classCallCheck(this, AsteriskData);
  var self = this;
  self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(true);
  self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.columns = [];
  self.selectedColumns = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    return !self.loading() && self.columns.filter(function (column) {
      return column.selected();
    }) || [];
  });
  self.expand = function () {
    var colsToExpand = self.selectedColumns().length === 0 ? self.columns : self.selectedColumns();
    var colIndex = {};
    var colsTableMap = {};
    self.columns.forEach(function (col) {
      if (colsTableMap[col.name]) {
        colsTableMap[col.name].push(col.table);
      } else {
        colsTableMap[col.name] = [col.table];
      }
    });
    colsToExpand.forEach(function (col) {
      if (colIndex[col.name]) {
        colIndex[col.name]++;
      } else {
        colIndex[col.name] = 1;
      }
    });
    Object.keys(colIndex).forEach(function (name) {
      if (colIndex[name] === 1 && colsTableMap[name].length === 1) {
        delete colIndex[name];
      }
    });
    Promise.all(colsToExpand.map( /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(column) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!column.tableAlias) {
                _context.next = 9;
                break;
              }
              _context.next = 3;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].backTickIfNeeded(connector, column.tableAlias);
            case 3:
              _context.t0 = _context.sent;
              _context.t1 = _context.t0 + '.';
              _context.next = 7;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].backTickIfNeeded(connector, column.name);
            case 7:
              _context.t2 = _context.sent;
              return _context.abrupt("return", _context.t1 + _context.t2);
            case 9:
              if (!colIndex[column.name]) {
                _context.next = 18;
                break;
              }
              _context.next = 12;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].backTickIfNeeded(connector, column.table);
            case 12:
              _context.t3 = _context.sent;
              _context.t4 = _context.t3 + '.';
              _context.next = 16;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].backTickIfNeeded(connector, column.name);
            case 16:
              _context.t5 = _context.sent;
              return _context.abrupt("return", _context.t4 + _context.t5);
            case 18:
              _context.next = 20;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].backTickIfNeeded(connector, column.name);
            case 20:
              return _context.abrupt("return", _context.sent);
            case 21:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }())).then(function (backtickedCols) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('ace.replace', {
        location: data.location,
        text: backtickedCols.join(', ')
      });
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.hide');
  };
  var deferrals = [];
  data.tables.forEach(function (table) {
    if (table.identifierChain) {
      var fetchDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
      deferrals.push(fetchDeferred);
      var path = jquery__WEBPACK_IMPORTED_MODULE_0___default().map(table.identifierChain, function (identifier) {
        return identifier.name;
      });
      if (path.length === 1) {
        path.unshift(defaultDatabase);
      }
      catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_2__["default"].getEntry({
        namespace: namespace,
        compute: compute,
        connector: connector,
        path: path
      }).then(function (entry) {
        entry.getSourceMeta({
          silenceErrors: true
        }).then(function (sourceMeta) {
          if (typeof sourceMeta.extended_columns !== 'undefined') {
            var newColumns = [];
            sourceMeta.extended_columns.forEach(function (column) {
              var clonedColumn = jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({}, column);
              clonedColumn.extendedType = clonedColumn.type.replace(/</g, '&lt;').replace(/>/g, '&lt;');
              if (clonedColumn.type.indexOf('<') !== -1) {
                clonedColumn.type = clonedColumn.type.substring(0, clonedColumn.type.indexOf('<'));
              }
              clonedColumn.selected = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
              clonedColumn.table = table.identifierChain[table.identifierChain.length - 1].name;
              if (table.alias) {
                clonedColumn.tableAlias = table.alias;
              }
              newColumns.push(clonedColumn);
            });
            self.columns = self.columns.concat(newColumns);
          }
          fetchDeferred.resolve();
        })["catch"](fetchDeferred.reject);
      })["catch"](fetchDeferred.reject);
    }
  });
  if (deferrals.length === 0) {
    self.loading(false);
  }
  jquery__WEBPACK_IMPORTED_MODULE_0___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_0___default()), deferrals).done(function () {
    self.loading(false);
  }, function () {
    if (self.columns.length === 0) {
      self.hasErrors(true);
    }
  });
});
var AsteriskContextTabs = /*#__PURE__*/_createClass(function AsteriskContextTabs(data, connector, namespace, compute, defaultDatabase) {
  _classCallCheck(this, AsteriskContextTabs);
  var self = this;
  self.data = new AsteriskData(data, connector, namespace, compute, defaultDatabase);
  self.tabs = [{
    id: 'details',
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Details'),
    template: 'context-popover-asterisk-details',
    templateData: self.data
  }];
  self.activeTab = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('details');
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AsteriskContextTabs);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/collectionContextTabs.js":
/*!*******************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/collectionContextTabs.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var CollectionContextTabs = /*#__PURE__*/function () {
  function CollectionContextTabs(data) {
    _classCallCheck(this, CollectionContextTabs);
    var self = this;
    self.disposals = [];
    self.catalogEntry = data.catalogEntry;
    self.data = knockout__WEBPACK_IMPORTED_MODULE_1__.observable({
      details: data,
      loading: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
      hasErrors: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
      selectedPath: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(data.path),
      loadingTerms: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
      loadingStats: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
      statsSupported: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(true),
      terms: knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.fromJS({
        prefix: '',
        data: []
      }),
      stats: knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.fromJS({
        facet: '',
        data: []
      })
    });
    self.data().terms.prefix.subscribe(function () {
      self.loadTerms();
    });
    self.data().terms.prefix.extend({
      rateLimit: {
        timeout: 500,
        method: 'notifyWhenChangesStop'
      }
    });
    self.loadTerms();
    self.loadStats();
    self.tabs = [{
      id: 'terms',
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Terms'),
      template: 'context-popover-collection-terms-details',
      templateData: self.data
    }, {
      id: 'stats',
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Stats'),
      template: 'context-popover-collection-stats-details',
      templateData: self.data
    }];
    self.activeTab = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('terms');
    var showInAssistPubSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('context.popover.show.in.assist', function () {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_5__.ASSIST_DB_HIGHLIGHT_EVENT, self.catalogEntry);
    });
    self.disposals.push(function () {
      showInAssistPubSub.remove();
    });
  }
  return _createClass(CollectionContextTabs, [{
    key: "loadTerms",
    value: function loadTerms() {
      var self = this;
      self.data().terms.data.removeAll();
      self.data().loadingTerms(true);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchDashboardTerms({
        collectionName: self.catalogEntry.path[1],
        fieldName: self.catalogEntry.path[2],
        prefix: self.data().terms.prefix(),
        engine: 'solr',
        successCallback: function successCallback(data) {
          if (data.terms != null) {
            jquery__WEBPACK_IMPORTED_MODULE_0___default().each(data.terms, function (key, val) {
              self.data().terms.data.push({
                key: key,
                val: val
              });
            });
          }
        },
        alwaysCallback: function alwaysCallback() {
          self.data().loadingTerms(false);
        }
      });
    }
  }, {
    key: "loadStats",
    value: function loadStats() {
      var self = this;
      self.data().terms.data.removeAll();
      self.data().loadingStats(true);
      self.data().statsSupported(true);
      var fieldName = self.catalogEntry.path[2];
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchDashboardStats({
        collectionName: self.catalogEntry.path[1],
        fieldName: fieldName,
        engine: 'solr',
        successCallback: function successCallback(data) {
          if (data.stats.stats.stats_fields[fieldName] != null) {
            jquery__WEBPACK_IMPORTED_MODULE_0___default().each(data.stats.stats.stats_fields[fieldName], function (key, val) {
              self.data().stats.data.push({
                key: key,
                val: val
              });
            });
          }
        },
        notSupportedCallback: function notSupportedCallback() {
          self.data().statsSupported(false);
        },
        alwaysCallback: function alwaysCallback() {
          self.data().loadingStats(false);
        }
      });
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CollectionContextTabs);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/dataCatalogContext.js":
/*!****************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/dataCatalogContext.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var DataCatalogContext = /*#__PURE__*/function () {
  function DataCatalogContext(options) {
    _classCallCheck(this, DataCatalogContext);
    var self = this;
    self.popover = options.popover;
    self.catalogEntry = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(options.catalogEntry);
    self.parentIsView = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    var checkIfParentIsView = function checkIfParentIsView(catalogEntry) {
      if (!catalogEntry) {
        self.parentIsView(false);
        return;
      }
      catalogEntry.getParent().then(function (parentEntry) {
        self.parentIsView(parentEntry.isView());
      })["catch"](function () {
        self.parentIsView(false);
      });
    };
    checkIfParentIsView(self.catalogEntry());
    self.catalogEntry.subscribe(checkIfParentIsView);
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.activePromises = [];
    self.errorText = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.onSampleClick = options.popover.onSampleClick;
    self.analysis = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.comment = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.commentExpanded = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.viewSql = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.viewSqlVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.openActionsEnabled = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.catalogEntry() && self.catalogEntry().path.length <= 2;
    });
    self.catalogEntry.subscribe(self.load.bind(self));
    self.breadCrumbs = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      var result = [];
      var catalogEntry = self.catalogEntry();
      if (catalogEntry) {
        var _loop = function _loop() {
          var path = catalogEntry.path.slice(0, i + 1);
          result.push({
            name: catalogEntry.path[i],
            isActive: i === catalogEntry.path.length - 1,
            path: path,
            catalogEntry: self.catalogEntry,
            makeActive: function makeActive() {
              self.catalogEntry().dataCatalog.getEntry({
                namespace: self.catalogEntry().namespace,
                compute: self.catalogEntry().compute,
                connector: self.catalogEntry().connector,
                path: path,
                temporaryOnly: self.catalogEntry().isTemporary
              }).then(self.catalogEntry)["catch"](function (err) {
                console.warn(err);
              });
            }
          });
        };
        for (var i = 0; i < catalogEntry.path.length; i++) {
          _loop();
        }
      }
      return result;
    });
    self.originalCatalogEntry = options.catalogEntry;
    self.load();
  }
  return _createClass(DataCatalogContext, [{
    key: "setEntry",
    value: function setEntry(entry) {
      this.catalogEntry(entry);
    }
  }, {
    key: "refresh",
    value: function refresh() {
      var self = this;
      self.catalogEntry().clearCache({
        cascade: true
      })["finally"](self.load.bind(self));
    }
  }, {
    key: "load",
    value: function load() {
      var self = this;
      self.loading(true);
      self.hasErrors(false);
      self.cancelActivePromises();
      var viewSqlDeferred = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred().done(self.viewSql);
      self.activePromises.push(viewSqlDeferred.promise());
      self.activePromises.push(self.catalogEntry().getSourceMeta({
        cancellable: true
      })["catch"](function () {
        self.hasErrors(true);
      }));

      // TODO: Use connector attributes in dataCatalogContext
      if (self.catalogEntry().getDialect() === 'impala' || self.catalogEntry().getDialect() === 'hive') {
        self.activePromises.push(self.catalogEntry().getAnalysis({
          silenceErrors: true,
          cancellable: true
        }).then(function (analysis) {
          var found = analysis.properties && analysis.properties.some(function (property) {
            if (property.col_name.toLowerCase() === 'view original text:') {
              _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].formatSql({
                statements: property.data_type
              }).then(function (formatResponse) {
                if (formatResponse.status === 0) {
                  viewSqlDeferred.resolve(formatResponse.formatted_statements);
                } else {
                  viewSqlDeferred.resolve(property.data_type);
                }
              })["catch"](function () {
                viewSqlDeferred.resolve(property.data_type);
              });
              return true;
            }
          });
          if (!found) {
            viewSqlDeferred.resolve();
          }
          self.analysis(analysis);
        })["catch"](viewSqlDeferred.reject));
      } else {
        viewSqlDeferred.reject();
      }
      self.activePromises.push(self.catalogEntry().getComment({
        silenceErrors: true,
        cancellable: true
      }).then(self.comment));
      jquery__WEBPACK_IMPORTED_MODULE_0___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_0___default()), self.activePromises).always(function () {
        self.loading(false);
        self.activePromises.length = 0;
      });
    }
  }, {
    key: "cancelActivePromises",
    value: function cancelActivePromises() {
      var self = this;
      while (self.activePromises.length) {
        var promise = self.activePromises.pop();
        if (promise.cancel) {
          promise.cancel();
        }
      }
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      self.cancelActivePromises();
    }
  }, {
    key: "showInAssist",
    value: function showInAssist() {
      var self = this;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_4__.ASSIST_DB_HIGHLIGHT_EVENT, self.catalogEntry());
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('global.search.close');
    }
  }, {
    key: "openInDashboard",
    value: function openInDashboard() {
      var self = this;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/hue/dashboard/browse/' + self.catalogEntry().path.join('.') + '?engine=' + self.catalogEntry().getConnector().id);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.hide');
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('global.search.close');
    }
  }, {
    key: "openInTableBrowser",
    value: function openInTableBrowser() {
      var self = this;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('open.link', '/metastore/table' + (self.catalogEntry().isTableOrView() ? '/' : 's/') + self.catalogEntry().path.join('/') + '?connector_id=' + self.catalogEntry().getConnector().id + '&namespace=' + self.catalogEntry().namespace.id);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.hide');
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('global.search.close');
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DataCatalogContext);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/documentContext.js":
/*!*************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/documentContext.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DOCUMENT_CONTEXT_TEMPLATE": () => (/* binding */ DOCUMENT_CONTEXT_TEMPLATE),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var TEMPLATE_NAME = 'context-document-details';

// prettier-ignore
var DOCUMENT_CONTEXT_TEMPLATE = "\n<script type=\"text/html\" id=\"".concat(TEMPLATE_NAME, "\">\n  <div class=\"context-popover-flex-fill\" style=\"overflow: auto;\">\n    <div class=\"context-popover-inner-content\">\n      <div style=\"position: absolute; right: 6px; top: 8px;\">\n        <a class=\"pointer inactive-action\" data-bind=\"visible: !$parent.closeDisabled, click: function () { $parent.close() }\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n      <!-- ko if: typeof documentContents() !== 'undefined' && typeof documentContents().snippets !== 'undefined' -->\n      <!-- ko with: details -->\n      <div class=\"context-popover-doc-header-link\" ><a href=\"javascript:void(0)\" data-bind=\"hueLink: link, click: function () { $parents[1].close(); }\"><!-- ko template: { name: 'document-icon-template', data: { document: $data, showShareAddon: false } } --><!-- /ko --> <span data-bind=\"text:name\"></span></a></div>\n      <!-- ko if: description -->\n      <div class=\"context-popover-doc-description\" data-bind=\"toggleOverflow: { height: 60 }\"><div data-bind=\"text: description\"></div></div>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko with: documentContents -->\n      <!-- ko foreach: snippets -->\n      <div class=\"context-popover-doc-contents\" data-bind=\"highlight: { value: statement_raw, formatted: true, dialect: type }\"></div>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- ko if: typeof documentContents() === 'undefined' || typeof documentContents().snippets === 'undefined' -->\n      <div style=\"width: 100%;\" data-bind=\"template: { name: 'generic-document-context-template', data: details }\"></div>\n      <!-- /ko -->\n    </div>\n  </div>\n</script>\n\n<script type=\"text/html\" id=\"generic-document-context-template\">\n  <div style=\"width:100%; text-align: center; margin-top: 40px; font-size: 100px; color: #787878;\" data-bind=\"template: { name: 'document-icon-template', data: { document: { isDirectory: type === 'directory', definition: function() { return $data } } } }\"></div>\n  <div style=\"width: 100%; margin-top: 20px; text-align:center\">\n    <!-- ko if: type === 'directory' -->\n    <a style=\"font-size: 20px;\" href=\"javascript:void(0)\" data-bind=\"text: name, publish: 'context.popover.show.in.assist'\"></a>\n    <!-- /ko -->\n    <!-- ko if: type !== 'directory' -->\n    <a style=\"font-size: 20px;\" href=\"javascript:void(0)\" data-bind=\"text: name, hueLink: link, click: function () { $parents[1].close(); }\"></a>\n    <!-- /ko -->\n    <br/>\n    <span data-bind=\"text: window.DOCUMENT_TYPE_I18n[type] || type\"></span>\n    <!-- ko if: description -->\n    <div class=\"context-popover-doc-description\" data-bind=\"text: description\"></div>\n    <!-- /ko -->\n  </div>\n</script>\n");
var DocumentContext = /*#__PURE__*/function () {
  function DocumentContext(data) {
    _classCallCheck(this, DocumentContext);
    var self = this;
    self.disposals = [];

    // Adapt some details to a common format, the global search endpoint has different structure than the docs one
    self.details = {
      type: data.doc_type || data.type,
      name: data.originalName || data.name || data.hue_name,
      link: data.absoluteUrl || data.link,
      description: data.description || data.hue_description,
      isDirectory: data.doc_type === 'directory' || data.type === 'directory',
      definition: knockout__WEBPACK_IMPORTED_MODULE_0__.observable({
        type: data.doc_type || data.type
      })
    };
    self.data = data;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(true);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.errorText = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.template = TEMPLATE_NAME;
    self.documentId = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.documentContents = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.loadDocument();
    var showInAssistPubSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].subscribe('context.popover.show.in.assist', function () {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_3__.ASSIST_DOC_HIGHLIGHT_EVENT, {
        parentUuid: self.data.parentUuid,
        docUuid: self.data.uuid
      });
    });
    self.disposals.push(function () {
      showInAssistPubSub.remove();
    });
  }
  return _createClass(DocumentContext, [{
    key: "download",
    value: function download() {
      if (this.documentId()) {
        window.location.href = "".concat(window.HUE_BASE_URL, "/desktop/api2/doc/export?documents=[").concat(this.documentId(), "]");
      }
    }
  }, {
    key: "open",
    value: function open(entry) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('open.link', entry.details.link);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('context.popover.hide');
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('global.search.close');
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }, {
    key: "loadDocument",
    value: function loadDocument() {
      var _this = this;
      var self = this;
      self.hasErrors(false);
      self.loading(true);
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].fetchDocument({
        uuid: self.data.uuid,
        fetchContents: true,
        silenceErrors: true
      }).done(function (response) {
        var _response$document;
        _this.documentId((_response$document = response.document) === null || _response$document === void 0 ? void 0 : _response$document.id);
        self.documentContents(response.data);
        self.loading(false);
      }).fail(function () {
        self.loading(false);
        self.hasErrors(false); // Allows us to revert to a generic document panel in case it can't fetch it.
      });
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DocumentContext);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/functionContext.js":
/*!*************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/functionContext.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "FUNCTION_CONTEXT_TEMPLATE": () => (/* binding */ FUNCTION_CONTEXT_TEMPLATE),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sql/reference/sqlUdfRepository */ "./desktop/core/src/desktop/js/sql/reference/sqlUdfRepository.ts");
/* harmony import */ var sql_reference_sqlReferenceRepository__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sql/reference/sqlReferenceRepository */ "./desktop/core/src/desktop/js/sql/reference/sqlReferenceRepository.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var TEMPLATE_NAME = 'context-popover-function-details';

// prettier-ignore
var FUNCTION_CONTEXT_TEMPLATE = "\n<script type=\"text/html\" id=\"context-popover-function-details\">\n  <!-- ko ifnot: details -->\n  <div class=\"context-popover-flex-fill\">\n    <div class=\"alert\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_1__["default"])('Could not find details for the function'), " <span data-bind=\"text: $parents[2].title\"></span>()</div>\n  </div>\n  <!-- /ko -->\n  <div class=\"context-popover-flex-fill\" data-bind=\"with: details\">\n    <div style=\"padding: 8px\">\n      <p style=\"margin: 10px 10px 18px 10px;\"><span style=\"white-space: pre;\" class=\"monospace\" data-bind=\"text: signature\"></span></p>\n      <p><span data-bind=\"text: description\"></span></p>\n    </div>\n  </div>\n</script>\n");
var FunctionContextTabs = /*#__PURE__*/_createClass(function FunctionContextTabs(data, connector) {
  var _this = this;
  _classCallCheck(this, FunctionContextTabs);
  this.details = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
  this.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(true);
  this.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
  (0,sql_reference_sqlUdfRepository__WEBPACK_IMPORTED_MODULE_2__.findUdf)(sql_reference_sqlReferenceRepository__WEBPACK_IMPORTED_MODULE_3__["default"], connector, data["function"]).then(function (udfs) {
    // TODO: Support showing multiple UDFs with the same name but different category in the context popover.
    // For instance, trunc appears both for dates with one description and for numbers with another description.
    _this.details = udfs.length ? udfs[0] : undefined;
  })["catch"](function () {
    _this.hasErrors(true);
  })["finally"](function () {
    _this.loading(false);
  });
  this.tabs = [{
    id: 'details',
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_1__["default"])('Details'),
    template: TEMPLATE_NAME,
    templateData: this
  }];
  this.activeTab = knockout__WEBPACK_IMPORTED_MODULE_0__.observable('details');
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FunctionContextTabs);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.contextPopover.js":
/*!***************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/ko.contextPopover.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CONTEXT_POPOVER_CLASS": () => (/* binding */ CONTEXT_POPOVER_CLASS),
/* harmony export */   "CONTEXT_POPOVER_HIDDEN_EVENT": () => (/* binding */ CONTEXT_POPOVER_HIDDEN_EVENT),
/* harmony export */   "HIDE_CONTEXT_POPOVER_EVENT": () => (/* binding */ HIDE_CONTEXT_POPOVER_EVENT),
/* harmony export */   "NAME": () => (/* binding */ NAME),
/* harmony export */   "SHOW_CONTEXT_POPOVER_EVENT": () => (/* binding */ SHOW_CONTEXT_POPOVER_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_cancellablePromise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/cancellablePromise */ "./desktop/core/src/desktop/js/api/cancellablePromise.ts");
/* harmony import */ var _asteriskContextTabs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./asteriskContextTabs */ "./desktop/core/src/desktop/js/ko/components/contextPopover/asteriskContextTabs.js");
/* harmony import */ var _collectionContextTabs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./collectionContextTabs */ "./desktop/core/src/desktop/js/ko/components/contextPopover/collectionContextTabs.js");
/* harmony import */ var _dataCatalogContext__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dataCatalogContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/dataCatalogContext.js");
/* harmony import */ var _documentContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./documentContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/documentContext.js");
/* harmony import */ var _functionContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./functionContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/functionContext.js");
/* harmony import */ var _ko_documentContextFooter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ko.documentContextFooter */ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.documentContextFooter.js");
/* harmony import */ var _langRefContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./langRefContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/langRefContext.js");
/* harmony import */ var _partitionContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./partitionContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/partitionContext.js");
/* harmony import */ var _resizeHelper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./resizeHelper */ "./desktop/core/src/desktop/js/ko/components/contextPopover/resizeHelper.js");
/* harmony import */ var _storageContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./storageContext */ "./desktop/core/src/desktop/js/ko/components/contextPopover/storageContext.js");
/* harmony import */ var catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! catalog/contextCatalog */ "./desktop/core/src/desktop/js/catalog/contextCatalog.ts");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _assist_ko_assistKey__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../assist/ko.assistKey */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.























var CONTEXT_POPOVER_CLASS = 'hue-popover';
var HIDE_CONTEXT_POPOVER_EVENT = 'context.popover.hide';
var CONTEXT_POPOVER_HIDDEN_EVENT = 'context.popover.hidden';
var SHOW_CONTEXT_POPOVER_EVENT = 'context.popover.show';
var NAME = 'context-popover';

// prettier-ignore
var SUPPORT_TEMPLATES = "\n  <script type=\"text/html\" id=\"context-popover-footer\">\n    <div class=\"context-popover-flex-bottom-links\">\n      <div class=\"context-popover-link-row\">\n        <a href=\"javascript: void(0);\" class=\"inactive-action\" data-bind=\"visible: showInAssistEnabled, publish: 'context.popover.show.in.assist'\">\n          <i style=\"font-size: 11px;\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Show in Assist...'), "\" class=\"fa fa-search\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Assist'), "\n        </a>\n        <!-- ko if: isDocument -->\n        <!-- ko with: contents -->\n        <!-- ko if: documentId -->\n        <a href=\"javascript: void(0);\" class=\"inactive-action\" data-bind=\"click: download\">\n          <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Download'), "\" class=\"fa fa-download\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Download'), "\n        </a>\n        <!-- /ko -->\n        <a href=\"javascript: void(0);\" class=\"inactive-action\" data-bind=\"click: open\">\n          <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Open'), "\" class=\"fa fa-file-o\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Open'), "\n        </a>\n        <!-- /ko -->\n        <!-- /ko -->\n        <!-- ko if: expandColumnsEnabled -->\n        <!-- ko with: contents.data -->\n        <!-- ko if: selectedColumns().length > 0 -->\n        <a class=\"inactive-action pointer\" data-bind=\"click: expand\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Expand to selected columns'), "</a>\n        <!-- /ko -->\n        <!-- ko if: selectedColumns().length === 0 -->\n        <a class=\"inactive-action pointer\" data-bind=\"click: expand\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Expand to all columns'), "</a>\n        <!-- /ko -->\n        <!-- /ko -->\n        <!-- /ko -->\n      </div>\n      <!-- ko if: isDocument -->\n        <div class=\"context-popover-bottom-attributes\">\n        <!-- ko with: contents -->\n          <!-- ko component: { name: '").concat(_ko_documentContextFooter__WEBPACK_IMPORTED_MODULE_8__.DOCUMENT_CONTEXT_FOOTER, "', params: { popoverData: $data } } --><!-- /ko -->\n        <!-- /ko -->\n        </div>\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-popover-collection-stats-details\">\n    <div class=\"context-popover-flex-fill\">\n      <div style=\"padding: 8px\">\n        <div data-bind=\"with: stats\">\n        <!-- ko hueSpinner: { spin:  $parent.loadingStats, center: true, size: 'large' } --><!-- /ko -->\n        <div class=\"alert\" data-bind=\"visible: !$parent.loadingStats() && !$parent.statsSupported()\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('This field does not support stats'), "</div>\n        <div class=\"alert\" data-bind=\"visible: !$parent.loadingStats() && $parent.statsSupported() && $data.data().length == 0\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('There are no stats to be shown'), "</div>\n        <table style=\"width: 100%\" data-bind=\"visible: !$parent.loadingStats() && $data.data().length > 0\" class=\"table table-condensed\">\n          <tbody data-bind=\"foreach: $data.data\">\n          <tr>\n            <td style=\"vertical-align: top\"><strong data-bind=\"text: key\"></strong></td>\n            <!-- ko if: key == 'facets' -->\n            <td>\n              <!-- ko if: val[Object.keys(val)[0]] != null -->\n              <table>\n                <tbody data-bind=\"foreach: Object.keys(val[Object.keys(val)[0]])\">\n                  <tr>\n                    <td style=\"vertical-align: top; padding-left: 4px; padding-right: 4px\"><strong data-bind=\"text: $data\"></strong></td>\n                    <td data-bind=\"template: 'context-popover-collection-stats-facets'\"></td>\n                  </tr>\n                </tbody>\n              </table>\n              <!-- /ko -->\n              <!-- ko ifnot: val[Object.keys(val)[0]] != null -->\n              ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Not available'), "\n              <!-- /ko -->\n            </td>\n            <!-- /ko -->\n            <!-- ko ifnot: key == 'facets' -->\n            <td data-bind=\"text: val\"></td>\n            <!-- /ko -->\n          </tr>\n          </tbody>\n        </table>\n        </div>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-popover-collection-stats-facets\">\n    <table style=\"width: 100%\">\n      <tbody data-bind=\"foreach: Object.keys($parent.val[Object.keys($parent.val)[0]][$data])\">\n        <tr>\n          <td style=\"vertical-align: top; padding-left: 4px; padding-right: 4px\"><strong data-bind=\"text: $data\"></strong></td>\n          <!-- ko ifnot: $data == 'facets' -->\n          <td style=\"vertical-align: top\" data-bind=\"text: $parents[1].val[Object.keys($parents[1].val)[0]][$parent][$data]\"></td>\n          <!-- /ko -->\n        </tr>\n      </tbody>\n    </table>\n  </script>\n\n  <script type=\"text/html\" id=\"context-popover-collection-terms-details\">\n    <div class=\"context-popover-flex-fill\">\n      <input type=\"text\" data-bind=\"value: terms.prefix, clearable: terms.prefix, valueUpdate:'afterkeydown'\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Filter...'), "\" class=\"pull-right\">\n      <div data-bind=\"with: terms\">\n        <!-- ko hueSpinner: { spin:  $parent.loadingTerms, center: true, size: 'large' } --><!-- /ko -->\n        <div class=\"clearfix\"></div>\n        <div class=\"alert\" data-bind=\"visible: !$parent.loadingTerms() && $data.data().length == 0\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('There are no terms to be shown'), "</div>\n        <table style=\"width: 100%\" data-bind=\"visible: !$parent.loadingTerms() && $data.data().length > 0\" class=\"table table-condensed\">\n          <tbody data-bind=\"foreach: $data.data\">\n          <tr>\n            <td data-bind=\"text: val.value\"></td>\n            <td style=\"width: 40px\">\n              <div class=\"progress\">\n                <div class=\"bar-label\" data-bind=\"text:val.count\"></div>\n                <div class=\"bar bar-info\" style=\"margin-top:-20px;\" data-bind=\"style: {'width': ((val.count / $parent.data()[0].val.count) * 100) + '%'}\"></div>\n              </div>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-popover-asterisk-details\">\n    <div class=\"context-popover-flex-fill\">\n      <!-- ko component: { name: 'sql-columns-table', params: { columns: columns, scrollToColumns: false } } --><!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-hue-app-details\">\n    <div class=\"context-popover-flex-fill\" style=\"overflow: auto;\" data-bind=\"with: data\">\n      <div style=\"padding: 8px\">\n        <div style=\"width:100%; text-align: center; margin-top: 30px; font-size: 100px; color: #787878;\" data-bind=\"template: { name: 'app-icon-template', data: { icon: interpreter.type } }\"></div>\n          <div style=\"width: 100%; margin-top: 20px; text-align:center\">\n            <a style=\"font-size: 20px;\" href=\"javascript:void(0)\" data-bind=\"text: interpreter.displayName, hueLink: interpreter.page, click: function () { $parents[1].close(); }, attr: { 'title': interpreter.tooltip }\"></a>\n          </div>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-popover-contents\">\n    <div class=\"context-popover-content\">\n      <!-- ko with: contents -->\n      <!-- ko if: typeof tabs !== 'undefined' -->\n      <ul class=\"nav nav-tabs context-popover-tabs\" data-bind=\"foreach: tabs\">\n        <li data-bind=\"click: function () { $parent.activeTab(id); }, css: { 'active' : $parent.activeTab() === id }\">\n          <a class=\"context-popover-tab\" data-toggle=\"tab\" data-bind=\"text: label, attr: { href: '#' + id }\"></a>\n        </li>\n      </ul>\n      <div class=\"context-popover-tab-container\" data-bind=\"foreach: tabs\">\n        <div class=\"context-popover-tab-pane tab-pane\" data-bind=\"visible : $parent.activeTab() === id, attr: { id: id }, css: { 'active' : $parent.activeTab() === id }\">\n          <div class=\"context-popover-flex\">\n            <!-- ko with: templateData -->\n            <div class=\"context-popover-flex-fill\" data-bind=\"visible: loading\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko --></div>\n            <!-- ko if: ! loading() && hasErrors() -->\n            <div class=\"context-popover-flex-fill\">\n                <div class=\"alert\">\n                <span data-bind=\"text: $parent.errorText\"></span>\n                <!-- ko if: $parent.enableSampleError && $parents[1].activeTab() === 'sample' -->\n                <a href=\"javascript:void(0);\" data-bind=\"click: function(){ huePubSub.publish('sample.error.insert.click', $data); huePubSub.publish('context.popover.hide');}\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Insert '), "<span data-bind=\"text:$parent.title\"></span> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('sample query'), "</a> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('at cursor'), "\n                <!-- /ko -->\n                </div>\n            </div>\n            <!-- /ko -->\n            <!-- ko if: ! loading() && ! hasErrors() -->\n            <!-- ko template: { name: $parent.template } --><!-- /ko -->\n            <!-- /ko -->\n            <!-- /ko -->\n            <!-- ko template: { name: 'context-popover-footer', data: $parents[1] } --><!-- /ko -->\n          </div>\n        </div>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: typeof tabs === 'undefined' -->\n      <div class=\"context-popover-flex-fill\" data-bind=\"visible: loading\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'large' } --><!-- /ko --></div>\n      <!-- ko if: !loading() && hasErrors() -->\n      <div class=\"context-popover-flex-fill\">\n        <div class=\"alert\" data-bind=\"text: errorText\"></div>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: !loading() && !hasErrors() -->\n      <!-- ko template: { name: template } --><!-- /ko -->\n      <!-- /ko -->\n      <!-- ko template: { name: 'context-popover-footer', data: $parent } --><!-- /ko -->\n      <!-- /ko -->\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-catalog-doc-title\">\n  </script>\n\n  <script type=\"text/html\" id=\"context-lang-ref-title\">\n    <div class=\"hue-popover-title\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 20px;\">\n      <i class=\"fa fa-book muted\" style=\"margin-top: 3px\"></i> <span class=\"blue\" style=\"padding-left: 4px;\" data-bind=\"text: title\"></span>\n      <div class=\"hue-popover-title-actions\">\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Pin'), "\" data-bind=\"visible: popover.pinEnabled, click: popover.pin\"><i class=\"fa fa-fw fa-thumb-tack\"></i></a>\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Close'), "\" data-bind=\"visible: !popover.closeDisabled, click: popover.close\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-lang-ref-contents\">\n    <div class=\"context-popover-content\">\n      <div class=\"context-popover-flex-fill context-popover-docs-details\" data-bind=\"htmlUnsecure: body\"></div>\n      <div class=\"context-popover-flex-bottom-links\">\n        <div class=\"context-popover-link-row\">\n          <a class=\"inactive-action pointer\" data-bind=\"click: openInRightAssist\">\n            <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Show in Assist...'), "\" class=\"fa fa-search\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Assist'), "\n          </a>\n        </div>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-catalog-entry-title\">\n    <div class=\"hue-popover-title\">\n      <!-- ko if: catalogEntry().isTable() -->\n        <span class=\"hue-popover-title-secondary-icon-container\">\n          <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\n          <!-- ko ifnot: loading -->  \n            <!-- ko if:catalogEntry().isIcebergTable() -->  \n              <i class=\"hue-popover-title-icon fa muted fa-snowflake-o\"  title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Iceberg table'), "\"></i>\n            <!-- /ko -->\n            <!-- ko ifnot:catalogEntry().isIcebergTable() -->  \n              <i class=\"hue-popover-title-icon fa muted fa-table\"></i>\n            <!-- /ko -->            \n          <!-- /ko -->\n        </span>\n      <!-- /ko -->\n      <!-- ko ifnot: catalogEntry().isTable() -->\n        <i class=\"hue-popover-title-icon fa muted\" data-bind=\"css: \n        catalogEntry() && (catalogEntry().isView() || parentIsView()) \n        ? 'fa-eye' \n        : (catalogEntry().isDatabase() \n        ? 'fa-database' \n        : (catalogEntry().isModel() \n        ? 'fa-puzzle-piece' \n        : 'fa-table'))\"></i>      \n      <!-- /ko -->\n      <span class=\"hue-popover-title-text\" data-bind=\"foreach: breadCrumbs\">\n        <!-- ko ifnot: isActive --><div><a href=\"javascript: void(0);\" data-bind=\"click: makeActive, text: name\"></a>.</div><!-- /ko -->\n        <!-- ko if: isActive -->\n        <div>\n          <span data-bind=\"text: name\"></span>\n          <!-- ko with: catalogEntry -->\n          <!-- ko if: isField() -->\n          (<span data-bind=\"text: getType()\"></span>)\n          <!-- ko if: isKey() -->\n            <!-- ko component: { name: '").concat(_assist_ko_assistKey__WEBPACK_IMPORTED_MODULE_17__.ASSIST_KEY_COMPONENT, "', params: { entry: $data, onForeignKeyClick: $parents[1].setEntry.bind($parents[1]) } } --><!-- /ko -->\n          <!-- /ko -->\n          <!-- /ko -->\n          <!-- /ko -->\n        </div>\n        <!-- /ko -->\n      </span>\n      <div class=\"hue-popover-title-actions\">\n        <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Refresh'), "\" data-bind=\"visible: !loading() && catalogEntry() && !catalogEntry().isTemporary, click: refresh\"><i class=\"fa fa-fw fa-refresh\"></i></a>\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Pin'), "\" data-bind=\"visible: popover.pinEnabled && catalogEntry() && !catalogEntry().isTemporary, click: popover.pin\"><i class=\"fa fa-fw fa-thumb-tack\"></i></a>\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Close'), "\" data-bind=\"visible: !popover.closeDisabled, click: popover.close\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-catalog-entry-contents\">\n    <div class=\"context-popover-content\">\n      <div class=\"context-popover-flex-fill\" data-bind=\"visible: loading\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko --></div>\n      <!-- ko if: !loading() && hasErrors() -->\n      <div class=\"context-popover-flex-fill\">\n        <div class=\"alert\" data-bind=\"text: errorText\"></div>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: !loading() && !hasErrors() && typeof catalogEntry() !== 'undefined'-->\n      <div class=\"context-popover-flex-fill\" data-bind=\"with: catalogEntry\">\n        <div class=\"context-popover-inner-content\">\n          <!-- ko if: $parent.comment() && !isTemporary  -->\n          <div class=\"context-popover-comment\" data-bind=\"attr: { 'title': $parent.comment }, multiLineEllipsis: { expanded: $parent.commentExpanded, expandable: true, expandClass: 'context-popover-comment-expanded' }, text: $parent.comment\"></div>\n          <!-- /ko -->\n\n          <!-- ko ifnot: $parent.commentExpanded -->\n              <!-- ko if: window.HAS_CATALOG && !isTemporary && (getDialect() === 'hive' || getDialect() === 'impala') -->\n              <div data-bind=\"component: { name: 'nav-tags', params: { catalogEntry: $data, overflowEllipsis: true } }\"></div>\n              <!-- /ko -->\n\n            <!-- ko if: isView() && $parent.viewSql() -->\n            <a href=\"javascript:void(0);\" style=\"text-align: right; margin-bottom: 5px;\" data-bind=\"toggle: $parent.viewSqlVisible, text: $parent.viewSqlVisible() ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Show columns'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Show view SQL'), "'\"></a>\n            <!-- /ko -->\n\n            <!-- ko if: $parent.viewSqlVisible -->\n            <div class=\"context-popover-sql\" data-bind=\"highlight: { value: $parent.viewSql, enableOverflow: true, formatted: true, dialect: getDialect() }\"></div>\n            <!-- /ko -->\n            <!-- ko ifnot: $parent.viewSqlVisible -->\n            <!-- ko component: { name: 'catalog-entries-list', params: { catalogEntry: $data, onClick: $parent.catalogEntry, onSampleClick: $parent.onSampleClick } } --><!-- /ko -->\n            <!-- /ko -->\n          <!-- /ko -->\n        </div>\n      </div>\n\n      <div class=\"context-popover-flex-bottom-links\">\n        <div class=\"context-popover-link-row\">\n          <!-- ko if: catalogEntry -->\n          <a class=\"inactive-action pointer\" data-bind=\"visible: popover.showInAssistEnabled || catalogEntry() !== originalCatalogEntry, click: showInAssist\">\n            <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Show in Assist...'), "\" class=\"fa fa-search\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Assist'), "\n          </a>\n          <!-- ko if: window.HAS_SQL_DASHBOARD -->\n            <a class=\"inactive-action pointer\" data-bind=\"visible: openActionsEnabled, click: openInDashboard\">\n              <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Open in Dashboard...'), "\" class=\"fa fa-external-link\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Dashboard'), "\n            </a>\n          <!-- /ko -->\n          <!-- ko if: catalogEntry().getDialect() !== 'solr' && openActionsEnabled() -->\n          <a class=\"inactive-action pointer\" data-bind=\"click: openInTableBrowser\">\n            <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Open in Table Browser...'), "\" class=\"fa fa-external-link\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Table Browser'), "\n          </a>\n          <!-- /ko -->\n          <!-- /ko -->\n        </div>\n      </div>\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-storage-entry-title\">\n    <div class=\"hue-popover-title\">\n      <i class=\"hue-popover-title-icon fa muted\" data-bind=\"css: storageEntry() && storageEntry().definition.type === 'dir' ? 'fa-folder-o' : 'fa-file-o'\"></i>\n      <span class=\"hue-popover-title-text\" data-bind=\"foreach: breadCrumbs\">\n        <!-- ko ifnot: isActive --><div><a href=\"javascript: void(0);\" data-bind=\"click: makeActive, text: name\"></a><!-- ko if: $index() > 0 -->/<!-- /ko --></div><!-- /ko -->\n        <!-- ko if: isActive -->\n        <div>\n          <span data-bind=\"text: name\"></span>\n        </div>\n        <!-- /ko -->\n      </span>\n      <div class=\"hue-popover-title-actions\">\n        <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Go Home'), "\" data-bind=\"visible: !loading(), click: goHome\"><i class=\"fa fa-fw fa-home\"></i></a>\n        <a class=\"pointer inactive-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Close'), "\" data-bind=\"visible: !popover.closeDisabled, click: popover.close\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"context-storage-entry-contents\">\n    <div class=\"context-popover-content\" data-bind=\"with: storageEntry\">\n      <!-- ko if: !loading() && hasErrors() -->\n      <div class=\"context-popover-flex-fill\">\n        <div class=\"alert\" data-bind=\"text: errorText\"></div>\n      </div>\n      <!-- /ko -->\n\n      <div class=\"context-popover-flex-fill\" data-bind=\"visible: loading\"><!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko --></div>\n\n      <!-- ko if: !loading() && !hasErrors() -->\n      <!-- ko with: definition -->\n      <div class=\"context-popover-flex-attributes\">\n          <!-- ko if: typeof humansize !== 'undefined' -->\n          <div class=\"context-popover-attribute\"><div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Size'), "</div><div data-bind=\"text: humansize\"></div></div>\n          <!-- /ko -->\n          <!-- ko if: typeof stats !== 'undefined' -->\n          <!-- ko with: stats -->\n          <!-- ko if: user -->\n          <div class=\"context-popover-attribute\"><div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Owner'), "</div><div data-bind=\"text: user\"></div></div>\n          <!-- /ko -->\n          <!-- /ko -->\n          <!-- /ko -->\n          <!-- ko if: typeof rwx !== 'undefined' -->\n          <div class=\"context-popover-attribute\"><div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Permissions'), "</div><div data-bind=\"text: rwx\"></div></div>\n          <!-- /ko -->\n      </div>\n      <!-- /ko -->\n      <!-- ko if: definition.type === 'dir' -->\n      <div class=\"context-popover-flex-fill storage-entry-container\" data-bind=\"fetchMore: { fetchMore: fetchMore.bind($data), hasMore: hasMorePages, loadingMore: loadingMore.bind($data) }\">\n        <table class=\"table table-condensed table-nowrap\">\n          <thead>\n            <tr>\n              <th width=\"1%\"></th>\n              <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Name'), "</th>\n              <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Size'), "</th>\n              <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Permissions'), "</th>\n            </tr>\n          </thead>\n          <tbody>\n            <!-- ko if: $parent.storageEntry().parent -->\n            <tr>\n              <td><i class=\"fa fa-folder-o\"></i></td>\n              <td><a href=\"javascript: void(0);\" data-bind=\"click: function () { $parent.storageEntry($parent.storageEntry().parent) }\">..</a></td>\n              <td data-bind=\"text: $parent.storageEntry().definition.humansize\"></td>\n              <td data-bind=\"text: $parent.storageEntry().definition.rwx\"></td>\n            </tr>\n            <!-- /ko -->\n            <!-- ko foreach: entries -->\n            <tr>\n              <td><i class=\"fa\" data-bind=\"css: definition.type === 'dir' ? 'fa-folder-o' : 'fa-file-o'\"></i></td>\n              <td><a href=\"javascript: void(0);\" data-bind=\"click: function () { $parents[1].storageEntry($data) }, text: definition.name\"></a></td>\n              <td data-bind=\"text: definition.humansize\"></td>\n              <td data-bind=\"text: definition.rwx\"></td>\n            </tr>\n            <!-- /ko -->\n          </tbody>\n        </table>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: definition.type !== 'dir' -->\n      <div class=\"context-popover-flex-header\"><div class=\"context-popover-header\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Preview'), "</div></div>\n      <div class=\"context-popover-flex-fill storage-entry-container\">\n        <div data-bind=\"with: preview\">\n          <!-- ko if: view && view.contents -->\n          <pre data-bind=\"text: view.contents\"></pre>\n          <!-- /ko -->\n          <!-- ko if: view && !view.contents -->\n          <div class=\"empty-file-contents\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Empty file...'), "</div>\n          <!-- /ko -->\n        </div>\n      </div>\n      <!-- /ko -->\n      <!-- /ko -->\n\n      <div class=\"context-popover-flex-bottom-links\">\n        <div class=\"context-popover-link-row\">\n          <!-- ko ifnot: loading -->\n          <a class=\"inactive-action pointer\" data-bind=\"click: $parent.openInFileBrowser\">\n            <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Open in File Browser...'), "\" class=\"fa fa-external-link\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('File Browser'), "\n          </a>\n          <!-- ko if: typeof $parent.editorLocation !== 'undefined' -->\n          <a class=\"inactive-action pointer\" data-bind=\"click: function () { $parent.replaceInEditor($data, $parent) }\">\n            <i style=\"font-size: 11px;\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Replace the editor content...'), "\" class=\"fa fa-pencil\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Insert in the editor'), "\n          </a>\n          <!-- /ko -->\n          <!-- /ko -->\n        </div>\n      </div>\n    </div>\n  </script>\n");

// prettier-ignore
var CONTEXT_POPOVER_TEMPLATE = "\n  <div class=\"".concat(CONTEXT_POPOVER_CLASS, "\" data-bind=\"css: orientationClass, style: { 'left': left() + 'px', 'top': top() + 'px', 'width': width() + 'px', height: height() + 'px' }, resizable: { containment: 'document', handles: resizeHelper.resizableHandles, start: resizeHelper.resizeStart, stop: resizeHelper.resizeStop, resize: resizeHelper.resize }\">\n    <div class=\"hue-popover-arrow\" data-bind=\"style: { 'margin-left': leftAdjust() + 'px',  'margin-top': topAdjust() + 'px' }\"></div>\n    <!-- ko if: typeof titleTemplate !== 'undefined' -->\n    <!-- ko template: { name: titleTemplate, data: contents } --><!-- /ko -->\n    <!-- /ko -->\n    <!-- ko if: typeof titleTemplate === 'undefined' -->\n    <div class=\"hue-popover-title\" style=\"white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 30px;\">\n      <i class=\"fa muted\" data-bind=\"css: iconClass\" style=\"margin-top: 3px\"></i> <span style=\"padding-left: 4px;\" data-bind=\"text: title\"></span>\n      <!-- ko if: typeof subtitle !== 'undefined' && subtitle -->\n      <span class=\"muted\" style=\"padding-left: 4px;\" data-bind=\"html: subtitle\"></span>\n      <!-- /ko -->\n      <div style=\"position: absolute; right: 6px; top: 8px;\">\n        <a class=\"pointer inactive-action\" data-bind=\"visible: pinEnabled, click: pin\"><i class=\"fa fa-fw fa-thumb-tack\"></i></a>\n        <a class=\"pointer inactive-action\" data-bind=\"click: close\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n    </div>\n    <!-- /ko -->\n    <!-- ko if: typeof contentsComponent !== 'undefined' -->\n    <!-- ko component: { name: contentsComponent, params: data } --><!-- /ko -->\n    <!-- /ko -->\n    <!-- ko if: typeof contentsTemplate !== 'undefined' -->\n    <!-- ko template: { name: contentsTemplate, data: contents } --><!-- /ko -->\n    <!-- /ko -->\n    <!-- ko if: typeof contentsTemplate === 'undefined' && typeof contentsComponent === 'undefined' -->\n    <!-- ko template: 'context-popover-contents' --><!-- /ko -->\n    <!-- /ko -->\n  </div>\n");

// prettier-ignore
var GLOBAL_SEARCH_TEMPLATE = "\n  <!-- ko if: isCatalogEntry -->\n  <!-- ko with: contents -->\n  <div class=\"global-search-catalog-entry\">\n    <!-- ko template: 'context-catalog-entry-title' --><!-- /ko -->\n    <!-- ko template: 'context-catalog-entry-contents' --><!-- /ko -->\n  </div>\n  <!-- /ko -->\n  <!-- /ko -->\n  <!-- ko ifnot: isCatalogEntry -->\n  <!-- ko template: 'context-popover-contents' --><!-- /ko -->\n  <!-- /ko -->\n";
var HALF_ARROW = 6;
var preventHide = false;
var hidePopover = function hidePopover() {
  if (!preventHide) {
    var $contextPopover = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#contextPopover');
    if ($contextPopover.length > 0) {
      knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($contextPopover[0]);
      $contextPopover.remove();
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.context');
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish(CONTEXT_POPOVER_HIDDEN_EVENT);
    }
  }
};
var ContextPopoverViewModel = /*#__PURE__*/function () {
  function ContextPopoverViewModel(params) {
    _classCallCheck(this, ContextPopoverViewModel);
    var self = this;
    self.disposals = [];
    self.left = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    self.top = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    var popoverSize = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_21__.getFromLocalStorage)('assist.popover.size', {
      width: 450,
      height: 400
    });
    self.width = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(popoverSize.width);
    self.height = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(popoverSize.height);
    self.leftAdjust = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    self.topAdjust = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    self.data = params.data;
    self.connector = params.connector;
    self.sourceType = params.sourceType;
    self.namespace = params.namespace;
    self.compute = params.compute;
    self.defaultDatabase = params.defaultDatabase;
    self.close = hidePopover;
    self.onSampleClick = params.onSampleClick;
    var orientation = params.orientation || 'bottom';
    self.contents = null;
    self.resizeHelper = new _resizeHelper__WEBPACK_IMPORTED_MODULE_11__["default"](orientation, self.leftAdjust, self.topAdjust, function (noHide) {
      preventHide = noHide;
    });
    if (typeof params.source.element !== 'undefined') {
      // Track the source element and close the popover if moved
      var $source = jquery__WEBPACK_IMPORTED_MODULE_0___default()(params.source.element);
      var originalSourceOffset = $source.offset();
      var currentSourceOffset;
      var detectMoveInterval = window.setInterval(function () {
        currentSourceOffset = $source.offset();
        if (currentSourceOffset.top !== originalSourceOffset.top) {
          hidePopover();
        }
      }, 200);
      self.disposals.push(function () {
        window.clearInterval(detectMoveInterval);
      });
    }
    var windowWidth = jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).width();
    var fitHorizontally = function fitHorizontally() {
      var left = params.source.left + Math.round((params.source.right - params.source.left) / 2) - self.width() / 2;
      if (left + self.width() > windowWidth - 10) {
        self.leftAdjust(left + self.width() - windowWidth + 5);
        left = windowWidth - self.width() - 10;
      } else if (left < 10) {
        self.leftAdjust(left - 10 - HALF_ARROW);
        left = 10;
      } else {
        self.leftAdjust(-HALF_ARROW);
      }
      self.left(left);
    };
    var windowHeight = jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).height();
    var fitVertically = function fitVertically() {
      var top = params.source.top + Math.round((params.source.bottom - params.source.top) / 2) - self.height() / 2;
      if (top + self.height() > windowHeight - 10) {
        self.topAdjust(top + self.height() - windowHeight + 5);
        top = windowHeight - self.height() - 10;
      } else if (top < 10) {
        self.topAdjust(top - 10 - HALF_ARROW);
        top = 10;
      } else {
        self.topAdjust(-HALF_ARROW);
      }
      self.top(top);
    };
    switch (orientation) {
      case 'top':
        fitHorizontally();
        self.top(params.source.top - self.height());
        break;
      case 'right':
        fitVertically();
        self.left(params.source.right);
        break;
      case 'bottom':
        fitHorizontally();
        self.top(params.source.bottom);
        break;
      case 'left':
        fitVertically();
        self.left(params.source.left - self.width());
    }
    self.isSolr = params.sourceType === 'solr';
    self.isComplex = params.data.type === 'complex';
    self.isFunction = params.data.type === 'function';
    self.isStorageEntry = params.data.type === 'storageEntry';
    self.isAsterisk = params.data.type === 'asterisk';
    self.isDocument = params.data.type.toLowerCase() === 'hue';
    self.isCollection = params.data.type === 'collection';
    self.isCatalogEntry = !!params.data.catalogEntry;
    self.isLangRef = params.data.type === 'statementType';
    if (self.isCatalogEntry && params.data.catalogEntry.getDialect() === 'solr' && params.data.catalogEntry.isField()) {
      self.isCollection = true;
      self.isCatalogEntry = false;
      self.namespace = params.data.catalogEntry.namespace;
      self.compute = params.data.catalogEntry.compute;
    }
    self.showInAssistEnabled = (typeof params.showInAssistEnabled !== 'undefined' ? params.showInAssistEnabled : true) && (self.isDocument || self.isCollection || self.isCatalogEntry);
    self.openInDashboardEnabled = self.isCatalogEntry && params.data.catalogEntry.path.length <= 2;
    self.openInTableBrowserEnabled = self.isCatalogEntry && params.data.catalogEntry.path.length <= 2;
    self.expandColumnsEnabled = self.isAsterisk;
    self.pinEnabled = params.pinEnabled && !self.isFunction && !self.isAsterisk && !self.isStorageEntry && !self.isCatalogEntry;
    if (params.data.type === 'quickQuery') {
      self.contentsComponent = 'quick-query-context';
      self.title = (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_20__["default"])('Quick Query');
      self.iconClass = 'fa-play';
      self.pinEnabled = false;
    } else if (self.isCatalogEntry) {
      self.contents = new _dataCatalogContext__WEBPACK_IMPORTED_MODULE_5__["default"]({
        popover: self,
        catalogEntry: params.data.catalogEntry
      });
      self.titleTemplate = 'context-catalog-entry-title';
      self.contentsTemplate = 'context-catalog-entry-contents';
    } else if (self.isFunction) {
      self.contents = new _functionContext__WEBPACK_IMPORTED_MODULE_7__["default"](self.data, self.connector);
      self.title = self.data["function"];
      self.iconClass = 'fa-superscript';
    } else if (self.isStorageEntry) {
      self.contents = new _storageContext__WEBPACK_IMPORTED_MODULE_12__["default"]({
        popover: self,
        storageEntry: params.data.storageEntry,
        editorLocation: params.data.editorLocation
      });
      self.titleTemplate = 'context-storage-entry-title';
      self.contentsTemplate = 'context-storage-entry-contents';
    } else if (self.isAsterisk) {
      self.contents = new _asteriskContextTabs__WEBPACK_IMPORTED_MODULE_3__["default"](self.data, self.connector, self.namespace, self.compute, self.defaultDatabase);
      self.title = '*';
      self.iconClass = 'fa-table';
    } else if (self.isDocument) {
      self.contents = new _documentContext__WEBPACK_IMPORTED_MODULE_6__["default"](self.data.definition);
      self.titleTemplate = 'context-catalog-doc-title';
    } else if (self.isCollection) {
      self.contents = new _collectionContextTabs__WEBPACK_IMPORTED_MODULE_4__["default"](self.data);
      self.title = self.data.catalogEntry.path.slice(1).join('.');
      self.iconClass = 'fa-search';
    } else if (self.isLangRef) {
      self.contents = new _langRefContext__WEBPACK_IMPORTED_MODULE_9__["default"]({
        popover: self,
        data: params.data
      });
      self.titleTemplate = 'context-lang-ref-title';
      self.contentsTemplate = 'context-lang-ref-contents';
    } else {
      self.title = '';
      self.iconClass = 'fa-info';
    }
    self.orientationClass = 'hue-popover-' + orientation;
    if (params.delayedHide) {
      var hideTimeout = -1;
      var onLeave = function onLeave() {
        hideTimeout = window.setTimeout(function () {
          jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').fadeOut(200, function () {
            hidePopover();
          });
        }, 1000);
      };
      var onEnter = function onEnter() {
        window.clearTimeout(hideTimeout);
      };
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(params.delayedHide).add(jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover')).on('mouseleave', onLeave).on('mouseenter', onEnter);
      var keepPopoverOpenOnClick = function keepPopoverOpenOnClick() {
        window.clearTimeout(hideTimeout);
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(params.delayedHide).add(jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover')).off('mouseleave', onLeave).off('mouseenter', onEnter);
      };
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').on('click', keepPopoverOpenOnClick);
      self.disposals.push(function () {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(params.delayedHide).add(jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover')).off('mouseleave', onLeave).off('mouseenter', onEnter);
        jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').off('click', keepPopoverOpenOnClick);
      });
    }
    var closeOnEsc = function closeOnEsc(e) {
      if (e.keyCode === 27) {
        hidePopover();
      }
    };
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('keyup', closeOnEsc);
    self.disposals.push(function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('keyup', closeOnEsc);
    });
    window.setTimeout(function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.context');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('click.context', function (event) {
        if (jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(document, event.target) && !jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(jquery__WEBPACK_IMPORTED_MODULE_0___default()('#contextPopover')[0], event.target) && (jquery__WEBPACK_IMPORTED_MODULE_0___default()('.modal')[0].length === 0 || !jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(jquery__WEBPACK_IMPORTED_MODULE_0___default()('.modal')[0], event.target))) {
          hidePopover();
        }
      });
    }, 0);
    self.disposals.push(function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.context');
    });
  }
  return _createClass(ContextPopoverViewModel, [{
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
      if (self.contents && self.contents.dispose) {
        self.contents.dispose();
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish('context.popover.dispose');
    }
  }, {
    key: "pin",
    value: function pin() {
      var self = this;
      hidePopover();
      if (self.contents && typeof self.contents.sample !== 'undefined') {
        self.contents.sample.fetchedData(undefined);
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish('sql.context.pin', self);
      if (self.contents && self.contents.activeTab() === 'sample') {
        self.contents.refetchSamples();
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_18__["default"].registerComponent(NAME, ContextPopoverViewModel, SUPPORT_TEMPLATES + _documentContext__WEBPACK_IMPORTED_MODULE_6__.DOCUMENT_CONTEXT_TEMPLATE + _functionContext__WEBPACK_IMPORTED_MODULE_7__.FUNCTION_CONTEXT_TEMPLATE + _partitionContext__WEBPACK_IMPORTED_MODULE_10__.PARTITION_CONTEXT_TEMPLATE + CONTEXT_POPOVER_TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].subscribe(HIDE_CONTEXT_POPOVER_EVENT, hidePopover);
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].subscribe(SHOW_CONTEXT_POPOVER_EVENT, function (details) {
    hidePopover();
    var $contextPopover = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="contextPopover" data-bind="component: { name: \'context-popover\', params: $data }" ></div>');
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($contextPopover);
    knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(details, $contextPopover[0]);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish('context.popover.shown');
  });
});
var SqlContextContentsGlobalSearch = /*#__PURE__*/function () {
  function SqlContextContentsGlobalSearch(params) {
    _classCallCheck(this, SqlContextContentsGlobalSearch);
    var self = this;
    self.contents = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.disposals = [];
    self.isCatalogEntry = params.data.type === 'catalogEntry' || params.data.type.toLowerCase() === 'database' || params.data.type.toLowerCase() === 'table' || params.data.type.toLowerCase() === 'field' || params.data.type.toLowerCase() === 'view';
    self.isDocument = params.data.type.toLowerCase() === 'hue';
    self.isPartition = params.data.type.toLowerCase() === 'partition';
    self.close = params.globalSearch.close.bind(params.globalSearch);

    // These are currently not in the global search results
    self.isStorageEntry = false;
    self.isAsterisk = false;
    self.isComplex = false;
    self.isFunction = false;
    self.showInAssistEnabled = !self.isHueApp;
    self.openInDashboardEnabled = false;
    self.openInTableBrowserEnabled = false;
    self.expandColumnsEnabled = self.isAsterisk;
    self.closeDisabled = true; // Global search has it's own close

    var adaptedData = {
      identifierChain: []
    };
    var path = params.data.originalName.split('.');
    path.forEach(function (part) {
      adaptedData.identifierChain.push({
        name: part
      });
    });
    var connectorId = params.data.sourceType && params.data.sourceType.toLowerCase();
    if (!connectorId || connectorId === 'hive') {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish(config_events__WEBPACK_IMPORTED_MODULE_15__.GET_KNOWN_CONFIG_TOPIC, function (clusterConfig) {
        if (clusterConfig) {
          var defaultEditor = clusterConfig['default_sql_interpreter'];
          if (!connectorId || connectorId === 'hive' && defaultEditor === 'impala') {
            connectorId = defaultEditor;
          }
        }
      });
    }
    if (self.isCatalogEntry) {
      // TODO: Connector, Namespace and compute selection for global search results?
      var connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_16__.findEditorConnector)(function (connector) {
        return connector.id === connectorId;
      });
      if (!connector) {
        // TODO: Global search results are referring to dialect and not type
        connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_16__.findEditorConnector)(function (connector) {
          return connector.dialect === connectorId;
        });
      }
      (0,catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_13__.getNamespaces)({
        connector: connector
      }).then(function (context) {
        catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_14__["default"].getEntry({
          namespace: context.namespaces[0],
          compute: context.namespaces[0].computes[0],
          connector: connector,
          path: path,
          definition: {
            type: params.data.type.toLowerCase()
          }
        }).then(function (catalogEntry) {
          catalogEntry.navigatorMeta = params.data;
          catalogEntry.navigatorMetaPromise = _api_cancellablePromise__WEBPACK_IMPORTED_MODULE_2__.CancellablePromise.resolve(catalogEntry.navigatorMeta);
          catalogEntry.saveLater();
          self.contents(new _dataCatalogContext__WEBPACK_IMPORTED_MODULE_5__["default"]({
            popover: self,
            catalogEntry: catalogEntry
          }));
        });
      })["catch"]();
    } else if (self.isDocument) {
      self.contents(new _documentContext__WEBPACK_IMPORTED_MODULE_6__["default"](params.data));
    } else if (self.isPartition) {
      self.contents(new _partitionContext__WEBPACK_IMPORTED_MODULE_10__["default"](params.data));
    }
  }
  return _createClass(SqlContextContentsGlobalSearch, [{
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
      if (self.contents && self.contents.dispose) {
        self.contents.dispose();
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_19__["default"].publish('context.popover.dispose');
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_18__["default"].registerComponent('context-popover-contents-global-search', SqlContextContentsGlobalSearch, SUPPORT_TEMPLATES + _documentContext__WEBPACK_IMPORTED_MODULE_6__.DOCUMENT_CONTEXT_TEMPLATE + _functionContext__WEBPACK_IMPORTED_MODULE_7__.FUNCTION_CONTEXT_TEMPLATE + _partitionContext__WEBPACK_IMPORTED_MODULE_10__.PARTITION_CONTEXT_TEMPLATE + GLOBAL_SEARCH_TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.documentContextFooter.js":
/*!**********************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/ko.documentContextFooter.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DOCUMENT_CONTEXT_FOOTER": () => (/* binding */ DOCUMENT_CONTEXT_FOOTER)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var DOCUMENT_CONTEXT_FOOTER = 'document-context-footer';

// prettier-ignore
var TEMPLATE = "\n<!-- ko if: doc -->\n  <!-- ko if: doc.last_modified -->\n    <div><span>".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Modified'), "</span> <span data-bind=\"momentFromNow: { data: doc.last_modified, titleFormat: 'LLL Z' }\"></span></div>\n  <!-- /ko -->\n  <!-- ko ifnot: ownedByMe -->\n    <div><span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Owner'), "</span> <span data-bind=\"text: doc.owner\"></span></div>\n  <!-- /ko -->\n  <!-- ko if: readOnly -->\n    <div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Read-only'), "</div>\n  <!-- /ko -->\n<!-- /ko -->\n");
var DocumentContextFooter = /*#__PURE__*/_createClass(function DocumentContextFooter(params) {
  var _this = this;
  _classCallCheck(this, DocumentContextFooter);
  this.doc = params.popoverData.data;
  this.ownedByMe = this.doc && this.doc.owner && this.doc.owner === window.LOGGED_USERNAME;
  this.readOnly = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
    if (window.USER_IS_ADMIN || _this.ownedByMe) {
      return false;
    }
    var contents = knockout__WEBPACK_IMPORTED_MODULE_0__.unwrap(params.popoverData.documentContents);
    return contents && !contents.canSave;
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerComponent(DOCUMENT_CONTEXT_FOOTER, DocumentContextFooter, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.popoverOnHover.js":
/*!***************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/ko.popoverOnHover.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ko.contextPopover */ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.contextPopover.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var DEFAULT_DELAY = 700;
var NAME = 'popoverOnHover';
knockout__WEBPACK_IMPORTED_MODULE_1__.bindingHandlers[NAME] = {
  init: function init(element, valueAccessor, allBindings, viewModel, bindingContext) {
    var options = valueAccessor();
    var $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);
    var popoverSelector = '.' + _ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__.CONTEXT_POPOVER_CLASS;
    if (typeof options === 'function') {
      options = {
        onHover: options,
        delay: DEFAULT_DELAY
      };
    }
    var visible = false;
    var clickedOpen = false;
    var showTimeout = -1;
    var hideTimeout = -1;
    var clearTimeouts = function clearTimeouts() {
      window.clearTimeout(showTimeout);
      window.clearTimeout(hideTimeout);
    };
    var hide = function hide() {
      clearTimeouts();
      hideTimeout = window.setTimeout(function () {
        visible = false;
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(popoverSelector).off('.onHover');
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__.HIDE_CONTEXT_POPOVER_EVENT);
      }, options.delay);
    };
    var show = function show(event) {
      clearTimeouts();
      if (visible) {
        return;
      }
      showTimeout = window.setTimeout(function () {
        visible = true;
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__.HIDE_CONTEXT_POPOVER_EVENT);
        options.onHover.bind(bindingContext.$data)(bindingContext.$data, event, options.positionAdjustments);
      }, options.delay);
    };
    $element.on('click.onHover', function (event) {
      clearTimeouts();
      clickedOpen = true;
      visible = true;
      options.onHover.bind(bindingContext.$data)(bindingContext.$data, event, options.positionAdjustments);
    });
    $element.on('mouseenter.onHover', show);
    $element.on('mouseleave.onHover', function () {
      if (clickedOpen) {
        return;
      }
      clearTimeouts();
      // Keep open if mouse moves to the context popover
      if (visible) {
        var $popoverSelector = jquery__WEBPACK_IMPORTED_MODULE_0___default()(popoverSelector);
        $popoverSelector.on('mouseenter.onHover', function () {
          clearTimeouts();
        });
        $popoverSelector.on('mouseleave.onHover', function () {
          hide();
        });
        hide();
      }
    });
    var hiddenSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(_ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__.CONTEXT_POPOVER_HIDDEN_EVENT, function () {
      visible = false;
      clickedOpen = false;
    });
    knockout__WEBPACK_IMPORTED_MODULE_1__.utils.domNodeDisposal.addDisposeCallback(element, function () {
      $element.off('.onHover');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(popoverSelector).off('.onHover');
      clearTimeouts();
      hiddenSub.remove();
      if (visible) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_ko_contextPopover__WEBPACK_IMPORTED_MODULE_2__.HIDE_CONTEXT_POPOVER_EVENT);
      }
    });
  }
};

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/ko.quickQueryContext.js":
/*!******************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/ko.quickQueryContext.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _simpleAceEditor_ko_simpleAceEditor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../simpleAceEditor/ko.simpleAceEditor */ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/ko.simpleAceEditor.js");
/* harmony import */ var _ko_contextSelector__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ko.contextSelector */ "./desktop/core/src/desktop/js/ko/components/ko.contextSelector.js");
/* harmony import */ var _ko_dropDown__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ko.dropDown */ "./desktop/core/src/desktop/js/ko/components/ko.dropDown.js");
/* harmony import */ var _apps_editor_components_resultGrid_ko_simpleResultGrid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../apps/editor/components/resultGrid/ko.simpleResultGrid */ "./desktop/core/src/desktop/js/apps/editor/components/resultGrid/ko.simpleResultGrid.js");
/* harmony import */ var _apps_editor_components_ExecutableActionsKoBridge_vue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../apps/editor/components/ExecutableActionsKoBridge.vue */ "./desktop/core/src/desktop/js/apps/editor/components/ExecutableActionsKoBridge.vue");
/* harmony import */ var apps_editor_execution_executor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! apps/editor/execution/executor */ "./desktop/core/src/desktop/js/apps/editor/execution/executor.ts");
/* harmony import */ var apps_editor_execution_sqlExecutable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! apps/editor/execution/sqlExecutable */ "./desktop/core/src/desktop/js/apps/editor/execution/sqlExecutable.ts");
/* harmony import */ var config_events__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! config/events */ "./desktop/core/src/desktop/js/config/events.ts");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
/* harmony import */ var parse_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! parse/utils */ "./desktop/core/src/desktop/js/parse/utils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.














var NAME = 'quick-query-context';

// prettier-ignore
var TEMPLATE = "\n<div class=\"context-popover-flex-fill\" style=\"overflow: auto;\">\n  <div style=\"display: inline-block\" data-bind=\"\n    component: {\n      name: '".concat(_ko_dropDown__WEBPACK_IMPORTED_MODULE_3__.HUE_DROP_DOWN_COMPONENT, "',\n      params: {\n        value: connector,\n        labelAttribute: 'displayName',\n        entries: availableConnectors,\n        linkTitle: 'Active connector'\n      }\n    }\n  \"></div>\n  <!-- ko if: connector() -->\n    <div class=\"margin-left-10\" style=\"display: inline-block\" data-bind=\"\n      component: {\n        name: '").concat(_ko_contextSelector__WEBPACK_IMPORTED_MODULE_2__.CONTEXT_SELECTOR_COMPONENT, "',\n        params: {\n          connector: connector,\n          compute: compute,\n          namespace: namespace,\n          availableDatabases: availableDatabases,\n          database: database,\n          hideLabels: true\n        }\n      }\n    \"></div>\n  <!-- /ko -->\n  <!-- ko ifnot: loadingContext -->\n    <!-- ko with: connector -->\n      <div style=\"margin: 10px;\" data-bind=\"\n        component: {\n          name: '").concat(_simpleAceEditor_ko_simpleAceEditor__WEBPACK_IMPORTED_MODULE_1__.MULTI_NAME, "',\n          params: {\n            autocomplete: $parent.autocomplete,\n            value: $parent.statement,\n            lines: 3,\n            aceOptions: {\n              minLines: 3,\n              maxLines: 5\n            },\n            mode: dialect,\n            database: $parent.database,\n            availableDatabases: $parent.availableDatabases,\n            namespace: $parent.namespace,\n            compute: $parent.compute,\n            executor: $parent.executor,\n            activeExecutable: $parent.activeExecutable\n          }\n        }\n      \"></div>\n      <executable-actions-ko-bridge data-bind=\"vueKoProps: {\n          'executable-observable': $parent.activeExecutable\n        }\"></executable-actions-ko-bridge>\n      <div data-bind=\"\n        component: {\n          name: '").concat(_apps_editor_components_resultGrid_ko_simpleResultGrid__WEBPACK_IMPORTED_MODULE_4__.SIMPLE_RESULT_GRID_COMPONENT, "',\n          params: { activeExecutable: $parent.activeExecutable }\n        }\n      \"></div>\n    <!-- /ko -->\n  <!-- /ko -->\n</div>\n");
var QuickQueryContext = /*#__PURE__*/function (_DisposableComponent) {
  function QuickQueryContext(params) {
    var _this;
    _classCallCheck(this, QuickQueryContext);
    _this = _callSuper(this, QuickQueryContext, [params]);
    _this.availableConnectors = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
    _this.connector = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    _this.availableDatabases = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
    _this.database = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    _this.activeExecutable = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();

    // TODO: Switch over to connector in ko.simpleAceEditor
    _this.namespace = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    _this.compute = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    _this.statement = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    _this.loadingContext = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return !_this.namespace() || !_this.compute() || !_this.database();
    });
    _this.dialect = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && _this.connector().dialect;
    });
    _this.type = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && _this.connector().id;
    });
    _this.defaultLimit = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(10);
    _this.executor = new apps_editor_execution_executor__WEBPACK_IMPORTED_MODULE_6__["default"]({
      sourceType: _this.type,
      namespace: _this.namespace,
      compute: _this.compute,
      connector: _this.connector,
      defaultLimit: _this.defaultLimit
    });
    _this.autocomplete = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return _this.connector() && {
        type: _this.connector().dialect,
        connector: _this.connector
      };
    });
    _this.updateFromConfig();
    _this.subscribe(config_events__WEBPACK_IMPORTED_MODULE_8__.CONFIG_REFRESHED_TOPIC, _this.updateFromConfig.bind(_this));
    var refreshExecutableThrottle = -1;
    var refreshExecutable = function refreshExecutable() {
      window.clearTimeout(refreshExecutableThrottle);
      refreshExecutableThrottle = window.setTimeout(function () {
        var parsedStatement = (0,parse_utils__WEBPACK_IMPORTED_MODULE_12__.getStatementsParser)(_this.connector()).parse(_this.statement() || '')[0];
        var executable = new apps_editor_execution_sqlExecutable__WEBPACK_IMPORTED_MODULE_7__["default"]({
          executor: _this.executor,
          parsedStatement: parsedStatement,
          database: _this.database()
        });
        _this.activeExecutable(executable);
        _this.executor.setExecutables([executable]);
      }, 200);
    };
    _this.subscribe(_this.statement, refreshExecutable);
    _this.subscribe(_this.database, refreshExecutable);
    return _this;
  }
  _inherits(QuickQueryContext, _DisposableComponent);
  return _createClass(QuickQueryContext, [{
    key: "updateFromConfig",
    value: function updateFromConfig() {
      var _this2 = this;
      var configuredSqlConnectors = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_9__.filterEditorConnectors)(function (connector) {
        return connector.is_sql;
      });
      this.availableConnectors(configuredSqlConnectors);
      var found = this.connector() && this.availableConnectors().some(function (connector) {
        if (connector.id === _this2.connector().id) {
          _this2.connector(connector);
          return true;
        }
      });
      if (!found) {
        this.connector(this.availableConnectors().length ? this.availableConnectors()[0] : undefined);
      }
    }
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_11__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_10__["default"].registerComponent(NAME, QuickQueryContext, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/langRefContext.js":
/*!************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/langRefContext.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var LangRefContext = /*#__PURE__*/function () {
  function LangRefContext(options) {
    _classCallCheck(this, LangRefContext);
    var self = this;
    self.popover = options.popover;
    self.title = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.body = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.topicId = 'topics/impala_' + options.data.identifier.toLowerCase().replace(/ /g, '_') + '.xml';
    jquery__WEBPACK_IMPORTED_MODULE_0___default().get(window.IMPALA_DOC_INDEX[self.topicId]).done(function (topic) {
      self.title(topic.title);
      self.body(topic.body);
    });
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').on('click.contextLangRef', function (event) {
      if (event.target.className === 'hue-doc-internal-link') {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_3__.ASSIST_LANG_REF_SHOW_TOPIC_EVENT, {
          ref: jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).data('doc-ref'),
          anchorId: jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).data('doc-anchor-id')
        });
      }
    });
  }
  return _createClass(LangRefContext, [{
    key: "dispose",
    value: function dispose() {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').off('click.contextLangRef');
    }
  }, {
    key: "openInRightAssist",
    value: function openInRightAssist() {
      var self = this;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_3__.ASSIST_LANG_REF_SHOW_TOPIC_EVENT, {
        ref: self.topicId
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('context.popover.hide');
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LangRefContext);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/partitionContext.js":
/*!**************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/partitionContext.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "PARTITION_CONTEXT_TEMPLATE": () => (/* binding */ PARTITION_CONTEXT_TEMPLATE),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.



var TEMPLATE_NAME = 'context-partition-details';

// prettier-ignore
var PARTITION_CONTEXT_TEMPLATE = "\n<script type=\"text/html\" id=\"".concat(TEMPLATE_NAME, "\">\n  <div class=\"context-popover-flex-fill\" style=\"overflow: auto;\">\n    <div class=\"context-popover-inner-content\">\n      <div style=\"position: absolute; right: 6px; top: 8px;\">\n        <a class=\"pointer inactive-action\" data-bind=\"visible: !$parent.closeDisabled, click: function () { $parent.close() }\"><i class=\"fa fa-fw fa-times\"></i></a>\n      </div>\n      <!-- ko with: data -->\n      <div class=\"context-popover-flex-header blue\"><span data-bind=\"text: originalName\"></span></div>\n      <div class=\"context-popover-flex-attributes\">\n        <div class=\"context-popover-attribute\"><div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_1__["default"])('Created'), "</div><div data-bind=\"text: created\"></div></div>\n      </div>\n      <!-- ko if: description -->\n      <div class=\"context-popover-doc-description\" data-bind=\"text: description\"></div>\n      <!-- /ko -->\n      <div class=\"context-popover-flex-fill\">\n        <table id=\"partitionsTable\" class=\"table table-condensed table-nowrap\">\n          <thead>\n          <tr>\n            <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_1__["default"])('Values'), "</th>\n          </tr>\n          </thead>\n          <tbody data-bind=\"foreach: colValues\">\n            <tr>\n              <td data-bind=\"text: $data\"></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- /ko -->\n    </div>\n  </div>\n</script>\n");
var PartitionContext = /*#__PURE__*/function () {
  function PartitionContext(data) {
    _classCallCheck(this, PartitionContext);
    var self = this;
    self.disposals = [];
    self.data = data;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.errorText = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.template = TEMPLATE_NAME;
  }
  return _createClass(PartitionContext, [{
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PartitionContext);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/resizeHelper.js":
/*!**********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/resizeHelper.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var HALF_SIZE_LIMIT_X = 130;
var HALF_SIZE_LIMIT_Y = 100;
var ResizeHelper = /*#__PURE__*/_createClass(function ResizeHelper(orientation, leftAdjust, topAdjust, preventHideCallback) {
  _classCallCheck(this, ResizeHelper);
  var self = this;
  var originalMidX, originalWidth, originalRightX, originalLeftX, originalMidY, originalHeight, originalTopY, originalBottomY;
  var rightX, leftX, leftDiff, rightDiff, topY, bottomY, topDiff, bottomDiff;
  var redrawHeaders = false;
  var initOriginalValues = function initOriginalValues(attempt) {
    if (attempt > 20) {
      return;
    }
    window.setTimeout(function () {
      var offset = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').offset();
      if (!offset) {
        // Popover isn't visible yet, wait a bit and try again
        attempt++;
        initOriginalValues(attempt);
        return;
      }
      if (orientation === 'right') {
        offset.left -= 5;
      } else if (orientation === 'bottom') {
        offset.top -= 5;
      }
      originalHeight = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').height();
      originalWidth = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').width();
      originalMidX = offset.left + originalWidth / 2;
      originalMidY = offset.top + originalHeight / 2;
      originalLeftX = offset.left;
      originalRightX = offset.left + originalWidth;
      originalTopY = offset.top;
      originalBottomY = offset.top + originalHeight;
    }, attempt * 20);
  };
  initOriginalValues(0);
  self.saveSize = function () {
    (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_2__.setInLocalStorage)('assist.popover.size', {
      width: jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').width(),
      height: jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').height()
    });
  };
  self.resizeStart = function (event, ui) {
    preventHideCallback(true);
  };
  self.resizeStop = function (event, ui) {
    if (redrawHeaders) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_1__["default"].publish('table.extender.redraw', 'sampleTab');
      redrawHeaders = false;
    }
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_1__["default"].publish('context.popover.resized');

    // Delay or it will close the popover when releasing at the window borders
    window.setTimeout(function () {
      preventHideCallback(false);
    }, 300);
    self.saveSize();
  };
  var resizeTopBottomHorizontal = function resizeTopBottomHorizontal(event, ui) {
    leftX = ui.position.left;
    rightX = ui.position.left + ui.size.width;
    if (rightX < originalMidX + HALF_SIZE_LIMIT_X) {
      ui.size.width = originalMidX + HALF_SIZE_LIMIT_X - ui.position.left;
      rightX = ui.position.left + ui.size.width;
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('width', ui.size.width + 'px');
    }
    if (leftX > originalMidX - HALF_SIZE_LIMIT_X) {
      ui.position.left = originalMidX - HALF_SIZE_LIMIT_X;
      ui.size.width = ui.originalSize.width - (ui.position.left - ui.originalPosition.left);
      leftX = ui.position.left;
      rightX = ui.position.left + ui.size.width;
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('left', ui.position.left + 'px');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('width', ui.size.width + 'px');
    }
    leftDiff = originalLeftX - leftX;
    rightDiff = originalRightX - rightX;
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover-arrow').css('margin-left', (leftDiff + rightDiff) / 2 + leftAdjust() + 'px');
  };
  var resizeLeftRightVertical = function resizeLeftRightVertical(event, ui) {
    if (!redrawHeaders && ui.originalPosition.top !== ui.position.top) {
      redrawHeaders = true;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_1__["default"].publish('table.extender.hide', 'sampleTab');
    }
    topY = ui.position.top;
    bottomY = ui.position.top + ui.size.height;
    if (bottomY < originalMidY + HALF_SIZE_LIMIT_Y) {
      ui.size.height = originalMidY + HALF_SIZE_LIMIT_Y - ui.position.top;
      bottomY = ui.position.top + ui.size.height;
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('height', ui.size.height + 'px');
    }
    if (topY > originalMidY - HALF_SIZE_LIMIT_Y) {
      ui.position.top = originalMidY - HALF_SIZE_LIMIT_Y;
      ui.size.height = ui.originalSize.height - (ui.position.top - ui.originalPosition.top);
      topY = ui.position.top;
      bottomY = ui.position.top + ui.size.height;
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('top', ui.position.top + 'px');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('height', ui.size.height + 'px');
    }
    topDiff = originalTopY - topY;
    bottomDiff = originalBottomY - bottomY;
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover-arrow').css('margin-top', (topDiff + bottomDiff) / 2 + topAdjust() + 'px');
  };
  switch (orientation) {
    case 'top':
      self.resizableHandles = 'w, nw, n, ne, e';
      self.resize = function (event, ui) {
        resizeTopBottomHorizontal(event, ui);
        // TODO: Implement resize height limits when popover is above
      };
      break;
    case 'right':
      self.resizableHandles = 'n, ne, e, se, s';
      self.resize = function (event, ui) {
        resizeLeftRightVertical(event, ui);
        if (ui.size.width < 350) {
          ui.size.width = 350;
          jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('width', 350 + 'px');
        }
      };
      break;
    case 'bottom':
      self.resizableHandles = 'e, se, s, sw, w';
      self.resize = function (event, ui) {
        resizeTopBottomHorizontal(event, ui);
        if (ui.size.height < 200) {
          ui.size.height = 200;
          jquery__WEBPACK_IMPORTED_MODULE_0___default()('.hue-popover').css('height', 200 + 'px');
        }
      };
      break;
    case 'left':
      self.resizableHandles = 's, sw, w, nw, n';
      self.resize = function (event, ui) {
        resizeLeftRightVertical(event, ui);
        // TODO: Implement resize width limits when popover is on the left
      };
      break;
  }
});
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ResizeHelper);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/contextPopover/storageContext.js":
/*!************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/contextPopover/storageContext.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _assist_assistStorageEntry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../assist/assistStorageEntry */ "./desktop/core/src/desktop/js/ko/components/assist/assistStorageEntry.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var StorageContext = /*#__PURE__*/function () {
  function StorageContext(options) {
    _classCallCheck(this, StorageContext);
    var self = this;
    self.popover = options.popover;
    self.storageEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.editorLocation = options.editorLocation;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      return self.storageEntry() && self.storageEntry().loading();
    });
    self.storageEntry.subscribe(function (newVal) {
      if (!newVal.loaded && !newVal.loading()) {
        if (newVal.definition.type === 'dir') {
          newVal.open(true);
        } else {
          newVal.loadPreview();
        }
      }
    });
    self.storageEntry(options.storageEntry);
    self.breadCrumbs = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      var result = [];
      var currentEntry = self.storageEntry();
      do {
        result.unshift({
          name: currentEntry.definition.name,
          originalType: currentEntry.originalType,
          isActive: currentEntry === self.storageEntry(),
          storageEntry: currentEntry,
          makeActive: function makeActive() {
            self.storageEntry(this.storageEntry);
          }
        });
        currentEntry = currentEntry.parent;
      } while (currentEntry);
      return result;
    });
  }
  return _createClass(StorageContext, [{
    key: "openInFileBrowser",
    value: function openInFileBrowser(entry) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('open.link', entry.definition.url);
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('context.popover.hide');
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('global.search.close');
    }
  }, {
    key: "replaceInEditor",
    value: function replaceInEditor(entry, storageContext) {
      var text = entry.originalType ? entry.originalType + ':/' + entry.path : entry.path;
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('ace.replace', {
        location: storageContext.editorLocation,
        text: text
      });
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('context.popover.hide');
    }
  }, {
    key: "goHome",
    value: function goHome() {
      var self = this;
      _assist_assistStorageEntry__WEBPACK_IMPORTED_MODULE_1__["default"].getEntry(window.USER_HOME_DIR, self.storageEntry().type).then(self.storageEntry);
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StorageContext);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/doc/ko.linkSharing.js":
/*!*************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/doc/ko.linkSharing.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
/* harmony import */ var _doc_hueDocument__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../doc/hueDocument */ "./desktop/core/src/desktop/js/doc/hueDocument.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _ko_dropDown__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ko.dropDown */ "./desktop/core/src/desktop/js/ko/components/ko.dropDown.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }
function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var NAME = 'link-sharing';

// prettier-ignore
var TEMPLATE = "\n  <!-- ko if: window.HAS_LINK_SHARING && perms() -->\n  <div class=\"hue-link-sharing\">\n    <div style=\"float: right\">\n      <!-- ko ifnot: perms().link_sharing_on -->\n      <a href=\"javascript:void(0);\" data-test=\"activate\" data-bind=\"click: createReadLink\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Share the query via a link'), "\" >\n        <i class=\"fa fa-wf fa-link\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Get link'), "\n      </a>\n      <!-- /ko -->\n      <!-- ko if: perms().link_sharing_on -->\n      <a href=\"javascript:void(0)\" data-test=\"deactivate\" data-bind=\"click: deactivateLink\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Deactivate the link sharing'), "\">\n        <i class=\"fa fa-wf fa-link\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Deactivate link'), "\n      </a>\n      <!-- /ko -->\n    </div>\n    <!-- ko if: perms().link_sharing_on -->\n    <div>\n      ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Any logged in user with the link can'), "\n      <div class=\"perm-selector\" data-bind=\"component: {\n          name: '").concat(_ko_dropDown__WEBPACK_IMPORTED_MODULE_7__.HUE_DROP_DOWN_COMPONENT, "',\n          params: {\n            value: selectedPerm,\n            entries: availablePerms,\n            onSelect: changePerm.bind($data)\n          }\n        }\n      \"></div>\n    </div>\n    <div class=\"input-append\">\n      <form autocomplete=\"off\">\n        <input id=\"sharedLinkInput\" style=\"width: 520px\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " onfocus=\"this.select()\" data-bind=\"value: link\" type=\"text\" readonly=\"readonly\"/>\n        <button class=\"btn\" type=\"button\" data-clipboard-target=\"#sharedLinkInput\" data-bind=\"clipboard\"><i class=\"fa fa-clipboard\"></i></button>\n      </form>\n    </div>\n    <!-- /ko -->\n  </div>\n  <!-- /ko -->\n");
var OFF_OPTION = {
  value: _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__.LINK_SHARING_PERMS.OFF
};
var READ_OPTION = {
  label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('read'),
  value: _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__.LINK_SHARING_PERMS.READ
};
var WRITE_OPTION = {
  label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('write'),
  value: _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__.LINK_SHARING_PERMS.WRITE
};
var AVAILABLE_PERMS = [READ_OPTION, WRITE_OPTION];
var LinkSharing = /*#__PURE__*/function (_DisposableComponent) {
  function LinkSharing(params) {
    var _this;
    _classCallCheck(this, LinkSharing);
    _this = _callSuper(this, LinkSharing);
    _this.document = params.document;
    _this.docDefinition = params.docDefinition;
    _this.perms = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(_this.docDefinition.perms);
    _this.selectedPerm = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(_this.perms().link_write ? WRITE_OPTION : READ_OPTION);
    _this.link = location.origin + window.HUE_BASE_URL + '/hue' + _this.docDefinition.absoluteUrl;
    _this.availablePerms = AVAILABLE_PERMS;
    _get((_this, _getPrototypeOf(LinkSharing.prototype)), "subscribe", _this).call(_this, _this.perms, function (perms) {
      return _this.selectedPerm(perms.link_write ? WRITE_OPTION : READ_OPTION);
    });
    return _this;
  }
  _inherits(LinkSharing, _DisposableComponent);
  return _createClass(LinkSharing, [{
    key: "createReadLink",
    value: function () {
      var _createReadLink = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.changePerm(READ_OPTION);
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function createReadLink() {
        return _createReadLink.apply(this, arguments);
      }
      return createReadLink;
    }()
  }, {
    key: "deactivateLink",
    value: function () {
      var _deactivateLink = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.changePerm(OFF_OPTION);
            case 2:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function deactivateLink() {
        return _deactivateLink.apply(this, arguments);
      }
      return deactivateLink;
    }()
  }, {
    key: "changePerm",
    value: function () {
      var _changePerm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(permOption) {
        var response;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].setLinkSharingPermsAsync({
                perm: permOption.value,
                uuid: this.docDefinition.uuid
              });
            case 2:
              response = _context3.sent;
              this.perms(response.document.perms);
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].publish(_doc_hueDocument__WEBPACK_IMPORTED_MODULE_5__.DOCUMENT_UPDATED_EVENT, response.document);
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function changePerm(_x) {
        return _changePerm.apply(this, arguments);
      }
      return changePerm;
    }()
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_4__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, LinkSharing, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/doc/ko.shareDocModal.js":
/*!***************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/doc/ko.shareDocModal.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SHOWN_EVENT": () => (/* binding */ SHOWN_EVENT),
/* harmony export */   "SHOW_EVENT": () => (/* binding */ SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../doc/hueFileEntry */ "./desktop/core/src/desktop/js/doc/hueFileEntry.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
/* harmony import */ var _ko_linkSharing__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./ko.linkSharing */ "./desktop/core/src/desktop/js/ko/components/doc/ko.linkSharing.js");
/* harmony import */ var _assist_ko_assistDocumentsPanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../assist/ko.assistDocumentsPanel */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistDocumentsPanel.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










var SHOW_EVENT = 'doc.show.share.modal';
var SHOWN_EVENT = 'doc.share.modal.shown';

// prettier-ignore
var TEMPLATE = "\n    <div class=\"modal-header\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n      <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Sharing'), " - <span data-bind=\"text: documentName\"></span></h2>\n    </div>\n    <div class=\"modal-body\" style=\"overflow: visible;\">\n      <!-- ko with: document -->\n        <!-- ko with: definition -->\n          <!-- ko component: {\n            name: 'link-sharing',\n            params: {\n              document: $parent,\n              docDefinition: $data\n            }\n          } --><!-- /ko -->\n          <div class=\"row-fluid\" data-bind=\"visible: !$parent.hasErrors()\"  id=\"scrolldiv\">\n            <div class=\"span6\">\n              <h4 class=\"muted\" style=\"margin-top: 0\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Read'), "</h4>\n              <div data-bind=\"visible: (perms.read.users.length == 0 && perms.read.groups.length == 0)\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('The document is not shared for read.'), "</div>\n              <ul class=\"unstyled airy\" style=\"max-height: 20vh; overflow-x:auto;\" data-bind=\"foreach: perms.read.users\">\n                <li>\n                  <span class=\"badge badge-info\" data-bind=\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\"><i class=\"fa fa-user\"></i> <span data-bind=\"text: $parents[1].prettifyUsernameById(id), attr:{'data-id': id}\"></span></span><span class=\"badge badge-right trash-share\" data-bind=\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeUserReadShare($data) }\"> <i class=\"fa fa-times\"></i></span>\n                </li>\n              </ul>\n              <ul class=\"unstyled airy\" style=\"max-height: 20vh; overflow-x:auto;\" data-bind=\"foreach: perms.read.groups\">\n                <li>\n                  <span class=\"badge badge-info\" data-bind=\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\"><i class=\"fa fa-users\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Group'), " &quot;<span data-bind=\"text: name\"></span>&quot;</span><span class=\"badge badge-right trash-share\" data-bind=\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeGroupReadShare($data) }\"> <i class=\"fa fa-times\"></i></span>\n                </li>\n              </ul>\n            </div>\n\n            <div class=\"span6\">\n              <h4 class=\"muted\" style=\"margin-top: 0\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Modify'), "</h4>\n              <div data-bind=\"visible: (perms.write.users.length == 0 && perms.write.groups.length == 0)\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('The document is not shared for modify.'), "</div>\n              <ul class=\"unstyled airy\" style=\"max-height: 20vh; overflow-x:auto;\" data-bind=\"foreach: perms.write.users\">\n                <li>\n                  <span class=\"badge badge-info badge-left\" data-bind=\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\">\n                    <i class=\"fa fa-user\">\n                    </i>\n                    <span data-bind=\"text: $parents[1].prettifyUsernameById(id), attr:{'data-id': id}\">\n                    </span>\n                  </span>\n                  <span class=\"badge badge-right trash-share\" data-bind=\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeUserWriteShare($data) }\">\n                    <i class=\"fa fa-times\"></i>\n                  </span>\n                </li>\n              </ul>\n              <ul class=\"unstyled airy\" style=\"max-height: 20vh; overflow-x:auto;\" data-bind=\"foreach: perms.write.groups\">\n                <li>\n                  <span class=\"badge badge-info badge-left\" data-bind=\"css: { 'badge-left' : $parents[1].fileEntry.canModify() }\">\n                    <i class=\"fa fa-users\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Group'), " &quot;\n                    <span data-bind=\"text: name\"></span>&quot;</span>\n                    <span class=\"badge badge-right trash-share\" data-bind=\"visible: $parents[1].fileEntry.canModify(), click: function() { $parents[1].removeGroupWriteShare($data) }\">\n                    <i class=\"fa fa-times\"></i>\n                  </span>\n                </li>\n              </ul>\n            </div>\n          </div>\n        <!-- /ko -->\n        <div class=\"doc-browser-empty animated\" style=\"display: none;\" data-bind=\"visible: loading\">\n          <i class=\"fa fa-spinner fa-spin fa-2x\" style=\"color: #999;\"></i>\n        </div>\n        <div class=\"doc-browser-empty animated\" style=\"display: none;\" data-bind=\"visible: hasErrors() && ! loading()\">\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('There was an error loading the document.'), "\n        </div>\n        <div style=\"margin-top: 20px\" data-bind=\"visible: fileEntry.canModify() && ! hasErrors() && ! loading()\">\n          <div id=\"shareDocAutocompleteMenu\"></div>\n          <div class=\"input-append\" style=\"font-size: inherit\">\n            <input id=\"shareDocUserInput\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Type a username or a group name'), "\" type=\"text\" data-bind=\"\n                autocomplete: {\n                  source: shareAutocompleteUserSource.bind($data),\n                  select: function(event,ui) { onShareAutocompleteSelectEnter(event,ui);},\n                  itemTemplate: 'user-search-autocomp-item',\n                  noMatchTemplate: 'user-search-autocomp-no-match',\n                  valueObservable: searchInput,\n                  showSpinner: true,\n                  classPrefix: 'hue-',\n                  onEnter: onShareAutocompleteUserEnter.bind($data),\n                  appendTo: '#shareDocAutocompleteMenu'\n                },\n                clearable: {\n                  value: searchInput,\n                  textInput: searchInput\n                }\n              \" class=\"ui-autocomplete-input\" autocomplete=\"off\" style=\"width: 476px\">\n            <div class=\"btn-group\" style=\"overflow:visible; margin-left: -4px;\">\n              <a id=\"documentShareAddBtn\" class=\"btn\" style=\"border-radius: 0\" data-bind=\"click: function () {  onShareAutocompleteUserEnter() }\">\n                <span data-bind=\"text: selectedPerm() == 'read' ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Read'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Modify'), "'\">\n                </span>\n              </a>\n              <a id=\"documentShareCaret\" class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">\n               <span class=\"caret\"></span>\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li>\n                  <a data-bind=\"click: function () { selectedPerm('read'); onShareAutocompleteUserEnter() }\" href=\"javascript:void(0)\">\n                    <i class=\"fa fa-plus\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Read'), "\n                  </a>\n                </li>\n                <li>\n                  <a data-bind=\"click: function () { selectedPerm('write'); onShareAutocompleteUserEnter() }\" href=\"javascript:void(0)\">\n                    <i class=\"fa fa-plus\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Modify'), "\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      <!-- /ko -->\n    </div>\n    <div class=\"modal-footer\">\n      <a href=\"#\" data-dismiss=\"modal\" class=\"btn disable-feedback disable-enter\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "</a>\n    </div>\n");
var ShareDocModal = /*#__PURE__*/function (_DisposableComponent) {
  function ShareDocModal(params) {
    var _this;
    _classCallCheck(this, ShareDocModal);
    _this = _callSuper(this, ShareDocModal);
    _this.document = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    _this.perms = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    _this.uuid = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    _this.wasSharedBefore = undefined;
    _this.documentName = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return _this.document() && _this.document().definition().name;
    });
    _this.showLinkSharing = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return window.HAS_LINK_SHARING && _this.perms() && _this.perms().link_sharing_on;
    });
    _this.initDocument(params);
    return _this;
  }
  _inherits(ShareDocModal, _DisposableComponent);
  return _createClass(ShareDocModal, [{
    key: "dispose",
    value: function dispose() {
      if (this.wasSharedBefore !== this.document().isShared()) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_assist_ko_assistDocumentsPanel__WEBPACK_IMPORTED_MODULE_8__.REFRESH_DOC_ASSIST_EVENT);
      }
    }
  }, {
    key: "initDocument",
    value: function () {
      var _initDocument = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(params) {
        var document;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return getDocument(params);
            case 3:
              document = _context.sent;
              this.wasSharedBefore = document.isShared();
              this.document(document);
              this.perms(document.definition().perms);
              this.uuid(document.definition().uuid);
              _context.next = 14;
              break;
            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
              console.warn('Failed loading document.');
              console.error(_context.t0);
            case 14:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 10]]);
      }));
      function initDocument(_x) {
        return _initDocument.apply(this, arguments);
      }
      return initDocument;
    }()
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_6__["default"]);
var getDocument = /*#__PURE__*/function () {
  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(params) {
    return _regeneratorRuntime().wrap(function _callee5$(_context5) {
      while (1) switch (_context5.prev = _context5.next) {
        case 0:
          return _context5.abrupt("return", new Promise( /*#__PURE__*/function () {
            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(resolve, reject) {
              var ensureLoaded, entry;
              return _regeneratorRuntime().wrap(function _callee4$(_context4) {
                while (1) switch (_context4.prev = _context4.next) {
                  case 0:
                    ensureLoaded = /*#__PURE__*/function () {
                      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(entry) {
                        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                          while (1) switch (_context2.prev = _context2.next) {
                            case 0:
                              _context2.t0 = entry.document();
                              if (_context2.t0) {
                                _context2.next = 5;
                                break;
                              }
                              _context2.next = 4;
                              return entry.loadDocument();
                            case 4:
                              _context2.t0 = _context2.sent;
                            case 5:
                              return _context2.abrupt("return", _context2.t0);
                            case 6:
                            case "end":
                              return _context2.stop();
                          }
                        }, _callee2);
                      }));
                      return function ensureLoaded(_x5) {
                        return _ref3.apply(this, arguments);
                      };
                    }();
                    if (!(typeof params === 'string')) {
                      _context4.next = 6;
                      break;
                    }
                    entry = new _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_5__["default"]({
                      activeEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
                      trashEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
                      app: 'documents',
                      activeSort: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
                      user: window.LOGGED_USERNAME,
                      definition: {
                        uuid: params
                      }
                    });
                    entry.load( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
                      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
                        while (1) switch (_context3.prev = _context3.next) {
                          case 0:
                            _context3.t0 = resolve;
                            _context3.next = 3;
                            return ensureLoaded(entry);
                          case 3:
                            _context3.t1 = _context3.sent;
                            (0, _context3.t0)(_context3.t1);
                          case 5:
                          case "end":
                            return _context3.stop();
                        }
                      }, _callee3);
                    })), reject);
                    _context4.next = 11;
                    break;
                  case 6:
                    _context4.t0 = resolve;
                    _context4.next = 9;
                    return ensureLoaded(params);
                  case 9:
                    _context4.t1 = _context4.sent;
                    (0, _context4.t0)(_context4.t1);
                  case 11:
                  case "end":
                    return _context4.stop();
                }
              }, _callee4);
            }));
            return function (_x3, _x4) {
              return _ref2.apply(this, arguments);
            };
          }()));
        case 1:
        case "end":
          return _context5.stop();
      }
    }, _callee5);
  }));
  return function getDocument(_x2) {
    return _ref.apply(this, arguments);
  };
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent('share-doc-modal', ShareDocModal, TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(SHOW_EVENT, /*#__PURE__*/function () {
    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(params) {
      var $shareDocMocal, data;
      return _regeneratorRuntime().wrap(function _callee6$(_context6) {
        while (1) switch (_context6.prev = _context6.next) {
          case 0:
            $shareDocMocal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#shareDocModal');
            if ($shareDocMocal.length) {
              knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($shareDocMocal[0]);
              $shareDocMocal.remove();
            }
            $shareDocMocal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="shareDocModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'share-doc-modal\', params: params }" data-keyboard="true" class="modal hide fade" tabindex="-1"></div>');
            jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($shareDocMocal);
            data = {
              params: params,
              descendantsComplete: function descendantsComplete() {
                utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(SHOWN_EVENT);
              }
            };
            knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $shareDocMocal[0]);
            $shareDocMocal.modal('show');
            $shareDocMocal.on('hide', function () {
              knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($shareDocMocal[0]);
              $shareDocMocal.remove();
            });
          case 8:
          case "end":
            return _context6.stop();
        }
      }, _callee6);
    }));
    return function (_x6) {
      return _ref5.apply(this, arguments);
    };
  }());
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.catalogEntriesList.js":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.catalogEntriesList.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! catalog/analyzer/sqlAnalyzerRepository */ "./desktop/core/src/desktop/js/catalog/analyzer/sqlAnalyzerRepository.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _assist_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./assist/ko.assistKey */ "./desktop/core/src/desktop/js/ko/components/assist/ko.assistKey.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_timing_noop__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/timing/noop */ "./desktop/core/src/desktop/js/utils/timing/noop.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var NAME = 'catalog-entries-list';

// prettier-ignore
var TEMPLATE = "\n  <script type=\"text/html\" id=\"entries-table-td-description\">\n    <td data-bind=\"attr: { 'title': comment }\">\n    <!-- ko if: $parent.editableDescriptions && !window.HAS_READ_ONLY_CATALOG -->\n      <div class=\"hue-catalog-entries-table-desc\" data-bind=\"visibleOnHover: { selector: '.editable-inline-action' }\">\n        <div data-bind=\"editable: comment, editableOptions: {\n          mode: 'inline',\n          enabled: true,\n          type: 'textarea',\n          showbuttons: 'bottom',\n          inputclass: 'hue-table-browser-desc-input',\n          toggle: 'manual',\n          toggleElement: '.toggle-editable',\n          placeholder: '".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Add a description...'), "',\n          emptytext: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Add a description...'), "',\n          inputclass: 'hue-catalog-entries-table-desc-input',\n          rows: 6,\n          save: saveComment,\n          inlineEditAction: { editClass: 'toggle-editable editable-inline-action' },\n          multiLineEllipsis: { overflowHeight: '40px', expandable: true, expandActionClass: 'editable-inline-action' }\n        }\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Add a description...'), "</div>\n      </div>\n    <!-- /ko -->\n    <!-- ko if: !$parent.editableDescriptions || window.HAS_READ_ONLY_CATALOG -->\n      <div class=\"entries-table-description\" data-bind=\"text: comment, multiLineEllipsis\"></div>\n    <!-- /ko -->\n    </td>\n  </script>\n\n  <script type=\"text/html\" id=\"entries-table-tbody-no-entries\">\n    <tbody>\n      <tr>\n        <td style=\"font-style: italic;\" data-bind=\"attr: { 'colspan': colCount + (typeof $component.selectedEntries !== 'undefined' ? 1 : 0) + ($component.contextPopoverEnabled ? 1 : 0) }\">\n          <!-- ko ifnot: hasErrors -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('No entries found'), "\n          <!-- /ko -->\n          <!-- ko if: hasErrors -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Error loading entries'), "\n          <!-- /ko -->\n        </td>\n      </tr>\n    </tbody>\n  </script>\n\n  <script type=\"text/html\" id=\"entries-table-shared-headers\">\n    <!-- ko if: typeof selectedEntries !== 'undefined' -->\n    <th width=\"1%\" class=\"select-column\"><div class=\"hue-checkbox fa\" data-bind=\"hueCheckAll: { allValues: filteredEntries, selectedValues: selectedEntries }\"></div></th>\n    <!-- /ko -->\n    <!-- ko if: contextPopoverEnabled -->\n    <th width=\"1%\">&nbsp;</th>\n    <!-- /ko -->\n  </script>\n\n  <script type=\"text/html\" id=\"entries-table-shared-columns\">\n    <!-- ko if: typeof $parent.selectedEntries !== 'undefined' -->\n    <td width=\"1%\" class=\"select-column\"><div class=\"hue-checkbox fa\" data-bind=\"multiCheck: '#entryTable', value: $data, hueChecked: $parent.selectedEntries\"></div></td>\n    <!-- /ko -->\n    <!-- ko if: $parent.contextPopoverEnabled -->\n    <td width=\"1%\"><a href=\"javascript: void(0);\" data-bind=\"click: showContextPopover\"><i class=\"fa fa-info\"></i></a></td>\n    <!-- /ko -->\n  </script>\n\n  <!-- ko if: !loading() && (!catalogEntry().isField() || catalogEntry().isComplex())-->\n  <div class=\"context-popover-inline-autocomplete\">\n    <div class=\"context-popover-sample-filter\">\n      <!-- ko component: {\n        name: 'inline-autocomplete',\n        params: {\n          querySpec: querySpec,\n          facets: facets,\n          knownFacetValues: knownFacetValues,\n          autocompleteFromEntries: autocompleteFromEntries\n        }\n      } --><!-- /ko -->\n    </div>\n  </div>\n  <!-- /ko -->\n\n  <div class=\"catalog-entries-list-container\">\n    <!-- ko hueSpinner: { spin: loading, center: true, size: 'xlarge' } --><!-- /ko -->\n    <!-- ko if: !loading() && catalogEntry().isSource() -->\n    <table id=\"entryTable\" class=\"table table-condensed table-nowrap\">\n      <thead>\n        <tr>\n          <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\n          <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Database'), "</th>\n          <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Description'), " <!-- ko if: loadingNav --><i class=\"fa fa-spinner fa-spin\"></i><!-- /ko --></th>\n        </tr>\n      </thead>\n      <!-- ko if: filteredEntries().length -->\n      <tbody data-bind=\"foreach: filteredEntries\">\n        <tr data-bind=\"click: onRowClick\">\n          <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\n          <td data-bind=\"click: onClick\"><a href=\"javascript: void(0);\" data-bind=\"text: catalogEntry().name, click: onClick, attr: { 'title': catalogEntry().getTitle() }\"></a></td>\n          <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\n        </tr>\n      </tbody>\n      <!-- /ko -->\n      <!-- ko if: filteredEntries().length === 0 -->\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 2, hasErrors: hasErrors } } --><!-- /ko -->\n      <!-- /ko -->\n    </table>\n    <!-- /ko -->\n\n    <!-- ko if: !loading() && catalogEntry().isDatabase() -->\n    <table id=\"entryTable\" class=\"table table-condensed table-nowrap\">\n      <thead>\n      <tr>\n        <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\n        <th data-bind=\"text: catalogEntry().getDialect() !== 'solr' ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Table'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Collection'), "'\"></th>\n        <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Description'), " <!-- ko if: loadingNav --><i class=\"fa fa-spinner fa-spin\"></i><!-- /ko --></th>\n      </tr>\n      </thead>\n      <!-- ko if: filteredEntries().length -->\n      <tbody data-bind=\"foreach: filteredEntries\">\n      <tr data-bind=\"click: onRowClick\">\n        <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\n        <td data-bind=\"click: onClick\"><a href=\"javascript: void(0);\" data-bind=\"text: catalogEntry().name, click: onClick, attr: { 'title': catalogEntry().getTitle() }\"></a></td>\n        <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\n      </tr>\n      </tbody>\n      <!-- /ko -->\n      <!-- ko if: filteredEntries().length === 0 -->\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 2, hasErrors: hasErrors } } --><!-- /ko -->\n      <!-- /ko -->\n    </table>\n    <!-- /ko -->\n\n    <!-- ko if: !loading() && (catalogEntry().isTableOrView() || catalogEntry().isComplex()) -->\n    <table class=\"table table-condensed table-nowrap\">\n      <thead>\n      <tr>\n        <!-- ko template: 'entries-table-shared-headers' --><!-- /ko -->\n        <th><span data-bind=\"text: catalogEntry().getDialect() !== 'solr' ? '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Column'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Field'), "'\"></span> (<span data-bind=\"text: filteredEntries().length\"></span>)</th>\n        <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Type'), "</th>\n        <th with=\"25%\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Description'), " <!-- ko if: loadingNav --><i class=\"fa fa-spinner fa-spin\"></i><!-- /ko --></th>\n        <th colspan=\"2\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Sample'), " <!-- ko if: loadingSamples() || sampleRefreshEnabled() --><i class=\"fa fa-spinner fa-spin\"></i><!-- /ko --> <!-- ko if: sampleRefreshEnabled --><a class=\"inactive-action\" href=\"javascript: void(0);\" data-bind=\"toggle: sampleRefreshEnabled\"><i class=\"fa fa-stop\"></i></a><!-- /ko --></th>\n      </tr>\n      </thead>\n      <!-- ko if: filteredEntries().length -->\n      <tbody data-bind=\"foreach: filteredEntries\">\n      <tr data-bind=\"click: onRowClick\">\n        <!-- ko template: 'entries-table-shared-columns' --><!-- /ko -->\n        <td class=\"name-column\" data-bind=\"attr: { 'title': catalogEntry().name + ' - ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Click for more details'), "' }\">\n          <a href=\"javascript: void(0);\" data-bind=\"click: onClick\">\n            <span data-bind=\"text: catalogEntry().name\"></span>\n            <!-- ko if: isKey -->\n              <!-- ko component: { name: '").concat(_assist_ko_assistKey__WEBPACK_IMPORTED_MODULE_3__.ASSIST_KEY_COMPONENT, "', params: { entry: catalogEntry } } --><!-- /ko -->\n            <!-- /ko -->\n            <!-- ko if: popularity && popularity() >= 5 -->\n            &nbsp;<i data-bind=\"tooltip: { title: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Popularity'), ": ' + popularity() + '%' }\" class=\"fa fa-star-o\"></i>\n            <!-- /ko -->\n          </a>\n        </td>\n        <td class=\"type-column\" data-bind=\"text: catalogEntry().getType(), attr: { 'title': catalogEntry().getRawType() }\"></td>\n        <!-- ko template: 'entries-table-td-description' --><!-- /ko -->\n        <td class=\"sample-column\" data-bind=\"html: firstSample, attr: { 'title': hueUtils.html2text(firstSample()) }\"></td>\n        <td class=\"sample-column\" data-bind=\"html: secondSample, attr: { 'title': hueUtils.html2text(secondSample()) }\"></td>\n      </tr>\n      </tbody>\n      <!-- /ko -->\n      <!-- ko if: filteredEntries().length === 0 -->\n      <!-- ko template: { name: 'entries-table-tbody-no-entries', data: { colCount: 5, hasErrors: hasErrors } } --><!-- /ko -->\n      <!-- /ko -->\n    </table>\n    <!-- /ko -->\n\n    <!-- ko if: !loading() && catalogEntry().isField() && !catalogEntry().isComplex() -->\n    <!-- ko component: { name: 'field-samples', params: {\n        catalogEntry: catalogEntry,\n        onSampleClick: onSampleClick,\n        refreshSampleInterval: refreshSampleInterval\n      }} --><!-- /ko -->\n    <!-- /ko -->\n  </div>\n");
var SampleEnrichedEntry = /*#__PURE__*/function () {
  function SampleEnrichedEntry(index, catalogEntry, onClick, onRowClick) {
    _classCallCheck(this, SampleEnrichedEntry);
    var self = this;
    self.index = index;
    self.catalogEntry = knockout__WEBPACK_IMPORTED_MODULE_2__.isObservable(catalogEntry) ? catalogEntry : knockout__WEBPACK_IMPORTED_MODULE_2__.observable(catalogEntry);
    self.popularity = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(0);
    self.firstSample = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    self.secondSample = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    self.onClick = onClick;
    self.onRowClick = onRowClick;
    self.comment = self.catalogEntry().getCommentObservable();
    self.joinColumns = knockout__WEBPACK_IMPORTED_MODULE_2__.observableArray();
    self.isKey = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      return self.catalogEntry().isPrimaryKey() || self.catalogEntry().isPartitionKey() || self.catalogEntry().isForeignKey() || self.joinColumns().length;
    });
    self.keyText = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      var keys = [];
      if (self.catalogEntry().isPrimaryKey()) {
        keys.push((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Primary key'));
      }
      if (self.catalogEntry().isPartitionKey()) {
        keys.push((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Partition key'));
      }
      if (self.catalogEntry().isForeignKey()) {
        keys.push((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Foreign key'));
      }
      if (self.joinColumns().length) {
        var key = (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])(self.joinColumns().length > 1 ? 'Foreign keys' : 'Foreign key') + ':';
        self.joinColumns().forEach(function (joinCol) {
          key += '<br/>' + joinCol;
        });
        keys.push(key);
      }
      return keys.join('<br/>');
    });
  }
  return _createClass(SampleEnrichedEntry, [{
    key: "showContextPopover",
    value: function showContextPopover(entry, event) {
      var $source = jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.currentTarget || event.target);
      var offset = $source.offset();
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('context.popover.show', {
        data: {
          type: 'catalogEntry',
          catalogEntry: entry.catalogEntry()
        },
        orientation: 'right',
        source: {
          element: event.target,
          left: offset.left,
          top: offset.top - 2,
          right: offset.left + $source.width() + 1,
          bottom: offset.top + $source.height() - 2
        }
      });
    }
  }, {
    key: "saveComment",
    value: function saveComment() {
      var self = this;
      if (self.comment() !== self.catalogEntry().getResolvedComment()) {
        self.catalogEntry().setComment(self.comment()).then(self.comment)["catch"](function () {
          self.comment(self.catalogEntry().getResolvedComment());
        });
      }
    }
  }]);
}();
var CatalogEntriesList = /*#__PURE__*/function () {
  function CatalogEntriesList(params) {
    _classCallCheck(this, CatalogEntriesList);
    var self = this;
    self.catalogEntry = knockout__WEBPACK_IMPORTED_MODULE_2__.isObservable(params.catalogEntry) ? params.catalogEntry : knockout__WEBPACK_IMPORTED_MODULE_2__.observable(params.catalogEntry);
    self.selectedEntries = params.selectedEntries;
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_2__.observableArray();
    self.editableDescriptions = !!params.editableDescriptions;
    self.contextPopoverEnabled = !!params.contextPopoverEnabled;
    self.onSampleClick = params.onSampleClick;
    self.querySpec = knockout__WEBPACK_IMPORTED_MODULE_2__.observable();
    self.cancellablePromises = [];
    self.lastSamplePromise = undefined;
    self.fetchSampleTimeout = -1;
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.loadingNav = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.loadingSamples = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(false);
    self.refreshSampleInterval = params.refreshSampleInterval;
    self.sampleRefreshEnabled = knockout__WEBPACK_IMPORTED_MODULE_2__.observable(!!params.refreshSampleInterval);
    self.sampleRefreshEnabled.subscribe(function (newVal) {
      if (!newVal) {
        window.clearTimeout(self.fetchSampleTimeout);
        if (self.lastSamplePromise && self.lastSamplePromise.cancel) {
          self.lastSamplePromise.cancel();
        }
      }
    });

    // TODO: Can be computed based on contents (instead of always suggesting all col types etc.)
    self.knownFacetValues = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      if (self.catalogEntry().isDatabase()) {
        return {
          type: {
            table: -1,
            view: -1
          }
        };
      } else if (self.catalogEntry().isTableOrView()) {
        var typeIndex = {
          type: {}
        };

        // Issue with filteredEntries is that it's not updated in time when typing,
        // i.e. type:| doesn't automatically open the suggestion list.
        self.entries().forEach(function (entry) {
          var type = entry.catalogEntry().getType().toLowerCase();
          if (!typeIndex['type'][type]) {
            typeIndex['type'][type] = 1;
          } else {
            typeIndex['type'][type]++;
          }
        });
        return typeIndex;
      }
    });
    self.facets = self.catalogEntry().isField() && !self.catalogEntry().isComplex() ? [] : ['type'];
    self.filteredEntries = knockout__WEBPACK_IMPORTED_MODULE_2__.pureComputed(function () {
      if (!self.querySpec() || self.querySpec().query === '') {
        return self.entries();
      }
      var facets = self.querySpec().facets;
      var isFacetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL
      var isTextMatch = !self.querySpec().text || self.querySpec().text.length === 0;
      return self.entries().filter(function (entry) {
        var match = true;
        if (!isFacetMatch) {
          if (entry.catalogEntry().isField()) {
            match = !!facets['type'][entry.catalogEntry().getType().toLowerCase()];
          } else if (entry.catalogEntry().isTableOrView()) {
            match = facets['type']['table'] && entry.catalogEntry().isTable() || facets['type']['view'] && entry.catalogEntry().isView();
          }
        }
        if (match && !isTextMatch) {
          match = self.querySpec().text.every(function (text) {
            var textLower = text.toLowerCase();
            return entry.catalogEntry().name.toLowerCase().indexOf(textLower) !== -1 || entry.catalogEntry().getResolvedComment().toLowerCase().indexOf(textLower) !== -1;
          });
        }
        return match;
      });
    });
    self.autocompleteFromEntries = function (nonPartial, partial) {
      var result = [];
      var partialLower = partial.toLowerCase();
      self.entries().forEach(function (entry) {
        if (entry.catalogEntry().name.toLowerCase().indexOf(partialLower) === 0) {
          result.push(nonPartial + partial + entry.catalogEntry().name.substring(partial.length));
        }
      });
      return result;
    };
    var entrySort = function entrySort(a, b) {
      var aIsKey = a.catalogEntry().isPrimaryKey() || a.catalogEntry().isPartitionKey() || a.catalogEntry().isForeignKey();
      var bIsKey = b.catalogEntry().isPrimaryKey() || b.catalogEntry().isPartitionKey() || b.catalogEntry().isForeignKey();
      if (aIsKey && !bIsKey) {
        return -1;
      }
      if (bIsKey && !aIsKey) {
        return 1;
      }
      return b.popularity() - a.popularity() || a.index - b.index;
    };
    var onClick = function onClick(sampleEnrichedEntry, event) {
      if (params.onClick) {
        params.onClick(sampleEnrichedEntry.catalogEntry(), event);
      } else if (self.contextPopoverEnabled) {
        sampleEnrichedEntry.showContextPopover(sampleEnrichedEntry, event);
      } else {
        self.catalogEntry(sampleEnrichedEntry.catalogEntry());
      }
    };
    var onRowClick = function onRowClick(sampleEnrichedEntry, event) {
      if (self.selectedEntries && jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.target).is('td')) {
        jquery__WEBPACK_IMPORTED_MODULE_1___default()(event.currentTarget).find('.hue-checkbox').trigger('click');
      }
      return true;
    };
    var loadEntries = function loadEntries() {
      self.loading(true);
      var entriesAddedDeferred = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();
      var childPromise = self.catalogEntry().getChildren({
        silenceErrors: true,
        cancellable: true
      });
      childPromise.then(function (childEntries) {
        var entries = jquery__WEBPACK_IMPORTED_MODULE_1___default().map(childEntries, function (entry, index) {
          return new SampleEnrichedEntry(index, entry, onClick, onRowClick);
        });
        entries.sort(entrySort);
        self.entries(entries);
        entriesAddedDeferred.resolve(entries);
      })["catch"](function () {
        self.hasErrors(true);
        entriesAddedDeferred.reject();
      })["finally"](function () {
        self.loading(false);
      });
      var sqlAnalyzer = catalog_analyzer_sqlAnalyzerRepository__WEBPACK_IMPORTED_MODULE_0__["default"].getSqlAnalyzer(self.catalogEntry().getConnector());
      if (self.catalogEntry().isTableOrView()) {
        var joinsPromise = self.catalogEntry().getTopJoins({
          cancellable: true,
          silenceErrors: true,
          sqlAnalyzer: sqlAnalyzer
        });
        joinsPromise.then(function (topJoins) {
          if (topJoins && topJoins.values && topJoins.values.length) {
            entriesAddedDeferred.then(function (entries) {
              var entriesIndex = {};
              entries.forEach(function (entry) {
                entriesIndex[entry.catalogEntry().path.join('.').toLowerCase()] = {
                  joinColumnIndex: {},
                  entry: entry
                };
              });
              topJoins.values.forEach(function (topJoin) {
                topJoin.joinCols.forEach(function (topJoinCols) {
                  if (topJoinCols.columns.length === 2) {
                    if (entriesIndex[topJoinCols.columns[0].toLowerCase()]) {
                      entriesIndex[topJoinCols.columns[0].toLowerCase()].joinColumnIndex[topJoinCols.columns[1].toLowerCase()] = topJoinCols.columns[1];
                    } else if (entriesIndex[topJoinCols.columns[1].toLowerCase()]) {
                      entriesIndex[topJoinCols.columns[1].toLowerCase()].joinColumnIndex[topJoinCols.columns[0].toLowerCase()] = topJoinCols.columns[0];
                    }
                  }
                });
              });
              Object.keys(entriesIndex).forEach(function (key) {
                if (Object.keys(entriesIndex[key].joinColumnIndex).length) {
                  entriesIndex[key].entry.joinColumns(Object.keys(entriesIndex[key].joinColumnIndex));
                }
              });
            });
          }
        })["catch"](utils_timing_noop__WEBPACK_IMPORTED_MODULE_6__["default"]);
        self.cancellablePromises.push(joinsPromise);
      }
      var navMetaPromise = self.catalogEntry().loadNavigatorMetaForChildren({
        silenceErrors: true,
        cancellable: true
      })["finally"](function () {
        self.loadingNav(false);
      });
      self.cancellablePromises.push(navMetaPromise);
      self.cancellablePromises.push(childPromise);
      self.cancellablePromises.push(self.catalogEntry().loadSqlAnalyzerPopularityForChildren({
        cancellable: true,
        silenceErrors: true,
        sqlAnalyzer: sqlAnalyzer
      }).then(function (popularEntries) {
        if (popularEntries.length) {
          childPromise.then(function () {
            var entryIndex = {};
            self.entries().forEach(function (entry) {
              entryIndex[entry.catalogEntry().name] = entry;
            });
            var totalCount = 0;
            var popularityToApply = [];
            popularEntries.forEach(function (popularEntry) {
              if (entryIndex[popularEntry.name] && popularEntry.sqlAnalyzerPopularity && popularEntry.sqlAnalyzerPopularity.selectColumn && popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount > 0) {
                totalCount += popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount;
                popularityToApply.push(function () {
                  entryIndex[popularEntry.name].popularity(Math.round(100 * popularEntry.sqlAnalyzerPopularity.selectColumn.columnCount / totalCount));
                });
              }
            });
            var foundPopularEntries = popularityToApply.length !== 0;
            while (popularityToApply.length) {
              popularityToApply.pop()();
            }
            if (foundPopularEntries) {
              self.entries().sort(entrySort);
            }
          })["catch"](utils_timing_noop__WEBPACK_IMPORTED_MODULE_6__["default"]);
        }
      })["catch"](utils_timing_noop__WEBPACK_IMPORTED_MODULE_6__["default"]));
      if (self.catalogEntry().isTableOrView() || self.catalogEntry().isComplex()) {
        self.loadingSamples(true);
        var firstSampleFetch = true;
        var fetchSamples = function fetchSamples() {
          window.clearInterval(self.fetchSampleTimeout);
          self.lastSamplePromise = self.catalogEntry().getSample({
            silenceErrors: true,
            cancellable: true,
            refreshCache: !firstSampleFetch
          });
          self.lastSamplePromise.then(function (sample) {
            childPromise.then(function () {
              if (sample.meta && sample.meta.length && sample.data && sample.data.length) {
                var entryIndex = {};
                self.entries().forEach(function (entry) {
                  entryIndex[entry.catalogEntry().name] = entry;
                });
                for (var i = 0; i < sample.meta.length; i++) {
                  var name = sample.meta[i].name;
                  if (name.toLowerCase().indexOf(self.catalogEntry().name.toLowerCase() + '.') === 0) {
                    name = name.substring(self.catalogEntry().name.length + 1);
                  }
                  var sampleEntry = entryIndex[name];
                  if (sampleEntry) {
                    sampleEntry.firstSample(sample.data[0][i]);
                    if (sample.data.length > 1) {
                      sampleEntry.secondSample(sample.data[1][i]);
                    }
                  }
                }
              }
            })["catch"](utils_timing_noop__WEBPACK_IMPORTED_MODULE_6__["default"])["finally"](function () {
              self.loadingSamples(false);
              firstSampleFetch = false;
              if (self.refreshSampleInterval && self.sampleRefreshEnabled()) {
                self.fetchSampleTimeout = window.setTimeout(fetchSamples, self.refreshSampleInterval);
              }
            });
          })["catch"](function () {
            self.loadingSamples(false);
          });
        };
        fetchSamples();
      }
    };
    window.setTimeout(loadEntries, 100);
  }
  return _createClass(CatalogEntriesList, [{
    key: "dispose",
    value: function dispose() {
      var self = this;
      window.clearTimeout(self.fetchSampleTimeout);
      if (self.lastSamplePromise && self.lastSamplePromise.cancel) {
        self.lastSamplePromise.cancel();
      }
      while (self.cancellablePromises.length) {
        var promise = self.cancellablePromises.pop();
        if (promise.cancel) {
          promise.cancel();
        }
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_4__["default"].registerComponent(NAME, CatalogEntriesList, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.contextSelector.js":
/*!*************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.contextSelector.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CONTEXT_SELECTOR_COMPONENT": () => (/* binding */ CONTEXT_SELECTOR_COMPONENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! catalog/contextCatalog */ "./desktop/core/src/desktop/js/catalog/contextCatalog.ts");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var catalog_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! catalog/events */ "./desktop/core/src/desktop/js/catalog/events.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.











var CONTEXT_SELECTOR_COMPONENT = 'hue-context-selector';
var TEMPLATE = "\n  <!-- ko if: loadingContext -->\n  <i class=\"fa fa-spinner fa-spin muted\"></i>\n  <!-- /ko -->\n\n  <div class=\"inline-block\" style=\"display: none;\" data-bind=\"visible: !loadingContext()\">\n    <!-- ko if: window.HAS_MULTI_CLUSTER -->\n    <!-- ko if: availableClusters().length > 0 && !hideClusters -->\n    <!-- ko ifnot: hideLabels --><span class=\"editor-header-title\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Cluster'), "</span><!-- /ko -->\n    <div data-bind=\"component: { name: 'hue-drop-down', params: { value: cluster, onSelect: onClusterSelect, entries: availableClusters, labelAttribute: 'name', searchable: true, linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Active cluster'), "' } }\" style=\"display: inline-block\"></div>\n    <!-- /ko -->\n    <!-- ko if: availableClusters().length === 0 && !hideClusters -->\n    <span class=\"editor-header-title\"><i class=\"fa fa-warning\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No clusters found'), "</span>\n    <!-- /ko -->\n\n    <!-- ko if: availableComputes().length > 0 && !hideComputes -->\n    <!-- ko ifnot: hideLabels --><span class=\"editor-header-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Compute'), "</span><!-- /ko -->\n    <div data-bind=\"component: { name: 'hue-drop-down', params: { value: compute, onSelect: onComputeSelect, entries: availableComputes, labelAttribute: 'name', searchable: true, linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Active compute'), "' } }\" style=\"display: inline-block\"></div>\n    <!-- /ko -->\n    <!-- ko if: availableComputes().length === 0 && !hideComputes -->\n    <span class=\"editor-header-title\"><i class=\"fa fa-warning\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No computes found'), "</span>\n    <!-- /ko -->\n\n    <!-- ko if: availableNamespaces().length > 1 && !hideNamespaces && !window.getLastKnownConfig().has_computes -->\n    <!-- ko ifnot: hideLabels --><span class=\"editor-header-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Namespace'), "</span><!-- /ko -->\n    <div data-bind=\"component: { name: 'hue-drop-down', params: { value: namespace, onSelect: onNamespaceSelect, entries: availableNamespaces, labelAttribute: 'name', searchable: true, linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Active namespace'), "' } }\" style=\"display: inline-block\"></div>\n    <!-- /ko -->\n    <!-- ko if: availableNamespaces().length === 0 && !hideNamespaces -->\n    <span class=\"editor-header-title\"><i class=\"fa fa-warning\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No namespaces found'), "</span>\n    <!-- /ko -->\n    <!-- /ko -->\n\n    <!-- ko if: availableDatabases().length > 0 && !hideDatabases-->\n    <!-- ko if: window.getLastKnownConfig().has_computes && !hideLabels --><span class=\"editor-header-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Active database'), "</span><!-- /ko -->\n    <div data-bind=\"component: { name: 'hue-drop-down', params: { titleName: 'Database', value: database, entries: availableDatabases, foreachVisible: true, searchable: true, linkTitle: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Active database'), "' } }\" style=\"display: inline-block\"></div>\n    <!-- /ko -->\n    <!-- ko if: availableDatabases().length === 0  && !hideDatabases -->\n    <span class=\"editor-header-title\"><i class=\"fa fa-warning\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('No databases found'), "</span>\n    <!-- /ko -->\n  </div>\n");
var TYPES_INDEX = {
  cluster: {
    name: 'cluster',
    loading: 'loadingClusters',
    available: 'availableClusters',
    hide: 'hideClusters',
    lastPromise: 'lastClustersPromise',
    contextCatalogFn: 'getClusters',
    localStorageId: 'lastSelectedCluster',
    onSelect: 'onClusterSelect'
  },
  compute: {
    name: 'compute',
    loading: 'loadingComputes',
    available: 'availableComputes',
    hide: 'hideComputes',
    lastPromise: 'lastComputesPromise',
    contextCatalogFn: 'getComputes',
    localStorageId: 'lastSelectedCompute',
    onSelect: 'onComputeSelect'
  },
  namespace: {
    name: 'namespace',
    loading: 'loadingNamespaces',
    available: 'availableNamespaces',
    hide: 'hideNamespaces',
    lastPromise: 'lastNamespacesPromise',
    contextCatalogFn: 'getNamespaces',
    localStorageId: 'lastSelectedNamespace',
    onSelect: 'onNamespaceSelect'
  }
};
var TYPES = Object.keys(TYPES_INDEX).map(function (key) {
  return TYPES_INDEX[key];
});

/**
 * This is a component for compute, namespace and database selection. All parameters are optional except the
 * connector, if for instance no database and namespace observables are provided it will only show compute
 * selection.
 *
 * If it's desired to just show namespaces for a given compute you can force hide the compute selection by
 * setting hideComputes to true and the value of the compute observable will be used.
 *
 * Example:
 *
 *   <!-- ko component: {
 *     name: 'hue-context-selector',
 *     params: {
 *       connector: myConnectorObservable,
 *       compute: myComputeObservable,
 *       namespace: myNamespaceObservable,
 *     }
 *   } --><!-- /ko -->
 *
 * @param {Object} params
 * @param {ko.observable} [params.cluster]
 * @param {ko.observable} [params.compute]
 * @param {ko.observable} [params.namespace]
 * @param {ko.observable} [params.connector]
 * @param {ko.observable} [params.database]
 * @param {ko.observableArray} [params.availableDatabases]
 * @param {boolean} [params.hideClusters] - Can be used to force hide cluster selection even if a cluster
 *                                          observable is provided.
 * @param {boolean} [params.hideComputes] - Can be used to force hide compute selection even if a compute
 *                                          observable is provided.
 * @param {boolean} [params.hideNamespaces] - Can be used to force hide namespace selection even if a namespace
 *                                            observable is provided.
 * @param {boolean} [params.hideDatabases] - Can be used to force hide database selection even if a database
 *                                           observable is provided.
 * @param {function} [params.onComputeSelect] - Callback when a new compute is selected (after initial set)
 * @param {function} [params.onClusterSelect] - Callback when a new cluster is selected (after initial set)
 * @param {function} [params.onNamespaceSelect] - Callback when a new namespace is selected (after initial set)
 * @constructor
 */
var HueContextSelector = function HueContextSelector(params) {
  var self = this;
  if (!params.connector || !knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.connector)) {
    throw new Error('No connector with type provided');
  }
  self.disposals = [];
  self.connector = params.connector;
  self.hideLabels = params.hideLabels;
  TYPES.forEach(function (type) {
    self[type.name] = params[type.name];
    self[type.loading] = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self[type.available] = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self[type.hide] = params[type.hide] || !self[type.name];
    self[type.lastPromise] = undefined;
    self[type.onSelect] = function (selectedVal, previousVal) {
      if (params[type.onSelect]) {
        params[type.onSelect](selectedVal, previousVal);
      }
      (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.setInLocalStorage)('contextSelector.' + type.localStorageId, selectedVal);
      if (selectedVal && type === TYPES_INDEX.compute) {
        self.setMatchingNamespace(selectedVal);
      } else if (selectedVal && type === TYPES_INDEX.namespace) {
        self.setMatchingCompute(selectedVal);
      }
    };
    if (self[type.name]) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('context.selector.set.' + type.name, function (id) {
        self[type.available]().some(function (instance) {
          if (instance.id === id) {
            self[type.name](instance);
            return true;
          }
        });
      });
    }
    self.reload(type);
  });
  var refreshThrottle = -1;
  var refresh = function refresh(connectorId) {
    if (!connectorId || knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.connector).id === connectorId) {
      window.clearTimeout(refreshThrottle);
      refreshThrottle = window.setTimeout(function () {
        TYPES.forEach(self.reload.bind(self));
      }, 100);
    }
  };
  var namespaceRefreshSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(catalog_events__WEBPACK_IMPORTED_MODULE_6__.NAMESPACES_REFRESHED_TOPIC, refresh);
  var contextCatalogRefreshSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe(catalog_events__WEBPACK_IMPORTED_MODULE_6__.CONTEXT_CATALOG_REFRESHED_TOPIC, refresh);
  self.disposals.push(function () {
    window.clearTimeout(refreshThrottle);
    namespaceRefreshSub.remove();
    contextCatalogRefreshSub.remove();
  });
  self.loadingDatabases = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.availableDatabases = params.availableDatabases || knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.database = params.database;
  self.hideDatabases = params.hideDatabases || !self.database;
  self.reloadDatabaseThrottle = -1;
  self.reloadDatabases();
  if (self.database) {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('data.catalog.entry.refreshed', function (details) {
      if (details.entry.isSource()) {
        if (knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.connector).id === details.entry.getConnector().id) {
          self.reloadDatabases();
        }
      }
    });
  }
  self.loadingContext = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    return self[TYPES_INDEX.cluster.loading]() || self[TYPES_INDEX.namespace.loading]() || self[TYPES_INDEX.compute.loading]() || self.loadingDatabases();
  });
};
HueContextSelector.prototype.setMatchingNamespace = function (compute) {
  var self = this;
  if (self[TYPES_INDEX.namespace.name]) {
    // Select the first corresponding namespace when a compute is selected (unless selected)
    try {
      self[TYPES_INDEX.namespace.lastPromise].done(function () {
        if (!self[TYPES_INDEX.namespace.name]() || self[TYPES_INDEX.namespace.name]().id !== compute.namespace) {
          var found = self[TYPES_INDEX.namespace.available]().some(function (namespace) {
            if (compute.namespace === namespace.id) {
              self[TYPES_INDEX.namespace.name](namespace);
              (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.setInLocalStorage)('contextSelector.' + TYPES_INDEX.namespace.localStorageId, namespace);
              return true;
            }
          });
          if (!found) {
            // This can happen when a compute refers to a namespace that isn't returned by the namespaces call
            // TODO: What should we do?
            self[TYPES_INDEX.namespace.name](undefined);
          }
        }
      });
    } catch (e) {}
  }
};
HueContextSelector.prototype.setMatchingCompute = function (namespace) {
  var self = this;
  if (self[TYPES_INDEX.compute.name]) {
    // Select the first corresponding compute when a namespace is selected (unless selected)
    try {
      self[TYPES_INDEX.compute.lastPromise].done(function () {
        if (!self[TYPES_INDEX.compute.name]() || self[TYPES_INDEX.compute.name]().namespace && self[TYPES_INDEX.compute.name]().namespace !== namespace.id) {
          var found = self[TYPES_INDEX.compute.available]().some(function (compute) {
            if (namespace.id === compute.namespace) {
              self[TYPES_INDEX.compute.name](compute);
              (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.setInLocalStorage)('contextSelector.' + TYPES_INDEX.compute.localStorageId, namespace);
              return true;
            }
          });
          if (!found) {
            // This can happen when a namespace refers to a compute that isn't returned by the computes call
            // TODO: What should we do?
            self[TYPES_INDEX.compute.name](undefined);
          }
        }
      });
    } catch (e) {}
  }
};
HueContextSelector.prototype.reload = function (type) {
  var self = this;
  if (self[type.name]) {
    self[type.loading](true);
    self[type.lastPromise] = catalog_contextCatalog__WEBPACK_IMPORTED_MODULE_4__["default"][type.contextCatalogFn]({
      connector: knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.connector)
    }).then(function (available) {
      // Namespaces response differs slightly from the others
      if (type === TYPES_INDEX.namespace) {
        available = available.namespaces;
      }
      self[type.available](available);

      // If we only get one and hue is not configured for multi-cluster we always fallback to the returned
      // compute or namespace from the backend. This also guarantees a compute and namespace is always set.
      if (available.length === 1 && !window.HAS_MULTI_CLUSTER) {
        if (!self[type.name]() || self[type.name]().id !== available[0].id) {
          self[type.name](available[0]);
        }
        return;
      }

      // In some cases we could have a namespace or compute without the name attribute, or the name might have changed.
      if (self[type.name]() && !self[type.name]().name) {
        available.some(function (other) {
          if (other !== self[type.name]() && other.id === self[type.name]().id) {
            self[type.name](other);
            return true;
          }
        });
      }
      if (!self[type.name]() && (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.getFromLocalStorage)('contextSelector.' + type.localStorageId)) {
        var lastSelected = (0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_9__.getFromLocalStorage)('contextSelector.' + type.localStorageId);
        var found = available.some(function (other) {
          if (other.id === lastSelected.id) {
            self[type.name](other);
            return true;
          }
        });

        // If we can't find the last selected cluster or compute we try to find by type
        if (!found && lastSelected && (type === TYPES_INDEX.cluster || type === TYPES_INDEX.compute)) {
          available.some(function (other) {
            if (lastSelected && other.type === lastSelected.type) {
              self[type.name](other);
              return true;
            }
          });
        }
      }
      if (!self[type.name]() && available.length) {
        self[type.name](available[0]);
      }

      // Namespace is leading, update compute to match once/if available
      if (self[type.name]() && type === TYPES_INDEX.namespace) {
        self.setMatchingCompute(self[type.name]());
      }
    })["catch"]()["finally"](function () {
      self[type.loading](false);
    });
  } else {
    self[type.lastPromise] = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred().resolve().promise();
  }
};
HueContextSelector.prototype.reloadDatabases = function () {
  var self = this;
  if (self.database && !self.hideDatabases) {
    self.loadingDatabases(true);
    jquery__WEBPACK_IMPORTED_MODULE_0___default().when(self[TYPES_INDEX.namespace.lastPromise], self[TYPES_INDEX.compute.lastPromise]).done(function () {
      window.clearTimeout(self.reloadDatabaseThrottle);
      self.reloadDatabaseThrottle = window.setTimeout(function () {
        var connector = knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.connector);
        if (!self[TYPES_INDEX.namespace.name]()) {
          self.availableDatabases([]);
          self.loadingDatabases(false);
          return;
        }
        catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_5__["default"].getEntry({
          namespace: self[TYPES_INDEX.namespace.name](),
          compute: self[TYPES_INDEX.compute.name](),
          connector: connector,
          path: [],
          definition: {
            type: 'source'
          }
        }).then(function (sourceEntry) {
          sourceEntry.getChildren({
            silenceErrors: true
          }).then(function (databaseEntries) {
            var databaseNames = [];
            databaseEntries.forEach(function (databaseEntry) {
              databaseNames.push(databaseEntry.name);
            });
            self.availableDatabases(databaseNames);
            if (!self.database() && databaseNames.length) {
              /* The code below takes care of a corner case when the editor is loaded and the assist DB panel
                 isn't open in which case an active DB might not be set.
                  There's quite some related logic in the editor code (snippet.js) for when the assist DB panel is
                 open on load. Ideally we should move all that logic here, however it's not trivial to untangle as
                 it contains some editor specific integration. Perhaps it's cleaner to deal with if in Editor V2.
              */
              // TODO: Move the logic for setting active DB from assist panel here.
              var dbPanelReady = false;
              utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_2__.ASSIST_IS_DB_PANEL_READY_EVENT, function () {
                dbPanelReady = true;
              });
              if (!dbPanelReady) {
                if (databaseNames.some(function (name) {
                  return name === 'default';
                })) {
                  self.database('default');
                } else {
                  self.database(databaseNames[0]);
                }
              }
            }
          })["catch"](function () {
            self.availableDatabases([]);
          })["finally"](function () {
            self.loadingDatabases(false);
          });
        });
      }, 10);
    });
  } else if (self.database) {
    self.availableDatabases([]);
    self.database(undefined);
  }
};
HueContextSelector.prototype.dispose = function () {
  var self = this;
  while (self.disposals.length) {
    self.disposals.pop()();
  }
};
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerComponent(CONTEXT_SELECTOR_COMPONENT, HueContextSelector, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.createDirectoryModal.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.createDirectoryModal.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SHOWN_EVENT": () => (/* binding */ SHOWN_EVENT),
/* harmony export */   "SHOW_EVENT": () => (/* binding */ SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var SHOW_EVENT = 'show.create.directory.modal';
var SHOWN_EVENT = 'create.directory.modal.shown';
var TEMPLATE = "\n  <!-- ko with: activeEntry -->\n  <form class=\"form-horizontal\">\n    <div class=\"modal-header\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n      <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Create Directory'), "</h2>\n    </div>\n    <div class=\"modal-body \">\n      <input id=\"newDirectoryName\" class=\"input large-as-modal\" type=\"text\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Directory name'), "\" />\n    </div>\n    <div class=\"modal-footer\">\n      <input type=\"button\" class=\"btn\" data-dismiss=\"modal\" data-bind=\"click: function () { $('#newDirectoryName').val(null) }\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Cancel'), "\">\n      <input type=\"submit\" class=\"btn btn-primary disable-feedback\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Create'), "\" data-bind=\"click: function () { if ($('#newDirectoryName').val()) { $data.createDirectory($('#newDirectoryName').val()); $('#createDirectoryModal').modal('hide'); } }\"/>\n    </div>\n  </form>\n  <!-- /ko -->\n");
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent('create-directory', undefined, TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(SHOW_EVENT, function (docViewModel) {
    if (docViewModel.isTrash() || docViewModel.isTrashed() || !docViewModel.canModify()) {
      return;
    }
    var $createDirectoryModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#createDirectoryModal');
    if ($createDirectoryModal.length > 0) {
      knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($createDirectoryModal[0]);
      $createDirectoryModal.remove();
    }
    var data = {
      params: docViewModel,
      descendantsComplete: function descendantsComplete() {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(SHOWN_EVENT);
      }
    };
    $createDirectoryModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="createDirectoryModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'create-directory\', params: params }" data-keyboard="true" class="modal hide fade" tabindex="-1"></div>');
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($createDirectoryModal);
    knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $createDirectoryModal[0]);
    $createDirectoryModal.modal('show');
  });
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.deleteDocModal.js":
/*!************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.deleteDocModal.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "DELETE_DOC_MODAL_SHOWN_EVENT": () => (/* binding */ DELETE_DOC_MODAL_SHOWN_EVENT),
/* harmony export */   "HIDE_DELETE_DOC_MODAL_EVENT": () => (/* binding */ HIDE_DELETE_DOC_MODAL_EVENT),
/* harmony export */   "SHOW_DELETE_DOC_MODAL_EVENT": () => (/* binding */ SHOW_DELETE_DOC_MODAL_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var HIDE_DELETE_DOC_MODAL_EVENT = 'doc.hide.delete.modal';
var SHOW_DELETE_DOC_MODAL_EVENT = 'doc.show.delete.modal';
var DELETE_DOC_MODAL_SHOWN_EVENT = 'doc.delete.modal.shown';
var TEMPLATE = "\n  <div class=\"modal-header\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n    <!-- ko if: entriesToDelete().length === 0 -->\n    <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('The trash is empty'), "</h2>\n    <!-- /ko -->\n    <!-- ko if: entriesToDelete().length > 0 -->\n    <h2 class=\"modal-title\"> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Do you really want to delete the following document(s)?'), " </h2>\n    <!-- /ko -->\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"doc-browser-empty animated\" style=\"display: none;\" data-bind=\"visible: entriesToDelete().length > 0 && selectedDocsWithDependents().length === 0\">\n      <i class=\"fa fa-spinner fa-spin fa-2x\"></i>\n    </div>\n    <ul data-bind=\"foreach: selectedDocsWithDependents()\">\n      <li>\n        <span data-bind=\"text: $data.name\"></span>\n        <!-- ko if: $data.dependents.length > 0 -->\n          (").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('used by'), "\n          <a class=\"pointer\" data-bind=\"hueLink: $data.dependents[0].absoluteUrl, text: $data.dependents[0].name\"></a>\n          <!-- ko if: $data.dependents.length > 1 -->\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('and'), " <a class=\"pointer\" data-bind=\"hueLink: $data.dependents[1].absoluteUrl, text: $data.dependents[1].name\"></a>\n            <!-- ko if: $data.dependents.length > 2 -->\n              ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('and'), " <span data-bind=\"text: $data.dependents.length - 2\"></span> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('other'), "\n            <!-- /ko -->\n          <!-- /ko -->\n          )\n        <!-- /ko -->\n      </li>\n    </ul>\n  </div>\n  <div class=\"modal-footer\">\n    <!-- ko if: entriesToDelete().length === 0 -->\n    <input type=\"button\" class=\"btn\" data-dismiss=\"modal\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\">\n    <!-- /ko -->\n    <!-- ko if: entriesToDelete().length > 0 -->\n    <input type=\"button\" class=\"btn\" data-dismiss=\"modal\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Cancel'), "\">\n    <input type=\"submit\" data-bind=\"click: function() { if (isTrash() || isTrashed()) { removeDocuments(true) } else { moveToTrash() } }, disable: deletingEntries\" class=\"btn btn-danger disable-feedback\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Yes'), "\"/>\n    <!-- /ko -->\n  </div>\n");
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent('delete-entry', undefined, TEMPLATE).then(function () {
  var removeDeleteDocModal = function removeDeleteDocModal() {
    var $deleteEntriesModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#deleteEntriesModal');
    if ($deleteEntriesModal.length > 0) {
      knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($deleteEntriesModal[0]);
      $deleteEntriesModal.remove();
    }
  };
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(SHOW_DELETE_DOC_MODAL_EVENT, function (docViewModel) {
    removeDeleteDocModal();
    if (!docViewModel.entriesToDelete().length && docViewModel.selectedEntries().length) {
      docViewModel.entriesToDelete(docViewModel.selectedEntries());
    }
    if (docViewModel.entriesToDelete().length === 0 || docViewModel.sharedWithMeSelected() && !docViewModel.superuser) {
      return;
    }
    docViewModel.getSelectedDocsWithDependents();
    var data = {
      params: docViewModel,
      descendantsComplete: function descendantsComplete() {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(DELETE_DOC_MODAL_SHOWN_EVENT);
      }
    };
    var $deleteEntriesModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="deleteEntriesModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'delete-entry\', params: params }" data-keyboard="true" class="modal hide fade" tabindex="-1"></div>');
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($deleteEntriesModal);
    knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $deleteEntriesModal[0]);
    $deleteEntriesModal.modal('show');
  });
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(HIDE_DELETE_DOC_MODAL_EVENT, removeDeleteDocModal);
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.dropDown.js":
/*!******************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.dropDown.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HUE_DROP_DOWN_COMPONENT": () => (/* binding */ HUE_DROP_DOWN_COMPONENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var HUE_DROP_DOWN_COMPONENT = 'hue-drop-down';
var TEMPLATE = "\n  <!-- ko if: !menuOnly && (!dropDownVisible() || !searchable) -->\n  <a class=\"inactive-action hue-drop-down-active\" href=\"javascript:void(0)\" data-bind=\"toggle: dropDownVisible, css: { 'blue': dropDownVisible }\">\n    <!-- ko if: icon --><i class=\"fa\" data-bind=\"css: icon\"></i><!-- /ko -->\n    <!-- ko if: !noLabel && value -->\n    <span class=\"hue-drop-down-selected\" data-bind=\"text: value() && typeof value()[labelAttribute] !== 'undefined' ? value()[labelAttribute] : value(), visible: ! dropDownVisible() || !searchable, attr: { 'title': titleTooltip }\" ></span>\n    <!-- /ko -->\n    <i class=\"fa fa-caret-down\"></i>\n  </a>\n  <!-- /ko -->\n  <!-- ko if: !menuOnly && (dropDownVisible() && searchable) -->\n  <input class=\"hue-drop-down-input\" type=\"text\" data-bind=\"textInput: filter, attr: { 'placeHolder': inputPlaceHolder }, visible: dropDownVisible, style: { color: filterEdited() ? '#000' : '#AAA', 'min-height': '22px', 'margin-left': '10px' }\"/>\n  <i class=\"fa fa-caret-down\"></i>\n  <!-- /ko -->\n  <div class=\"hue-drop-down-container\" data-bind=\"css: { 'open' : dropDownVisible, 'hue-drop-down-fixed': fixedPosition, 'hue-drop-down-container-searchable': searchable }, dropDownKeyUp: { onEsc: onEsc, onEnter: onEnter, dropDownVisible: dropDownVisible }\">\n    <div style=\"overflow-y: auto;\" class=\"dropdown-menu\" data-bind=\"visible: filteredEntries().length > 0\">\n      <!-- ko if: foreachVisible -->\n      <ul class=\"hue-inner-drop-down\" data-bind=\"foreachVisible: { data: filteredEntries, minHeight: 34, container: '.dropdown-menu' }\">\n        <!-- ko if: typeof $data.divider !== 'undefined' && $data.divider -->\n        <li class=\"divider\"></li>\n        <!-- /ko -->\n        <!-- ko if: typeof $data.divider === 'undefined' || !$data.divider -->\n        <li><a href=\"javascript:void(0)\" data-bind=\"text: $data && typeof $data[$parent.labelAttribute] !== 'undefined' ? $data[$parent.labelAttribute] : $data, click: function () { let previous = $parent.value(); $parent.value($data); $parent.onSelect($data, previous); }\"></a></li>\n        <!-- /ko -->\n      </ul>\n      <!-- /ko -->\n      <!-- ko ifnot: foreachVisible -->\n      <ul class=\"hue-inner-drop-down\" data-bind=\"foreach: filteredEntries\">\n        <!-- ko if: typeof $data.divider !== 'undefined' && $data.divider -->\n        <li class=\"divider\"></li>\n        <!-- /ko -->\n        <!-- ko if: typeof $data.divider === 'undefined' || !$data.divider -->\n        <li><a href=\"javascript:void(0)\" data-bind=\"text: $data && typeof $data[$parent.labelAttribute] !== 'undefined' ? $data[$parent.labelAttribute] : $data, click: function () { let previous = $parent.value(); $parent.value($data); $parent.onSelect($data, previous); }\"></a></li>\n        <!-- /ko -->\n      </ul>\n      <!-- /ko -->\n    </div>\n  </div>\n";
knockout__WEBPACK_IMPORTED_MODULE_1__.bindingHandlers.dropDownKeyUp = {
  init: function init(element, valueAccessor) {
    var options = valueAccessor();
    var onEsc = options.onEsc;
    var onEnter = options.onEnter;
    var onSelected = options.onSelected;
    var dropDownVisible = options.dropDownVisible;
    var keyUpTarget = options.keyUpTarget || window;
    var keyUp = function keyUp(e) {
      var $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);
      var $dropDownMenu = $element.find('.dropdown-menu');
      var $currentActive = $element.find('.hue-inner-drop-down > .active');
      var activeTop = $currentActive.length !== 0 ? $currentActive.position().top : 0;
      var activeHeight = $currentActive.length !== 0 ? $currentActive.outerHeight(true) : $element.find('.hue-inner-drop-down li:first-child').outerHeight(true);
      var containerHeight = $dropDownMenu.innerHeight();
      var containerScrollTop = $dropDownMenu.scrollTop();
      $currentActive.removeClass('active');
      if (e.keyCode === 27 && onEsc) {
        onEsc();
      } else if (e.keyCode === 38) {
        // up
        var $nextActive;
        if ($currentActive.length !== 0 && $currentActive.prev().length !== 0) {
          if (activeTop < containerScrollTop + activeHeight) {
            $dropDownMenu.scrollTop(activeTop - containerHeight / 2);
          }
          $nextActive = $currentActive.prev().addClass('active');
        }
        if (onSelected) {
          onSelected($nextActive && $nextActive.length ? knockout__WEBPACK_IMPORTED_MODULE_1__.dataFor($nextActive[0]) : undefined);
        }
      } else if (e.keyCode === 40) {
        // down
        var _$nextActive;
        if ($currentActive.length === 0) {
          _$nextActive = $element.find('.hue-inner-drop-down li:first-child').addClass('active');
        } else if ($currentActive.next().length !== 0) {
          if (activeTop + activeHeight * 3 > containerHeight - containerScrollTop) {
            $dropDownMenu.scrollTop(activeTop - containerHeight / 2);
          }
          _$nextActive = $currentActive.next().addClass('active');
        } else {
          _$nextActive = $currentActive.addClass('active');
        }
        if (onSelected) {
          onSelected(_$nextActive && _$nextActive.length ? knockout__WEBPACK_IMPORTED_MODULE_1__.dataFor(_$nextActive[0]) : undefined);
        }
      } else if (e.keyCode === 13) {
        // enter
        if ($currentActive.length > 0) {
          $dropDownMenu.scrollTop(0);
        }
        if (onEnter) {
          onEnter($currentActive.length ? knockout__WEBPACK_IMPORTED_MODULE_1__.dataFor($currentActive[0]) : undefined);
        }
      } else {
        $dropDownMenu.scrollTop(0);
      }
    };
    var visibleSub = dropDownVisible.subscribe(function (newValue) {
      if (newValue) {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(keyUpTarget).on('keyup.hueDropDown', keyUp);
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(keyUpTarget).on('keydown.hueDropDown', function (e) {
          // This prevents the cursor from moving left or right on up and down
          if (e.keyCode === 38 || e.keyCode === 40) {
            e.preventDefault();
          }
        });
      } else {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(keyUpTarget).off('keyup.hueDropDown');
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(keyUpTarget).off('keydown.hueDropDown');
      }
    });
    knockout__WEBPACK_IMPORTED_MODULE_1__.utils.domNodeDisposal.addDisposeCallback(element, function () {
      visibleSub.dispose();
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(keyUpTarget).off('keyup.hueDropDown');
    });
  }
};
var HueDropDown = /*#__PURE__*/_createClass(function HueDropDown(params, element) {
  _classCallCheck(this, HueDropDown);
  var self = this;
  self.dropDownVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(!!params.showOnInit);
  self.menuOnly = !!params.menuOnly;
  self.noLabel = !!params.noLabel;
  self.labelAttribute = params.labelAttribute || 'label';
  self.icon = params.icon;
  self.value = params.value;
  self.titleName = params.titleName;
  self.entries = params.entries;
  self.searchable = params.searchable || false;
  self.foreachVisible = params.foreachVisible || false;
  self.linkTitle = params.linkTitle || (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Selected entry');
  self.fixedPosition = !!params.fixedPosition;
  self.onSelect = params.onSelect || function () {};
  self.inputPlaceHolder = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    return self.value() && _typeof(self.value()) === 'object' ? self.value()[self.labelAttribute] : self.value();
  });
  self.titleTooltip = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    var title = self.value() && typeof self.value()[self.labelAttribute] !== 'undefined' ? self.value()[self.labelAttribute] : self.value();
    if (typeof self.titleName == 'undefined') {
      return title;
    }
    return self.titleName + ' ' + title;
  });
  var closeOnOutsideClick = function closeOnOutsideClick(e) {
    var $input = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.hue-drop-down-input');
    if (!$input.is(jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.target))) {
      self.dropDownVisible(false);
    }
  };
  self.onEsc = function () {
    self.dropDownVisible(false);
  };
  self.onEnter = function (value) {
    var previous = self.value();
    self.value(value);
    self.onSelect(value, previous);
    self.dropDownVisible(false);
  };
  self.filter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('');
  self.value.subscribe(function () {
    self.dropDownVisible(false);
  });
  self.filterEdited = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.filter.subscribe(function () {
    self.filterEdited(true);
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.hue-inner-drop-down > .active').removeClass('.active');
  });
  self.dropDownVisible.subscribe(function (newValue) {
    self.filterEdited(false);
    if (newValue) {
      window.setTimeout(function () {
        self.filter('');
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('click', closeOnOutsideClick);
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.hue-drop-down-input').focus();
      }, 0);

      // Right align the dropdown when outside the right edge
      if (!self.fixedPosition) {
        var $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);
        var $dropDownMenu = $element.find('.dropdown-menu').parent();
        var $offsetParent = $element.offsetParent();
        var rightLimit = $offsetParent.offset().left + $offsetParent.width();
        if ($dropDownMenu.offset().left + 160 > rightLimit) {
          var $caret = $element.find('.fa-caret-down');
          var caretRight = $caret.offset().left + $caret.width();
          var diff = -$dropDownMenu.offset().left - 160 + caretRight;
          $element.find('.hue-drop-down-container').css({
            'margin-left': diff + 'px'
          });
        }
      }
    } else {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).find('.hue-inner-drop-down > .active').removeClass('.active');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('click', closeOnOutsideClick);
    }
  });
  self.filteredEntries = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
    if (self.filter() === '' || !self.filterEdited()) {
      return knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.entries);
    } else {
      var lowerFilter = self.filter().toLowerCase();
      return knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.entries).filter(function (entry) {
        if (_typeof(entry) === 'object') {
          return entry[self.labelAttribute].toLowerCase().indexOf(lowerFilter) !== -1;
        }
        return entry.toLowerCase().indexOf(lowerFilter) !== -1;
      });
    }
  });
});
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(HUE_DROP_DOWN_COMPONENT, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new HueDropDown(params, componentInfo.element);
  }
}, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.editorDroppableMenu.js":
/*!*****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.editorDroppableMenu.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! sql/sqlUtils */ "./desktop/core/src/desktop/js/sql/sqlUtils.ts");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
/* harmony import */ var _bindings_ko_draggableText__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../bindings/ko.draggableText */ "./desktop/core/src/desktop/js/ko/bindings/ko.draggableText.js");
/* harmony import */ var _bindings_ace_ko_aceEditor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../bindings/ace/ko.aceEditor */ "./desktop/core/src/desktop/js/ko/bindings/ace/ko.aceEditor.js");
/* harmony import */ var utils_timing_sleep__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! utils/timing/sleep */ "./desktop/core/src/desktop/js/utils/timing/sleep.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }
function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










var NAME = 'hue-editor-droppable-menu';
var TYPES = {
  VALUE: 'value',
  SELECT: 'select',
  INSERT: 'insert',
  UPDATE: 'update',
  DROP: 'drop'
};

// prettier-ignore
var TEMPLATE = "\n  <ul class=\"table-drop-menu hue-context-menu\">\n    <!-- ko if: meta -->\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: insertValue.bind($data, '".concat(TYPES.VALUE, "')\">\"<span data-bind=\"text: identifier\"></span>\"</a></li>\n    <li class=\"divider\"></li>\n    <li><a href=\"javascript: void(0);\" data-bind=\"click: insertValue.bind($data, '").concat(TYPES.SELECT, "')\">SELECT FROM <span data-bind=\"text: identifier\"></span>...</a></li>\n    <!-- ko ifnot: meta().isView -->\n      <li><a href=\"javascript: void(0);\" data-bind=\"click: insertValue.bind($data, '").concat(TYPES.INSERT, "')\">INSERT INTO <span data-bind=\"text: identifier\"></span>...</a></li>\n      <li><a href=\"javascript: void(0);\" data-bind=\"click: insertValue.bind($data, '").concat(TYPES.UPDATE, "')\">UPDATE <span data-bind=\"text: identifier\"></span>...</a></li>\n      <li><a href=\"javascript: void(0);\" data-bind=\"click: insertValue.bind($data, '").concat(TYPES.DROP, "')\">DROP TABLE <span data-bind=\"text: identifier\"></span>...</a></li>\n    <!-- /ko -->\n    <!-- ko if: meta().isView -->\n      <li><a href=\"javascript: void(0);\"data-bind=\"click: insertValue.bind($data, '").concat(TYPES.DROP, "')\">DROP VIEW <span data-bind=\"text: identifier\"></span>...</a></li>\n    <!-- /ko -->\n    <!-- /ko -->\n  </ul>\n");
var EditorDroppableMenu = /*#__PURE__*/function (_DisposableComponent) {
  function EditorDroppableMenu(params, element) {
    var _this;
    _classCallCheck(this, EditorDroppableMenu);
    _this = _callSuper(this, EditorDroppableMenu);
    _this.editor = params.editor;
    var $parentDropTarget = jquery__WEBPACK_IMPORTED_MODULE_0___default()(params.parentDropTarget);
    var $tableDropMenu = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element).parent().find('.table-drop-menu');
    _this.meta = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    _this.identifier = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('');
    _this.meta.subscribe( /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(meta) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(meta && (meta.connector.dialect === 'phoenix' && meta.database === '' || meta.database) && meta.table)) {
                _context.next = 13;
                break;
              }
              _context.t0 = _this;
              _context.next = 4;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__["default"].backTickIfNeeded(meta.connector, meta.database);
            case 4:
              _context.t1 = _context.sent;
              _context.t2 = _context.t1 + '.';
              _context.next = 8;
              return sql_sqlUtils__WEBPACK_IMPORTED_MODULE_4__["default"].backTickIfNeeded(meta.connector, meta.table);
            case 8:
              _context.t3 = _context.sent;
              _context.t4 = _context.t2 + _context.t3;
              _context.t0.identifier.call(_context.t0, _context.t4);
              _context.next = 14;
              break;
            case 13:
              _this.identifier('');
            case 14:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());
    _get((_this, _getPrototypeOf(EditorDroppableMenu.prototype)), "subscribe", _this).call(_this, _bindings_ko_draggableText__WEBPACK_IMPORTED_MODULE_6__.DRAGGABLE_TEXT_META_EVENT, _this.meta);
    _this.menu = knockout__WEBPACK_IMPORTED_MODULE_1__.bindingHandlers.contextMenu.initContextMenu($tableDropMenu, jquery__WEBPACK_IMPORTED_MODULE_0___default()('.content-panel'), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return (0,utils_timing_sleep__WEBPACK_IMPORTED_MODULE_8__["default"])(0);
          case 2:
            jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('click.' + NAME, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
              return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    if (!_this.menu) {
                      _context2.next = 5;
                      break;
                    }
                    $tableDropMenu.css('opacity', 0);
                    _context2.next = 4;
                    return (0,utils_timing_sleep__WEBPACK_IMPORTED_MODULE_8__["default"])(300);
                  case 4:
                    _this.menu.hide();
                  case 5:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            })));
          case 3:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    })), function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.' + NAME);
    });
    $parentDropTarget.droppable({
      accept: '.draggableText',
      drop: function drop(e, ui) {
        var editor = _this.editor();
        var meta = _this.meta();
        if (!meta || !editor) {
          return;
        }
        var position = editor.renderer.screenToTextCoordinates(e.clientX, e.clientY);
        var text = ui.helper.text();
        if (meta.type === 's3' || meta.type === 'gs' || meta.type === 'hdfs' || meta.type === 'adls' || meta.type === 'abfs' || meta.type === 'ofs') {
          text = "'" + meta.definition.path + "'";
        }
        editor.moveCursorToPosition(position);
        var before = editor.getTextBeforeCursor();
        if ((meta.connector.dialect === 'phoenix' && meta.database === '' || meta.database) && meta.table && !meta.column && /.*;|^\s*$/.test(before)) {
          _this.menu.show(e);
        } else {
          if (/\S+$/.test(before) && before.charAt(before.length - 1) !== '.') {
            text = ' ' + text;
          }
          var after = editor.getTextAfterCursor();
          if (after.length > 0 && after.charAt(0) !== ' ' && text.charAt(text.length - 1) !== ' ') {
            text += ' ';
          }
          editor.session.insert(position, text);
          position.column += text.length;
          editor.clearSelection();
        }
      }
    });
    return _this;
  }
  _inherits(EditorDroppableMenu, _DisposableComponent);
  return _createClass(EditorDroppableMenu, [{
    key: "insertValue",
    value: function insertValue(type) {
      var textToInsert = '';
      var cursorEndAdjust = 0;
      switch (type) {
        case TYPES.UPDATE:
          textToInsert = 'UPDATE ' + this.identifier() + '\nSET ';
          cursorEndAdjust = -1;
          break;
        case TYPES.DROP:
          textToInsert = (this.meta().isView ? 'DROP VIEW ' : 'DROP TABLE ') + this.identifier() + ';';
          cursorEndAdjust = -2;
          break;
        case TYPES.INSERT:
          textToInsert = 'INSERT INTO ' + this.identifier() + '\nVALUES ();';
          cursorEndAdjust = -3;
          break;
        case TYPES.SELECT:
          textToInsert = 'SELECT *\nFROM ' + this.identifier() + '\nLIMIT 100\n;';
          cursorEndAdjust = -2;
          break;
        default:
          textToInsert = this.identifier();
          break;
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(_bindings_ace_ko_aceEditor__WEBPACK_IMPORTED_MODULE_7__.INSERT_AT_CURSOR_EVENT, {
        text: textToInsert,
        targetEditor: this.editor(),
        cursorEndAdjust: cursorEndAdjust
      });
      this.menu.hide();
    }
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_5__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new EditorDroppableMenu(params, componentInfo.element);
  }
}, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.executionAnalysis.js":
/*!***************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.executionAnalysis.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var d3v3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3v3 */ "./node_modules/d3v3/index.js");
/* harmony import */ var d3v3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(d3v3__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _ext_d3_tip_min__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../ext/d3-tip.min */ "./desktop/core/src/desktop/js/ext/d3-tip.min.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! knockout.mapping */ "./node_modules/knockout.mapping/knockout.mapping.js");
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(knockout_mapping__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










var NAME = 'hue-execution-analysis';
var TEMPLATE = "\n  <div class=\"hue-execution-analysis\">\n    <!-- ko hueSpinner: { spin: loading, inline: true } --><!-- /ko -->\n    <!-- ko ifnot: loading -->\n      <!-- ko if: analysisPossible() && !analysis() -->\n      <div class=\"no-analysis\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Execute a query to get query execution analysis.'), "</div>\n      <!-- /ko -->\n      <!-- ko ifnot: analysisPossible -->\n      <div class=\"no-analysis\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Analysis was not possible for the executed query.'), "</div>\n      <!-- /ko -->\n      <!-- ko with: analysis -->\n      <div>\n        <h4>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Heatmap'), "</h4>\n        <div>\n            <select data-bind=\"options: heatmapMetrics, event: { change: $parent.heatmapMetricChanged.bind($parent) }\"></select>\n            <svg class=\"heatmap\"></svg>\n        </div>\n      </div>\n      <div>\n        <h4>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Summary'), "</h4>\n        <ul class=\"risk-list\" data-bind=\"foreach: summary\" style=\"margin-bottom: 10px\">\n          <li>\n            <span data-bind=\"text: key\"></span>: <strong><span data-bind=\"numberFormat: { value: value, unit: unit }\"></strong></span>\n          </li>\n        </ul>\n      </div>\n      <div>\n        <h4>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Top down analysis'), "</h4>\n        <ul class=\"risk-list\" data-bind=\"foreach: $parent.healthChecks\">\n          <li>\n            <div><a href=\"javascript:void(0);\" data-bind=\"click: $parents[1].handleNodePress.bind($parents[1], $data)\"><span data-bind=\"text: contribution_factor_str\"></span></a> - <strong><span data-bind=\"duration: wall_clock_time\"></strong></div>\n            <ol data-bind=\"foreach: reason\">\n              <li>\n                <span data-bind=\"text: message, css: { striked: fix.fixed }\"></span><strong> - <span data-bind=\"numberFormat: { value: impact, unit: unit }\"></span></strong><span data-bind=\"visible: fix.fixable && !fix.fixed\"> - <a href=\"javascript:void(0);\" data-bind=\"click: $parents[2].handleFix.bind($parents[2], $data.fix)\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_8__["default"])('Fix'), "</a></span>\n              </li>\n            </ol>\n          </li>\n        </ul>\n      </div>\n      <!-- /ko -->\n    <!-- /ko -->\n  </div>\n");
var ExecutionAnalysis = /*#__PURE__*/function () {
  function ExecutionAnalysis() {
    _classCallCheck(this, ExecutionAnalysis);
    var self = this;
    self.disposals = [];
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_3__.observable(false);
    self.analysis = knockout__WEBPACK_IMPORTED_MODULE_3__.observable();
    self.details = knockout__WEBPACK_IMPORTED_MODULE_3__.observable();
    var analysisSub = self.analysis.subscribe(function (analysis) {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('[href*=executionAnalysis] span:eq(1)').text(self.analysisCount());
      setTimeout(function () {
        // Wait for analysis to render
        if (analysis.heatmap) {
          self.updateHeatMap(analysis.heatmap[analysis.heatmapMetrics[0]], analysis.heatmapMetrics[0]);
        } else {
          d3v3__WEBPACK_IMPORTED_MODULE_1___default().select('.heatmap').remove();
        }
      }, 0);
    });
    self.healthChecks = knockout__WEBPACK_IMPORTED_MODULE_3__.pureComputed(function () {
      var analysis = self.analysis();
      if (!analysis) {
        return [];
      }
      return analysis.healthChecks.filter(function (check) {
        return check.reason.length;
      });
    });
    self.analysisPossible = knockout__WEBPACK_IMPORTED_MODULE_3__.observable(true);
    self.analysisCount = knockout__WEBPACK_IMPORTED_MODULE_3__.pureComputed(function () {
      if (self.healthChecks().length) {
        return '(' + self.healthChecks().length + ')';
      }
      return '';
    });
    self.lastAnalysisPromise = undefined;
    var clearAnalysisSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('editor.clear.execution.analysis', function () {
      if (!window.HAS_WORKLOAD_ANALYTICS) {
        return;
      }
      if (self.lastAnalysisPromise) {
        self.lastAnalysisPromise.cancel();
      }
      self.analysis(undefined);
    });
    var executionAnalysisSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].subscribe('editor.update.execution.analysis', function (details) {
      if (!window.HAS_WORKLOAD_ANALYTICS) {
        return;
      }
      if (details.analysisPossible) {
        self.analysisPossible(true);
        self.details(details);
        self.loadAnalysis(details.compute, details.queryId);
      } else {
        self.analysisPossible(false);
      }
    });
    self.disposals.push(function () {
      analysisSub.dispose();
      clearAnalysisSub.remove();
      executionAnalysisSub.remove();
    });
  }
  return _createClass(ExecutionAnalysis, [{
    key: "heatmapMetricChanged",
    value: function heatmapMetricChanged(model, el) {
      var self = this;
      var analysis = self.analysis();
      if (analysis.heatmap) {
        self.updateHeatMap(analysis.heatmap[analysis.heatmapMetrics[0]], analysis.heatmapMetrics[0]);
      }
    }
  }, {
    key: "loadAnalysis",
    value: function loadAnalysis(compute, queryId) {
      var self = this;
      self.loading(true);
      self.lastAnalysisPromise = _api_apiHelper__WEBPACK_IMPORTED_MODULE_5__["default"].fetchQueryExecutionAnalysis({
        silenceErrors: true,
        compute: compute,
        queryId: queryId
      }).then(function (response) {
        var analysis = response.query;
        self.analysis(analysis);
      })["finally"](function () {
        self.loading(false);
      });
    }
  }, {
    key: "updateHeatMap",
    value: function updateHeatMap(data, counterName) {
      // Heatmap block and gap sizes
      var blockWidth = 40;
      var blockGap = 5;

      // Create tooltip
      var d3 = (d3v3__WEBPACK_IMPORTED_MODULE_1___default());
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('.d3-tip').remove();
      var tip = d3.d3tip().attr('class', 'risk d3-tip').offset([-10, 0]).html(function (d) {
        var host = d[0];
        if (host.indexOf(':') >= 0) {
          host = host.substring(0, host.indexOf(':'));
        }
        var value = d[2];
        var unit = d[5];
        var formattedValue = knockout__WEBPACK_IMPORTED_MODULE_3__.bindingHandlers.numberFormat.human(value, unit);
        return "<strong style='color:cyan'>" + host + '</strong><br><strong>' + counterName + ":</strong> <span style='color:red'>" + formattedValue + '</span>';
      });
      d3.select('.heatmap').call(tip);
      // Color gradient
      var colors = ['#f6faaa', '#9E0142'];
      var colorScale = d3.scale.linear().domain([0, 1]).interpolate(d3.interpolateHsl).range(colors);

      // Define map dimensions

      var $heatmap = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.heatmap');
      var svgWidth = $heatmap.width();
      var cols = Math.trunc(svgWidth / (blockWidth + blockGap));
      $heatmap.height((Math.trunc((data.data.length - 1) / cols) + 1) * (blockWidth + blockGap));

      // Attribute functions
      var x = function x(d, i) {
        return i % cols * (blockWidth + blockGap) + 1;
      };
      var y = function y(d, i) {
        return Math.trunc(i / cols) * (blockWidth + blockGap) + 1;
      };
      var c = function c(d) {
        return colorScale(d[3]);
      };
      d3.select('.heatmap').selectAll('.box').data([]).exit().remove();
      d3.select('.heatmap').selectAll('.box').data(data.data).enter().append('rect').attr('class', 'box').attr('x', x).attr('y', y).attr('height', blockWidth).attr('width', blockWidth).attr('fill', c).on('mouseover', tip.show).on('mouseout', tip.hide);
    }
  }, {
    key: "handleFix",
    value: function handleFix(fix) {
      var self = this;
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_5__["default"].fixQueryExecutionAnalysis({
        fix: fix,
        start_time: knockout_mapping__WEBPACK_IMPORTED_MODULE_4___default().toJSON(new Date().getTime()),
        compute: self.details().compute
      }).done(function (resp) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('notebook.task.submitted', resp);
        fix.fixed = true;
        self.analysis.valueHasMutated();
      });
    }
  }, {
    key: "handleNodePress",
    value: function handleNodePress(contributor) {
      var self = this;
      //TODO: Loading
      if (!jquery__WEBPACK_IMPORTED_MODULE_0___default()('[href*="' + self.details().name + '"]')[0]) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('show.jobs.panel', {
          id: self.details().name,
          "interface": 'queries'
        });
        setTimeout(function () {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('impala.node.moveto', contributor.result_id);
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('impala.node.select', contributor.result_id);
        }, 500);
      } else {
        if (!jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel').is(':visible')) {
          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel').show();
        }
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('impala.node.moveto', contributor.result_id);
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_7__["default"].publish('impala.node.select', contributor.result_id);
      }
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_6__["default"].registerComponent(NAME, ExecutionAnalysis, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.favoriteApp.js":
/*!*********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.favoriteApp.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var NAME = 'hue-favorite-app';
var TEMPLATE = "\n  <div class=\"inline pointer favorite-app\" data-bind=\"click: setAsFavoriteApp.bind($data), tooltip: { placement: 'bottom', title: isFavorite() ? '".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Unset from default application'), "' : '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Set as default application'), "' }\">\n    <i class=\"fa inactive-action\" data-bind=\"css: { 'fa-star-o': !isFavorite(), 'fa-star': isFavorite }\"></i>\n  </div>\n");
var FavoriteApp = /*#__PURE__*/function () {
  function FavoriteApp(params) {
    _classCallCheck(this, FavoriteApp);
    this.isFavorite = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    this.app = params.app;
    this.interpreter = params.interpreter;
    _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].fetchFavoriteApp().then(this.updateFromApiResponse.bind(this));
  }
  return _createClass(FavoriteApp, [{
    key: "updateFromApiResponse",
    value: function updateFromApiResponse(data, announce) {
      this.isFavorite(false);
      if (data.status === 0 && data.data && data.data.default_app) {
        try {
          var defaultApp = JSON.parse(data.data.default_app);
          this.isFavorite(defaultApp.app === this.app && (this.app === 'editor' && defaultApp.interpreter === this.interpreter || this.app !== 'editor'));
          if (announce) {
            utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('hue.new.default.app', defaultApp);
          }
        } catch (e) {
          console.error('There was a problem decoding the default app setting.');
        }
      }
    }
  }, {
    key: "setAsFavoriteApp",
    value: function () {
      var _setAsFavoriteApp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(vm, e) {
        var post, postParams;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              e.originalEvent.stopPropagation();
              e.originalEvent.stopImmediatePropagation();
              post = {};
              if (this.isFavorite()) {
                post["delete"] = true;
              } else {
                postParams = {
                  app: this.app
                };
                if (this.interpreter !== '') {
                  postParams.interpreter = this.interpreter;
                }
                post.set = JSON.stringify(postParams);
              }
              _context.t0 = this;
              _context.next = 7;
              return _api_apiHelper__WEBPACK_IMPORTED_MODULE_1__["default"].setFavoriteAppAsync(post);
            case 7:
              _context.t1 = _context.sent;
              _context.t0.updateFromApiResponse.call(_context.t0, _context.t1, true);
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setAsFavoriteApp(_x, _x2) {
        return _setAsFavoriteApp.apply(this, arguments);
      }
      return setAsFavoriteApp;
    }()
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, FavoriteApp, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.fieldSamples.js":
/*!**********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.fieldSamples.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var utils_html_html2text__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/html/html2text */ "./desktop/core/src/desktop/js/utils/html/html2text.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var NAME = 'field-samples';
var TEMPLATE = "\n  <div class=\"context-popover-inline-autocomplete\" style=\"display: flex\">\n    <div class=\"context-popover-sample-filter\">\n      <!-- ko component: {\n        name: 'inline-autocomplete',\n        params: {\n          querySpec: querySpec,\n          autocompleteFromEntries: autocompleteFromEntries\n        }\n      } --><!-- /ko -->\n    </div>\n    <!-- ko if: showOperations -->\n    <div class=\"context-popover-sample-controls\">\n      <div class=\"margin-left-10 inline-block\" data-bind=\"component: { name: 'hue-drop-down', params: { value: operation, entries: operations } }\"></div>\n      <div class=\"margin-left-10 inactive-action inline-block\">\n        <!-- ko if: loadingSamples() || refreshSampleEnabled() -->\n        <a href=\"javascript:void(0);\" data-bind=\"click: function () { refreshSampleEnabled(false); cancelRunningQueries() }\"><i class=\"fa fa-stop\"></i></a>\n        <!-- /ko -->\n        <!-- ko if: !loadingSamples() && !refreshSampleEnabled() -->\n        <a href=\"javascript:void(0);\" data-bind=\"click: function () { loadSamples(true) }\"><i class=\"fa fa-play\"></i></a>\n        <!-- /ko -->\n      </div>\n    </div>\n    <!-- /ko -->\n  </div>\n\n  <table class=\"table table-condensed table-nowrap\">\n    <thead>\n    <tr>\n      <th>".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Sample'), "</th>\n    </tr>\n    </thead>\n    <!-- ko if: loadingSamples() && (!refreshSampleEnabled() || (refreshSampleEnabled() && columnSamples().length === 0))  -->\n    <tbody>\n    <tr>\n      <td><!-- ko hueSpinner: { spin: true, inline: true } --><!-- /ko --></td>\n    </tr>\n    </tbody>\n    <!-- /ko -->\n\n    <!-- ko if: !loadingSamples() || (refreshSampleEnabled() && columnSamples().length > 0)  -->\n    <tbody data-bind=\"foreach: filteredColumnSamples\">\n    <tr>\n      <!-- ko if: typeof $parent.onSampleClick === 'function' -->\n      <td class=\"sample-column pointer\" data-bind=\"html: $data, attr: { 'title': hueUtils.html2text($data) }, click: $parent.sampleClick\"></td>\n      <!-- /ko -->\n      <!-- ko ifnot: typeof $parent.onSampleClick === 'function' -->\n      <td class=\"sample-column\" data-bind=\"html: $data, attr: { 'title': hueUtils.html2text($data) }\"></td>\n      <!-- /ko -->\n    </tr>\n    </tbody>\n    <!-- ko if: filteredColumnSamples().length === 0 -->\n    <tbody>\n    <tr>\n      <!-- ko ifnot: hasErrors -->\n      <td style=\"font-style: italic;\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('No entries found'), "</td>\n      <!-- /ko -->\n      <!-- ko if: hasErrors -->\n      <td style=\"font-style: italic;\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Error loading samples'), "</td>\n      <!-- /ko -->\n    </tr>\n    </tbody>\n    <!-- /ko -->\n    <!-- /ko -->\n  </table>\n");
var FieldSamples = /*#__PURE__*/function () {
  function FieldSamples(params) {
    _classCallCheck(this, FieldSamples);
    var self = this;
    self.catalogEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.isObservable(params.catalogEntry) ? params.catalogEntry : knockout__WEBPACK_IMPORTED_MODULE_0__.observable(params.catalogEntry);
    self.onSampleClick = params.onSampleClick;
    self.refreshSampleInterval = params.refreshSampleInterval;
    self.refreshSampleTimeout = -1;
    self.refreshSampleEnabled = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(!!self.refreshSampleInterval);
    self.cancellablePromises = [];
    self.querySpec = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.loadingSamples = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.showOperations = !self.catalogEntry().isTemporary && (self.catalogEntry().getDialect() === 'impala' || self.catalogEntry().getDialect() === 'hive');
    self.sampleClick = function (html) {
      self.onSampleClick((0,utils_html_html2text__WEBPACK_IMPORTED_MODULE_3__["default"])(html));
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('context.popover.hide');
    };
    self.operations = [{
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('default'),
      type: 'default'
    }, {
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('distinct'),
      type: 'distinct'
    }, {
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('max'),
      type: 'max'
    }, {
      label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('min'),
      type: 'min'
    }];
    self.operation = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(self.operations[0]);
    self.operation.subscribe(function () {
      self.loadSamples();
    });
    self.columnSamples = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
    self.filteredColumnSamples = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      if (!self.querySpec() || self.querySpec().query === '') {
        return self.columnSamples();
      }
      return self.columnSamples().filter(function (sampleValue) {
        if (typeof sampleValue === 'undefined' || sampleValue === null) {
          return false;
        }
        return self.querySpec().text.every(function (text) {
          var textLower = text.toLowerCase();
          return sampleValue.toString().toLowerCase().indexOf(textLower) !== -1;
        });
      });
    });
    self.autocompleteFromEntries = function (nonPartial, partial) {
      var result = [];
      var partialLower = partial.toLowerCase();
      self.columnSamples().forEach(function (sample) {
        if (sample[0].toString().toLowerCase().indexOf(partialLower) === 0) {
          result.push(nonPartial + partial + sample[0].toString().substring(partial.length));
        }
      });
      return result;
    };
    self.loadSamples();
  }
  return _createClass(FieldSamples, [{
    key: "loadSamples",
    value: function loadSamples(refreshCache) {
      var self = this;
      window.clearTimeout(self.refreshSampleTimeout);
      self.cancelRunningQueries();
      self.loadingSamples(true);
      var samplePromise = self.catalogEntry().getSample({
        silenceErrors: true,
        cancellable: true,
        refreshCache: refreshCache,
        operation: self.operation().type
      });
      self.cancellablePromises.push(samplePromise);
      samplePromise.then(function (samples) {
        if (samples.data && samples.data.length) {
          self.columnSamples(samples.data);
        }
      })["catch"](function () {
        self.hasErrors(true);
      })["finally"](function () {
        self.loadingSamples(false);
        if (self.refreshSampleTimeout && self.refreshSampleEnabled()) {
          self.refreshSampleTimeout = window.setTimeout(function () {
            self.loadSamples(true);
          }, self.refreshSampleInterval);
        }
      });
    }
  }, {
    key: "cancelRunningQueries",
    value: function cancelRunningQueries() {
      var self = this;
      window.clearTimeout(self.refreshSampleTimeout);
      while (self.cancellablePromises.length) {
        var promise = self.cancellablePromises.pop();
        if (promise.cancel) {
          promise.cancel();
        }
      }
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      self.cancelRunningQueries();
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerComponent(NAME, FieldSamples, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.globalSearch.js":
/*!**********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.globalSearch.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _assist_events__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./assist/events */ "./desktop/core/src/desktop/js/ko/components/assist/events.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var NAME = 'hue-global-search';
var TEMPLATE = "\n  <script type=\"text/html\" id=\"top-search-autocomp-item\">\n    <a href=\"javascript:void(0);\">\n      <div>\n        <div><i class=\"fa fa-fw\" data-bind=\"css: icon\"></i></div>\n        <div>\n          <div data-bind=\"html: label, style: { 'padding-top': description ? 0 : '9px' }\"></div>\n          <!-- ko if: description -->\n          <div data-bind=\"html: description\"></div>\n          <!-- /ko -->\n        </div>\n      </div>\n    </a>\n  </script>\n\n  <script type=\"text/html\" id=\"top-search-autocomp-no-match\">\n    <div style=\"height: 30px;\">\n      <div>".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No match found'), "</div>\n    </div>\n  </script>\n  \n  <!-- ko component: inlineAutocompleteComponent --><!-- /ko -->\n  <!-- ko if: searchResultVisible()  -->\n  <!-- ko if: !loading() && searchResultCategories().length === 0 && hasLoadedOnce() -->\n  <div class=\"global-search-results global-search-empty\" data-bind=\"onClickOutside: onResultClickOutside\">\n    <div>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No results found.'), "</div>\n  </div>\n  <!-- /ko -->\n  <!-- ko if: searchResultCategories().length > 0 -->\n  <div class=\"global-search-results\" data-bind=\"onClickOutside: onResultClickOutside, style: { 'height' : heightWhenDragging }\">\n    <div class=\"global-search-alternatives\" data-bind=\"css: { 'global-search-full-width': !selectedResult() }, delayedOverflow\" style=\"position: relative\">\n      <!-- ko foreach: searchResultCategories -->\n      <div class=\"global-search-category\">\n        <div class=\"global-search-category-header\" data-bind=\"text: label\"></div>\n        <ul>\n          <!-- ko foreach: expanded() ? result : topMatches -->\n          <li class=\"result\" data-bind=\"multiClick: {\n              click: function () { $parents[1].resultSelected($parentContext.$index(), $index()) },\n              dblClick: function () { $parents[1].resultSelected($parentContext.$index(), $index()); $parents[1].openResult(); }\n            }, html: label, css: { 'selected': $parents[1].selectedResult() === $data }\"></li>\n          <!-- /ko -->\n          <!-- ko if: topMatches.length < result.length && !expanded() -->\n          <li class=\"blue\" data-bind=\"toggle: expanded\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Show more...'), "</li>\n          <!-- /ko -->\n        </ul>\n      </div>\n      <!-- /ko -->\n      <!-- ko hueSpinner: { spin: loading() && searchResultCategories().length > 0, inline: true } --><!-- /ko -->\n    </div>\n    <!-- ko with: selectedResult -->\n    <div class=\"global-search-preview\" style=\"overflow: auto;\">\n        <div class=\"global-search-close-preview\"><a class=\"pointer inactive-action\" data-bind=\"click: function () { $parent.selectedIndex(undefined); }\"><i class=\"fa fa-fw fa-times\"></i></a></div>\n        <!-- ko switch: type -->\n          <!-- ko case: ['database', 'document', 'field', 'table', 'view', 'partition']  -->\n            <!-- ko component: { name: 'context-popover-contents-global-search', params: { data: data, globalSearch: $parent } } --><!-- /ko -->\n          <!-- /ko -->\n          <!-- ko case: $default -->\n            <pre data-bind=\"text: ko.mapping.toJSON($data)\"></pre>\n          <!-- /ko -->\n        <!-- /ko -->\n    </div>\n    <!--/ko -->\n  </div>\n  <!-- /ko -->\n  <!-- /ko -->\n");
var HUE_DOC_CATEGORY = 'documents';
var NAV_CATEGORY = 'nav';
var CATEGORIES = {
  table: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Tables'),
  database: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Databases'),
  field: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Columns'),
  partition: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Partitions'),
  view: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Views'),
  hueDoc: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Documents')
};
var GlobalSearch = /*#__PURE__*/function () {
  function GlobalSearch() {
    _classCallCheck(this, GlobalSearch);
    var self = this;
    self.knownFacetValues = knockout__WEBPACK_IMPORTED_MODULE_1__.observable({
      type: {
        field: -1,
        table: -1,
        view: -1,
        database: -1,
        partition: -1,
        document: -1
      }
    });
    self.cancellablePromises = [];
    self.autocompleteThrottle = -1;
    self.fetchThrottle = -1;
    self.searchHasFocus = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.facetDropDownVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.querySpec = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.searchActive = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.searchResultVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.heightWhenDragging = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(null);
    self.searchResultCategories = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray([]);
    self.selectedIndex = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.loadingNav = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loadingDocs = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.loadingNav() || self.loadingDocs();
    });
    self.hasLoadedOnce = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.initializeFacetValues();
    self.inlineAutocompleteComponent = {
      name: 'inline-autocomplete',
      params: {
        hasFocus: self.searchHasFocus,
        disableNavigation: true,
        showMagnify: true,
        facetDropDownVisible: self.facetDropDownVisible,
        spin: self.loading,
        placeHolder: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])(window.HAS_CATALOG ? 'Search data and saved documents...' : 'Search saved documents...'),
        querySpec: self.querySpec,
        onClear: function onClear() {
          self.selectedIndex(null);
          self.searchResultVisible(false);
        },
        facets: window.HAS_READ_ONLY_CATALOG ? ['classification', 'tag', 'tags', 'type'] : ['originalName', 'parentPath', 'tag', 'tags', 'type'],
        knownFacetValues: self.knownFacetValues,
        autocompleteFromEntries: self.autocompleteFromEntries,
        triggerObservable: self.searchResultCategories
      }
    };
    self.selectedResult = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      if (self.selectedIndex()) {
        return self.searchResultCategories()[self.selectedIndex().categoryIndex].result[self.selectedIndex().resultIndex];
      }
    }).extend({
      deferred: true
    });
    var deferredCloseIfVisible = function deferredCloseIfVisible() {
      window.setTimeout(function () {
        if (self.searchResultVisible()) {
          self.close();
        }
      }, 0);
    };
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('global.search.close', deferredCloseIfVisible);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('context.popover.open.in.metastore', deferredCloseIfVisible);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('context.popover.show.in.assist', deferredCloseIfVisible);
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('sample.error.insert.click', deferredCloseIfVisible);
    self.querySpec.subscribe(function (newValue) {
      window.clearTimeout(self.fetchThrottle);
      if (newValue && newValue.query !== '') {
        self.fetchThrottle = window.setTimeout(function () {
          self.fetchResults(newValue);
        }, 600);
      } else {
        self.searchResultVisible(false);
        self.selectedIndex(undefined);
        self.searchResultCategories([]);
        self.cancelRunningRequests();
      }
    });
    self.autocompleteFromEntries = function (lastNonPartial, partial) {
      var result = undefined;
      var partialLower = partial.toLowerCase();
      self.searchResultCategories().every(function (category) {
        return category.result.every(function (entry) {
          if (category.type === 'documents' && entry.data.originalName.toLowerCase().indexOf(partialLower) === 0) {
            result = lastNonPartial + partial + entry.data.originalName.substring(partial.length, entry.data.originalName.length);
            return false;
          } else if (entry.data.selectionName && entry.data.selectionName.toLowerCase().indexOf(partialLower) === 0) {
            result = lastNonPartial + partial + entry.data.selectionName.substring(partial.length, entry.data.selectionName.length);
            return false;
          }
          return true;
        });
      });
      return result;
    };
    self.searchHasFocus.subscribe(function (newVal) {
      if (newVal && self.querySpec() && self.querySpec().query !== '') {
        if (!self.searchResultVisible()) {
          self.searchResultVisible(true);
        }
      }
    });
    self.searchResultVisible.subscribe(function (newVal) {
      if (newVal) {
        self.heightWhenDragging(null);
      } else {
        self.selectedIndex(undefined);
      }
    });

    // TODO: Consider attach/detach on focus
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).keydown(function (event) {
      if (self.facetDropDownVisible() || !self.searchHasFocus() && !self.searchResultVisible()) {
        return;
      }
      if (event.keyCode === 13 && self.searchHasFocus() && self.querySpec() && self.querySpec().query !== '') {
        window.clearTimeout(self.fetchThrottle);
        self.fetchResults(self.querySpec());
        return;
      }
      if (self.searchResultVisible() && self.searchResultCategories().length > 0) {
        var currentIndex = self.selectedIndex();
        if (event.keyCode === 40) {
          // Down
          self.searchHasFocus(false);
          if (currentIndex && !(self.searchResultCategories()[currentIndex.categoryIndex].result.length <= currentIndex.resultIndex + 1 && self.searchResultCategories().length <= currentIndex.categoryIndex + 1)) {
            if (self.searchResultCategories()[currentIndex.categoryIndex].result.length <= currentIndex.resultIndex + 1) {
              self.selectedIndex({
                categoryIndex: currentIndex.categoryIndex + 1,
                resultIndex: 0
              });
            } else {
              self.selectedIndex({
                categoryIndex: currentIndex.categoryIndex,
                resultIndex: currentIndex.resultIndex + 1
              });
            }
          } else {
            self.selectedIndex({
              categoryIndex: 0,
              resultIndex: 0
            });
          }
          event.preventDefault();
        } else if (event.keyCode === 38) {
          // Up
          self.searchHasFocus(false);
          if (currentIndex && !(currentIndex.categoryIndex === 0 && currentIndex.resultIndex === 0)) {
            if (currentIndex.resultIndex === 0) {
              self.selectedIndex({
                categoryIndex: currentIndex.categoryIndex - 1,
                resultIndex: self.searchResultCategories()[currentIndex.categoryIndex - 1].result.length - 1
              });
            } else {
              self.selectedIndex({
                categoryIndex: currentIndex.categoryIndex,
                resultIndex: currentIndex.resultIndex - 1
              });
            }
          } else {
            self.selectedIndex({
              categoryIndex: self.searchResultCategories().length - 1,
              resultIndex: self.searchResultCategories()[self.searchResultCategories().length - 1].result.length - 1
            });
          }
          event.preventDefault();
        } else if (event.keyCode === 13 && !self.searchHasFocus() && self.selectedIndex()) {
          // Enter
          self.openResult();
        }
      }
    });
  }
  return _createClass(GlobalSearch, [{
    key: "initializeFacetValues",
    value: function () {
      var _initializeFacetValues = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var facets, facetValues;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__["default"].getAllNavigatorTags({
                silenceErrors: true
              });
            case 3:
              facets = _context.sent;
              facetValues = self.knownFacetValues();
              facetValues['tags'] = facets;
              facetValues['tag'] = facets;
              if (window.HAS_READ_ONLY_CATALOG) {
                facetValues['classification'] = facets;
              }
              _context.next = 12;
              break;
            case 10:
              _context.prev = 10;
              _context.t0 = _context["catch"](0);
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, null, [[0, 10]]);
      }));
      function initializeFacetValues() {
        return _initializeFacetValues.apply(this, arguments);
      }
      return initializeFacetValues;
    }()
  }, {
    key: "cancelRunningRequests",
    value: function cancelRunningRequests() {
      var self = this;
      while (self.cancellablePromises.length) {
        var promise = self.cancellablePromises.pop();
        if (promise.cancel) {
          promise.cancel();
        }
      }
    }
  }, {
    key: "close",
    value: function close() {
      var self = this;
      window.clearTimeout(self.fetchThrottle);
      self.cancelRunningRequests();
      self.searchResultVisible(false);
      self.hasLoadedOnce(false);
      self.querySpec({
        query: '',
        facets: {},
        text: []
      });
    }
  }, {
    key: "openResult",
    value: function openResult() {
      var self = this;
      var selectedResult = self.selectedResult();
      if (['database', 'table', 'field', 'view'].indexOf(selectedResult.type) !== -1) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('context.popover.show.in.assist');
      } else if (selectedResult.type === 'document') {
        if (selectedResult.data.doc_type === 'directory') {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('context.popover.show.in.assist');
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('open.link', '/hue' + selectedResult.data.link);
        }
      }
      self.close();
    }
  }, {
    key: "resultSelected",
    value: function resultSelected(categoryIndex, resultIndex) {
      var self = this;
      if (!self.selectedIndex() || !(self.selectedIndex().categoryIndex === categoryIndex && self.selectedIndex().resultIndex === resultIndex)) {
        self.selectedIndex({
          categoryIndex: categoryIndex,
          resultIndex: resultIndex
        });
      }
    }
  }, {
    key: "onResultClickOutside",
    value: function onResultClickOutside() {
      var self = this;
      if (!self.searchResultVisible() || self.searchHasFocus()) {
        return false;
      }
      self.searchResultVisible(false);
      window.clearTimeout(self.fetchThrottle);
      window.clearTimeout(self.autocompleteThrottle);
    }
  }, {
    key: "mainSearchSelect",
    value: function mainSearchSelect(entry) {
      if (entry.data && entry.data.link) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('open.link', entry.data.link);
      } else if (!/:\s*$/.test(entry.value)) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(_assist_events__WEBPACK_IMPORTED_MODULE_7__.ASSIST_SHOW_SQL_EVENT);
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('assist.db.search', entry.value);
      }
    }
  }, {
    key: "updateCategories",
    value: function updateCategories(type, categoriesToAdd) {
      var self = this;
      var newCategories = self.searchResultCategories().filter(function (category) {
        return category.type !== type;
      });
      var change = newCategories.length !== self.searchResultCategories().length;
      if (categoriesToAdd.length > 0) {
        newCategories = newCategories.concat(categoriesToAdd);
        newCategories.sort(function (a, b) {
          if (a.weight === b.weight) {
            return a.label.localeCompare(b.label);
          }
          return b.weight - a.weight;
        });
        change = true;
      }
      if (change) {
        var selected = self.selectedResult();
        var newIndex = undefined;
        if (selected) {
          for (var i = 0; i < newCategories.length; i++) {
            for (var j = 0; j < newCategories[i].result.length; j++) {
              if (newCategories[i].result[j].type === selected.type && newCategories[i].result[j].label === selected.label) {
                newIndex = {
                  categoryIndex: i,
                  resultIndex: j
                };
                break;
              }
            }
            if (newIndex) {
              break;
            }
          }
        }
        self.selectedIndex(newIndex);
        self.searchResultCategories(newCategories);
      }
    }
  }, {
    key: "fetchResults",
    value: function fetchResults(querySpec) {
      var self = this;
      self.cancelRunningRequests();
      if (/:$/.test(querySpec.query)) {
        self.searchResultVisible(false);
        return;
      }
      self.loadingDocs(true);
      self.searchResultVisible(true);
      var clearDocsTimeout = window.setTimeout(function () {
        self.updateCategories(HUE_DOC_CATEGORY, []);
      }, 300);
      var docQuery = querySpec.query;
      var docOnly = querySpec.facets && querySpec.facets['type'] && querySpec.facets['type']['document'];
      if (docOnly) {
        docQuery = querySpec.text.join(' ');
      }
      self.cancellablePromises.push(_api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchHueDocsInteractive(docQuery).always(function () {
        self.loadingDocs(false);
        window.clearTimeout(clearDocsTimeout);
      }).done(function (data) {
        self.hasLoadedOnce(true);
        var categories = [];
        var docCategory = {
          label: CATEGORIES.hueDoc,
          result: [],
          expanded: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
          type: HUE_DOC_CATEGORY,
          weight: 3
        };
        data.results.forEach(function (doc) {
          if (doc.hue_name.indexOf('.') !== 0) {
            docCategory.result.push({
              label: doc.hue_name,
              type: 'document',
              data: doc
            });
          }
        });
        if (docCategory.result.length) {
          docCategory.topMatches = docCategory.result.slice(0, 6);
          categories.push(docCategory);
        }
        self.updateCategories(HUE_DOC_CATEGORY, categories);
      }));
      if (!docOnly && window.HAS_CATALOG) {
        var clearNavTimeout = window.setTimeout(function () {
          self.updateCategories(NAV_CATEGORY, []);
        }, 300);
        var navQuery = querySpec.query;
        // Add * in front of each term unless already there
        querySpec.text.forEach(function (textPart) {
          if (textPart.indexOf('*') === -1 && navQuery.indexOf('*' + textPart) === -1 && textPart.indexOf(':') === -1) {
            navQuery = navQuery.replace(textPart, '*' + textPart);
          }
        });
        self.loadingNav(true);
        self.cancellablePromises.push(_api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchNavEntitiesInteractive({
          query: navQuery
        }).always(function () {
          self.loadingNav(false);
          window.clearTimeout(clearNavTimeout);
        }).done(function (data) {
          self.hasLoadedOnce(true);
          var categories = [];
          var newCategories = {};
          data.results.forEach(function (result) {
            var typeLower = result.type.toLowerCase();
            if (CATEGORIES[typeLower]) {
              var category = newCategories[typeLower];
              if (!category) {
                category = {
                  label: CATEGORIES[typeLower],
                  result: [],
                  expanded: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false),
                  type: NAV_CATEGORY,
                  weight: 2
                };
                newCategories[typeLower] = category;
              }
              var meta = {
                source: 'globalSearch'
              };
              if (result.type.toLowerCase() === 'database') {
                meta.type = 'sql';
                meta.database = result.originalName;
              } else if (result.type.toLowerCase() === 'table') {
                meta.type = 'sql';
                var split = result.originalName.split('.');
                if (split.length === 2) {
                  meta.database = split[0];
                  meta.table = split[1];
                }
              } else if (result.type.toLowerCase() === 'field') {
                meta.type = 'sql';
                var _split = result.originalName.split('.');
                if (_split.length >= 3) {
                  meta.database = _split[0];
                  meta.table = _split[1];
                  meta.column = _split[2];
                }
              }
              category.result.push({
                label: result.hue_name || result.originalName,
                type: typeLower,
                data: result
              });
            }
          });
          Object.keys(newCategories).forEach(function (key) {
            var category = newCategories[key];
            if (category.result.length) {
              category.topMatches = category.result.slice(0, 6);
              categories.push(category);
            }
          });
          self.updateCategories(NAV_CATEGORY, categories);
        }));
      } else {
        self.updateCategories(NAV_CATEGORY, []);
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_4__["default"].registerComponent(NAME, GlobalSearch, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.historyPanel.js":
/*!**********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.historyPanel.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var _apps_notebook_NotebookViewModel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../apps/notebook/NotebookViewModel */ "./desktop/core/src/desktop/js/apps/notebook/NotebookViewModel.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.








var NAME = 'hue-history-panel';
var TEMPLATE = "\n  <button class=\"btn btn-flat pull-right btn-toggle-jobs-panel\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Task History'), "\" data-bind=\"click: toggleVisibility\">\n    <i class=\"fa fa-history\"></i>\n    <div class=\"jobs-badge\" data-bind=\"text: historyRunningJobs().length, visible: historyRunningJobs().length > 0\"></div>\n  </button>\n\n  <div class=\"jobs-panel history-panel\" data-bind=\"visible: historyPanelVisible, style: { 'top' : top, 'left': left }\" style=\"display: none;\">\n    <a class=\"pointer inactive-action pull-right\" data-bind=\"click: function(){ historyPanelVisible(false); }\"><i class=\"fa fa-fw fa-times\"></i></a>\n    <!-- ko ifnot: editorViewModel.selectedNotebook() && editorViewModel.selectedNotebook().history().length > 0 -->\n      <span style=\"font-style: italic\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No task history.'), "</span>\n    <!-- /ko -->\n    <!-- ko if: editorViewModel.selectedNotebook() && editorViewModel.selectedNotebook().history().length > 0 -->\n    <!-- ko with: editorViewModel.selectedNotebook() -->\n    <div class=\"notification-history margin-bottom-10\">\n      <!-- ko if: onSuccessUrl() -->\n      <div class=\"notification-history-title\">\n        <strong class=\"margin-left-5\" data-bind=\"text: name\"></strong>\n        <!-- ko if: onSuccessUrl() !== 'assist.db.refresh' -->\n        <a class=\"pull-right margin-right-10\" href=\"javascript:void(0)\" data-bind=\"hueLink: onSuccessUrl()\">\n          ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Output'), "\n        </a>\n        <!-- /ko -->\n        <div class=\"clearfix\"></div>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: snippets()[0] -->\n      <!-- ko with: snippets()[0] -->\n      <!-- ko if: progress -->\n      <div class=\"snippet-progress-container\">\n        <div class=\"progress-snippet progress\" data-bind=\"css: {\n                  'progress-danger': progress() == 0 && errors().length > 0 || status() == 'failed',\n                  'progress-starting': progress() == 0 && status() == 'running',\n                  'progress-warning': progress() > 0 && progress() < 100 && status() != 'failed',\n                  'progress-success': progress() == 100\n                  }\" style=\"background-color: #FFF; width: 100%\">\n          <div class=\"bar\" data-bind=\"style: {'width': (errors().length > 0 ? 100 : Math.max(2, progress())) + '%'}\"></div>\n        </div>\n      </div>\n      <!-- /ko -->\n      <!-- ko if: result -->\n      <pre data-bind=\"visible: result.logs() && result.logs().length == 0\" class=\"logs logs-bigger\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No logs available at this moment.'), "</pre>\n      <pre data-bind=\"visible: result.logs() && result.logs().length > 0, text: result.logs, logScroller: result.logs, logScrollerVisibilityEvent: showLogs\" class=\"logs logs-bigger logs-populated\" style=\"height: 120px; overflow-y: auto;\"></pre>\n      <!-- /ko -->\n      <!-- /ko -->\n      <!-- /ko -->\n    </div>\n    <!-- ko if: history -->\n    <hr>\n    <div class=\"notification-history margin-bottom-10\">\n      <!-- ko if: history().length == 0 -->\n      <span style=\"font-style: italic\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No task history.'), "</span>\n      <!-- /ko -->\n      <!-- ko if: history().length > 0 -->\n      <div class=\"notification-history-title\">\n        <strong class=\"margin-left-5\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Task History'), "</strong>\n        <div class=\"inactive-action pointer pull-right\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Clear the query history'), "\" data-target=\"#clearNotificationHistoryModal\" data-toggle=\"modal\" rel=\"tooltip\">\n          <i class=\"fa fa-calendar-times-o\"></i>\n        </div>\n        <div class=\"clearfix\"></div>\n      </div>\n      <ul class=\"unstyled notification-history-list\">\n        <!-- ko foreach: history -->\n        <li data-bind=\"click: function() { $parents[1].editorViewModel.openNotebook(uuid()); }, css: {'active': $parents[1].editorViewModel.selectedNotebook() !== null && $parents[1].editorViewModel.selectedNotebook().uuid() === uuid() }\">\n          <div class=\"muted pull-left\" data-bind=\"momentFromNow: {data: lastExecuted, interval: 10000, titleFormat: 'LLL'}\"></div>\n          <div class=\"pull-right muted\">\n            <!-- ko switch: status -->\n            <!-- ko case: 'running' -->\n            <div class=\"history-status\" data-bind=\"tooltip: { title: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Query running'), "', placement: 'bottom' }\"><i class=\"fa fa-fighter-jet fa-fw\"></i></div>\n            <!-- /ko -->\n            <!-- ko case: 'failed' -->\n            <div class=\"history-status\" data-bind=\"tooltip: { title: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Query failed'), "', placement: 'bottom' }\"><i class=\"fa fa-exclamation fa-fw\"></i></div>\n            <!-- /ko -->\n            <!-- ko case: 'available' -->\n            <div class=\"history-status\" data-bind=\"tooltip: { title: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Result available'), "', placement: 'bottom' }\"><i class=\"fa fa-check fa-fw\"></i></div>\n            <!-- /ko -->\n            <!-- ko case: 'expired' -->\n            <div class=\"history-status\" data-bind=\"tooltip: { title: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Result expired'), "', placement: 'bottom' }\"><i class=\"fa fa-unlink fa-fw\"></i></div>\n            <!-- /ko -->\n            <!-- /ko -->\n          </div>\n          <div class=\"clearfix\"></div>\n          <strong data-bind=\"text: name, attr: { title: uuid }\"></strong>\n          <div data-bind=\"highlight: { value: query }\"></div>\n        </li>\n        <!-- /ko -->\n      </ul>\n      <!-- /ko -->\n    </div>\n    <!-- /ko -->\n    <!-- /ko -->\n    <!-- /ko -->\n  </div>\n\n  <div id=\"clearNotificationHistoryModal\" class=\"modal hide fade\" data-backdrop=\"false\">\n    <div class=\"modal-header\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n      <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Confirm History Clearing'), "</h2>\n    </div>\n    <div class=\"modal-body\">\n      <p>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Are you sure you want to clear the task history?'), "</p>\n    </div>\n    <div class=\"modal-footer\">\n      <a class=\"btn\" data-dismiss=\"modal\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No'), "</a>\n      <a class=\"btn btn-danger disable-feedback\" data-bind=\"click: function() { editorViewModel.selectedNotebook().clearHistory(); editorViewModel.selectedNotebook(null); }\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Yes'), "</a>\n    </div>\n  </div>\n");
var HistoryPanel = /*#__PURE__*/function () {
  function HistoryPanel() {
    _classCallCheck(this, HistoryPanel);
    var self = this;
    self.top = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.left = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.historyPanelVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.historyPanelVisible.subscribe(function (newVal) {
      if (newVal) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.jobs.panel');
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('hide.history.panel', function () {
      self.historyPanelVisible(false);
    });
    self.editorViewModel = new _apps_notebook_NotebookViewModel__WEBPACK_IMPORTED_MODULE_3__["default"]({
      user: window.LOGGED_USERNAME,
      userId: window.LOGGED_USER_ID,
      languages: [{
        name: 'Java',
        type: 'java'
      }, {
        name: 'Hive SQL',
        type: 'hive'
      }],
      // TODO reuse
      snippetViewSettings: {
        hive: {
          placeHolder: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Example: SELECT * FROM tablename, or press CTRL + space'),
          aceMode: 'ace/mode/hive',
          snippetImage: window.STATIC_URLS['beeswax/art/icon_beeswax_48.png'],
          sqlDialect: true
        },
        impala: {
          placeHolder: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Example: SELECT * FROM tablename, or press CTRL + space'),
          aceMode: 'ace/mode/impala',
          snippetImage: window.STATIC_URLS['impala/art/icon_impala_48.png'],
          sqlDialect: true
        },
        phoenix: {
          placeHolder: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Example: SELECT * FROM tablename, or press CTRL + space'),
          aceMode: 'ace/mode/phoenix',
          snippetImage: window.STATIC_URLS['rdbms/art/icon_rdbms_48.png'],
          sqlDialect: true
        },
        mysql: {
          placeHolder: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Example: SELECT * FROM tablename, or press CTRL + space'),
          aceMode: 'ace/mode/mysql',
          snippetImage: window.STATIC_URLS['rdbms/art/icon_rdbms_48.png'],
          sqlDialect: true
        },
        java: {
          snippetIcon: 'fa-file-code-o'
        },
        shell: {
          snippetIcon: 'fa-terminal'
        },
        sqoop1: {
          sqlDialect: false
        },
        spark: {
          sqlDialect: false
        }
      }
    });
    self.editorViewModel.editorMode(true);
    self.editorViewModel.isNotificationManager(true);
    self.editorViewModel.newNotebook();
    self.$toggleElement;
    var $container = jquery__WEBPACK_IMPORTED_MODULE_0___default()('body');
    self.reposition = function () {
      self.top(self.$toggleElement.offset().top + self.$toggleElement.height() + 15 + 'px');
      self.left($container.offset().left + $container.width() - 630 + 'px');
    };
    self.historyRunningJobs = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
      if (self.editorViewModel.selectedNotebook()) {
        return jquery__WEBPACK_IMPORTED_MODULE_0___default().grep(self.editorViewModel.selectedNotebook().history(), function (task) {
          return task.status() == 'running';
        });
      } else {
        return [];
      }
    });
    self.historyFinishedJobs = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
      if (self.editorViewModel.selectedNotebook()) {
        return jquery__WEBPACK_IMPORTED_MODULE_0___default().grep(self.editorViewModel.selectedNotebook().history(), function (task) {
          return task.status() == 'available' || task.status() == 'failed';
        });
      } else {
        return [];
      }
    });
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].subscribe('notebook.task.submitted', function (resp) {
      var data = {
        uuid: resp.history_uuid
      };
      if (resp.handle && resp.handle.session_id) {
        data['session'] = {
          type: resp.handle.session_type,
          id: resp.handle.session_id,
          session_id: resp.handle.session_guid,
          properties: []
        };
      }
      self.editorViewModel.openNotebook(data.uuid, null, true, function () {
        var notebook = self.editorViewModel.selectedNotebook();
        notebook.snippets()[0].progress.subscribe(function (val) {
          if (val === 100) {
            //self.indexingStarted(false);
            //self.isIndexing(false);
            //self.indexingSuccess(true);
          }
        });
        notebook.snippets()[0].status.subscribe(function (val) {
          if (val === 'failed') {
            //self.isIndexing(false);
            //self.indexingStarted(false);
            //self.indexingError(true);
          } else if (val === 'available') {
            var snippet = notebook.snippets()[0];
            if (!snippet.result.handle().has_more_statements) {
              // TODO: Show finish notification and clicking on it does onSuccessUrl
              // or if still on initial spinner we redirect automatically to onSuccessUrl
              if (notebook.onSuccessUrl() && notebook.onSuccessUrl() !== 'assist.db.refresh') {
                // TODO: Similar if in in FB directory, also refresh FB dir
                utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('open.link', notebook.onSuccessUrl());
              }
              if (notebook.onSuccessUrl() === 'assist.db.refresh') {
                catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_2__["default"].getEntry({
                  namespace: snippet.namespace(),
                  compute: snippet.compute(),
                  connector: snippet.connector(),
                  path: []
                }).then(function (entry) {
                  entry.clearCache({
                    cascade: true,
                    silenceErrors: true
                  });
                });
              } else if (notebook.onSuccessUrl()) {
                utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(notebook.pubSubUrl());
              }
              notebook.close(); // TODO: Don't close when onSuccessUrl is editor?
            } else {
              snippet.execute(true);
            }
          }
        });
        notebook.snippets()[0].checkStatus();

        // Add to history
        notebook.history.unshift(notebook.makeHistoryRecord(notebook.onSuccessUrl(), notebook.description(), new Date().getTime(), notebook.snippets()[0].status(), notebook.name(), notebook.uuid()));
        self.historyPanelVisible(true);
      }, data.session);
    });
  }
  return _createClass(HistoryPanel, [{
    key: "toggleVisibility",
    value: function toggleVisibility(historyPanel, event) {
      var self = this;
      if (!self.historyPanelVisible()) {
        self.$toggleElement = jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target);
        self.reposition();
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('resize', self.reposition);
        var positionSub = self.historyPanelVisible.subscribe(function (newValue) {
          if (!newValue) {
            jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('resize', self.reposition);
            positionSub.dispose();
          }
        });
      }
      self.historyPanelVisible(!self.historyPanelVisible());
    }
  }, {
    key: "dispose",
    value: function dispose() {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('resize', self.reposition);
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_4__["default"].registerComponent(NAME, HistoryPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.importDocumentsModal.js":
/*!******************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.importDocumentsModal.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "HIDE_EVENT": () => (/* binding */ HIDE_EVENT),
/* harmony export */   "SHOWN_EVENT": () => (/* binding */ SHOWN_EVENT),
/* harmony export */   "SHOW_EVENT": () => (/* binding */ SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../doc/hueFileEntry */ "./desktop/core/src/desktop/js/doc/hueFileEntry.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var HIDE_EVENT = 'hide.import.documents.modal';
var SHOW_EVENT = 'show.import.documents.modal';
var SHOWN_EVENT = 'import.documents.modal.shown';
var TEMPLATE = "\n<div class=\"modal-header\">\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n  <!-- ko if: isHistory -->\n  <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Import Query History'), "</h2>\n  <!-- /ko -->\n  <!-- ko ifnot: isHistory -->\n  <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Import Hue Documents'), "</h2>\n  <!-- /ko -->\n</div>\n\n<!-- ko ifnot: imported --> \n<div class=\"modal-body\">\n  <!-- ko with: activeEntry -->\n  <form id=\"importDocumentsForm\" class=\"form-horizontal\" style=\"display: inline\" enctype=\"multipart/form-data\">\n    <div data-bind=\"visible: uploading() || uploadComplete()\">\n      <span data-bind=\"visible: uploading()\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Importing...'), "</span>\n      <span data-bind=\"visible: !uploadFailed() && uploadComplete()\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Import complete!'), "</span>\n      <span data-bind=\"visible: uploadFailed\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Import failed!'), "</span>\n      <progress data-bind=\"visible: uploading() || uploadComplete()\" id=\"importDocumentsProgress\" value=\"0\" max=\"100\" style=\"width: 560px;\"></progress>\n    </div>\n    <div class=\"pull-right\">\n      <!-- ko ifnot: uploading() || uploadComplete() -->\n      <input type=\"button\" class=\"btn\" data-clear=\"fileupload\" data-bind=\"click: closeUploadModal\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Cancel'), "\" />\n      <input type=\"submit\" class=\"btn btn-danger\" data-clear=\"fileupload\" data-bind=\"enable: importEnabled, click: function() { upload($parent.importComplete) }\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Import'), "\" />\n      <!-- /ko -->\n      <!-- ko if: uploading() || uploadComplete() -->\n      <input type=\"button\" class=\"btn\" data-clear=\"fileupload\" data-bind=\"click: closeUploadModal\" value=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\" />\n      <!-- /ko -->\n    </div>\n\n    <div class=\"fileupload fileupload-new\" data-provides=\"fileupload\" data-bind=\"visible: !uploading() && !uploadComplete()\">\n      <span class=\"btn btn-file\">\n        <span class=\"fileupload-new\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Select json file'), "</span>\n        <span class=\"fileupload-exists\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Change'), "</span>\n        <input id=\"importDocumentInput\" type=\"file\" name=\"documents\" accept=\".json\" data-bind=\"value: selectedImportFile\" />\n      </span>\n      &nbsp;&nbsp;<span class=\"fileupload-preview\"></span>\n      <a href=\"#\" class=\"fileupload-exists\" data-clear=\"fileupload\"><i class=\"fa fa-times\"></i></a>\n    </div>\n    <input type=\"hidden\" name=\"path\" data-bind=\"value: definition().path\" />\n  </form>\n  <!-- /ko -->\n</div>\n<!-- /ko -->\n<!-- ko if: imported -->\n<div class=\"modal-body\">\n  <!-- ko with: activeEntry -->\n  <div class=\"center\" style=\"display: none;\" data-bind=\"visible: importedDocumentCount() == 0\">\n    <i class=\"fa fa-spinner fa-spin fa-2x\"></i>\n  </div>\n  <!-- ko if: importedDocumentCount() > 0 -->\n  <ul>\n    <li> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Imported: '), " <span data-bind=\"text: importedDocSummary()['count']\"></span></li>\n    <li> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Created: '), " <span data-bind=\"text: importedDocSummary()['created_count']\"></span></li>\n    <li> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Updated: '), " <span data-bind=\"text: importedDocSummary()['updated_count']\"></span></li>\n  </ul>\n\n  <!-- ko ifnot: showTable() -->\n  <a href=\"javascript:void(0)\" class=\"margin-left-10 margin-top-10\" data-bind=\"click: toggleShowTable\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Show Details'), " <i class=\"fa fa-caret-down\"></i></a>\n  <!-- /ko -->\n  <!-- ko if: showTable() -->\n  <a href=\"javascript:void(0)\" class=\"margin-left-10 margin-top-10\" data-bind=\"click: toggleShowTable\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Hide Details'), " <i class=\"fa fa-caret-up\"></i></a>\n  <table class=\"table table-condensed\">\n    <thead>\n      <tr>\n        <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Name'), "</th>\n        <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Type'), "</th>\n        <th>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Owner'), "</th>\n      </tr>\n    </thead>\n    <tbody data-bind=\"foreach: importedDocSummary()['documents']\">\n      <tr>\n        <td data-bind=\"text: $data.name\"> </td>\n        <td data-bind=\"text: $data.type\"> </td>\n        <td data-bind=\"text: $data.owner\"> </td>\n      </tr>\n    </tbody>\n  </table>\n  <!-- /ko -->\n  <!-- /ko -->\n  <!-- /ko -->\n</div>\n<!-- /ko -->\n");
var ImportDocumentsModal = /*#__PURE__*/_createClass(function ImportDocumentsModal(params) {
  var _this = this;
  _classCallCheck(this, ImportDocumentsModal);
  if (!params) {
    params = {};
  }
  this.activeEntry = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.fileEntry);
  if (!params.fileEntry) {
    this.activeEntry(new _doc_hueFileEntry__WEBPACK_IMPORTED_MODULE_5__["default"]({
      activeEntry: this.activeEntry,
      trashEntry: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
      app: 'documents',
      user: self.user,
      activeSort: knockout__WEBPACK_IMPORTED_MODULE_1__.observable('defaultAsc'),
      definition: {
        name: '/',
        type: 'directory'
      }
    }));
  }
  this.imported = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  this.isHistory = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.isHistory);
  this.importComplete = function () {
    if (params.importedCallback) {
      params.importedCallback();
    }
    _this.imported(true);
  };
});
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent('import-documents-modal', undefined, TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(SHOW_EVENT, function (params) {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(HIDE_EVENT);
    var $importDocumentsModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="importDocumentsModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'import-documents-modal\', params: params }" data-keyboard="true" class="modal hide fade fileupload-modal" tabindex="-1"></div>');
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($importDocumentsModal);
    var data = {
      params: new ImportDocumentsModal(params),
      descendantsComplete: function descendantsComplete() {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(SHOWN_EVENT);
      }
    };
    knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $importDocumentsModal[0]);
    $importDocumentsModal.modal('show');
  });
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('hide.import.documents.modal', function () {
    var $importDocumentsModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#importDocumentsModal');
    if ($importDocumentsModal.length > 0) {
      $importDocumentsModal.modal('hide');
      knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($importDocumentsModal[0]);
      $importDocumentsModal.remove();
    }
  });
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.inlineAutocomplete.js":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.inlineAutocomplete.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _parse_globalSearchParser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../parse/globalSearchParser */ "./desktop/core/src/desktop/js/parse/globalSearchParser.js");
/* harmony import */ var utils_hueDebug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils/hueDebug */ "./desktop/core/src/desktop/js/utils/hueDebug.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var NAME = 'inline-autocomplete';

// prettier-ignore
var TEMPLATE = "\n  <div class=\"inline-autocomp-container\">\n    <div>\n      <!-- ko if: showMagnify -->\n        <!-- ko ifnot: spin -->\n        <i style=\"top: 6px;\" class=\"inline-autocomp-magnify-icon fa fa-fw fa-search\"></i>\n        <!-- /ko -->\n        <!-- ko if: spin -->\n        <i class=\"inline-autocomp-magnify-icon fa fa-fw fa-spinner fa-spin\"></i>\n        <!-- /ko -->\n      <!-- /ko-->\n      <form autocomplete=\"off\">\n        <input class=\"inline-autocomp-input\" ".concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " type=\"text\" data-bind=\"\n          attr: { 'placeHolder' : hasFocus() ? '' : placeHolder },\n          textInput: searchInput,\n          hasFocus: hasFocus,\n          clearable: { value: searchInput, onClear: onClear },\n          css: { 'inline-autocomp-magnify-input': showMagnify }\">\n        <input class=\"inline-autocomp-autocomp\" disabled type=\"text\" autocomplete=\"do-not-autocomplete\" data-bind=\"\n          value: inlineAutocomplete,\n          css: { 'inline-autocomp-magnify-input': showMagnify }\">\n      </form>\n    </div>\n  </div>\n\n  <div class=\"hue-drop-down-container hue-drop-down-fixed\" data-bind=\"event: { 'mousedown': facetDropDownMouseDown }, css: { 'open' : facetDropDownVisible() }, dropDownKeyUp: { onEsc: facetDropDownOnEsc, onEnter: facetDropDownOnEnter, onSelected: facetDropDownOnSelected, dropDownVisible: facetDropDownVisible }\">\n    <div class=\"dropdown-menu\" style=\"overflow-y: auto;\" data-bind=\"visible: facetSuggestions().length > 0\">\n      <ul class=\"hue-inner-drop-down\" data-bind=\"foreach: facetSuggestions\">\n        <li><a href=\"javascript:void(0)\" data-bind=\"html: label, click: function () { $parent.facetClicked($data); }, clickBubble: false\"></a></li>\n      </ul>\n    </div>\n  </div>\n");
var getSortedFacets = function getSortedFacets(facetIndex) {
  var result = Object.keys(facetIndex);
  result.sort(function (a, b) {
    return a.localeCompare(b);
  });
  return result;
};
var InlineAutocomplete = /*#__PURE__*/function () {
  function InlineAutocomplete(params) {
    _classCallCheck(this, InlineAutocomplete);
    var self = this;
    self.disposals = [];
    self.showMagnify = !!params.showMagnify;
    self.spin = params.spin;
    self.placeHolder = params.placeHolder || (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Filter...');
    self.hasFocus = params.hasFocus || knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.querySpec = params.querySpec;
    self.querySpec({
      query: '',
      facets: {},
      text: []
    });
    self.autocompleteFromEntries = params.autocompleteFromEntries || function () {
      return [];
    };
    self.facets = params.facets || [];
    self.knownFacetValues = params.knownFacetValues || {};
    self.uniqueFacets = !!params.uniqueFacets;
    self.disableNavigation = !!params.disableNavigation;
    self.changedAfterFocus = false;
    self.searchInput = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('');
    self.suggestions = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.selectedSuggestionIndex = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(0);
    self.suggestions.subscribe(function () {
      self.selectedSuggestionIndex(0);
    });
    self.facetSuggestions = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.facetDropDownVisible = params.facetDropDownVisible || knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.facetClicked = function (facet) {
      self.searchInput(facet.value);
      self.facetDropDownVisible(false);
    };
    self.facetDropDownOnEnter = function (facet) {
      if (facet) {
        self.searchInput(facet.value);
      }
      self.facetDropDownVisible(false);
    };
    self.facetDropDownOnEsc = function () {
      self.facetDropDownVisible(false);
    };
    self.facetDropDownOnSelected = function (facet) {
      if (facet) {
        var suggestions = self.suggestions();
        for (var i = 0; i < suggestions.length; i++) {
          if (facet.value === suggestions[i]) {
            self.selectedSuggestionIndex(i);
            break;
          }
        }
      }
    };
    self.facetDropDownMouseDown = function (data, evt) {
      evt.preventDefault(); // Prevent focus loss on the input when an entry is clicked
      return false;
    };
    self.inlineAutocomplete = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      if (!self.hasFocus() || self.suggestions().length === 0) {
        return '';
      }
      return self.suggestions()[self.selectedSuggestionIndex()];
    });
    self.lastParseResult = {};
    var querySpecSub = self.querySpec.subscribe(function (newVal) {
      if (!newVal || !newVal.query) {
        self.lastParseResult = {};
        self.searchInput('');
        self.clearSuggestions();
      }
    });
    self.disposals.push(function () {
      querySpecSub.dispose();
    });
    self.onClear = function () {
      if (params.onClear) {
        params.onClear();
      }
      self.clearSuggestions();
    };
    if (params.triggerObservable) {
      var triggerSub = params.triggerObservable.subscribe(function () {
        self.autocomplete();
      });
      self.disposals.push(function () {
        triggerSub.dispose();
      });
    }
    var inputSub = self.searchInput.subscribe(function (newValue) {
      if (self.querySpec() && self.querySpec().query === newValue) {
        return;
      }
      if (newValue === '') {
        self.changedAfterFocus = false;
        self.clearSuggestions();
        if (self.querySpec() && self.querySpec().query !== '') {
          self.querySpec({
            query: '',
            facets: {},
            text: []
          });
        }
        return;
      }
      self.changedAfterFocus = true;
      self.updateQuerySpec();
      self.autocomplete();
    });
    self.disposals.push(function () {
      inputSub.dispose();
    });
    var onKeyDown = function onKeyDown(event) {
      if (!self.hasFocus()) {
        return;
      }
      if (!self.disableNavigation && event.keyCode === 38 && self.suggestions().length && !self.facetDropDownVisible()) {
        // Up
        if (self.selectedSuggestionIndex() === 0) {
          self.selectedSuggestionIndex(self.suggestions().length - 1);
        } else {
          self.selectedSuggestionIndex(self.selectedSuggestionIndex() - 1);
        }
        event.preventDefault();
        return;
      }
      if (!self.disableNavigation && event.keyCode === 40 && self.suggestions().length && !self.facetDropDownVisible()) {
        // Down
        if (self.selectedSuggestionIndex() === self.suggestions().length - 1) {
          self.selectedSuggestionIndex(0);
        } else {
          self.selectedSuggestionIndex(self.selectedSuggestionIndex() + 1);
        }
        event.preventDefault();
        return;
      }
      if (event.keyCode === 32 && event.ctrlKey) {
        // Ctrl-Space
        if (!self.lastParseResult) {
          self.updateQuerySpec();
        }
        self.changedAfterFocus = true;
        self.autocomplete();
        return;
      }
      if (event.keyCode === 39 && self.inlineAutocomplete() !== '' && self.inlineAutocomplete() !== self.searchInput()) {
        // Right arrow
        // TODO: Check that cursor is last
        self.searchInput(self.inlineAutocomplete());
        return;
      }
      if (event.keyCode === 9 && self.inlineAutocomplete() !== self.searchInput()) {
        // Tab
        self.searchInput(self.inlineAutocomplete());
        event.preventDefault();
      }
    };
    self.disposals.push(function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('keydown.inlineAutocomplete', onKeyDown);
    });
    var focusSub = self.hasFocus.subscribe(function (newVal) {
      if (!newVal) {
        self.clearSuggestions();
        self.changedAfterFocus = false;
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('keydown.inlineAutocomplete', onKeyDown);
      } else if (self.searchInput() !== '') {
        self.autocomplete();
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('keydown.inlineAutocomplete', onKeyDown);
      } else {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('keydown.inlineAutocomplete', onKeyDown);
      }
      if (!newVal && self.facetDropDownVisible()) {
        self.facetDropDownVisible(false);
      }
    });
    self.disposals.push(function () {
      focusSub.dispose();
    });
  }
  return _createClass(InlineAutocomplete, [{
    key: "updateQuerySpec",
    value: function updateQuerySpec() {
      var self = this;
      // TODO: Get cursor position and split to before and after
      self.lastParseResult = _parse_globalSearchParser__WEBPACK_IMPORTED_MODULE_3__["default"].parseGlobalSearch(self.searchInput(), '');
      if (utils_hueDebug__WEBPACK_IMPORTED_MODULE_4__["default"] && utils_hueDebug__WEBPACK_IMPORTED_MODULE_4__["default"].showGlobalSearchParseResults) {
        // eslint-disable-next-line no-restricted-syntax
        console.log(self.lastParseResult);
      }
      var querySpec = {
        query: self.searchInput()
      };
      if (self.lastParseResult.facets) {
        var knownFacetValues = typeof self.knownFacetValues === 'function' ? self.knownFacetValues() : self.knownFacetValues;
        var cleanFacets = {};
        Object.keys(self.lastParseResult.facets).forEach(function (facet) {
          if (!knownFacetValues[facet]) {
            cleanFacets[facet] = self.lastParseResult.facets[facet];
          } else {
            cleanFacets[facet] = {};
            Object.keys(self.lastParseResult.facets[facet]).forEach(function (value) {
              if (knownFacetValues[facet][value]) {
                cleanFacets[facet][value] = self.lastParseResult.facets[facet][value];
              } else {
                var found = false;
                // Find the closest match, i.e. type:s -> type: [string, smallint, ...]
                getSortedFacets(knownFacetValues[facet]).forEach(function (knownValue) {
                  if (knownValue.toLowerCase().indexOf(value.toLowerCase()) === 0) {
                    if (!cleanFacets[facet][knownValue]) {
                      cleanFacets[facet][knownValue] = [];
                    }
                    cleanFacets[facet][knownValue] = true;
                    found = true;
                  }
                });
                if (!found) {
                  cleanFacets[facet][value] = self.lastParseResult.facets[facet][value];
                }
              }
            });
          }
        });
        querySpec.facets = cleanFacets;
      }
      if (self.lastParseResult.text) {
        querySpec.text = self.lastParseResult.text;
      }
      self.querySpec(querySpec);
    }
  }, {
    key: "clearSuggestions",
    value: function clearSuggestions() {
      var self = this;
      if (self.suggestions().length) {
        self.suggestions([]);
      }
      if (self.facetSuggestions().length) {
        self.facetSuggestions([]);
      }
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }, {
    key: "autocomplete",
    value: function autocomplete() {
      var self = this;
      if (!self.lastParseResult) {
        self.clearSuggestions();
        return;
      }
      var text = self.searchInput();
      var partial, nonPartial;
      var partialMatch = text.match(/([^:\s]+)$/i);
      if (partialMatch) {
        partial = partialMatch[0];
        nonPartial = text.substring(0, text.length - partial.length);
      } else {
        partial = '';
        nonPartial = text;
      }
      var newSuggestions = [];
      var facetSuggestions = [];
      var partialLower = partial.toLowerCase();
      if (self.lastParseResult.suggestFacets) {
        var existingFacetIndex = {};
        if (self.uniqueFacets && self.lastParseResult.facets) {
          Object.keys(self.lastParseResult.facets).forEach(function (facet) {
            existingFacetIndex[facet.toLowerCase()] = true;
          });
        }
        var suggestion = nonPartial + partial;
        var isLowerCase = suggestion.length > 0 && suggestion.toLowerCase() === suggestion;
        self.facets.forEach(function (facet) {
          if (self.uniqueFacets && existingFacetIndex[facet]) {
            return;
          }
          if (partial.length === 0 || facet.indexOf(partialLower) === 0) {
            var remainder = facet.substring(partial.length);
            suggestion += isLowerCase ? remainder : remainder.toUpperCase();
            suggestion += ':';
            newSuggestions.push(suggestion);
          }
        });
      }
      if (self.lastParseResult.suggestFacetValues) {
        var facetValues = typeof self.knownFacetValues === 'function' ? self.knownFacetValues() : self.knownFacetValues;
        if (facetValues && facetValues[self.lastParseResult.suggestFacetValues.toLowerCase()]) {
          var matchedFacets = facetValues[self.lastParseResult.suggestFacetValues.toLowerCase()];
          getSortedFacets(matchedFacets).forEach(function (value) {
            if (value.toLowerCase().indexOf(partialLower) === 0) {
              var fullValue = nonPartial + partial + value.substring(partial.length, value.length);
              var label = partial.length ? '<b>' + partial + '</b>' + value.substring(partial.length) : value;
              if (matchedFacets[value] !== -1) {
                label += ' (' + matchedFacets[value] + ')';
              }
              if (matchedFacets[value] !== 0) {
                facetSuggestions.push({
                  label: label,
                  value: fullValue
                });
                newSuggestions.push(fullValue);
              }
            }
          });
        }
      }
      if (partial !== '' && self.lastParseResult.suggestResults) {
        newSuggestions = newSuggestions.concat(self.autocompleteFromEntries(nonPartial, partial));
      }
      self.facetSuggestions(facetSuggestions);
      if (self.changedAfterFocus && (facetSuggestions.length > 1 || facetSuggestions.length === 1 && facetSuggestions[0].value !== self.searchInput())) {
        self.facetDropDownVisible(true);
      } else if (self.facetDropDownVisible()) {
        self.facetDropDownVisible(false);
      }
      self.suggestions(newSuggestions);
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, InlineAutocomplete, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.jobBrowserLinks.js":
/*!*************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.jobBrowserLinks.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _apps_jobBrowser_miniJobBrowser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../apps/jobBrowser/miniJobBrowser */ "./desktop/core/src/desktop/js/apps/jobBrowser/miniJobBrowser.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get.bind(); } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }
function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.








var NAME = 'hue-job-browser-links';
var TEMPLATE = "\n  <div class=\"btn-group pull-right\">\n    <!-- ko if: window.IS_K8S_ONLY -->\n      <a class=\"btn btn-flat\" style=\"padding-right: 4px\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Query browser'), "\" data-bind=\"hueLink: '/jobbrowser#!queries', click: function() { huePubSub.publish('show.jobs.panel', {interface: 'queries'}); huePubSub.publish('hide.jobs.panel'); }\">\n        <span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Queries'), "</span>\n      </a>\n    <!-- /ko -->\n    <!-- ko if: window.HAS_JOB_BROWSER && !window.getLastKnownConfig().has_computes -->\n    <!-- ko ifnot: window.IS_K8S_ONLY -->\n      <a class=\"btn btn-flat\" style=\"padding-right: 4px\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Job browser'), "\" data-bind=\"hueLink: '/jobbrowser#!jobs', click: function() { huePubSub.publish('hide.jobs.panel'); }\">\n        <span>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])(window.IS_MULTICLUSTER_ONLY ? 'Queries' : 'Jobs'), "</span>\n      </a>\n    <!-- /ko -->\n    <button class=\"btn btn-flat btn-toggle-jobs-panel\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Jobs preview'), "\" data-bind=\"click: function() { huePubSub.publish('toggle.jobs.panel'); }, style: {'paddingLeft': jobCount() > 0 ? '0': '4px'}\">\n      <span class=\"jobs-badge\" data-bind=\"visible: jobCount() > 0, text: jobCount\"></span>\n      <i class=\"fa fa-tasks\"></i>\n    </button>\n    <!-- /ko -->\n  </div>\n");
var JB_CHECK_INTERVAL_IN_MILLIS = 30000;
var JobBrowserPanel = /*#__PURE__*/function (_DisposableComponent) {
  function JobBrowserPanel(params) {
    var _this;
    _classCallCheck(this, JobBrowserPanel);
    _this = _callSuper(this, JobBrowserPanel);
    var $container = jquery__WEBPACK_IMPORTED_MODULE_0___default()('body');
    _this.initialized = false;
    var reposition = function reposition() {
      var $jobsPanel = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel');
      var $toggle = jquery__WEBPACK_IMPORTED_MODULE_0___default()('.btn-toggle-jobs-panel');
      $jobsPanel.css('top', $toggle.offset().top + $toggle.height() + 15 + 'px');
      $jobsPanel.css('left', $container.offset().left + $container.width() - 630 + 'px');
    };
    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'hide.jobs.panel', function () {
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).off('resize', reposition);
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel').hide();
    });
    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'show.jobs.panel', function (options) {
      if (!_this.initialized) {
        _this.initialized = true;
        (0,_apps_jobBrowser_miniJobBrowser__WEBPACK_IMPORTED_MODULE_5__.initializeMiniJobBrowser)();
      }
      if (window.IS_K8S_ONLY) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.selector.set.cluster', 'impala');
      }
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('hide.history.panel');
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(window).on('resize', reposition);
      reposition();
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel').show();
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('mini.jb.navigate', {
        section: options && options["interface"] ? options["interface"] : 'jobs',
        compute: options && options.compute
      });
      if (options && options.id) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('mini.jb.open.job', options.id);
      }
    });
    _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'toggle.jobs.panel', function () {
      if (jquery__WEBPACK_IMPORTED_MODULE_0___default()('#jobsPanel').is(':visible')) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('hide.jobs.panel');
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('show.jobs.panel');
      }
    });
    _this.jobCounts = knockout__WEBPACK_IMPORTED_MODULE_1__.observable({
      yarn: 0,
      schedules: 0,
      history: 0
    });
    _this.jobCount = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      var total = 0;
      Object.keys(_this.jobCounts()).forEach(function (value) {
        total += _this.jobCounts()[value];
      });
      return total;
    });
    _this.onePageViewModel = params.onePageViewModel;
    var lastYarnBrowserRequest = null;
    var checkYarnBrowserStatus = function checkYarnBrowserStatus() {
      return jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/jobbrowser/jobs/', {
        format: 'json',
        state: 'running',
        user: window.LOGGED_USERNAME
      }).done(function (data) {
        if (data != null && data.jobs != null) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('jobbrowser.data', data.jobs);
          _this.jobCounts()['yarn'] = data.jobs.length;
          _this.jobCounts.valueHasMutated();
        }
      }).fail(function (response) {
        console.warn(response);
      });
    };
    var lastScheduleBrowserRequest = undefined;
    var checkScheduleBrowserStatus = function checkScheduleBrowserStatus() {
      return jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/scheduler/api/schedule/list', {
        "interface": knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON('schedules'),
        filters: knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON([{
          text: 'user:' + window.LOGGED_USERNAME
        }, {
          time: {
            time_value: 7,
            time_unit: 'days'
          }
        }, {
          states: ['running']
        }, {
          pagination: {
            page: 1,
            offset: 1,
            limit: 1
          }
        }])
      }, function (data) {
        if (data != null && data.total != null) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('jobbrowser.schedule.data', data.apps);
          _this.jobCounts()['schedules'] = data.total;
          _this.jobCounts.valueHasMutated();
        }
      });
    };
    var lastHistoryBrowserRequest = null;
    var checkHistoryBrowserStatus = function checkHistoryBrowserStatus() {
      return jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/jobbrowser/api/jobs/history', {
        "interface": knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON('history'),
        filters: knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON([{
          states: ['running']
        }, {
          text: 'user:' + window.LOGGED_USERNAME
        }, {
          time: {
            time_value: 7,
            time_unit: 'days'
          }
        }, {
          pagination: {
            page: 1,
            offset: 1,
            limit: 1
          }
        }])
      }).done(function (data) {
        if (data != null && data.apps != null) {
          _this.jobCounts()['history'] = data.apps.length;
          _this.jobCounts.valueHasMutated();
        }
      }).fail(function (response) {
        console.warn(response);
      });
    };
    var checkJobBrowserStatusIdx = -1;
    var checkJobBrowserStatus = function checkJobBrowserStatus() {
      lastYarnBrowserRequest = checkYarnBrowserStatus();
      if (window.ENABLE_QUERY_SCHEDULING) {
        lastScheduleBrowserRequest = checkScheduleBrowserStatus();
      }
      if (window.ENABLE_HISTORY_V2) {
        lastHistoryBrowserRequest = checkHistoryBrowserStatus();
      }
      jquery__WEBPACK_IMPORTED_MODULE_0___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_0___default()), [lastYarnBrowserRequest, lastScheduleBrowserRequest, lastHistoryBrowserRequest]).done(function () {
        window.clearTimeout(checkJobBrowserStatusIdx);
        checkJobBrowserStatusIdx = window.setTimeout(checkJobBrowserStatus, JB_CHECK_INTERVAL_IN_MILLIS);
      }).fail(function () {
        window.clearTimeout(checkJobBrowserStatusIdx);
      });
    };

    // Load the mini jobbrowser DOM and insert it in the #mini_jobrowser element
    // Any script or styles are also inserted in the header and thus loaded async.
    jquery__WEBPACK_IMPORTED_MODULE_0___default().ajax({
      url: '/jobbrowser/apps?is_embeddable=true&is_mini=true',
      beforeSend: function beforeSend(xhr) {
        xhr.setRequestHeader('X-Requested-With', 'Hue');
      },
      dataType: 'html',
      success: function success(response) {
        params.onePageViewModel.processHeaders(response).done(function (rawHtml) {
          jquery__WEBPACK_IMPORTED_MODULE_0___default()('#mini_jobbrowser').html(rawHtml);
          //ko.bindingHandlers.delayedOverflow.init($('#mini_jobbrowser')[0]);
        });
      }
    });
    if (!window.IS_K8S_ONLY) {
      checkJobBrowserStatusIdx = window.setTimeout(checkJobBrowserStatus, 10);
      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'check.job.browser', checkYarnBrowserStatus);
      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'check.schedules.browser', checkScheduleBrowserStatus);
      _get((_this, _getPrototypeOf(JobBrowserPanel.prototype)), "subscribe", _this).call(_this, 'check.history.browser', checkHistoryBrowserStatus);
    }
    return _this;
  }
  _inherits(JobBrowserPanel, _DisposableComponent);
  return _createClass(JobBrowserPanel);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_6__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, JobBrowserPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.navProperties.js":
/*!***********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.navProperties.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var NAME = 'nav-properties';
var TEMPLATE = "\n  <script type=\"text/html\" id=\"nav-property-edit-popover-content\">\n    <div class=\"hue-nav-property-edit-content\">\n      <a href=\"javascript: void(0);\" class=\"close-popover\"><i class=\"fa fa-times\"></i></a>\n      <div class=\"control-group\" data-bind=\"css: { 'error': keyInvalid }\">\n        <label class=\"control-label\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Key'), "</label>\n        <div class=\"controls\">\n          <input type=\"text\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Key'), "\" data-bind=\"textInput: key\">\n        </div>\n      </div>\n      <div class=\"control-group\" data-bind=\"css: { 'error': valueInvalid }\">\n        <label class=\"control-label\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Value'), "</label>\n        <div class=\"controls\">\n          <input type=\"text\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Value'), "\" data-bind=\"textInput: value\">\n        </div>\n      </div>\n    </div>\n  </script>\n\n  <!-- ko if: loading -->\n  <div class=\"hue-nav-properties\"><div data-bind=\"hueSpinner: { spin: loading, inline: true }\"></div></div>\n  <!-- /ko -->\n  <!-- ko ifnot: loading -->\n  <!-- ko ifnot: editMode -->\n\n  <!-- ko ifnot: window.HAS_READ_ONLY_CATALOG -->\n  <div class=\"hue-nav-properties\" data-bind=\"click: startEdit, visibleOnHover: { selector: '.editable-inline-action' }\">\n    <!-- ko if: !properties().length -->\n    <div class=\"hue-nav-properties-empty\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Add properties...'), "</div>\n    <!-- /ko -->\n    <!-- ko foreach: properties -->\n    <div class=\"hue-nav-property\"><div class=\"hue-nav-property-key\" data-bind=\"text: key, attr: { 'title': key }\"></div><div class=\"hue-nav-property-value\" data-bind=\"text: value, attr: { 'title': value }\"></div></div>\n    <!-- /ko -->\n    <div class=\"editable-inline-action\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Edit'), "\"><a href=\"javascript: void(0);\" data-bind=\"click: startEdit\"><i class=\"fa fa-pencil\"></i></a></div>\n  </div>\n  <!-- /ko -->\n\n  <!-- ko if: window.HAS_READ_ONLY_CATALOG && properties().length -->\n  <div class=\"hue-nav-properties\">\n    <!-- ko foreach: properties -->\n    <div class=\"hue-nav-property\" data-bind=\"tooltip: { placement: 'bottom' }, attr: { title: title }\"><div class=\"hue-nav-property-key\" data-bind=\"text: key\"></div><div class=\"hue-nav-property-value\" data-bind=\"text: value\"></div></div>\n    <!-- /ko -->\n  </div>\n  <!-- /ko -->\n\n  <!-- /ko -->\n  <!-- ko if: editMode -->\n  <div class=\"hue-nav-properties hue-nav-properties-edit\">\n    <!-- ko foreach: editProperties -->\n    <div class=\"hue-nav-property hue-nav-property-edit\" data-bind=\"css: { 'hue-nav-property-invalid': invalid }, templatePopover: { trigger: 'click', placement: 'bottom', visible: editPropertyVisible, contentTemplate: 'nav-property-edit-popover-content' }\">\n      <div class=\"hue-nav-property-key\" data-bind=\"text: key, attr: { 'title': key }\"></div><div class=\"hue-nav-property-value\" data-bind=\"text: value, attr: { 'title': value }\"></div>\n      <div class=\"hue-nav-property-remove\"><a href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Remove'), "\" data-bind=\"click: function (entry) { $parent.removeProperty(entry); }\"><i class=\"fa fa-times\"></i></a></div>\n    </div>\n    <!-- /ko -->\n    <div class=\"hue-nav-property-add\"><a href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Add'), "\" data-bind=\"click: addProperty\"><i class=\"fa fa-plus\"></i></a></div>\n    <div class=\"hue-nav-properties-edit-actions\">\n      <a href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Save'), "\" data-bind=\"click: saveEdit\"><i class=\"fa fa-check\"></i></a>\n      <a href=\"javascript: void(0);\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Cancel'), "\" data-bind=\"click: cancelEdit\"><i class=\"fa fa-close\"></i></a>\n    </div>\n  </div>\n  <!-- /ko -->\n  <!-- /ko -->\n");
var NavProperty = /*#__PURE__*/function () {
  function NavProperty(key, value, isNew) {
    _classCallCheck(this, NavProperty);
    var self = this;
    self.key = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(key);
    self.keyEdited = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.value = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(value);
    self.valueEdited = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.editPropertyVisible = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(isNew);
    self.title = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    var keySub = self.key.subscribe(function () {
      keySub.dispose();
      self.keyEdited(true);
    });
    var valueSub = self.value.subscribe(function () {
      valueSub.dispose();
      self.valueEdited(true);
    });
    var editSub = self.editPropertyVisible.subscribe(function () {
      editSub.dispose();
      keySub.dispose();
      valueSub.dispose();
      self.keyEdited(true);
      self.valueEdited(true);
    });
    self.keyInvalid = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.keyEdited() && !self.key();
    });
    self.valueInvalid = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.valueEdited() && !self.value();
    });
    self.invalid = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      return self.keyInvalid() || self.valueInvalid() || !self.editPropertyVisible() && !self.key() && !self.value();
    });
  }
  return _createClass(NavProperty, [{
    key: "setTitle",
    value: function setTitle(title) {
      this.title(title);
    }
  }]);
}();
var NavProperties = /*#__PURE__*/function () {
  /**
   * @param {object} params
   * @param {DataCatalogEntry} [params.catalogEntry]
   *
   * @constructor
   */
  function NavProperties(params, element) {
    _classCallCheck(this, NavProperties);
    var self = this;
    self.element = element;
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(true);
    self.properties = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.editProperties = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.catalogEntry = params.catalogEntry;
    self.editMode = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loadProperties();
    self.refreshSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe('data.catalog.entry.refreshed', function (details) {
      if (details.entry === self.catalogEntry) {
        self.loadProperties();
      }
    });
  }
  return _createClass(NavProperties, [{
    key: "startEdit",
    value: function startEdit() {
      if (window.HAS_READ_ONLY_CATALOG) {
        return;
      }
      var self = this;
      var editProperties = [];
      self.properties().forEach(function (property) {
        editProperties.push(new NavProperty(property.key(), property.value()));
      });
      self.editProperties(editProperties);
      self.editMode(true);
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('click.navProperties', function (event) {
        if (jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(document, event.target) && !jquery__WEBPACK_IMPORTED_MODULE_0___default().contains(self.element, event.target) && !self.editProperties().some(function (prop) {
          return prop.editPropertyVisible();
        })) {
          self.saveEdit();
        }
      });
    }
  }, {
    key: "cancelEdit",
    value: function cancelEdit() {
      var self = this;
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.navProperties');
      self.editMode(false);
    }
  }, {
    key: "saveEdit",
    value: function saveEdit() {
      var self = this;
      var someInvalid = self.editProperties().some(function (property) {
        return !property.key() || !property.value();
      });
      if (someInvalid) {
        return;
      }
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).off('click.navProperties');
      self.editMode(false);
      if (knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON(self.editProperties()) !== knockout__WEBPACK_IMPORTED_MODULE_1__.mapping.toJSON(self.properties())) {
        self.loading(true);
        self.catalogEntry.getNavigatorMeta().then(function (navigatorMeta) {
          var keysAfterEdit = {};
          var modifiedCustomMetadata = {};
          if (!navigatorMeta.properties) {
            navigatorMeta.properties = {};
          }
          self.editProperties().forEach(function (property) {
            if (navigatorMeta.properties[property.key()] !== property.value()) {
              modifiedCustomMetadata[property.key()] = property.value();
            }
            keysAfterEdit[property.key()] = true;
          });
          var deletedCustomMetadataKeys = [];
          self.properties().forEach(function (property) {
            if (!keysAfterEdit[property.key()]) {
              deletedCustomMetadataKeys.push(property.key());
            }
          });
          self.catalogEntry.updateNavigatorCustomMetadata(modifiedCustomMetadata, deletedCustomMetadataKeys)["finally"](function () {
            self.loadProperties();
          });
        })["catch"](function () {
          self.loadProperties();
        });
      }
    }
  }, {
    key: "removeProperty",
    value: function removeProperty(property) {
      var self = this;
      self.editProperties.remove(property);
    }
  }, {
    key: "addProperty",
    value: function addProperty() {
      var self = this;
      var newProperty = new NavProperty('', '', true);
      newProperty.editPropertyVisible(true);
      self.editProperties.push(newProperty);
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      self.refreshSub.remove();
    }
  }, {
    key: "loadProperties",
    value: function loadProperties() {
      var self = this;
      self.loading(true);
      self.hasErrors(false);
      knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.catalogEntry).getNavigatorMeta().then(function (navigatorMeta) {
        var newProps = [];
        if (navigatorMeta.classifications) {
          navigatorMeta.classifications.forEach(function (classification) {
            if (classification.attributes) {
              Object.keys(classification.attributes).forEach(function (attributeKey) {
                var property = new NavProperty(attributeKey, classification.attributes[attributeKey]);
                property.setTitle(classification.typeName);
                newProps.push(property);
              });
            }
          });
        } else if (navigatorMeta.properties) {
          Object.keys(navigatorMeta.properties).forEach(function (key) {
            if (!key.startsWith('__cloudera_internal')) {
              newProps.push(new NavProperty(key, navigatorMeta.properties[key]));
            }
          });
          newProps.sort(function (a, b) {
            return a.key().localeCompare(b.key());
          });
        }
        self.properties(newProps);
      })["catch"](function () {
        self.hasErrors(true);
      })["finally"](function () {
        self.loading(false);
      });
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new NavProperties(params, componentInfo.element);
  }
}, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.navTags.js":
/*!*****************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.navTags.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var NAME = 'nav-tags';
var TEMPLATE = "\n  <!-- ko if: loading -->\n  <div style=\"width: 100%; height: 20px; left: 6px; position: relative;\" data-bind=\"hueSpinner: { spin: loading }\"></div>\n  <!-- /ko -->\n  <!-- ko if: !loading() && (!readOnly || readOnly && currentTags().length) -->\n  <div class=\"hue-tags\" style=\"width: 100%\" data-bind=\"ifnot: loading, css: { 'read-only-tags': readOnly }\">\n   <textarea style=\"width: 100%\" data-bind=\"tagEditor: {\n      emptyPlaceholder: '".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Add tags...'), "',\n      readOnly: readOnly,\n      hasErrors: hasErrors,\n      errorMessage: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Tags could not be loaded.'), "',\n      setTags: currentTags,\n      overflowEllipsis: overflowEllipsis,\n      onSave: saveTags.bind($data),\n      validRegExp: '^[a-zA-z0-9_-]{1,50}$',\n      invalidMessage: '").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Tags can only contain 1 to 50 alphanumeric characters, _ or -.'), "',\n      load: getSelectizeTags\n    }\"></textarea>\n   <div class=\"selectize-error\" style=\"display: none;\"><i class=\"fa fa-exclamation-triangle\"></i> <span class=\"message\"></span></div>\n  </div>\n  <!-- /ko -->\n");
var NavTags = /*#__PURE__*/function () {
  /**
   * @param {object} params
   * @param {DataCatalogEntry} [params.catalogEntry]
   *
   * @constructor
   */
  function NavTags(params) {
    _classCallCheck(this, NavTags);
    var self = this;
    self.hasErrors = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(true);
    self.currentTags = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.allTags = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.catalogEntry = params.catalogEntry;
    self.overflowEllipsis = params.overflowEllipsis;
    self.readOnly = !window.USER_HAS_METADATA_WRITE_PERM || !!params.readOnly || window.HAS_READ_ONLY_CATALOG;
    self.getSelectizeTags = function (query, callback) {
      callback(jquery__WEBPACK_IMPORTED_MODULE_0___default().map(self.allTags(), function (tag) {
        return {
          value: tag,
          text: tag
        };
      }));
    };
    self.loadTags();
    self.refreshSub = utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe('data.catalog.entry.refreshed', function (details) {
      if (details.entry === self.catalogEntry) {
        self.loadTags();
      }
    });
  }
  return _createClass(NavTags, [{
    key: "dispose",
    value: function dispose() {
      var self = this;
      self.refreshSub.remove();
    }
  }, {
    key: "loadTags",
    value: function loadTags() {
      var self = this;
      self.loading(true);
      self.hasErrors(false);
      var currentTagsPromise = knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.catalogEntry).getNavigatorMeta().then(function (navigatorMeta) {
        self.currentTags(navigatorMeta && navigatorMeta.tags || []);
      })["catch"](function () {
        self.hasErrors(true);
      });
      var allTagsPromise = catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__["default"].getAllNavigatorTags({
        silenceErrors: true
      }).then(function (tagList) {
        self.allTags(Object.keys(tagList));
      })["catch"](function () {
        self.allTags([]);
      });
      Promise.all([currentTagsPromise, allTagsPromise])["finally"](function () {
        self.loading(false);
      });
    }
  }, {
    key: "saveTags",
    value: function saveTags(value) {
      var self = this;
      var newTags = value.length > 0 ? value.split(',') : [];
      var tagsToRemove = [];
      var tagsToAdd = [];
      var tagIndex = {};
      self.currentTags().forEach(function (tag) {
        tagIndex[tag] = false;
      });
      newTags.forEach(function (newTag) {
        if (typeof tagIndex[newTag] !== 'undefined') {
          tagIndex[newTag] = true;
        } else {
          tagsToAdd.push(newTag);
        }
      });
      Object.keys(tagIndex).forEach(function (oldTag) {
        if (!tagIndex[oldTag]) {
          tagsToRemove.push(oldTag);
        }
      });
      self.loading(true);
      self.hasErrors(false);
      var addTagsPromise = tagsToAdd.length > 0 ? knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.catalogEntry).addNavigatorTags(tagsToAdd) : Promise.resolve();
      var deleteTagsPromise = tagsToRemove.length > 0 ? knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.catalogEntry).deleteNavigatorTags(tagsToRemove) : Promise.resolve();
      Promise.all([addTagsPromise, deleteTagsPromise]).then(function () {
        if (tagsToAdd.length || tagsToRemove.length) {
          catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__["default"].updateAllNavigatorTags(tagsToAdd, tagsToRemove);
          knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(self.catalogEntry).save();
        }
        self.loadTags();
      })["catch"](function () {
        self.hasErrors(true);
      })["finally"](function () {
        self.loading(false);
      });
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, NavTags, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.pollingCatalogEntriesList.js":
/*!***********************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.pollingCatalogEntriesList.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _ko_catalogEntriesList__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ko.catalogEntriesList */ "./desktop/core/src/desktop/js/ko/components/ko.catalogEntriesList.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! catalog/dataCatalog */ "./desktop/core/src/desktop/js/catalog/dataCatalog.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.





var NAME = 'polling-catalog-entries-list';
var TEMPLATE = "\n  <div>\n    <!-- ko hueSpinner: { spin: !catalogEntryExists(), inline: true } --><!-- /ko -->\n    <!-- ko if: catalogEntryExists -->\n      <!-- ko component: { name: 'catalog-entries-list', params: {\n        catalogEntry: catalogEntry,\n        selectedEntries: selectedEntries,\n        editableDescriptions: editableDescriptions,\n        contextPopoverEnabled: contextPopoverEnabled,\n        onSampleClick: onSampleClick,\n        refreshSampleInterval: refreshSampleInterval\n      }} --><!-- /ko -->\n    <!-- /ko -->\n  </div>\n";
var PollingCatalogEntriesList = /*#__PURE__*/function () {
  /**
   * This is the same as the 'catalog-entries-list' component with the difference that this
   * one waits until a catalog entry exists.
   *
   * Example usage:
   *
   * <div data-bind="component: { name: 'polling-catalog-entries-list', params: {
   *   sourceType: sourceType,
   *   namespace: ko.observable({ id: 'default' }),
   *   compute: ko.observable({ id: 'default' }),
   *   path: ko.observable('default.foo'),
   *   refreshSampleInterval: 3000
   * }}"></div>
   *
   * @param params
   * @constructor
   */

  function PollingCatalogEntriesList(params) {
    _classCallCheck(this, PollingCatalogEntriesList);
    var self = this;
    self.selectedEntries = params.selectedEntries;
    self.editableDescriptions = params.editableDescriptions;
    self.contextPopoverEnabled = params.contextPopoverEnabled;
    self.onSampleClick = params.onSampleClick;
    self.sourceType = params.sourceType;
    self.namespace = params.namespace;
    self.compute = params.compute;
    self.path = params.path;
    self.refreshSampleInterval = params.refreshSampleInterval;
    self.pollTimeout = -1;
    self.pollCount = 0;
    self.disposals = [];
    self.lastPollSourceMetaPromise = undefined;
    self.catalogEntryExists = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.catalogEntry = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.intialize();
    if (knockout__WEBPACK_IMPORTED_MODULE_0__.isObservable(self.path)) {
      var pathSub = self.path.subscribe(function (newValue) {
        if (newValue) {
          self.intialize();
        }
      });
      self.disposals.push(function () {
        pathSub.dispose();
      });
    }
  }
  return _createClass(PollingCatalogEntriesList, [{
    key: "pollForSourceMeta",
    value: function pollForSourceMeta() {
      var self = this;
      window.clearTimeout(self.pollTimeout);
      var pollInternal = function pollInternal() {
        self.pollCount++;
        if (self.catalogEntry()) {
          self.lastPollSourceMetaPromise = self.catalogEntry().getSourceMeta({
            silenceErrors: true,
            refreshCache: self.pollCount > 0,
            cancellable: true
          }).then(function (sourceMeta) {
            if (sourceMeta.notFound) {
              self.pollForSourceMeta();
            } else {
              self.catalogEntryExists(true);
            }
          })["catch"](function () {
            self.pollForSourceMeta();
          });
        }
      };
      if (self.pollCount === 0) {
        pollInternal();
      } else {
        self.pollTimeout = window.setTimeout(pollInternal, Math.min(1000 * self.pollCount, 3000));
      }
    }
  }, {
    key: "intialize",
    value: function intialize() {
      var self = this;
      self.pollCount = 0;
      window.clearTimeout(self.pollTimeout);
      self.catalogEntryExists(false);
      if (self.lastPollSourceMetaPromise && self.lastPollSourceMetaPromise.cancel) {
        self.lastPollSourceMetaPromise.cancel();
      }
      catalog_dataCatalog__WEBPACK_IMPORTED_MODULE_3__["default"].getEntry({
        namespace: knockout__WEBPACK_IMPORTED_MODULE_0__.unwrap(self.namespace),
        compute: knockout__WEBPACK_IMPORTED_MODULE_0__.unwrap(self.compute),
        connector: {
          id: knockout__WEBPACK_IMPORTED_MODULE_0__.unwrap(self.sourceType)
        },
        // TODO: Use connectors in polling catalog entries list
        path: knockout__WEBPACK_IMPORTED_MODULE_0__.unwrap(self.path)
      }).then(function (catalogEntry) {
        self.catalogEntry(catalogEntry);
        self.pollForSourceMeta();
      });
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      window.clearTimeout(self.pollTimeout);
      if (self.lastPollSourceMetaPromise && self.lastPollSourceMetaPromise.cancel) {
        self.lastPollSourceMetaPromise.cancel();
      }
      while (self.disposals.length) {
        self.disposals.pop()();
      }
    }
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent(NAME, PollingCatalogEntriesList, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.quickQueryAction.js":
/*!**************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.quickQueryAction.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.






var NAME = 'quick-query-action';

// prettier-ignore
var TEMPLATE = "\n<div style=\"display: inline-block; margin-left: 20px; margin-top: 5px;\">\n  <button class=\"btn btn-mini disable-feedback\" data-bind=\"click: showQuickQuery\">\n    <i class=\"fa fa-play fa-fw\"></i> ".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Quick Query'), "\n  </button>\n</div>\n");
var QuickQueryAction = /*#__PURE__*/function (_DisposableComponent) {
  function QuickQueryAction() {
    _classCallCheck(this, QuickQueryAction);
    return _callSuper(this, QuickQueryAction, arguments);
  }
  _inherits(QuickQueryAction, _DisposableComponent);
  return _createClass(QuickQueryAction, [{
    key: "showQuickQuery",
    value: function showQuickQuery(data, event) {
      var $source = jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target);
      var offset = $source.offset();
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish('context.popover.show', {
        data: {
          type: 'quickQuery'
        },
        orientation: 'bottom',
        pinEnabled: false,
        source: {
          left: offset.left,
          top: offset.top,
          right: offset.left + $source.outerWidth(),
          bottom: offset.top + $source.outerHeight()
        }
      });
    }
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_2__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerComponent(NAME, QuickQueryAction, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.sentryPrivileges.js":
/*!**************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.sentryPrivileges.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! knockout.mapping */ "./node_modules/knockout.mapping/knockout.mapping.js");
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(knockout_mapping__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! reactComponents/AlertComponent/events */ "./desktop/core/src/desktop/js/reactComponents/AlertComponent/events.ts");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var utils_string_UUID__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! utils/string/UUID */ "./desktop/core/src/desktop/js/utils/string/UUID.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var NAME = 'hue-sentry-privileges';
var TEMPLATE = "\n  <script type=\"text/html\" id=\"sentry-privileges-component-role\">\n    <div class=\"acl-block-title\">\n      <i class=\"fa fa-cube muted\"></i> <a class=\"pointer\" data-bind=\"click: function(){  $parents[0].showRole($data); }\"><span data-bind=\"text: name\"></span></a>\n    </div>\n    <div data-bind=\"template: { name: 'sentry-privileges-component-privilege', foreach: privilegesForView }\"></div>\n    <div class=\"acl-block acl-actions\">\n      <span class=\"pointer\" data-bind=\"visible: privilegesForViewTo() < privileges().length, click: function(){ privilegesForViewTo(privilegesForViewTo() + 50) }\" title=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Show 50 more...'), "\"><i class=\"fa fa-ellipsis-h\"></i></span>\n      <span class=\"pointer\" data-bind=\"click: addPrivilege, visible: $parents[0].isSentryAdmin && !$parents[0].readOnly\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Add privilege'), "\"><i class=\"fa fa-plus\"></i></span>\n      <span class=\"pointer\" data-bind=\"click: function() { $parents[0].listSentryPrivilegesByAuthorizable() }, visible: privilegesChanged().length > 0\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Undo'), "\"> &nbsp; <i class=\"fa fa-undo\"></i></span>\n      <span class=\"pointer\" data-bind=\"click: function() { $parents[0].deletePrivilegeModal($data) }, visible: privilegesChanged().length > 0\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Save'), "\"> &nbsp; <i class=\"fa fa-save\"></i></span>\n    </div>\n  </script>\n\n  <script type=\"text/html\" id=\"sentry-privileges-component-privilege\">\n    <div data-bind=\"visible: status() != 'deleted' && status() != 'alreadydeleted'\" class=\"acl-block acl-block-airy\">\n      <!-- ko if: editing -->\n      <div class=\"pull-right privilege-actions\" data-bind=\"visible: (grantOption() || $parents[1].isSentryAdmin) && !$parents[1].readOnly\">\n        <a class=\"pointer\" style=\"margin-right: 4px\" data-bind=\"click: function() { if (editing()) { editing(false); }}\"><i class=\"fa fa-eye\"></i></a>\n        <a class=\"pointer\" style=\"margin-right: 4px\" data-bind=\"click: remove\"><i class=\"fa fa-times\"></i></a>\n      </div>\n    \n      <div class=\"inline-block\" style=\"vertical-align: middle\">\n        <a class=\"pointer\" style=\"padding-top: 4px\" data-bind=\"click: function(){ privilegeType('db'); action($parents[1].availableActions(privilegeScope())[0]) }\">\n          <i class=\"fa fa-fw fa-1halfx muted\" data-bind=\"css: {'fa-circle-o': privilegeType() != 'db' , 'fa-check-circle-o': privilegeType() == 'db'}\"></i>\n        </a>\n      </div>\n      <input type=\"text\" data-bind=\"hiveChooser: $data.path, enable: privilegeType() == 'db', apiHelperUser: '").concat(window.LOGGED_USERNAME, "', apiHelperType: 'hive'\" placeholder=\"dbName.tableName <CTRL+SPACE>\">\n    \n      <div class=\"inline-block\" style=\"vertical-align: middle\">\n        <a class=\"pointer\" style=\"padding-top: 4px\" data-bind=\"click: function(){ privilegeType('uri'); action('ALL'); }\">\n          <i class=\"fa fa-fw fa-1halfx muted\" data-bind=\"css: {'fa-circle-o': privilegeType() != 'uri' , 'fa-check-circle-o': privilegeType() == 'uri'}\"></i>\n        </a>\n      </div>\n      <input type=\"text\" data-bind=\"filechooser: $data.URI, enable: privilegeType() == 'uri', valueUpdate: 'afterkeydown'\" placeholder=\"URI\">\n    \n      <select data-bind=\"options: $parents[1].availableActions(privilegeScope()), value: $data.action, enable: (privilegeType() == 'db')\" style=\"width: 100px; margin-bottom: 0\"></select>\n    \n      <div class=\"margin-top-10\">\n        <label class=\"checkbox pull-left\"><input type=\"checkbox\" data-bind=\"checked: grantOption\"> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('With grant'), "</label>\n        <div class=\"inline-block margin-left-10\" style=\"margin-top: 6px\">\n          <a class=\"pointer showAdvanced\" data-bind=\"click: function(){ showAdvanced(true); }, visible: !showAdvanced()\"><i class=\"fa fa-cog\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Show advanced'), "</a>\n          <a class=\"pointer showAdvanced\" data-bind=\"click: function(){ showAdvanced(false); }, visible: showAdvanced()\"><i class=\"fa fa-cog\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Hide advanced'), "</a>\n        </div>\n        <div class=\"clearfix\"></div>\n      </div>\n    \n      <div class=\"acl-block-section\" data-bind=\"visible: showAdvanced\" style=\"margin-top: 0\">\n        ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Server'), " <input type=\"text\" data-bind=\"value: serverName\" placeholder=\"serverName\" style=\"margin-left: 6px\">\n      </div>\n      <!-- /ko -->\n  \n      <!-- ko ifnot: editing -->\n      <div class=\"pull-right privilege-actions\" data-bind=\"visible: (grantOption() || $parents[1].isSentryAdmin) && !$parents[1].readOnly\">\n        <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Edit this privilege'), "\" class=\"pointer\" style=\"margin-right: 4px\" data-bind=\"visible: $parents[1].isSentryAdmin, click: function() { if (! editing()) { editing(true); }}\"><i class=\"fa fa-pencil\"></i></a>\n        <a title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Delete this privilege'), "\" class=\"pointer\" style=\"margin-right: 4px\" data-bind=\"visible: $parents[1].isSentryAdmin, click: remove\"><i class=\"fa fa-times\"></i></a>\n      </div>\n  \n      <span class=\"muted\" data-bind=\"text: privilegeScope, attr: {title: moment(timestamp()).fromNow()}\"></span>\n      <!-- ko if: grantOption -->\n        <i class=\"fa fa-unlock muted\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('With grant option'), "\"></i>\n      <!-- /ko -->\n      <span data-bind=\"visible: metastorePath() != '' && privilegeType() == 'db'\">\n        <a data-bind=\"hueLink: metastorePath()\" class=\"muted\" style=\"margin-left: 4px\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Open in Table Browser...'), "\"><i class=\"fa fa-external-link\"></i></a>\n      </span>\n      <br/>\n  \n      server=<span data-bind=\"text: serverName\"></span>\n  \n      <!-- ko if: privilegeType() == 'db' -->\n      <span data-bind=\"visible: dbName\">\n        <i class=\"fa fa-long-arrow-right\"></i> db=<a class=\"pointer\" data-bind=\"click: function(){ $parents[1].linkToBrowse(dbName()) }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Browse db privileges'), "\"><span data-bind=\"text: dbName\"></span></a>\n      </span>\n      <span data-bind=\"visible: tableName\">\n        <i class=\"fa fa-long-arrow-right\"></i> table=<a class=\"pointer\" data-bind=\"click: function(){ $parents[1].linkToBrowse(dbName() + '.' + tableName()) }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Browse table privileges'), "\"><span data-bind=\"text: tableName\"></span></a>\n      </span>\n      <span data-bind=\"visible: columnName\">\n        <i class=\"fa fa-long-arrow-right\"></i> column=<a class=\"pointer\" data-bind=\"click: function(){ $parents[1].linkToBrowse(dbName() + '.' + tableName() + '.' + columnName()) }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Browse column privileges'), "\"><span data-bind=\"text: columnName\"></span></a>\n      </span>\n      <!-- /ko -->\n  \n      <!-- ko if: privilegeType() == 'uri' -->\n      <i class=\"fa fa-long-arrow-right\"></i> <i class=\"fa fa-file-o\"></i> <i class=\"fa fa-long-arrow-right\"></i> <a data-bind=\"hueLink: '/filebrowser/view=/' + URI().split('/')[3]\"><span data-bind=\"text: URI\"></span></a>\n      <!-- /ko -->\n  \n      <i class=\"fa fa-long-arrow-right\"></i> action=<span data-bind=\"text: action\"></span>\n      <!-- /ko -->\n    </div>\n  </script>\n\n  <!-- ko hueSpinner: { spin: isLoadingPrivileges, inline: true } --><!-- /ko -->\n  <!-- ko if: roles().length -->\n  <div data-bind=\"template: { name: 'sentry-privileges-component-role', foreach: roles }\"></div>\n  <!-- /ko -->\n  <!-- ko ifnot: roles().length -->\n  <em>").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('No privileges found for the selected object.'), "</em>\n  <!-- /ko -->\n  \n  <div id=\"sentryPrivilegesComponentDeletePrivilegeModal\" class=\"modal hide fade in\" role=\"dialog\">\n    <div class=\"modal-header\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n      <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Confirm the deletion?'), "</h2>\n    </div>\n    <div class=\"modal-body\">\n      ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Sentry will recursively delete the SERVER or DATABASE privileges you marked for deletion.'), "\n    </div>\n    <div class=\"modal-footer\">\n      <button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Cancel'), "</button>\n      <button data-loading-text=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Deleting...'), "\" class=\"btn btn-danger\" data-bind=\"click: function() { roleToUpdate().savePrivileges(roleToUpdate()); }\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_6__["default"])('Yes, delete'), "</button>\n    </div>\n  </div>\n");
var Privilege = /*#__PURE__*/_createClass(function Privilege(vm, privilege) {
  _classCallCheck(this, Privilege);
  var self = this;
  self.id = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.id != 'undefined' && privilege.id != null ? privilege.id : '');
  self.roleName = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.roleName != 'undefined' && privilege.roleName != null ? privilege.roleName : '');
  self.status = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.status != 'undefined' && privilege.status != null ? privilege.status : '');
  self.editing = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.editing != 'undefined' && privilege.editing != null ? privilege.editing : false);
  self.serverName = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.serverName != 'undefined' && privilege.serverName != null ? privilege.serverName : '');
  self.serverName.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.dbName = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.dbName != 'undefined' && privilege.dbName != null ? privilege.dbName : '');
  self.dbName.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.tableName = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.tableName != 'undefined' && privilege.tableName != null ? privilege.tableName : '');
  self.tableName.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.columnName = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.columnName != 'undefined' && privilege.columnName != null ? privilege.columnName : '');
  self.columnName.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.URI = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.URI != 'undefined' && privilege.URI != null ? privilege.URI : '');
  self.URI.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.action = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.action != 'undefined' && privilege.action != null ? privilege.action : 'SELECT');
  self.action.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });
  self.timestamp = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.timestamp != 'undefined' && privilege.timestamp != null ? privilege.timestamp : 0);
  self.grantOption = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.grantOption != 'undefined' && privilege.grantOption != null ? privilege.grantOption : false);
  self.grantOption.subscribe(function () {
    if (self.status() === '') {
      self.status('modified');
    }
  });

  // UI
  self.privilegeType = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.privilegeScope != 'undefined' && privilege.privilegeScope === 'URI' ? 'uri' : 'db');
  self.showAdvanced = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.path = knockout__WEBPACK_IMPORTED_MODULE_1__.computed({
    read: function read() {
      if (self.columnName().length > 0) {
        return self.dbName() + '.' + self.tableName() + '.' + self.columnName();
      } else if (self.tableName().length > 0) {
        return self.dbName() + '.' + self.tableName();
      } else {
        return self.dbName();
      }
    },
    write: function write(value) {
      var _parts = value.split('.');
      this.dbName(_parts[0]);
      this.tableName(_parts.length > 1 ? _parts[1] : '');
      this.columnName(_parts.length > 2 ? _parts[2] : '');
    },
    owner: self
  });
  self.metastorePath = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    if (self.columnName().length > 0) {
      return '/metastore/table/' + self.dbName() + '/' + self.tableName() + '#col=' + self.columnName();
    } else if (self.tableName().length > 0) {
      return '/metastore/table/' + self.dbName() + '/' + self.tableName();
    } else if (self.dbName().length > 0) {
      return '/metastore/tables/' + self.dbName();
    } else {
      return '';
    }
  });
  function getPrivilegeScope() {
    if (self.privilegeType() === 'uri') {
      return 'URI';
    } else if (self.columnName().length > 0) {
      return 'COLUMN';
    } else if (self.tableName().length > 0) {
      return 'TABLE';
    } else if (self.dbName().length > 0) {
      return 'DATABASE';
    } else {
      return 'SERVER';
    }
  }
  self.privilegeScope = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof privilege.privilegeScope != 'undefined' ? privilege.privilegeScope : getPrivilegeScope());
  self.privilegeType.subscribe(function () {
    self.privilegeScope(getPrivilegeScope());
  });
  self.columnName.subscribe(function () {
    self.privilegeScope(getPrivilegeScope());
  });
  self.tableName.subscribe(function () {
    self.privilegeScope(getPrivilegeScope());
  });
  self.dbName.subscribe(function () {
    self.privilegeScope(getPrivilegeScope());
  });
  self.remove = function (privilege) {
    if (privilege.status() === 'new') {
      privilege.status('alreadydeleted');
    } else {
      privilege.status('deleted');
    }
  };
});
var Role = /*#__PURE__*/_createClass(function Role(vm, role) {
  _classCallCheck(this, Role);
  var self = this;
  self.name = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(typeof role.name != 'undefined' && role.name != null ? role.name : '');
  self.name.subscribe(function (value) {
    var _found = false;
    vm.role().isEditing(false);
    knockout__WEBPACK_IMPORTED_MODULE_1__.utils.arrayForEach(vm.roles(), function (role) {
      if (role.name() === value) {
        vm.role(role);
        _found = true;
      }
    });
    if (_found) {
      vm.role().isEditing(true);
      vm.list_sentry_privileges_by_role(vm.role());
      jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('destroyTypeahead');
    }
  });
  self.selected = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.handleSelect = function () {
    self.selected(!self.selected());
  };
  self.groups = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.originalGroups = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.groups.extend({
    rateLimit: 300
  });
  self.originalGroups.extend({
    rateLimit: 300
  });
  jquery__WEBPACK_IMPORTED_MODULE_0___default().each(typeof role.groups != 'undefined' && role.groups != null ? role.groups : [], function (index, group) {
    self.groups.push(group);
    self.originalGroups.push(group);
  });
  self.privileges = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray(); // Not included in the API
  self.originalPrivileges = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray(); // Not included in the API
  self.privilegesForViewTo = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(49);
  self.showPrivileges = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.showPrivileges.subscribe(function (value) {
    var _expanded = vm.expandedRoles();
    if (value) {
      if (_expanded.indexOf(self.name()) === -1) {
        _expanded.push(self.name());
      }
    } else if (_expanded.indexOf(self.name()) > -1) {
      _expanded.splice(_expanded.indexOf(self.name()), 1);
    }
    vm.expandedRoles(_expanded);
  });
  self.showEditGroups = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.isEditing = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.isLoading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.isValid = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    return self.name().length > 0 && jquery__WEBPACK_IMPORTED_MODULE_0___default().grep(self.privileges(), function (privilege) {
      return privilege.privilegeType() === 'uri' && privilege.URI() === '';
    }).length === 0;
  });
  self.privilegesChanged = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    return jquery__WEBPACK_IMPORTED_MODULE_0___default().grep(self.privileges(), function (privilege) {
      return ['new', 'deleted', 'modified'].indexOf(privilege.status()) !== -1;
    });
  });
  self.groupsChanged = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    return !(jquery__WEBPACK_IMPORTED_MODULE_0___default()(self.groups()).not(self.originalGroups()).length === 0 && jquery__WEBPACK_IMPORTED_MODULE_0___default()(self.originalGroups()).not(self.groups()).length === 0);
  });
  self.groupsChanged.extend({
    rateLimit: 300
  });
  self.privilegesForView = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    return self.privileges().slice(0, self.privilegesForViewTo());
  });
  self.reset = function () {
    self.name('');
    self.groups.removeAll();
    self.privileges.removeAll();
    self.isEditing(false);
  };
  self.addGroup = function () {
    self.groups.push('');
  };
  self.addPrivilege = function () {
    self.privileges.push(new Privilege(vm, {
      serverName: vm.server(),
      status: 'new',
      editing: true,
      dbName: vm.db(),
      tableName: vm.table(),
      columnName: vm.column()
    }));
  };
  self.resetGroups = function () {
    self.groups.removeAll();
    jquery__WEBPACK_IMPORTED_MODULE_0___default().each(self.originalGroups(), function (index, group) {
      self.groups.push(group);
    });
  };
  self.saveGroups = function () {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.global.alerts');
    jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/security/api/hive/update_role_groups', {
      role: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON(self)
    }, function (data) {
      if (data.status === 0) {
        self.showEditGroups(false);
        self.originalGroups.removeAll();
        jquery__WEBPACK_IMPORTED_MODULE_0___default().each(self.groups(), function (index, group) {
          self.originalGroups.push(group);
        });
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
          message: data.message
        });
      }
    }).fail(function (xhr) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
        message: xhr.responseText
      });
    });
  };
  self.create = function () {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.global.alerts');
    if (self.isValid()) {
      self.isLoading(true);
      jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/security/api/hive/create_role', {
        role: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON(self)
      }, function (data) {
        if (data.status === 0) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_INFO_TOPIC, {
            message: data.message
          });
          vm.showCreateRole(false);
          self.reset();
          var _role2 = new Role(vm, data.role);
          _role2.showPrivileges(true);
          vm.originalRoles.unshift(_role2);
          vm.listSentryPrivilegesByAuthorizable();
          jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('createdRole');
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
            message: data.message
          });
        }
      }).fail(function (xhr) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
          message: xhr.responseText
        });
      }).always(function () {
        self.isLoading(false);
      });
    }
  };
  self.update = function () {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.global.alerts');
    if (self.isValid()) {
      self.isLoading(true);
      jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/security/api/hive/save_privileges', {
        role: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON(self)
      }, function (data) {
        if (data.status === 0) {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_INFO_TOPIC, {
            message: data.message
          });
          vm.showCreateRole(false);
          vm.listSentryPrivilegesByAuthorizable();
          jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('createdRole');
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
            message: data.message
          });
        }
      }).fail(function (xhr) {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
          message: xhr.responseText
        });
      }).always(function () {
        self.isLoading(false);
      });
    }
  };
  self.remove = function (role) {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.global.alerts');
    self.isLoading(true);
    jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/security/api/hive/drop_sentry_role', {
      roleName: role.name
    }, function (data) {
      if (data.status === 0) {
        vm.removeRole(role.name());
        vm.listSentryPrivilegesByAuthorizable();
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('removedRole');
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
          message: data.message
        });
      }
    }).fail(function (xhr) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
        message: xhr.responseText
      });
    }).always(function () {
      self.isLoading(false);
    });
  };
  self.savePrivileges = function (role) {
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish('hide.global.alerts');
    jquery__WEBPACK_IMPORTED_MODULE_0___default().post('/security/api/hive/save_privileges', {
      role: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON(role)
    }, function (data) {
      if (data.status === 0) {
        vm.listSentryPrivilegesByAuthorizable();
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).trigger('createdRole');
      } else {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
          message: data.message
        });
      }
    }).fail(function (xhr) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
        message: xhr.responseText
      });
    });
  };
});
var _create_authorizable_from_ko = function _create_authorizable_from_ko(server, path) {
  if (path != null) {
    var paths = path.split(/[.]/);
    return {
      server: server,
      db: paths[0] ? paths[0] : null,
      table: paths[1] ? paths[1] : null,
      column: paths[2] ? paths[2] : null
    };
  }
};
var _create_ko_privilege = function _create_ko_privilege(privilege) {
  return new Privilege(self, {
    privilegeScope: privilege.scope,
    serverName: privilege.server,
    dbName: privilege.database,
    tableName: privilege.table,
    columnName: privilege.column,
    URI: privilege.URI,
    action: privilege.action,
    timestamp: privilege.timestamp,
    roleName: privilege.roleName,
    grantOption: privilege.grantOption,
    id: (0,utils_string_UUID__WEBPACK_IMPORTED_MODULE_7__["default"])()
  });
};
var SentryPrivilegesViewModel = /*#__PURE__*/_createClass(function SentryPrivilegesViewModel(params) {
  _classCallCheck(this, SentryPrivilegesViewModel);
  var self = this;
  self.server = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.server);
  self.path = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.path);
  self.isSentryAdmin = params.isSentryAdmin;
  self.readOnly = !!params.readOnly;
  self.apiVersion = params.apiVersion || 'v1';
  self.apiType = params.apiType || 'hive';
  self.showFilter = params.showFilter;
  self.enableCreateRole = params.enableCreateRole;
  self.path.subscribe(self.listSentryPrivilegesByAuthorizable);
  self.db = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    var db = self.path().split(/[.]/)[0];
    return db ? db : null;
  });
  self.table = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    var table = self.path().split(/[.]/)[1];
    return table ? table : null;
  });
  self.column = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    var column = self.path().split(/[.]/)[2];
    return column ? column : null;
  });
  self.metastorePath = knockout__WEBPACK_IMPORTED_MODULE_1__.computed(function () {
    if (self.column()) {
      return '/metastore/table/' + self.db() + '/' + self.table() + '#col=' + self.column();
    } else if (self.table()) {
      return '/metastore/table/' + self.db() + '/' + self.table();
    } else if (self.db()) {
      return '/metastore/tables/' + self.db();
    } else {
      return '/metastore/databases';
    }
  });
  self.privileges = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.roles = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
  self.roleToUpdate = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  self.isLoadingPrivileges = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
  self.availableActions = function (scope) {
    var actions = ['SELECT', 'INSERT', 'ALL'];
    var databaseActions = ['CREATE'];
    var tableActions = ['REFRESH', 'ALTER', 'DROP'];
    switch (scope) {
      case 'SERVER':
        actions = actions.concat(databaseActions).concat(tableActions);
        break;
      case 'DATABASE':
        actions = actions.concat(databaseActions);
        break;
      case 'TABLE':
        actions = actions.concat(tableActions);
        break;
    }
    return knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray(actions.sort());
  };
  self.deletePrivilegeModal = function (role) {
    var cascadeDeletes = role.privilegesChanged().filter(function (privilege) {
      return privilege.status() === 'deleted' && (privilege.privilegeScope() === 'SERVER' || privilege.privilegeScope() === 'DATABASE');
    });
    if (cascadeDeletes.length > 0) {
      self.roleToUpdate(role);
      jquery__WEBPACK_IMPORTED_MODULE_0___default()('#sentryPrivilegesComponentDeletePrivilegeModal').modal('show');
    } else {
      role.savePrivileges(role);
    }
  };
  self.listSentryPrivilegesByAuthorizable = function () {
    self.isLoadingPrivileges(true);
    jquery__WEBPACK_IMPORTED_MODULE_0___default().ajax({
      type: 'POST',
      url: '/security/api/hive/list_sentry_privileges_by_authorizable',
      data: {
        groupName: '',
        roleSet: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON({
          all: true,
          roles: []
        }),
        authorizableHierarchy: knockout_mapping__WEBPACK_IMPORTED_MODULE_2___default().toJSON(_create_authorizable_from_ko(self.server(), self.path()))
      },
      success: function success(data) {
        if (data.status === 0) {
          self.roles([]);
          var _privileges = [];
          jquery__WEBPACK_IMPORTED_MODULE_0___default().each(data.privileges, function (index, item) {
            if (typeof window.skipList === 'undefined' || window.skipList === false) {
              var _role = null;
              self.roles().forEach(function (role) {
                if (role.name() === item.roleName) {
                  _role = role;
                }
              });
              if (_role == null) {
                var _idx = self.roles.push(new Role(self, {
                  name: item.roleName
                }));
                _role = self.roles()[_idx - 1];
              }
              var privilege = _create_ko_privilege(item);
              var privilegeCopy = _create_ko_privilege(item);
              privilegeCopy.id(privilege.id());
              _role.privileges.push(privilege);
              _role.originalPrivileges.push(privilegeCopy);
              _privileges.push(privilege);
            }
          });
          if (typeof window.skipList === 'undefined' || window.skipList === false) {
            self.privileges(_privileges);
          }
        } else {
          utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
            message: data.message
          });
        }
      }
    }).fail(function (xhr) {
      utils_huePubSub__WEBPACK_IMPORTED_MODULE_5__["default"].publish(reactComponents_AlertComponent_events__WEBPACK_IMPORTED_MODULE_4__.GLOBAL_ERROR_TOPIC, {
        message: xhr.responseText
      });
    }).always(function () {
      self.isLoadingPrivileges(false);
    });
  };
  self.linkToBrowse = function (path) {
    // TODO: implement smart linking
  };
  self.listSentryPrivilegesByAuthorizable();
});
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerComponent(NAME, SentryPrivilegesViewModel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.sessionAuthModal.js":
/*!**************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.sessionAuthModal.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SHOWN_EVENT": () => (/* binding */ SHOWN_EVENT),
/* harmony export */   "SHOW_EVENT": () => (/* binding */ SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! apps/editor/execution/sessionManager */ "./desktop/core/src/desktop/js/apps/editor/execution/sessionManager.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var SHOW_EVENT = 'show.session.auth.modal';
var SHOWN_EVENT = 'session.auth.modal.shown';
var TEMPLATE = "\n<div class=\"modal-header\">\n  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n  <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Connect to the data source'), "</h2>\n</div>\n<div class=\"modal-body\">\n  <!-- ko if: authSessionMessage -->\n    <div class=\"row-fluid\">\n      <div class=\"alert-warning\">\n        <span data-bind=\"text: authSessionMessage\"></span>\n      </div>\n    </div>\n  <!-- /ko -->\n  <div class=\"row-fluid\">\n    <div class=\"span6\">\n      <div class=\"input-prepend\">\n        <span class=\"add-on muted\"><i class=\"fa fa-user\"></i></span>\n        <input name=\"username\" data-test=\"usernameInput\" type=\"text\" data-bind=\"textInput: authSessionUsername\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Username'), "\"/>\n      </div>\n    </div>\n    <div class=\"span6\">\n      <div class=\"input-prepend\">\n        <span class=\"add-on muted\"><i class=\"fa fa-lock\"></i></span>\n        <input name=\"password\" data-test=\"passwordInput\" type=\"password\" data-bind=\"textInput: authSessionPassword\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Password'), "\"/>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"modal-footer\">\n  <a class=\"btn\" data-dismiss=\"modal\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Cancel'), "</a>\n  <a class=\"btn btn-primary disable-feedback\" data-bind=\"click: connect, css: { 'disabled': loading }\"><i class='fa fa-spinner fa-spin' data-bind=\"visible: loading\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_4__["default"])('Connect'), "</a>\n</div>\n");
var SessionAuthModal = /*#__PURE__*/function () {
  function SessionAuthModal(params, $modal) {
    _classCallCheck(this, SessionAuthModal);
    this.pending = true;
    this.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    this.reject = params.reject;
    this.resolve = params.resolve;
    this.session = params.session;
    this.authSessionMessage = params.message;
    this.$modal = $modal;
    var username = '';
    this.session.properties.some(function (property) {
      if (property.name === 'user') {
        username = property.value;
      }
    });
    this.authSessionUsername = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(username);
    this.authSessionPassword = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
  }
  return _createClass(SessionAuthModal, [{
    key: "connect",
    value: function () {
      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var properties, session;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading(true);
              properties = this.session.properties.filter(function (property) {
                return property.name !== 'user' && property.name !== 'password';
              });
              properties.push({
                name: 'user',
                value: this.authSessionUsername()
              });
              properties.push({
                name: 'password',
                value: this.authSessionPassword()
              });
              _context.prev = 4;
              _context.next = 7;
              return apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_5__["default"].createDetachedSession({
                type: this.session.type,
                properties: properties,
                preventAuthModal: true
              });
            case 7:
              session = _context.sent;
              // The modal could be closed before creation
              if (this.pending) {
                this.resolve(session);
              }
              this.pending = false;
              this.$modal.modal('hide');
              _context.next = 16;
              break;
            case 13:
              _context.prev = 13;
              _context.t0 = _context["catch"](4);
              if (_context.t0 && _context.t0.auth) {
                this.authSessionMessage(_context.t0.message);
              }
            case 16:
              this.loading(false);
            case 17:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[4, 13]]);
      }));
      function connect() {
        return _connect.apply(this, arguments);
      }
      return connect;
    }()
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_2__["default"].registerComponent('session-auth-modal', undefined, TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(SHOW_EVENT, function (sessionAuthParams) {
    var $sessionAuthModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#sessionAuthModal');
    if ($sessionAuthModal.length > 0) {
      knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($sessionAuthModal[0]);
      $sessionAuthModal.remove();
    }
    $sessionAuthModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="sessionAuthModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'session-auth-modal\', params: params }" data-keyboard="true" class="modal hide fade" tabindex="-1"></div>');
    jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($sessionAuthModal);
    var model = new SessionAuthModal(sessionAuthParams, $sessionAuthModal);
    var data = {
      params: model,
      descendantsComplete: function descendantsComplete() {
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_3__["default"].publish(SHOWN_EVENT, $sessionAuthModal[0]);
      }
    };
    knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $sessionAuthModal[0]);
    $sessionAuthModal.modal('show');
    $sessionAuthModal.on('hidden', function () {
      if (model.pending) {
        model.reject();
        model.pending = false;
      }
    });
  });
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.sessionPanel.js":
/*!**********************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.sessionPanel.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME),
/* harmony export */   "SESSION_PANEL_SHOW_EVENT": () => (/* binding */ SESSION_PANEL_SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout.mapping */ "./node_modules/knockout.mapping/knockout.mapping.js");
/* harmony import */ var knockout_mapping__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout_mapping__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _bindings_ko_slideVisible__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../bindings/ko.slideVisible */ "./desktop/core/src/desktop/js/ko/bindings/ko.slideVisible.js");
/* harmony import */ var _bindings_ko_toggle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../bindings/ko.toggle */ "./desktop/core/src/desktop/js/ko/bindings/ko.toggle.js");
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! apps/editor/execution/sessionManager */ "./desktop/core/src/desktop/js/apps/editor/execution/sessionManager.ts");
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.










var NAME = 'session-panel';
var SESSION_PANEL_SHOW_EVENT = 'session.panel.show';
var TEMPLATE = "\n<div class=\"session-panel\" data-test=\"".concat(NAME, "\" data-bind=\"slideVisible: visible\">\n  <div class=\"margin-top-10 padding-left-10 padding-right-10\">\n    <h4 class=\"margin-bottom-10\"><i class=\"fa fa-cogs\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Sessions'), "</h4>\n    <div class=\"session-panel-content\">\n      <!-- ko ifnot: sessions().length -->\n      ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('There are currently no information about the sessions.'), "\n      <!-- /ko -->\n      \n      <!-- ko if: sessions().length -->\n      <div class=\"row-fluid\">\n        <div class=\"span11\">\n          <form class=\"form-horizontal session-config\">\n            <fieldset>\n              <!-- ko foreach: sessions -->\n              <div>\n                <h4 style=\"clear:left; display: inline-block\">\n                  <span data-bind=\"text: session.type\"></span>\n                  <!-- ko if: typeof session.session_id != 'undefined' && session.session_id -->\n                    <span data-bind=\"text: session.session_id\"></span>\n                  <!-- /ko -->\n                </h4>\n                <div class=\"session-actions\">\n                  <a class=\"inactive-action pointer\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Re-create session'), "\" rel=\"tooltip\" data-bind=\"click: $parent.restartSession.bind($parent)\">\n                    <i class=\"fa fa-refresh\" data-bind=\"css: { 'fa-spin': loading }\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Re-create'), "\n                  </a>\n                  <a class=\"inactive-action pointer margin-left-10\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Close session'), "\" rel=\"tooltip\" data-bind=\"click: $parent.closeSession.bind($parent)\">\n                    <i class=\"fa fa-times\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Close'), "\n                  </a>\n                  <!-- ko if: window.USE_DEFAULT_CONFIGURATION -->\n                    <a class=\"inactive-action pointer margin-left-10\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Save session settings as default'), "\" rel=\"tooltip\" data-bind=\"click: saveDefaultUserProperties\"><i class=\"fa fa-save\"></i> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_7__["default"])('Set as default settings'), "</a>\n                  <!-- /ko -->\n                  <!-- ko if: session.type === 'impala' && typeof session.http_addr != 'undefined' -->\n                    <a class=\"margin-left-10\" data-bind=\"attr: { 'href': session.http_addr }\" target=\"_blank\">\n                      <span data-bind=\"text: session.http_addr.replace(/^(https?):\\/\\//, '')\"></span> <i class=\"fa fa-external-link\"></i>\n                    </a>\n                  <!-- /ko -->\n                </div>\n                <!-- ko if: window.USE_DEFAULT_CONFIGURATION -->\n                <div style=\"width:100%;\">\n                  <!-- ko component: { name: 'property-selector', params: { properties: properties } } --><!-- /ko -->\n                </div>\n                <!-- /ko -->\n              </div>\n              <!-- /ko -->\n            </fieldset>\n          </form>\n        </div>\n      </div>\n      <!-- /ko -->\n    </div>\n    <a class=\"pointer demi-modal-chevron\" style=\"position: absolute; bottom: 0\" data-bind=\"toggle: visible\"><i class=\"fa fa-chevron-up\"></i></a>\n  </div>\n</div>\n");
var EditableProperty = /*#__PURE__*/function () {
  function EditableProperty(property) {
    _classCallCheck(this, EditableProperty);
    this.defaultValue = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray(property.defaultValue);
    this.help_text = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(property.help_text);
    this.key = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(property.key);
    this.multiple = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(property.multiple);
    this.nice_name = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(property.nice_name);
    this.type = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(property.type);
    this.value = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray(property.value);
  }
  return _createClass(EditableProperty, [{
    key: "getClean",
    value: function getClean() {
      return knockout_mapping__WEBPACK_IMPORTED_MODULE_1___default().toJS(this);
    }
  }]);
}();
var EditableSession = /*#__PURE__*/function () {
  function EditableSession(session) {
    _classCallCheck(this, EditableSession);
    this.session = session;
    this.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    this.properties = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray(this.session.properties.map(function (property) {
      return new EditableProperty(property);
    }));
  }
  return _createClass(EditableSession, [{
    key: "saveDefaultUserProperties",
    value: function saveDefaultUserProperties() {
      _api_apiHelper__WEBPACK_IMPORTED_MODULE_4__["default"].saveConfiguration({
        app: this.session.type,
        properties: this.properties().map(function (property) {
          return property.getClean();
        }),
        userId: window.LOGGED_USER_ID
      });
    }
  }]);
}();
var SessionPanel = /*#__PURE__*/function () {
  function SessionPanel() {
    var _this = this;
    _classCallCheck(this, SessionPanel);
    this.visible = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    this.sessions = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
    this.activeTypeFilter = undefined;
    utils_huePubSub__WEBPACK_IMPORTED_MODULE_6__["default"].subscribe(SESSION_PANEL_SHOW_EVENT, function (type) {
      return _this.showSessions(type);
    });
  }

  /**
   *
   * @param {String} typeFilter
   * @return {Promise<void>}
   */
  return _createClass(SessionPanel, [{
    key: "showSessions",
    value: (function () {
      var _showSessions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(typeFilter) {
        var sessions;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.activeTypeFilter = typeFilter;
              sessions = [];
              if (!(typeFilter && apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__["default"].hasSession(typeFilter))) {
                _context.next = 10;
                break;
              }
              _context.t0 = sessions;
              _context.next = 6;
              return apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__["default"].getSession({
                type: typeFilter
              });
            case 6:
              _context.t1 = _context.sent;
              _context.t0.push.call(_context.t0, _context.t1);
              _context.next = 13;
              break;
            case 10:
              _context.next = 12;
              return apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__["default"].getAllSessions();
            case 12:
              sessions = _context.sent;
            case 13:
              this.sessions(sessions.map(function (session) {
                return new EditableSession(session);
              }).sort(function (a, b) {
                return a.session.type.localeCompare(b.session.type);
              }));
              this.visible(true);
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function showSessions(_x) {
        return _showSessions.apply(this, arguments);
      }
      return showSessions;
    }()
    /**
     *
     * @param {EditableSession} editableSession
     * @return {Promise<void>}
     */
    )
  }, {
    key: "restartSession",
    value: (function () {
      var _restartSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(editableSession) {
        var session;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              editableSession.loading(true);
              session = editableSession.session; // Apply any changed properties
              session.properties = editableSession.properties().map(function (editableProperty) {
                return editableProperty.getClean();
              });
              _context2.next = 5;
              return apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__["default"].restartSession(session);
            case 5:
              _context2.next = 7;
              return this.showSessions(this.activeTypeFilter);
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function restartSession(_x2) {
        return _restartSession.apply(this, arguments);
      }
      return restartSession;
    }()
    /**
     *
     * @param {EditableSession} editableSession
     * @return {Promise<void>}
     */
    )
  }, {
    key: "closeSession",
    value: (function () {
      var _closeSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(editableSession) {
        var session;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              editableSession.loading(true);
              session = editableSession.session;
              _context3.next = 4;
              return apps_editor_execution_sessionManager__WEBPACK_IMPORTED_MODULE_8__["default"].closeSession(session);
            case 4:
              _context3.next = 6;
              return this.showSessions(this.activeTypeFilter);
            case 6:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function closeSession(_x3) {
        return _closeSession.apply(this, arguments);
      }
      return closeSession;
    }())
  }, {
    key: "saveDefaultUserProperties",
    value: function saveDefaultUserProperties(session) {}
  }]);
}();
_componentUtils__WEBPACK_IMPORTED_MODULE_5__["default"].registerComponent(NAME, SessionPanel, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.shareGistModal.js":
/*!************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.shareGistModal.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "SHOWN_EVENT": () => (/* binding */ SHOWN_EVENT),
/* harmony export */   "SHOW_EVENT": () => (/* binding */ SHOW_EVENT)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _DisposableComponent__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./DisposableComponent */ "./desktop/core/src/desktop/js/ko/components/DisposableComponent.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }
function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }
function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }
function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }
function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.








var SHOW_EVENT = 'show.share.gist.modal';
var SHOWN_EVENT = 'share.gist.modal.shown';

// prettier-ignore
var TEMPLATE = "\n  <div class=\"modal-header\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Close'), "\"><span aria-hidden=\"true\">&times;</span></button>\n    <h2 class=\"modal-title\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Shareable link'), "</h2>\n  </div>\n  <div class=\"modal-body\">\n    <div class=\"row-fluid\">\n      <div class=\"input-append\">\n        <form autocomplete=\"off\">\n          <input id=\"gistLink\" style=\"width: 510px\" ").concat(window.PREVENT_AUTOFILL_INPUT_ATTRS, " onfocus=\"this.select()\" data-bind=\"value: link\" type=\"text\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Link'), "\" readonly=\"readonly\"/>\n          <button class=\"btn\" type=\"button\" data-dismiss=\"modal\" data-clipboard-target=\"#gistLink\" data-bind=\"clipboard\"><i class=\"fa fa-clipboard\"></i></button>\n        </form>\n      </div>\n    </div>\n    <!-- ko if: window.SHARE_TO_SLACK -->\n    <label class=\"checkbox\"><input type=\"checkbox\" data-bind=\"checked: showSlackSection\"> ").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Share to Slack'), " </input></label>\n    <!-- ko if: showSlackSection -->\n    <form class=\"form-horizontal\">\n      <div class=\"control-group\">\n        <label class=\"control-label\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Message'), "</label>\n        <div class=\"controls\">\n          <input type=\"text\" style=\"width: 245px\" data-bind=\"value: messageDescription, valueUpdate:'afterkeydown'\" placeholder=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('(Optional)'), "\"/>\n        </div>\n      </div>\n      <div class=\"control-group\">\n        <label class=\"control-label\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Channel'), "</label>\n        <div class=\"controls\">\n          <select class=\"input-xlarge\" data-bind=\"options: channels, optionsCaption: 'Choose...', value: selectedChannel\"></select>\n          <button class=\"btn\" type=\"button\" data-dismiss=\"modal\" data-bind=\"click: postMessage\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Send'), "</button>\n        </div>\n      </div>\n    </form>\n  <!-- /ko -->\n  <!-- /ko -->\n  </div>\n  <div class=\"modal-footer\">\n    <a class=\"btn\" data-dismiss=\"modal\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Close'), "</a>\n  </div>\n");
var ShareGistModal = /*#__PURE__*/function (_DisposableComponent) {
  function ShareGistModal(params) {
    var _this;
    _classCallCheck(this, ShareGistModal);
    _this = _callSuper(this, ShareGistModal);
    _this.showSlackSection = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    _this.link = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.link);
    _this.channels = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray(params.channels);
    _this.selectedChannel = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('');
    _this.messageDescription = knockout__WEBPACK_IMPORTED_MODULE_1__.observable('');
    return _this;
  }
  _inherits(ShareGistModal, _DisposableComponent);
  return _createClass(ShareGistModal, [{
    key: "postMessage",
    value: function () {
      var _postMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.prev = 0;
              _context.next = 3;
              return _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].sendSlackMessageAsync({
                channel: this.selectedChannel,
                message: this.messageDescription() + '\n' + this.link()
              });
            case 3:
              _context.next = 9;
              break;
            case 5:
              _context.prev = 5;
              _context.t0 = _context["catch"](0);
              console.warn('Failed posting message in Slack channel');
              console.error(_context.t0);
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[0, 5]]);
      }));
      function postMessage() {
        return _postMessage.apply(this, arguments);
      }
      return postMessage;
    }()
  }]);
}(_DisposableComponent__WEBPACK_IMPORTED_MODULE_6__["default"]);
_componentUtils__WEBPACK_IMPORTED_MODULE_3__["default"].registerComponent('share-gist-modal', undefined, TEMPLATE).then(function () {
  utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].subscribe(SHOW_EVENT, /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(params) {
      var $shareGistModal, data;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            $shareGistModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('#shareGistModal');
            if ($shareGistModal.length) {
              knockout__WEBPACK_IMPORTED_MODULE_1__.cleanNode($shareGistModal[0]);
              $shareGistModal.remove();
            }
            $shareGistModal = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div id="shareGistModal" data-bind="descendantsComplete: descendantsComplete, component: { name: \'share-gist-modal\', params: params }" data-keyboard="true" class="modal hide fade" tabindex="-1"></div>');
            jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').append($shareGistModal);
            data = {
              params: new ShareGistModal(params),
              descendantsComplete: function descendantsComplete() {
                utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish(SHOWN_EVENT);
              }
            };
            knockout__WEBPACK_IMPORTED_MODULE_1__.applyBindings(data, $shareGistModal[0]);
            $shareGistModal.modal('show');
          case 7:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }());
});

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/ko.sqlColumnsTable.js":
/*!*************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/ko.sqlColumnsTable.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.




var NAME = 'sql-columns-table';
var TEMPLATE = "\n    <div class=\"context-popover-flex\">\n      <div class=\"context-popover-flex-header\">\n        <div class=\"context-popover-header\" style=\"display:inline-block;\">".concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Columns'), " (<span data-bind=\"text: filteredColumns().length\"></span>)</div>\n        <div class=\"context-popover-inline-autocomplete\">\n          <div class=\"context-popover-asterisk-filter\">\n            <!-- ko component: {\n              name: 'inline-autocomplete',\n              params: {\n                querySpec: querySpec,\n                facets: Object.keys(SQL_COLUMNS_KNOWN_FACET_VALUES),\n                knownFacetValues: SQL_COLUMNS_KNOWN_FACET_VALUES,\n                autocompleteFromEntries: autocompleteFromEntries\n              }\n            } --><!-- /ko -->\n          </div>\n        </div>\n      </div>\n      <div class=\"context-popover-flex-fill sql-columns-table\" style=\"position:relative; height: 100%; overflow-y: auto;\">\n        <table id=\"sqlColumnsTable\" style=\"width: 100%\" class=\"table table-condensed table-nowrap\">\n          <!-- ko if: filteredColumns().length !== 0 -->\n          <thead>\n          <tr>\n            <th width=\"6%\">&nbsp;</th>\n            <!-- ko if: typeof filteredColumns()[0].table === 'undefined' -->\n            <th width=\"60%\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Name'), "</th>\n            <!-- /ko -->\n            <!-- ko if: typeof filteredColumns()[0].table !== 'undefined' -->\n            <th width=\"40%\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Name'), "</th>\n            <th width=\"20%\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Table'), "</th>\n            <!-- /ko -->\n            <th width=\"34%\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Type'), "</th>\n            <th width=\"6%\">&nbsp;</th>\n          </tr>\n          </thead>\n          <!-- /ko -->\n          <tbody data-bind=\"foreachVisible: { data: filteredColumns, minHeight: 29, container: '.sql-columns-table', pubSubDispose: 'context.popover.dispose' }\">\n          <tr>\n            <!-- ko if: typeof selected === 'undefined' -->\n            <td data-bind=\"text: $index()+$indexOffset()+1\"></td>\n            <!-- /ko -->\n            <!-- ko if: typeof selected !== 'undefined' -->\n            <td class=\"center\" data-bind=\"multiCheckForeachVisible: { entries: $parent.filteredColumns, selectedAttr: 'selected' }\" style=\"cursor: default;\">\n              <div class=\"hue-checkbox fa\" data-bind=\"css: {'fa-check': selected }\"></div>\n            </td>\n\n            <!-- /ko -->\n            <td style=\"overflow: hidden;\">\n              <!-- ko if: $parent.scrollToColumns -->\n              <a href=\"javascript:void(0)\" class=\"column-selector\" data-bind=\"click: function() { huePubSub.publish('context.popover.scroll.to.column', name); }\" title=\"").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('Show sample'), "\"><span data-bind=\"text: name\"></span> <i class=\"fa fa-key\" data-bind=\"visible: typeof primary_key !== 'undefined' && primary_key === 'true'\"></i></a>\n              <!-- /ko -->\n              <!-- ko ifnot: $parent.scrollToColumns -->\n              <span data-bind=\"text: name\"></span> <i class=\"fa fa-key\" data-bind=\"visible: typeof primary_key !== 'undefined' && primary_key === 'true'\"></i>\n              <!-- /ko -->\n            </td>\n            <!-- ko if: typeof table !== 'undefined' -->\n            <td><span data-bind=\"text: table\"></span></td>\n            <!-- /ko -->\n            <td><span data-bind=\"text: type, attr: { 'title': extendedType }, tooltip: { placement: 'bottom' }\"></span></td>\n            <td><i class=\"snippet-icon fa fa-question-circle\" data-bind=\"visible: comment, attr: { 'title': comment }, tooltip: { placement: 'bottom' }\"></i></td>\n          </tr>\n          </tbody>\n        </table>\n        <div class=\"context-popover-empty-columns\" data-bind=\"visible: filteredColumns().length === 0\">").concat((0,_utils_i18n__WEBPACK_IMPORTED_MODULE_2__["default"])('No columns found'), "</div>\n      </div>\n    </div>\n");
var SqlColumnsTable = /*#__PURE__*/_createClass(function SqlColumnsTable(params) {
  _classCallCheck(this, SqlColumnsTable);
  var self = this;
  self.columns = params.columns;
  self.scrollToColumns = typeof params.scrollToColumns !== 'undefined' ? params.scrollToColumns : true;
  self.searchInput = knockout__WEBPACK_IMPORTED_MODULE_0__.observable('');
  self.searchFocus = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
  self.querySpec = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
  self.filteredColumns = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
    if (!self.querySpec() || self.querySpec().query === '') {
      return self.columns;
    }
    var facets = self.querySpec().facets;
    var isFacetMatch = !facets || Object.keys(facets).length === 0 || !facets['type']; // So far only type facet is used for SQL
    var isTextMatch = !self.querySpec().text || self.querySpec().text.length === 0;
    return self.columns.filter(function (column) {
      var match = true;
      if (!isFacetMatch) {
        match = !!facets['type'][column.type];
      }
      if (match && !isTextMatch) {
        match = self.querySpec().text.every(function (text) {
          return column.name.toLowerCase().indexOf(text.toLowerCase()) !== -1 || column.comment.toLowerCase().indexOf(text.toLowerCase()) !== -1;
        });
      }
      return match;
    });
  });
  self.autocompleteFromEntries = function (nonPartial, partial) {
    var result = [];
    var partialLower = partial.toLowerCase();
    self.columns.forEach(function (column) {
      if (column.name.toLowerCase().indexOf(partialLower) === 0) {
        result.push(nonPartial + partial + column.name.substring(partial.length));
      }
    });
    return result;
  };
});
_componentUtils__WEBPACK_IMPORTED_MODULE_1__["default"].registerComponent(NAME, SqlColumnsTable, TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/ko.simpleAceEditor.js":
/*!*****************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/simpleAceEditor/ko.simpleAceEditor.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MULTI_NAME": () => (/* binding */ MULTI_NAME),
/* harmony export */   "NAME": () => (/* binding */ NAME)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ext_aceHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ext/aceHelper */ "./desktop/core/src/desktop/js/ext/aceHelper.ts");
/* harmony import */ var _solrFormulaAutocompleter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./solrFormulaAutocompleter */ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrFormulaAutocompleter.js");
/* harmony import */ var _solrQueryAutocompleter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./solrQueryAutocompleter */ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrQueryAutocompleter.js");
/* harmony import */ var config_hueConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! config/hueConfig */ "./desktop/core/src/desktop/js/config/hueConfig.ts");
/* harmony import */ var _bindings_ace_aceLocationHandler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../bindings/ace/aceLocationHandler */ "./desktop/core/src/desktop/js/ko/bindings/ace/aceLocationHandler.js");
/* harmony import */ var _componentUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../componentUtils */ "./desktop/core/src/desktop/js/ko/components/componentUtils.js");
/* harmony import */ var sql_workers_hueWorkerHandler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! sql/workers/hueWorkerHandler */ "./desktop/core/src/desktop/js/sql/workers/hueWorkerHandler.ts");
/* harmony import */ var _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../sql/sqlAutocompleter */ "./desktop/core/src/desktop/js/sql/sqlAutocompleter.js");
/* harmony import */ var _bindings_ace_aceGutterHandler__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../bindings/ace/aceGutterHandler */ "./desktop/core/src/desktop/js/ko/bindings/ace/aceGutterHandler.js");
/* harmony import */ var utils_string_UUID__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! utils/string/UUID */ "./desktop/core/src/desktop/js/utils/string/UUID.ts");
/* harmony import */ var utils_storageUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! utils/storageUtils */ "./desktop/core/src/desktop/js/utils/storageUtils.ts");
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.














var NAME = 'hue-simple-ace-editor';
var MULTI_NAME = 'hue-simple-ace-editor-multi';
var SIMPLE_ACE_TEMPLATE = "\n  <div class=\"simple-ace-single-line\">\n    <div class=\"ace-clearable\" data-bind=\"css: { 'visible': value() !== '' }, click: clear\"><i class=\"fa fa-times-circle\"></i></div>\n    <div class=\"ace-editor\"></div>\n  </div>\n  <!-- ko if: autocompleter !== null -->\n  <!-- ko component: { name: 'hueAceAutocompleter', params: { editor: ace, autocompleter: autocompleter } } --><!-- /ko -->\n  <!-- /ko -->\n";
var SIMPLE_ACE_MULTI_TEMPLATE = "\n  <div class=\"simple-ace-multi-line\">\n    <div class=\"ace-editor\"></div>\n  </div>\n  <!-- ko if: autocompleter !== null -->\n  <!-- ko component: { name: 'hueAceAutocompleter', params: { editor: ace, autocompleter: autocompleter } } --><!-- /ko -->\n  <!-- /ko -->\n";
var AVAILABLE_AUTOCOMPLETERS = {
  solrFormula: _solrFormulaAutocompleter__WEBPACK_IMPORTED_MODULE_3__["default"],
  solrQuery: _solrQueryAutocompleter__WEBPACK_IMPORTED_MODULE_4__["default"],
  impalaQuery: _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__["default"],
  hiveQuery: _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__["default"],
  impala: _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__["default"],
  hive: _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__["default"]
};
var SimpleAceEditor = /*#__PURE__*/function () {
  function SimpleAceEditor(params, element) {
    _classCallCheck(this, SimpleAceEditor);
    var $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);
    var self = this;
    self.value = params.value;
    self.parsedValue = params.parsedValue;
    self.ace = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.disposeFunctions = [];
    self.singleLine = !!params.singleLine;
    var aceOptions = params.aceOptions || {};
    if (!$element.attr('id')) {
      $element.attr('id', (0,utils_string_UUID__WEBPACK_IMPORTED_MODULE_11__["default"])());
    }
    var _editor = ext_aceHelper__WEBPACK_IMPORTED_MODULE_2__["default"].edit($element.find('.ace-editor')[0]);
    if (params.mode) {
      _editor.getSession().setMode('ace/mode/' + knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.mode));
    }
    _editor.$blockScrolling = Infinity;
    _editor.setTheme((0,utils_storageUtils__WEBPACK_IMPORTED_MODULE_12__.hueLocalStorage)('hue.ace.theme') || 'ace/theme/hue');
    self.ace(_editor);
    if (params.activeExecutable) {
      _editor.commands.addCommand({
        name: 'execute',
        bindKey: {
          win: 'Ctrl-Enter',
          mac: 'Command-Enter|Ctrl-Enter'
        },
        exec: function () {
          var _exec = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
            var executable;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  _editor._signal('hideAutocomplete');
                  executable = params.activeExecutable();
                  if (!executable) {
                    _context.next = 6;
                    break;
                  }
                  _context.next = 5;
                  return executable.reset();
                case 5:
                  executable.execute();
                case 6:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          function exec() {
            return _exec.apply(this, arguments);
          }
          return exec;
        }()
      });
    }
    if (params.autocomplete && knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.autocomplete)) {
      var autocomplete = knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.autocomplete);
      var connector = knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(autocomplete.connector);
      if (!connector || !connector.id) {
        var connectorId = autocomplete.type.indexOf('Query') !== -1 ? autocomplete.type.replace('Query', '') : autocomplete.type;
        connector = (0,config_hueConfig__WEBPACK_IMPORTED_MODULE_5__.findEditorConnector)(function (connector) {
          return connector.id === connectorId;
        });

        // TODO: Temporary fix for dashboard
        if (!connector) {
          connector = {
            id: connectorId
          };
        }
      }
      var snippet = {
        autocompleteSettings: {
          temporaryOnly: params.temporaryOnly
        },
        type: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(connector.id),
        dialect: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(connector.dialect),
        connector: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(connector),
        id: knockout__WEBPACK_IMPORTED_MODULE_1__.observable($element.attr('id')),
        namespace: params.namespace,
        compute: params.compute,
        database: knockout__WEBPACK_IMPORTED_MODULE_1__.isObservable(params.database) ? params.database : knockout__WEBPACK_IMPORTED_MODULE_1__.observable(params.database || 'default'),
        availableDatabases: params.availableDatabases ? params.availableDatabases : knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray([params.database && params.database() ? params.database() : 'default']),
        positionStatement: knockout__WEBPACK_IMPORTED_MODULE_1__.observable({
          location: {
            first_line: 1,
            last_line: 1,
            first_column: 0,
            last_column: _editor.getValue().length
          }
        }),
        whenContextSet: function whenContextSet() {
          var promise = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred().resolve().promise();
          promise.dispose = function () {};
          return promise;
        },
        isSqlDialect: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(connector.is_sql),
        aceCursorPosition: knockout__WEBPACK_IMPORTED_MODULE_1__.observable(),
        inFocus: knockout__WEBPACK_IMPORTED_MODULE_1__.observable()
      };
      if (connector.is_sql && !params.disableWorkers) {
        (0,sql_workers_hueWorkerHandler__WEBPACK_IMPORTED_MODULE_8__.registerHueWorkers)();
        var aceLocationHandler = new _bindings_ace_aceLocationHandler__WEBPACK_IMPORTED_MODULE_6__["default"]({
          editor: _editor,
          editorId: $element.attr('id'),
          snippet: snippet
        });
        var aceGutterHandler = new _bindings_ace_aceGutterHandler__WEBPACK_IMPORTED_MODULE_10__["default"]({
          editor: _editor,
          editorId: $element.attr('id'),
          executor: snippet.executor
        });
        self.disposeFunctions.push(function () {
          aceLocationHandler.dispose();
          aceGutterHandler.dispose();
        });
        aceLocationHandler.attachSqlSyntaxWorker();
      }
      var focusListener = _editor.on('focus', function () {
        snippet.inFocus(true);
      });
      var blurListener = _editor.on('blur', function () {
        snippet.inFocus(false);
      });
      self.disposeFunctions.push(function () {
        _editor.off('focus', focusListener);
        _editor.off('blur', blurListener);
      });
      var autocompleteArgs = {
        editor: function editor() {
          return _editor;
        },
        snippet: snippet,
        fixedPrefix: params.fixedPrefix,
        fixedPostfix: params.fixedPostfix,
        support: autocomplete.support
      };
      var AutocompleterClass = AVAILABLE_AUTOCOMPLETERS[autocomplete.type] || _sql_sqlAutocompleter__WEBPACK_IMPORTED_MODULE_9__["default"];
      self.autocompleter = new AutocompleterClass(autocompleteArgs);
    } else {
      self.autocompleter = null;
    }
    if (self.singleLine) {
      aceOptions = jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(aceOptions, {
        fontSize: '13px',
        maxLines: 1,
        // make it 1 line
        autoScrollEditorIntoView: true,
        highlightActiveLine: false,
        printMargin: false,
        showGutter: false
      });
    } else {
      aceOptions = jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(aceOptions, {
        maxLines: params.lines || 2
      });
    }
    if (params.autocomplete) {
      aceOptions = jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(aceOptions, {
        enableLiveAutocompletion: true,
        enableBasicAutocompletion: true
      });
    }
    _editor.setOptions(aceOptions);
    if (params.onExec) {
      var bindPrefix = params.singleLine ? 'Enter|Shift-Enter|' : '';
      _editor.commands.addCommand({
        name: 'enter',
        bindKey: {
          win: bindPrefix + 'Ctrl-Enter',
          mac: bindPrefix + 'Ctrl-Enter|Command-Enter'
        },
        exec: params.onExec
      });
    }
    if (params.singleLine) {
      _editor.renderer.screenToTextCoordinates = function (x, y) {
        var pos = this.pixelToScreenCoordinates(x, y);
        return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength() - 1, Math.max(pos.row, 0)), Math.max(pos.column, 0));
      };
      if (!params.onExec) {
        _editor.commands.bindKey('Enter|Shift-Enter', 'null');
      }
      var pasteListener = _editor.on('paste', function (e) {
        e.text = e.text.replace(/[\r\n]+/g, ' ');
      });
      var changeListener = _editor.on('change', function (e) {
        if (e.action === 'insert' && (e.start.row !== 0 || e.end.row !== 0)) {
          _editor.setValue(_editor.getValue().replace(/[\r\n]+/g, ' '));
          _editor.clearSelection();
        }
      });
      self.disposeFunctions.push(function () {
        _editor.off('paste', pasteListener);
        _editor.off('change', changeListener);
      });
    }
    if (self.value()) {
      _editor.setValue(self.value());
      _editor.clearSelection();
    }
    if (params.placeHolder && knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.placeHolder)) {
      var placeHolderVisible = false;
      var $placeHolder = jquery__WEBPACK_IMPORTED_MODULE_0___default()('<div>').text(knockout__WEBPACK_IMPORTED_MODULE_1__.unwrap(params.placeHolder)).addClass('ace_invisible ace_emptyMessage');
      if (_editor.getValue().length === 0) {
        $placeHolder.appendTo(_editor.renderer.scroller);
        placeHolderVisible = true;
      }
      var inputListener = _editor.on('input', function () {
        if (_editor.getValue().length > 0 && placeHolderVisible) {
          $placeHolder.remove();
          placeHolderVisible = false;
        } else if (_editor.getValue().length === 0 && !placeHolderVisible) {
          $placeHolder.appendTo(_editor.renderer.scroller);
          placeHolderVisible = true;
        }
      });
      self.disposeFunctions.push(function () {
        _editor.off('input', inputListener);
      });
    }
    if (params.autocomplete) {
      var AceAutocomplete = ext_aceHelper__WEBPACK_IMPORTED_MODULE_2__["default"].require('ace/autocomplete').Autocomplete;
      if (!_editor.completer) {
        _editor.completer = new AceAutocomplete();
      }
      _editor.completer.exactMatch = false;
      _editor.useHueAutocompleter = true;
      var afterExecListener = _editor.commands.on('afterExec', function (e) {
        if (e.command.name === 'insertstring') {
          var triggerAutocomplete = false;
          if (/\S+\(\)$/.test(e.args)) {
            _editor.moveCursorTo(_editor.getCursorPosition().row, _editor.getCursorPosition().column - 1);
            triggerAutocomplete = true;
          } else if (params.autocomplete.type === 'solrQuery' && /:$/.test(e.args)) {
            triggerAutocomplete = true;
          }
          if (triggerAutocomplete) {
            window.setTimeout(function () {
              _editor.execCommand('startAutocomplete');
            }, 1);
          }
        }
      });
      self.disposeFunctions.push(function () {
        _editor.commands.off('afterExec', afterExecListener);
      });
    }
    var parseThrottle = -1;
    var valueUpdateListener = _editor.on('input', function () {
      self.value(_editor.getValue());
      if (self.parsedValue && self.autocompleter && self.autocompleter.parse) {
        window.clearTimeout(parseThrottle);
        parseThrottle = window.setTimeout(function () {
          var parseResult = self.autocompleter.parse(_editor.getValue());
          if (parseResult) {
            self.parsedValue(parseResult.parsedValue);
          } else {
            // TODO: What to do when we can't parse?
            self.parsedValue(_editor.getValue());
          }
        }, 200);
      }
    });
    self.disposeFunctions.push(function () {
      _editor.off('input', valueUpdateListener);
    });
  }
  return _createClass(SimpleAceEditor, [{
    key: "clear",
    value: function clear() {
      var self = this;
      if (self.ace()) {
        self.ace().setValue('');
      } else {
        self.value('');
      }
    }
  }, {
    key: "dispose",
    value: function dispose() {
      var self = this;
      self.disposeFunctions.forEach(function (dispose) {
        dispose();
      });
    }
  }]);
}(); // Ace requires that the child to clone is first child, so we need separate components for single line & multi line
_componentUtils__WEBPACK_IMPORTED_MODULE_7__["default"].registerComponent(NAME, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new SimpleAceEditor(params, componentInfo.element);
  }
}, SIMPLE_ACE_TEMPLATE);
_componentUtils__WEBPACK_IMPORTED_MODULE_7__["default"].registerComponent(MULTI_NAME, {
  createViewModel: function createViewModel(params, componentInfo) {
    return new SimpleAceEditor(params, componentInfo.element);
  }
}, SIMPLE_ACE_MULTI_TEMPLATE);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrFormulaAutocompleter.js":
/*!***********************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrFormulaAutocompleter.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_hueColors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/hueColors */ "./desktop/core/src/desktop/js/utils/hueColors.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _parse_solrFormulaParser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../parse/solrFormulaParser */ "./desktop/core/src/desktop/js/parse/solrFormulaParser.js");
/* harmony import */ var sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sql/sqlUtils */ "./desktop/core/src/desktop/js/sql/sqlUtils.ts");
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.







var normalizedColors = _utils_hueColors__WEBPACK_IMPORTED_MODULE_1__["default"].getNormalizedColors();

// TODO: Autocomplete colors should be global
var COLORS = {
  ALL: _utils_hueColors__WEBPACK_IMPORTED_MODULE_1__["default"].BLUE,
  FIELD: normalizedColors['green'][2],
  FUNCTION: normalizedColors['purple-gray'][3],
  KEYWORD: normalizedColors['blue'][4],
  SAMPLE: normalizedColors['purple'][5]
};
var SOLR_FUNCTIONS = {
  abs: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'abs(x)',
    draggable: 'abs()',
    description: 'Returns the absolute value of the specified value or function.'
  },
  and: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'boolean',
      multiple: true
    }]],
    signature: 'and(x, y, ...)',
    draggable: 'and()',
    description: 'Returns a value of true if and only if all of its operands evaluate to true.'
  },
  childfield: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'childfield(x)',
    draggable: 'childfield()',
    description: 'Returns the value of the given field for one of the matched child docs when searching by {!parent}. It can be used only in sort parameter.'
  },
  def: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'def(field, default)',
    draggable: 'def()',
    description: 'def is short for default. Returns the value of field "field", or if the field does not exist, returns the default value specified. and yields the first value where exists()==true.)'
  },
  div: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'div(x, y)',
    draggable: 'div()',
    description: 'Divides one value or function by another. div(x,y) divides x by y.'
  },
  dist: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'dist(power, x, y, 0, 0)',
    draggable: 'dist()',
    description: 'Return the distance between two vectors (points) in an n-dimensional space. Takes in the power, plus two or more ValueSource instances and calculates the distances between the two vectors. Each ValueSource must be a number. There must be an even number of ValueSource instances passed in and the method assumes that the first half represent the first vector and the second half represent the second vector.'
  },
  docfreq: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'docfreq(field, value)',
    draggable: 'docfreq()',
    description: "Returns the number of documents that contain the term in the field. This is a constant (the same value for all documents in the index).\n\n You can quote the term if it's more complex, or do parameter substitution for the term value."
  },
  exists: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'exists(x)',
    draggable: 'exists()',
    description: 'Returns TRUE if any member of the field exists.'
  },
  eq: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'eq(x, y)',
    draggable: 'eq()',
    description: 'Equal, returns TRUE if x is equal to y'
  },
  field: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T',
      optional: true
    }]],
    signature: 'field(field, minOrMax)',
    draggable: 'field()',
    description: 'Returns the numeric docValues or indexed value of the field with the specified name. In its simplest (single argument) form, this function can only be used on single valued fields, and can be called using the name of the field as a string, or for most conventional field names simply use the field name by itself with out using the field(...) syntax.\n\nWhen using docValues, an optional 2nd argument can be specified to select the "min" or "max" value of multivalued fields.\n\n0 is returned for documents without a value in the field.'
  },
  gt: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'gt(x, y)',
    draggable: 'gt()',
    description: 'Greater than, returns TRUE if x is greater than y'
  },
  gte: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'gte(x, y)',
    draggable: 'gte()',
    description: 'Greater than or equal, returns TRUE if x is greater than or equal to y'
  },
  hsin: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'hsin(2, true, x, y, 0, 0)',
    draggable: 'hsin()',
    description: 'The Haversine distance calculates the distance between two points on a sphere when traveling along the sphere. The values must be in radians. hsin also take a Boolean argument to specify whether the function should convert its output to radians.'
  },
  idf: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'idf(field, str)',
    draggable: 'idf()',
    description: 'Inverse document frequency; a measure of whether the term is common or rare across all documents. Obtained by dividing the total number of documents by the number of documents containing the term, and then taking the logarithm of that quotient. See also tf.'
  },
  "if": {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'if(test, val1, val2)',
    draggable: 'if()',
    description: 'Enables conditional function queries. In if(test,value1,value2): \n- test is or refers to a logical value or expression that returns a logical value (TRUE or FALSE).\n- value1 is the value that is returned by the function if test yields TRUE.\n -value2 is the value that is returned by the function if test yields FALSE.\n\nAn expression can be any function which outputs boolean values, or even functions returning numeric values, in which case value 0 will be interpreted as false, or strings, in which case empty string is interpreted as false.'
  },
  linear: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'linear(x, m, c)',
    draggable: 'linear()',
    description: 'Implements m*x+c where m and c are constants and x is an arbitrary function. This is equivalent to sum(product(m,x),c), but slightly more efficient as it is implemented as a single function.'
  },
  log: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'log(x)',
    draggable: 'log()',
    description: 'Returns the log base 10 of the specified function.'
  },
  lt: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'lt(x, y)',
    draggable: 'lt()',
    description: 'Less than, returns TRUE if x is less than y'
  },
  lte: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'lte(x, y)',
    draggable: 'lte()',
    description: 'Less than or equal, returns TRUE if x is less than or equal to y'
  },
  map: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'map(x, min, max, target)',
    draggable: 'map()',
    description: 'Maps any values of an input function x that fall within min and max inclusive to the specified target. The arguments min and max must be constants. The arguments target and default can be constants or functions. If the value of x does not fall between min and max, then either the value of x is returned, or a default value is returned if specified as a 5th argument.'
  },
  max: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'max(x, y, ...)',
    draggable: 'max()',
    description: 'Returns the maximum numeric value of multiple nested functions or constants, which are specified as arguments: max(x,y,...). The max function can also be useful for "bottoming out" another function or field at some specified constant.'
  },
  maxdoc: {
    returnTypes: ['T'],
    arguments: [],
    signature: 'maxdoc()',
    draggable: 'maxdoc()',
    description: 'Returns the number of documents in the index, including those that are marked as deleted but have not yet been purged. This is a constant (the same value for all documents in the index).'
  },
  min: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'min(x, y, ...)',
    draggable: 'min()',
    description: 'Returns the minimum numeric value of multiple nested functions of constants, which are specified as arguments: min(x,y,...). The min function can also be useful for providing an "upper bound" on a function using a constant.'
  },
  ms: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'ms(x, y, ...)',
    draggable: 'ms()',
    description: 'Returns milliseconds of difference between its arguments. Dates are relative to the Unix or POSIX time epoch, midnight, January 1, 1970 UTC. Arguments may be the name of an indexed TrieDateField, or date math based on a constant date or NOW.\n\n- ms(): Equivalent to ms(NOW), number of milliseconds since the epoch.\n- ms(a): Returns the number of milliseconds since the epoch that the argument represents.\n- ms(a,b) : Returns the number of milliseconds that b occurs before a (that is, a - b)'
  },
  mul: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'mul(x, y, ...)',
    draggable: 'mul()',
    description: 'Returns the product of multiple values or functions, which are specified in a comma-separated list. Same as the product function.'
  },
  norm: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'norm(field)',
    draggable: 'norm()',
    description: 'Returns the "norm" stored in the index for the specified field. This is the product of the index time boost and the length normalization factor, according to the Similarity for the field.'
  },
  not: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'boolean'
    }]],
    signature: 'not(x)',
    draggable: 'not()',
    description: 'The logically negated value of the wrapped function.'
  },
  numdocs: {
    returnTypes: ['T'],
    arguments: [],
    signature: 'numdocs()',
    draggable: 'numdocs()',
    description: 'Returns the number of documents in the index, not including those that are marked as deleted but have not yet been purged. This is a constant (the same value for all documents in the index).'
  },
  or: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'boolean',
      multiple: true
    }]],
    signature: 'or(x, y)',
    draggable: 'or()',
    description: 'A logical disjunction.'
  },
  ord: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'ord(field)',
    draggable: 'ord()',
    description: 'Returns the ordinal of the indexed field value within the indexed list of terms for that field in Lucene index order (lexicographically ordered by unicode value), starting at 1. In other words, for a given field, all values are ordered lexicographically; this function then returns the offset of a particular value in that ordering. The field must have a maximum of one value per document (not multi-valued). 0 is returned for documents without a value in the field.'
  },
  payload: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'payload(payloaded_field_dpf, term, 0.0, first)',
    draggable: 'payload()',
    description: 'Returns the float value computed from the decoded payloads of the term specified. The return value is computed using the min, max, or average of the decoded payloads. A special first function can be used instead of the others, to short-circuit term enumeration and return only the decoded payload of the first term. The field specified must have float or integer payload encoding capability (via DelimitedPayloadTokenFilter or NumericPayloadTokenFilter). If no payload is found for the term, the default value is returned.'
  },
  pow: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'pow(x, y)',
    draggable: 'pow()',
    description: 'Raises the specified base to the specified power. pow(x,y) raises x to the power of y.'
  },
  product: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'product(x, y, ...)',
    draggable: 'product()',
    description: 'Returns the product of multiple values or functions, which are specified in a comma-separated list. mul(...) may also be used as an alias for this function.'
  },
  query: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T',
      optional: true
    }]],
    signature: 'query(subquery, default)',
    draggable: 'query()',
    description: 'Returns the score for the given subquery, or the default value for documents not matching the query. Any type of subquery is supported through either parameter de-referencing $otherparam or direct specification of the query string in the Local Parameters through the v key.'
  },
  recip: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }, {
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'recip(x, m, a, b)',
    draggable: 'recip()',
    description: 'Performs a reciprocal function with recip(x,m,a,b) implementing a/(m*x+b) where m,a,b are constants, and x is any arbitrarily complex function.\n\nWhen a and b are equal, and x>=0, this function has a maximum value of 1 that drops as x increases. Increasing the value of a and b together results in a movement of the entire function to a flatter part of the curve. These properties can make this an ideal function for boosting more recent documents when x is rord(datefield).'
  },
  rord: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'rord(x)',
    draggable: 'rord()',
    description: 'Returns the reverse ordering of that returned by ord.'
  },
  scale: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'scale(x, minTarget, maxTarget)',
    draggable: 'scale()',
    description: 'Scales values of the function x such that they fall between the specified minTarget and maxTarget inclusive. The current implementation traverses all of the function values to obtain the min and max, so it can pick the correct scale.\n\nThe current implementation cannot distinguish when documents have been deleted or documents that have no value. It uses 0.0 values for these cases. This means that if values are normally all greater than 0.0, one can still end up with 0.0 as the min value to map from. In these cases, an appropriate map() function could be used as a workaround to change 0.0 to a value in the real range, as shown here: scale(map(x,0,0,5),1,2).'
  },
  sqedist: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'sqedist(x_td, y_td, 0, 0)',
    draggable: 'sqedist()',
    description: 'The Square Euclidean distance calculates the 2-norm (Euclidean distance) but does not take the square root, thus saving a fairly expensive operation. It is often the case that applications that care about Euclidean distance do not need the actual distance, but instead can use the square of the distance. There must be an even number of ValueSource instances passed in and the method assumes that the first half represent the first vector and the second half represent the second vector.'
  },
  sqrt: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'sqrt(x)',
    draggable: 'sqrt()',
    description: 'Returns the square root of the specified value or function.'
  },
  strdist: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'strdist(string1, string2, distance_measure)',
    draggable: 'strdist()',
    description: "Calculate the distance between two strings. Uses the Lucene spell checker StringDistance interface and supports all of the implementations available in that package, plus allows applications to plug in their own via Solr's resource loading capabilities. strdist takes (string1, string2, distance measure).\n\nPossible values for distance measure are:\n- jw: Jaro-Winkler\n- edit: Levenstein or Edit distance\n- ngram: The NGramDistance, if specified, can optionally pass in the ngram size too. Default is 2.\n- FQN: Fully Qualified class Name for an implementation of the StringDistance interface. Must have a no-arg constructor."
  },
  sub: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'sub(x, y)',
    draggable: 'sub()',
    description: 'Returns x-y from sub(x,y).'
  },
  sum: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'sum(x, y, ...)',
    draggable: 'sum()',
    description: 'Returns the sum of multiple values or functions, which are specified in a comma-separated list. add(...) may be used as an alias for this function'
  },
  sumtotaltermfreq: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'sumtotaltermfreq(field)',
    draggable: 'sumtotaltermfreq()',
    description: 'Returns the sum of totaltermfreq values for all terms in the field in the entire index (i.e., the number of indexed tokens for that field). (Aliases sumtotaltermfreq to sttf.)'
  },
  termfreq: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'termfreq(field, term)',
    draggable: 'termfreq()',
    description: 'Returns the number of times the term appears in the field for that document.'
  },
  tf: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'tf(field, term)',
    draggable: 'tf()',
    description: 'Term frequency; returns the term frequency factor for the given term, using the Similarity for the field. The tf-idf value increases proportionally to the number of times a word appears in the document, but is offset by the frequency of the word in the document, which helps to control for the fact that some words are generally more common than others. See also idf.'
  },
  top: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'top(x)',
    draggable: 'top()',
    description: 'Causes the function query argument to derive its values from the top-level IndexReader containing all parts of an index. For example, the ordinal of a value in a single segment will be different from the ordinal of that same value in the complete index.'
  },
  totaltermfreq: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }, {
      type: 'T'
    }]],
    signature: 'totaltermfreq(field, term)',
    draggable: 'totaltermfreq()',
    description: 'Returns the number of times the term appears in the field in the entire index. (Aliases totaltermfreq to ttf.)'
  },
  xor: {
    returnTypes: ['boolean'],
    arguments: [[{
      type: 'boolean',
      multiple: true
    }]],
    signature: 'xor(x, y)',
    draggable: 'xor()',
    description: 'Logical exclusive disjunction, or one or the other but not both.'
  }
};
var SOLR_AGGREGATE_FUNCTIONS = {
  avg: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'avg(x)',
    draggable: 'avg()',
    description: 'Average of numeric values.'
  },
  hll: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'hll(x)',
    draggable: 'hll()',
    description: 'The number of unique values using the HyperLogLog algorithm.'
  },
  max: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'max(x)',
    draggable: 'max()',
    description: 'The maximum value.'
  },
  min: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'min(x)',
    draggable: 'min()',
    description: 'The minimum value.'
  },
  percentile: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T',
      multiple: true
    }]],
    signature: 'percentile(x, y, z, ...)',
    draggable: 'percentile()',
    description: 'Calculates the percentiles.'
  },
  stddev: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'stddev(x)',
    draggable: 'stddev()',
    description: 'Calculates standard deviation (Solr 6.6+).'
  },
  sum: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'sum(x)',
    draggable: 'sum()',
    description: 'The sum of numeric values.'
  },
  sumsq: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'sumsq(x)',
    draggable: 'sumsq()',
    description: 'The sum of squares.'
  },
  unique: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'unique(x)',
    draggable: 'unique()',
    description: 'The number of unique values (count distinct).'
  },
  variance: {
    returnTypes: ['T'],
    arguments: [[{
      type: 'T'
    }]],
    signature: 'variance(x)',
    draggable: 'variance()',
    description: 'Calculates variance (Solr 6.6+).'
  }
};
var CATEGORIES = {
  ALL: {
    id: 'all',
    color: COLORS.ALL,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('All')
  },
  FIELD: {
    id: 'field',
    weight: 1000,
    color: COLORS.FIELD,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Fields'),
    detailsTemplate: 'solr-field'
  },
  FUNCTION: {
    id: 'function',
    weight: 900,
    color: COLORS.FUNCTION,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_3__["default"])('Functions'),
    detailsTemplate: 'udf'
  }
};
var SolrFormulaSuggestions = /*#__PURE__*/function () {
  function SolrFormulaSuggestions(fieldAccessor) {
    _classCallCheck(this, SolrFormulaSuggestions);
    var self = this;
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_0__.observableArray();
    self.fieldAccessor = fieldAccessor;
    self.filtered = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      var result = self.entries();
      if (self.filter()) {
        result = sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].autocompleteFilter(self.filter(), result);
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_2__["default"].publish('hue.ace.autocompleter.match.updated');
      }
      sql_sqlUtils__WEBPACK_IMPORTED_MODULE_5__["default"].sortSuggestions(result, self.filter(), self.sortOverride);
      return result;
    });
    self.availableCategories = knockout__WEBPACK_IMPORTED_MODULE_0__.pureComputed(function () {
      // TODO: Implement autocomplete logic
      return [CATEGORIES.ALL];
    });
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false);
    self.filter = knockout__WEBPACK_IMPORTED_MODULE_0__.observable();
    self.cancelRequests = function () {};
  }
  return _createClass(SolrFormulaSuggestions, [{
    key: "update",
    value: function update(parseResult) {
      var self = this;
      var syncEntries = [];
      if (parseResult.suggestFields) {
        self.fieldAccessor().forEach(function (field) {
          var type = field.type();
          if (type.indexOf('<') !== -1) {
            type = type.substring(0, type.indexOf('<'));
          }
          syncEntries.push({
            category: CATEGORIES.FIELD,
            value: field.name(),
            meta: type,
            weightAdjust: 0,
            popular: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false),
            details: field
          });
        });
      }
      if (parseResult.suggestFunctions) {
        Object.keys(SOLR_FUNCTIONS).forEach(function (name) {
          syncEntries.push({
            category: CATEGORIES.FUNCTION,
            value: name + '()',
            meta: SOLR_FUNCTIONS[name].returnTypes.join('|'),
            weightAdjust: 0,
            // Add when we type aware
            popular: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false),
            details: SOLR_FUNCTIONS[name]
          });
        });
      }
      if (parseResult.suggestAggregateFunctions) {
        Object.keys(SOLR_AGGREGATE_FUNCTIONS).forEach(function (name) {
          syncEntries.push({
            category: CATEGORIES.FUNCTION,
            value: name + '()',
            meta: SOLR_AGGREGATE_FUNCTIONS[name].returnTypes.join('|'),
            weightAdjust: 0,
            // Add when we type aware
            popular: knockout__WEBPACK_IMPORTED_MODULE_0__.observable(false),
            details: SOLR_AGGREGATE_FUNCTIONS[name]
          });
        });
      }
      self.entries(syncEntries);
    }
  }]);
}();
var SolrFormulaAutocompleter = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Ace} options.editor
   * @param {Object} options.support
   * @param {function} options.support.fields - The observable/function containing the fields
   * @constructor
   */
  function SolrFormulaAutocompleter(options) {
    _classCallCheck(this, SolrFormulaAutocompleter);
    var self = this;
    self.editor = options.editor();
    self.suggestions = new SolrFormulaSuggestions(options.support.fields);
  }
  return _createClass(SolrFormulaAutocompleter, [{
    key: "autocomplete",
    value: function () {
      var _autocomplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new Promise(function (resolve) {
                var parseResult = _parse_solrFormulaParser__WEBPACK_IMPORTED_MODULE_4__["default"].autocompleteSolrFormula(_this.editor.getTextBeforeCursor(), _this.editor.getTextAfterCursor());
                _this.suggestions.update(parseResult);
                resolve(parseResult);
              }));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function autocomplete() {
        return _autocomplete.apply(this, arguments);
      }
      return autocomplete;
    }()
  }, {
    key: "parse",
    value: function parse(value) {
      return _parse_solrFormulaParser__WEBPACK_IMPORTED_MODULE_4__["default"].parseSolrFormula(value);
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SolrFormulaAutocompleter);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrQueryAutocompleter.js":
/*!*********************************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/simpleAceEditor/solrQueryAutocompleter.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/apiHelper */ "./desktop/core/src/desktop/js/api/apiHelper.js");
/* harmony import */ var _utils_hueColors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/hueColors */ "./desktop/core/src/desktop/js/utils/hueColors.js");
/* harmony import */ var utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils/huePubSub */ "./desktop/core/src/desktop/js/utils/huePubSub.ts");
/* harmony import */ var _utils_i18n__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/i18n */ "./desktop/core/src/desktop/js/utils/i18n.js");
/* harmony import */ var _parse_solrQueryParser__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../parse/solrQueryParser */ "./desktop/core/src/desktop/js/parse/solrQueryParser.js");
/* harmony import */ var sql_sqlUtils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sql/sqlUtils */ "./desktop/core/src/desktop/js/sql/sqlUtils.ts");
function _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }
function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }
function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.









var DEFAULT_POPULAR = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
var KEYWORD_I18n = (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('keyword');
var SAMPLE_I18n = (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('sample');
var SAMPLE_LIMIT = 100;
var normalizedColors = _utils_hueColors__WEBPACK_IMPORTED_MODULE_3__["default"].getNormalizedColors();

// TODO: Autocomplete colors should be global
var COLORS = {
  ALL: _utils_hueColors__WEBPACK_IMPORTED_MODULE_3__["default"].BLUE,
  FIELD: normalizedColors['green'][2],
  FUNCTION: normalizedColors['purple-gray'][3],
  KEYWORD: normalizedColors['blue'][4],
  SAMPLE: normalizedColors['purple'][5]
};
var CATEGORIES = {
  ALL: {
    id: 'all',
    color: COLORS.ALL,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('All')
  },
  FIELD: {
    id: 'field',
    weight: 1000,
    color: COLORS.FIELD,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Fields'),
    detailsTemplate: 'solr-field'
  },
  KEYWORD: {
    id: 'keyword',
    weight: 0,
    color: COLORS.KEYWORD,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Keywords'),
    detailsTemplate: 'keyword'
  },
  SAMPLE: {
    id: 'sample',
    weight: 900,
    color: COLORS.SAMPLE,
    label: (0,_utils_i18n__WEBPACK_IMPORTED_MODULE_5__["default"])('Samples'),
    detailsTemplate: 'value'
  }
};
var SolrQuerySuggestions = /*#__PURE__*/function () {
  function SolrQuerySuggestions(collection, editor) {
    _classCallCheck(this, SolrQuerySuggestions);
    var self = this;
    self.entries = knockout__WEBPACK_IMPORTED_MODULE_1__.observableArray();
    self.editor = editor;
    self.collection = collection;
    self.lastNonSampleSuggestions = [];
    self.parseResult = {};
    self.filtered = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      var result = self.entries();
      if (self.filter()) {
        result = sql_sqlUtils__WEBPACK_IMPORTED_MODULE_7__["default"].autocompleteFilter(self.filter(), result);
        utils_huePubSub__WEBPACK_IMPORTED_MODULE_4__["default"].publish('hue.ace.autocompleter.match.updated');
      }
      sql_sqlUtils__WEBPACK_IMPORTED_MODULE_7__["default"].sortSuggestions(result, self.filter(), self.sortOverride);
      return result;
    });
    self.availableCategories = knockout__WEBPACK_IMPORTED_MODULE_1__.pureComputed(function () {
      // TODO: Implement autocomplete logic
      return [CATEGORIES.ALL];
    });
    self.loading = knockout__WEBPACK_IMPORTED_MODULE_1__.observable(false);
    self.filter = knockout__WEBPACK_IMPORTED_MODULE_1__.observable();
    self.cancelRequests = function () {};
  }
  return _createClass(SolrQuerySuggestions, [{
    key: "update",
    value: function update(parseResult) {
      var self = this;
      self.lastNonSampleSuggestions = [];
      self.parseResult = parseResult;
      if (self.parseResult.suggestFields) {
        self.collection.template.fieldsAttributes().forEach(function (field) {
          self.lastNonSampleSuggestions.push({
            category: CATEGORIES.FIELD,
            value: field.name() + (parseResult.suggestFields.appendColon ? ':' : ''),
            meta: field.type(),
            weightAdjust: 0,
            popular: DEFAULT_POPULAR,
            details: field
          });
        });
      }
      if (self.parseResult.suggestKeywords) {
        parseResult.suggestKeywords.forEach(function (keyword) {
          self.lastNonSampleSuggestions.push({
            category: CATEGORIES.KEYWORD,
            value: keyword,
            meta: KEYWORD_I18n,
            weightAdjust: 0,
            popular: DEFAULT_POPULAR,
            details: null
          });
        });
      }
      self.entries(self.lastNonSampleSuggestions);
      if (self.parseResult.suggestValues) {
        var aceUtil = ace.require('ace/autocomplete/util');
        var pos = self.editor.getCursorPosition();
        var partial = aceUtil.retrievePrecedingIdentifier(self.editor.session.getLine(pos.row), pos.column);
        if (self.parseResult.suggestValues.partial) {
          partial = self.parseResult.suggestValues.partial + partial;
        }
        var valuesPromise = self.handleSampleSuggestions(partial);
        self.loading(true);
        valuesPromise.done(function (suggestions) {
          if (suggestions.length) {
            self.entries(self.lastNonSampleSuggestions.concat(suggestions));
          }
          self.loading(false);
        });
      }
    }
  }, {
    key: "handleSampleSuggestions",
    value: function handleSampleSuggestions(prefix) {
      var self = this;
      var promise = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();
      var fieldName = self.parseResult.suggestValues.field;
      var hasField = self.collection.template.fieldsAttributes().some(function (field) {
        return field.name() === fieldName;
      });
      if (hasField) {
        _api_apiHelper__WEBPACK_IMPORTED_MODULE_2__["default"].fetchDashboardTerms({
          collectionName: self.collection.name(),
          fieldName: fieldName,
          prefix: prefix || '',
          silenceErrors: true,
          successCallback: function successCallback(result) {
            var sampleSuggestions = [];
            if (result && result.terms && result.terms.length) {
              var maxCount = 1;
              for (var i = 0; i < Math.min(SAMPLE_LIMIT, result.terms.length); i++) {
                var sampleValue = result.terms[i].value;
                var shouldQuote = !self.parseResult.suggestValues.quotePresent && /[\s\u3000!():"'^+\-\[\]{}~*?/]/.test(sampleValue);
                if (maxCount < result.terms[i].count) {
                  maxCount = result.terms[i].count;
                }
                var value = '';
                if (self.parseResult.suggestValues.partial && !shouldQuote && sampleValue.toLowerCase().indexOf(self.parseResult.suggestValues.partial.toLowerCase()) === 0) {
                  value = sampleValue.substring(self.parseResult.suggestValues.partial.length);
                } else {
                  value = shouldQuote ? '"' + sampleValue + '"' : sampleValue;
                }
                sampleSuggestions.push({
                  value: value,
                  meta: SAMPLE_I18n,
                  category: CATEGORIES.SAMPLE,
                  popular: DEFAULT_POPULAR,
                  details: result.terms[i]
                });
              }
              sampleSuggestions.forEach(function (sampleSuggestion) {
                sampleSuggestion.weightAdjust = sampleSuggestion.details.count / maxCount;
              });
            }
            promise.resolve(sampleSuggestions);
          },
          errorCallback: function errorCallback() {
            promise.resolve([]);
          }
        });
      } else {
        promise.resolve([]);
      }
      return promise;
    }
  }, {
    key: "onPartial",
    value: function onPartial(partial) {
      var self = this;
      if (self.parseResult.suggestValues) {
        var promise = self.handleSampleSuggestions(partial);
        promise.done(function (suggestions) {
          if (suggestions.length) {
            self.entries(self.lastNonSampleSuggestions.concat(suggestions));
          } else {
            self.entries(self.lastNonSampleSuggestions);
          }
        });
      }
    }
  }]);
}();
var SolrQueryAutocompleter = /*#__PURE__*/function () {
  /**
   * @param {Object} options
   * @param {Ace} options.editor
   * @param {Object} options.support
   * @param {function} options.support.fields - The observable/function containing the fields
   * @param {function} options.support.collection - The observable/function containing the active collection
   * @constructor
   */
  function SolrQueryAutocompleter(options) {
    _classCallCheck(this, SolrQueryAutocompleter);
    var self = this;
    self.editor = options.editor();
    self.suggestions = new SolrQuerySuggestions(options.support.collection, self.editor);
  }
  return _createClass(SolrQueryAutocompleter, [{
    key: "autocomplete",
    value: function () {
      var _autocomplete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", new Promise(function (resolve) {
                var parseResult = _parse_solrQueryParser__WEBPACK_IMPORTED_MODULE_6__["default"].autocompleteSolrQuery(_this.editor.getTextBeforeCursor(), _this.editor.getTextAfterCursor());
                _this.suggestions.update(parseResult);
                resolve(parseResult);
              }));
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function autocomplete() {
        return _autocomplete.apply(this, arguments);
      }
      return autocomplete;
    }()
  }, {
    key: "onPartial",
    value: function onPartial(partial) {
      var self = this;
      self.suggestions.onPartial(partial);
    }
  }]);
}();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SolrQueryAutocompleter);

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/extenders/ko.maxLength.js":
/*!******************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/extenders/ko.maxLength.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


knockout__WEBPACK_IMPORTED_MODULE_0__.extenders.maxLength = function (target, maxLength) {
  var result = knockout__WEBPACK_IMPORTED_MODULE_0__.computed({
    read: target,
    write: function write(val) {
      var newVal = val;
      if (maxLength > 0 && val.length > maxLength) {
        var limitedVal = val.substring(0, maxLength);
        if (target() === limitedVal) {
          target.notifySubscribers();
        } else {
          newVal = limitedVal;
        }
      }
      target(newVal);
    }
  }).extend({
    notify: 'always'
  });
  result(target());
  return result;
};

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/extenders/ko.numeric.js":
/*!****************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/extenders/ko.numeric.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


knockout__WEBPACK_IMPORTED_MODULE_0__.extenders.numeric = function (target, config) {
  var precision = typeof config.precision === 'undefined' ? config : config.precision;
  var roundingMultiplier = Math.pow(10, precision);
  var result = knockout__WEBPACK_IMPORTED_MODULE_0__.computed({
    read: target,
    write: function write(newValue) {
      var current = target();
      var newValueAsNum = isNaN(newValue) ? 0 : parseFloat(+newValue);
      var valueToWrite = Math.round(newValueAsNum * roundingMultiplier) / roundingMultiplier;
      if (newValue === '' && config.allowEmpty) {
        valueToWrite = newValue;
      }
      if (valueToWrite !== current) {
        target(valueToWrite);
      } else if (newValue !== current) {
        target.notifySubscribers(valueToWrite);
      }
    }
  }).extend({
    notify: 'always'
  });
  result(target());
  return result;
};

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/extenders/ko.toJson.js":
/*!***************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/extenders/ko.toJson.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! knockout */ "./node_modules/knockout/build/output/knockout-latest.js");
/* harmony import */ var knockout__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(knockout__WEBPACK_IMPORTED_MODULE_0__);
// Licensed to Cloudera, Inc. under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  Cloudera, Inc. licenses this file
// to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.


knockout__WEBPACK_IMPORTED_MODULE_0__.toJSONObject = function (koObj) {
  return JSON.parse(knockout__WEBPACK_IMPORTED_MODULE_0__.toJSON(koObj));
};
knockout__WEBPACK_IMPORTED_MODULE_0__.toCleanJSON = function (koObj) {
  return knockout__WEBPACK_IMPORTED_MODULE_0__.toJSON(koObj, function (key, value) {
    if (key === '__ko_mapping__') {
      return;
    } else {
      return value;
    }
  });
};

/***/ }),

/***/ "./desktop/core/src/desktop/js/ko/components/appSwitcher/apps.v2.json":
/*!****************************************************************************!*\
  !*** ./desktop/core/src/desktop/js/ko/components/appSwitcher/apps.v2.json ***!
  \****************************************************************************/
/***/ ((module) => {

module.exports = JSON.parse('[{"name":"home","displayName":"Home","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"cdp-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#FF8400\\" stop-opacity=\\".975\\"/><stop offset=\\"100%\\" stop-color=\\"#AD4B00\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#cdp-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M82.12 47.5L39.832 75.138l4.17 6.355 7.793-5.092V116.5h60.643V76.401l7.558 4.865 4.17-6.355L82.119 47.5zM59.376 71.45l22.742-14.871 22.74 14.87v37.485H93.49V78.671H70.744v30.263H59.377V71.45zm18.948 37.484h7.585V86.237h-7.585v22.697z\\"/></g></svg>","baseUrl":"altus","path":"/cdp.html#/"},{"name":"dataHub","displayName":"Data Hub Clusters","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"data-hub-lg-gradient\\" x1=\\"26.767%\\" y1=\\"31.124%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#ED1978\\"/><stop offset=\\"100%\\" stop-color=\\"#8F2068\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#data-hub-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M79.775 88.444c.552.234 1.104.339 1.725.339s1.173-.105 1.725-.306c2.001-.678 3.45-2.577 3.45-4.781 0-2.815-2.311-5.087-5.175-5.087s-5.175 2.272-5.175 5.087a5.003 5.003 0 0 0 3.45 4.748M116 114.217c0 3.727-3.105 6.783-6.9 6.783-3.795 0-6.9-3.056-6.9-6.783 0-3.153 2.208-5.799 5.175-6.545v-5.324H83.191l-.035 5.287c3.001.75 5.244 3.429 5.244 6.582 0 3.727-3.105 6.783-6.9 6.783-3.795 0-6.9-3.056-6.9-6.783 0-3.12 2.174-5.768 5.106-6.545l.034-5.324H55.626v5.324c2.967.746 5.175 3.392 5.175 6.545 0 3.727-3.105 6.783-6.9 6.783-3.795 0-6.9-3.056-6.9-6.783 0-3.153 2.208-5.799 5.175-6.545v-8.715h27.566V93.7c-4.865-.783-8.591-4.951-8.591-10.004 0-5.633 4.623-10.174 10.35-10.174 5.727 0 10.35 4.54 10.35 10.174 0 5.053-3.76 9.258-8.66 10.038v5.223h27.635v8.715c2.967.746 5.175 3.392 5.175 6.545m0-39.298c0 7.342-6.434 13.297-14.376 13.297H93.55c.552-1.407.886-2.926.886-4.52 0-.777-.096-1.526-.23-2.262h7.417c4.123 0 7.476-2.924 7.476-6.515 0-2.967-2.515-5.355-4.599-5.355h-6.9v-6.782c.328-18.028-22.78-16.251-22.628-1.696-2.857.01-4.972 0-4.972 0-1.78 0-4.602 1.228-4.602 4.524v6.783h-6.9c-1.746 0-4.599 2.896-4.599 5.185 0 2.126 2.063 3.856 4.599 3.856h10.295a12.514 12.514 0 0 0-.231 2.262c0 1.594.334 3.113.886 4.52H58.5c-6.353 0-11.5-4.764-11.5-10.638C47 71.7 52.751 65.61 58.499 65.61c0-6.986 5.748-11.307 11.502-11.307C72.875 45.825 80.961 42.98 87.251 43c8.625.024 17.25 8.478 17.25 19.782 6.048 0 11.499 5.605 11.499 12.137\\"/></g></svg>","baseUrl":"mow","path":"/cloud/workloads"},{"name":"dwx","displayName":"Data Warehouse","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"data-warehouse-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#8263C2\\"/><stop offset=\\"100%\\" stop-color=\\"#33058D\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#data-warehouse-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M91.29 91.292c-9.105 9.096-23.914 9.096-33.02 0-6.03-6.035-7.976-14.556-6.01-22.284l12.135 12.14c.39.385.88.657 1.417.782l17.015 3.868c.214.05.432.07.646.07.767 0 1.51-.3 2.063-.853a2.93 2.93 0 0 0 .786-2.712L82.45 65.29a2.942 2.942 0 0 0-.786-1.417L69.816 52.024c7.502-1.622 15.65.432 21.474 6.25 9.102 9.104 9.102 23.913 0 33.018zM77.026 67.767l2.572 11.31-11.312-2.571 8.74-8.739zm-13.008 4.75l-9.101-9.1 9.02-9.02L73.04 63.5l-9.023 9.019zm35.335 21.335c9.474-12.202 8.638-29.879-2.56-41.08-12.137-12.14-31.888-12.14-44.024 0-12.136 12.135-12.136 31.885 0 44.021 6.066 6.07 14.039 9.101 22.012 9.101a31.07 31.07 0 0 0 19.07-6.54l20.98 20.98 5.502-5.502-20.98-20.98z\\"/></g></svg>","baseUrl":"mow","path":"/dwx/"},{"name":"ml","displayName":"Machine Learning","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"machine-learning-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#22BCB9\\"/><stop offset=\\"100%\\" stop-color=\\"#066584\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#machine-learning-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M102.748 47.5c4.141 0 7.63 1.188 10.124 3.642 6.02 6.056 4.295 18.208-3.298 30.858 7.593 12.65 9.318 24.802 3.298 30.858-2.493 2.454-5.983 3.642-10.124 3.642-5.676 0-12.502-2.223-19.562-6.248-.38-.192-.763-.422-1.185-.69-2.377-1.457-5.526-3.642-7.056-4.83-2.837-2.185-5.675-4.6-8.36-7.322-2.53-2.492-4.793-5.098-6.864-7.743a7.19 7.19 0 0 0-.46-.575l-.282-.423C57.75 86.818 55.42 83.168 54.425 82c-7.589-12.65-9.314-24.802-3.294-30.858 2.489-2.454 5.982-3.642 10.124-3.642 5.982 0 13.268 2.492 20.746 6.938 1.573.729 5.714 3.795 7.056 4.83 2.838 2.185 5.676 4.6 8.356 7.322a82.846 82.846 0 0 1 5.565 6.133c-.269.805-3.298 4.677-4.564 6.517a77.5 77.5 0 0 0-6.404-7.245c-2.953-2.952-5.905-5.443-8.824-7.552-.226-.153-.686-.46-1.223-.843-1.956-1.265-5.407-3.412-7.018-4.332-.038 0-.08-.038-.08-.038-.226-.115-.38-.192-.533-.268-5.177-2.607-9.74-3.795-13.077-3.795-1.496 0-3.528.23-4.678 1.418-2.416 2.377-1.88 9.277 2.377 17.748l.238.476.069.138c.997 1.725 3.068 5.213 4.333 7.015a.036.036 0 0 0-.037.028l-.001.01.345.46c2.224 3.143 4.905 6.363 8.088 9.545a75.156 75.156 0 0 0 8.082 6.982l.665.493v.038c.23.192.686.499 1.265.882a100.552 100.552 0 0 0 6.672 4.064l.419.23-.035.038c.035.038.077.038.115.038.039 0 .039 0 .073.038.733.384 1.385.729 1.918.959 4.567 2.07 8.555 3.066 11.585 3.066 1.495 0 3.528-.23 4.678-1.418 2.493-2.453 1.84-9.622-2.684-18.362-2.186 2.837-4.602 5.674-7.329 8.357-1.836 1.84-3.715 3.565-5.633 5.098-2.07-.92-5.599-2.568-7.593-3.68 2.608-1.955 5.216-4.216 7.823-6.823 3.336-3.335 6.136-6.708 8.433-10.005.732-.997 3.03-4.868 4.26-7.13 0 .038 0 .038.039.077.191-.384.383-.767.537-1.112.038-.115.11-.23.153-.307 3.912-8.088 4.333-14.643 1.994-16.943-1.15-1.188-3.183-1.418-4.678-1.418-2.991 0-6.903.958-11.39 2.951-1.035-1.188-4.337-4.063-6.672-5.213 6.519-3.488 12.808-5.405 18.062-5.405zM52.817 84.875c1.227 1.84 3.681 5.213 5.138 6.862-3.332 7.513-3.605 13.493-1.38 15.678 1.15 1.188 3.186 1.418 4.678 1.418 2.957 0 6.792-.92 11.198-2.875 1.346 1.534 3.835 4.179 6.097 5.482-6.25 3.258-12.23 5.06-17.295 5.06-4.141 0-7.631-1.188-10.12-3.642-5.564-5.596-4.529-16.406 1.684-27.983zM82 74.322c1.956 0 3.911.76 5.407 2.273a7.565 7.565 0 0 1 0 10.81A7.577 7.577 0 0 1 82 89.679a7.577 7.577 0 0 1-5.407-2.274 7.565 7.565 0 0 1 0-10.81A7.577 7.577 0 0 1 82 74.322zm-9.666-12.945a47.656 47.656 0 0 1 4.909 2.3c.345.153.694.341.997.537.614.345 1.154.651 1.572.958-2.604 1.955-5.211 4.217-7.823 6.823a79.95 79.95 0 0 0-6.285 7.054c-1.342-1.614-3.34-4.179-4.333-5.559-.154-.214-.283-.38-.387-.516l-.074-.097v-.038c1.76-2.147 3.605-4.217 5.672-6.249 1.88-1.878 3.797-3.641 5.752-5.213z\\"/></g></svg>","baseUrl":"mow","path":"/ml/"},{"name":"wxm","displayName":"Workload Manager","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"workload-manager-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#5667FF\\"/><stop offset=\\"100%\\" stop-color=\\"#111B99\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#workload-manager-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M74.333 112.667h15.334V51.333H74.333v61.334zm30.667 0h15.333v-46H105v46zm-61.333 0H59V82H43.667v30.667z\\"/></g></svg>","baseUrl":"altus","path":"/wxm/"},{"name":"dmx","displayName":"Replication Manager","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"replication-manager-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#488CCB\\"/><stop offset=\\"100%\\" stop-color=\\"#19457E\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#replication-manager-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M78.167 47.5V59h7.666v-3.833h26.834V82H105v7.667h15.333V47.5H78.167zM70.5 66.667v7.666h13.746L65.271 93.308l5.42 5.42 18.976-18.974V93.5h7.666V66.667H70.5zm-26.833 7.666V116.5h42.166v-15.333h-7.666v7.666H51.333V82h11.5v-7.667H43.667z\\"/></g></svg>","baseUrl":"mow","path":"/dmx/","entitlement":"DMX_BETA_ENTITLEMENT"},{"name":"dataCatalog","displayName":"Data Catalog","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"data-catalog-lg-gradient\\" x1=\\"26.347%\\" y1=\\"30.729%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#F2B50E\\"/><stop offset=\\"100%\\" stop-color=\\"#B36820\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#data-catalog-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M88.6 78.448c6.704 0 12.124 5.432 12.124 12.104 0 6.712-5.42 12.144-12.124 12.144-6.66 0-12.084-5.432-12.084-12.144 0-6.672 5.424-12.104 12.084-12.104zm16.54 23.16a19.874 19.874 0 0 0 3.332-11.056c0-10.94-8.912-19.86-19.872-19.86-10.92 0-19.828 8.92-19.828 19.86 0 10.98 8.908 19.904 19.828 19.904 4.104 0 7.904-1.244 11.04-3.336L112.5 120l5.5-5.508-12.86-12.884zM54.792 53.196c2.94-1.128 8.944-2.368 17.856-2.368 8.904 0 14.908 1.24 17.852 2.368-9.488 3.06-26.22 3.06-35.708 0zM72.648 44C64.628 44 46 45.008 46 54.008v41.124c0 3.8 3.332 6.592 9.836 8.224 3.836.972 8.752 1.592 14.06 1.744a23.516 23.516 0 0 1-3.756-7.02c-7.904-.62-12.396-2.248-13.324-3.26v-7.524c3.484 1.124 7.668 1.9 12.12 2.288.08-2.02.392-3.916.968-5.78-5.072-.392-9.756-1.32-13.088-2.716v-8.496c4.876 1.592 11.228 2.48 17.7 2.636a24.428 24.428 0 0 1 7.704-6.012c-9.18.656-19.44-.312-25.404-2.796v-7.756c5.42 1.784 12.624 2.676 19.832 2.676 7.2 0 14.404-.892 19.828-2.676v8.496c1.16.156 2.324.424 3.408.816 1.2.388 2.32.852 3.408 1.392v-15.36c0-9-18.628-10.008-26.644-10.008z\\"/></g></svg>","baseUrl":"mow","path":"/dss/catalog/search"},{"name":"serviceManager","displayName":"Management Console","logo":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"40\\" height=\\"40\\" viewBox=\\"0 0 192 192\\"><defs><linearGradient id=\\"management-console-lg-gradient\\" x1=\\"26.465%\\" y1=\\"30.841%\\" y2=\\"100%\\"><stop offset=\\"0%\\" stop-color=\\"#008CFF\\"/><stop offset=\\"100%\\" stop-color=\\"#004496\\"/></linearGradient></defs><g fill=\\"none\\" fill-rule=\\"evenodd\\"><path fill=\\"url(#management-console-lg-gradient)\\" d=\\"M20 20v152h100.645L172 120.645V20z\\"/><path fill=\\"#FFF\\" d=\\"M109.757 100.002l6.743 3.963L82 124.167l-34.5-20.202 6.747-3.963L82 116.25l27.757-16.247zm-5.984-15.35l12.727 7.473-7.245 4.254-3.105 1.834-.498.299-6.747 3.955-3.105 1.797v.033l-7.245 4.183L82 112.33l-6.555-3.85-7.245-4.183v-.033l-3.105-1.797-6.743-3.955-.502-.299-3.105-1.834-7.245-4.254 12.727-7.473 7.245 4.258-5.52 3.215L82 103.886l20.048-11.76-5.52-3.216 2.377-1.382 4.868-2.876zM86.87 39.833l.851 4.966c.996.31 1.964.702 2.894 1.17l4.204-2.929 6.888 6.714-3.003 4.096c.48.906.883 1.85 1.2 2.817L105 57.5v9.488l-5.097.829c-.317.97-.72 1.913-1.2 2.817l3.003 4.098-6.888 6.712-4.204-2.927c-.93.466-1.898.858-2.894 1.17l-.85 4.966h-9.74l-.85-4.966a19.317 19.317 0 0 1-2.893-1.17l-4.205 2.927-6.888-6.712 3.003-4.098a17.732 17.732 0 0 1-1.2-2.817L59 66.986V57.5l5.097-.832a17.91 17.91 0 0 1 1.2-2.817l-3.003-4.096 6.888-6.714 4.205 2.929a18.95 18.95 0 0 1 2.893-1.17l.85-4.966h9.74zM82 51.038c-6.343 0-11.5 5.025-11.5 11.205S75.657 73.447 82 73.447s11.5-5.025 11.5-11.204c0-6.18-5.157-11.205-11.5-11.205z\\"/></g></svg>","baseUrl":"mow","path":"/cloud/environments"}]');

/***/ })

}]);
//# sourceMappingURL=/static/desktop/js/bundles/hue/hue-92506859-bundle-a2a4f8506cb55bb7.js.map